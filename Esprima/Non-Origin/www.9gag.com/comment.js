(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{427:function(t,e,n){"use strict";n.r(e);n(71),n(29),n(33),n(18),n(303);var d=n(1),o=n.n(d),u=n(3),i={log:function(){},logWithData:function(t,e){}},a=new(n(13).a),c=n(60),s=n.n(c),r=(n(74),{push:function(t){try{window._paq=window._paq||[],window._paq.push(t)}catch(t){}},trackEvent:function(t,e,n,d,o){this.push(["setCustomUrl",document.location.href]),o=o||{};var u=0,i=this;for(Object.keys(o).forEach(function(t){i.push(["setCustomVariable",++u,t,o[t],"event"])}),void 0==d&&(d=1),this.push(["trackEvent",t,e,n,d]),u=1;u<=Object.keys(o).length;u++)i.push(["deleteCustomVariable",u,"event"])}}),m=n(6),l=n.n(m),f=(n(474),n(20),n(23),n(50)),h=n.n(f),p=n(440),v=n.n(p),_={version:"v1",order:"score",count:10,direction:"desc"};function g(t){return i.log(t),Promise.reject(t.response.data)}var C={init:function(t){_=o()({},_,t)},baseUrl:function(){return"https://".concat(_.host,"/").concat(_.version)},baseCdnUrl:function(){return"https://".concat(_.cdnHost,"/").concat(_.version,"/cacheable")},fetchComments:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.log("fetch comment options",o()({},_,t));var e=v()(o()({},_,t),["appId","url","count","level","order","refCommentId","ref"]);_.highlightedId&&(e.commentId=_.highlightedId),i.log(this.baseUrl(),_);var n;return t.useCDN?(e.origin=window.location.origin,n=h.a.get("".concat(this.baseCdnUrl(),"/").concat("comment-list.json"),{params:e})):(e.auth=_.auth,n=h.a.post("".concat(this.baseUrl(),"/").concat("comment-list.json"),s.a.stringify(e))),n.then(function(t){return l()({},e.url,t.data.payload)}).catch(g)},addComment:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.log("Add comments");var e="".concat(this.baseUrl(),"/comment.json"),n=v()(o()({},_,t),["appId","url","opClientId","opSignature","text","parent","notifyId","userMedia","hash","delegateUserId","auth"]);return n.userMedia&&(n.userMedia=JSON.stringify([n.userMedia])),h.a.post(e,s.a.stringify(n)).then(function(t){return l()({},n.url,t.data.payload.comment)}).catch(g)},uploadMedia:function(t){var e="".concat(this.baseUrl(),"/media.json");if(!/\/(gif|jpe?g|png)$/i.test(t.type))return Promise.reject({code:"IMAGE_INVALID_TYPE"});if(t.size&&t.size>10485760)return Promise.reject({code:"IMAGE_INVALID_SIZE"});var n=new FormData;return n.append("auth",_.auth),n.append("appId",_.appId),n.append("blob",t),h.a.post(e,n).then(function(t){return t.data.payload.data}).catch(g)},updateLike:function(t){var e="".concat(this.baseUrl(),"/like.json"),n=v()(o()({},_,t),["appId","auth","commentId","value"]);return h.a.post(e,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},deleteComment:function(t){var e="".concat(this.baseUrl(),"/comment.json"),n=v()(o()({},_,t),["appId","auth","url"]);return n._method="DELETE",n.id=t.commentId,h.a.post(e,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},reportComment:function(t){var e="".concat(this.baseUrl(),"/report.json"),n=v()(o()({},_,t),["appId","auth","url","commentId","userReportData"]);return n.userReportData=JSON.stringify(n.userReportData),h.a.post(e,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},ban:function(t){var e="".concat(this.baseUrl(),"/admin/ban");return this._banAction(e,t)},unban:function(t){var e="".concat(this.baseUrl(),"/admin/unban");return this._banAction(e,t)},_banAction:function(t,e){var n=v()(o()({},_,e),["appId","userId","auth"]);return h.a.post(t,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},opHideComment:function(t){var e="".concat(this.baseUrl(),"/op/hide"),n=v()(o()({},_,t),["appId","url","auth","commentId"]);return h.a.post(e,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},hide:function(t){var e="".concat(this.baseUrl(),"/admin/hide");return this._hideAction(e,t)},unhide:function(t){var e="".concat(this.baseUrl(),"/admin/unhide");return this._hideAction(e,t)},_hideAction:function(t,e){var n=v()(o()({},_,e),["appId","commentId","url","badImage","auth"]);return h.a.post(t,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},updatePost:function(t){var e="".concat(this.baseUrl(),"/admin/update"),n=v()(o()({},_,t),["appId","url","auth","lock","status"]);return h.a.post(e,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)},pinComment:function(t){var e="".concat(this.baseUrl(),"/admin/pin"),n=v()(o()({},_,t),["appId","url","auth","commentId","pinned"]);return h.a.post(e,s.a.stringify(n)).then(function(t){return t.data.payload}).catch(g)}};function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.forEach(function(t){e[t.commentId]=t,Array.isArray(t.children)&&t.children.length>0&&I(t.children,e)}),e}function b(t,e){return e[t]}function E(t,e){var n=t[e.commentId]||0;e.isLike.value!==n&&(e.isLike.value=n)}var T={namespaced:!0,state:{comments:[],commentsCount:0,opUserId:null,hasNext:!1,commentsById:{},isLoading:!0,order:"score",autoLoadCount:0,highlightedId:null,replyBoxCommentId:null,replyMentionUser:null,replyNotifyId:null,status:null,lock:null,url:null,cdnHost:null,host:null,enableTracking:!1,reportPromise:null,loginCallback:null,addCommentCallback:null,postKey:null},getters:{isLocked:function(t,e,n,d){return!d["commentSystem/user/canModerate"]&&t.lock}},mutations:{SET_COMMENT_INFO:function(t,e){t.cdnHost=e.cdnHost,t.host=e.host,t.enableTracking=e.enableTracking,t.reportPromise=e.reportPromise||function(){return Promise.resolve()},t.loginCallback=e.loginCallback,t.addCommentCallback=e.addCommentCallback,t.url=e.url,t.postKey=e.postKey},SET_HIGHLIGHTED_ID:function(t,e){t.highlightedId=e},SET_ORDER:function(t,e){t.order=e},SET_AUTO_LOAD_COUNT:function(t,e){t.autoLoadCount=e},INCREASE_AUTO_LOAD_COUNT:function(t){t.autoLoadCount++},SET_LOCK:function(t,e){t.lock=e},SET_STATUS:function(t,e){t.status=e},SET_LOADING:function(t,e){t.isLoading=e},RESET_COMMENTS:function(t,e){t.comments=e,t.commentsById=I(t.comments)},SET_COMMENTS:function(t,e){t.comments=t.comments.concat(e),t.commentsById=I(t.comments)},ADD_COMMENT:function(t,e){t.comments.unshift(e),t.commentsById=I(t.comments)},ADD_REPLY:function(t,e){e.isLocal=!0,i.log("Add reply",e);var n=b(e.parent,t.commentsById);n.children.push(e),i.log("Parent comment",n),t.commentsById=I(t.comments)},CLEAR_COMMENTS:function(t){t.comments=[]},SET_COMMENTS_COUNT:function(t,e){t.commentsCount=e},SET_OP_USER_ID:function(t,e){t.opUserId=e},SET_HAS_NEXT:function(t,e){t.hasNext=e},SET_REPLY_INFO:function(t,e){t.replyBoxCommentId=e.commentId,t.replyMentionUser=o()({},e.mentionUser),t.replyNotifyId=e.notifyId},CLEAR_REPLY_INFO:function(t){t.replyBoxCommentId=null,t.replyMentionUser=null,t.replyNotifyId=null},UPDATE_COMMENT_REPLIES:function(t,e){if(i.log("UPDATE_COMMENT_REPLIES",e),!e.commentId)throw{message:"UPDATE_COMMENT_REPLIES state mutation called without commentId"};var n=b(e.commentId,t.commentsById),d=n.children.map(function(t){return t.commentId});n.hasNext=e.hasNext,n.children=n.children.concat(e.comments.filter(function(t){return!d.includes(t.commentId)})),t.commentsById=I(t.comments)},UPDATE_LIKE:function(t,e){var n=b(e.commentId,t.commentsById),d=e.isLike.value-n.isLike.value;n.likeCount+=d,n.isLike.value=e.isLike.value},DELETE_COMMENT:function(t,e){var n,d=b(e.commentId,t.commentsById),o=(n=d.level>1?b(d.parent,t.commentsById).children:t.comments).findIndex(function(t){return t.commentId===e.commentId});n.splice(o,1),t.commentsById=I(t.comments)}},actions:{CLEAR_COMMENTS:function(t){(0,t.commit)("CLEAR_COMMENTS")},FETCH_COMMENTS:function(t,e){var n=t.commit,d=t.state,o=t.rootGetters,u=t.rootState;i.log("store fetch comment options",e);var a=o["commentSystem/user/hasActivities"];return i.log("fetch comment store hasActivities",a),a||(e.useCDN=!0),e.refresh&&n("CLEAR_COMMENTS"),n("SET_LOADING",!0),i.log("fetch comment store hasActivities",e),C.fetchComments(e).then(function(t){if(t=t[d.url]){n("SET_OP_USER_ID",t.opUserId),n("SET_COMMENTS_COUNT",t.total),n("SET_HAS_NEXT",t.hasNext),n("SET_LOCK",t.lock),n("SET_STATUS",t.status),n("SET_LOADING",!1);var o=t.comments;return e.useCDN&&(o=function(t,e){return i.log("update like count from cache"),e&&t.forEach(function(t){E(e,t),t.children.forEach(function(t){E(e,t)})}),t}(t.comments,u.commentSystem.user.likeMapping)),e.refresh?n("RESET_COMMENTS",o):n("SET_COMMENTS",o),t}}).catch(function(t){return n("SET_LOADING",!1),Promise.reject(t)})},FETCH_MORE_REPLIES:function(t,e){var n=t.commit,d=t.state,o=t.rootGetters;return i.log("fetch more replies",e),o["commentSystem/user/hasActivities"]||(e.useCDN=!0),C.fetchComments(e).then(function(t){if(t=t[d.url]){var e=v()(t,["comments","hasNext"]);e.commentId=e.comments[0].parent,n("UPDATE_COMMENT_REPLIES",e)}})},ADD_COMMENT:function(t,e){var n=t.commit,d=t.state,o=t.dispatch;return C.addComment(e).then(function(t){i.log("comment model data",t,d.url),(t=t[d.url])&&(t.level>1?n("ADD_REPLY",t):n("ADD_COMMENT",t),o("commentSystem/user/UPDATE_COMMENTED_POST_URLS",l()({},d.url,1),{root:!0}))})},UPDATE_LIKE:function(t,e){var n=t.commit,d=(t.state,t.dispatch);return n("UPDATE_LIKE",e),C.updateLike({commentId:e.commentId,value:e.isLike.value}).then(function(){d("commentSystem/user/UPDATE_LIKE_MAPPING",l()({},e.commentId,e.isLike.value),{root:!0})})},OP_HIDE_COMMENT:function(t,e){var n=t.commit;t.state;return n("DELETE_COMMENT",e),C.opHideComment(e)},DELETE_COMMENT:function(t,e){var n=t.commit;t.state;return n("DELETE_COMMENT",e),C.deleteComment(e)},REPORT_COMMENT:function(t,e){var n=t.commit,d=t.state,o=t.dispatch;return n("DELETE_COMMENT",e),C.reportComment(e).then(function(){o("commentSystem/user/UPDATE_REPORTED_POST_URLS",l()({},d.url,1),{root:!0})})},UPDATE_LOCK:function(t,e){var n=t.commit;return C.updatePost({lock:e}).then(function(){n("SET_LOCK",!!e)})},UPDATE_STATUS:function(t,e){var n=t.commit;return C.updatePost({status:e}).then(function(){n("SET_STATUS",e)})}}},S={track:function(t,e){T.state.enableTracking&&(i.log("Event tracking",t,e),e=this.formatCustomVaribles(e),r.trackEvent(t.c,t.a,t.l,"",e))},convertOrderName:function(t){return"ts"==t?"Fresh":"Hot"},formatCustomVaribles:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.state.postKey&&(t.PostKey=T.state.postKey);var e=T.state.order;return t.CommentOrder=this.convertOrderName(e),t}},M="CommentAction",y={writeComment:{c:M,a:"WriteComment",l:""},addComment:{c:M,a:"AddComment",l:"Add"},replyComment:{c:M,a:"AddComment",l:"Reply"},deleteComment:{c:M,a:"DeleteComment",l:""},upvoteComment:{c:M,a:"UpvoteComment",l:""},downvoteComment:{c:M,a:"DownvoteComment",l:""},unvoteComment:{c:M,a:"UnvoteComment",l:""},reportComment:{c:M,a:"ReportComment",l:""},opHideComment:{c:M,a:"OpHideComment",l:""},clickOrderHot:{c:M,a:"TapHot",l:""},clickOrderFresh:{c:M,a:"TapFresh",l:""},openCommentMenu:{c:M,a:"TapCommentMenu",l:"Open"},closeCommentMenu:{c:M,a:"TapCommentMenu",l:"Close"},clickReply:{c:M,a:"TapReply",l:""},loadMore:{c:M,a:"LoadList",l:""},clickLoadMoreReply:{c:M,a:"TapLoadMoreReply",l:""},clickImage:{c:M,a:"TapImage",l:""},clickAvatar:{c:M,a:"TapAvatar",l:""},clickAuthorName:{c:M,a:"TapAuthorName",l:""},clickMention:{c:M,a:"TapMention",l:""},clickMemeUpload:{c:M,a:"TapMemeUpload",l:""},clickCommentAge:{c:M,a:"TapCommentTime",l:""},redirectLogin:{c:M,a:"RedirectLogin",l:""},clickFirstToComment:{c:M,a:"TapFirstToComment",l:""}},k={data:function(){return{showMenu:!1}},methods:{trackOpenMenu:function(){},trackCloseMenu:function(){},insideMenu:function(t){},clickMenu:function(t){this.showMenu||(t.preventDefault(),t.stopPropagation(),this.showMenu=!0,window.addEventListener("click",this.hideIfOutside),this.trackOpenMenu())},hideIfOutside:function(t){for(var e=t.target||t.srcElement;e;){if(this.insideMenu(e))return;e=e.parentNode}this.hideMenu(),this.trackCloseMenu()},hideMenu:function(){this.showMenu&&(window.removeEventListener("click",this.hideIfOutside),this.showMenu=!1)}},destroyed:function(){this.hideMenu()}},O=Object(u.a)("commentSystem/comment"),L=O.mapState,U=O.mapActions,A=O.mapMutations,P=Object(u.a)("commentSystem/user").mapGetters,N=Object(u.a)("commentSystem/app").mapState,R={data:function(){return{STATUS_DEFAULT:0,STATUS_NEW_SORTING:1,ORDER_HOT:"score",ORDER_FRESH:"ts"}},mixins:[k],computed:o()({},L(["order","url","host","lock","status"]),N({appInfo:"info"}),P(["canModerate"]),{params:function(){return s.a.stringify({appId:this.appInfo.appId,url:this.url})},isNewOnly:function(){return 1==this.status}}),methods:o()({},A({setOrder:"SET_ORDER",setAutoLoadCount:"SET_AUTO_LOAD_COUNT",clearReplyInfo:"CLEAR_REPLY_INFO"}),U({fetchComments:"FETCH_COMMENTS",_updateLock:"UPDATE_LOCK",_updateStatus:"UPDATE_STATUS"}),{changeOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"score";S.track("score"===t?y.clickOrderHot:y.clickOrderFresh),this.setOrder(t),this.clearReplyInfo(),this.setAutoLoadCount(0),this.fetchComments({order:t,refresh:!0})},updateLock:function(t){confirm("Admin: Confirm ".concat(t?"lock":"unlock"," post?"))&&this._updateLock(t),this.hideMenu()},updateStatus:function(t){confirm("Admin: Confirm update post sorting?")&&this._updateStatus(t),this.hideMenu()},insideMenu:function(t){return t===this.$refs.menu}}),created:function(){a.$on("refreshComments",this.changeOrder)},destroyed:function(){a.$off("refreshComments",this.changeOrder)}},x=n(2),D=Object(x.a)(R,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-bar-right"},[t.isNewOnly?t._e():n("ul",{staticClass:"tab"},[n("li",{class:{active:t.order===t.ORDER_HOT}},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.changeOrder(t.ORDER_HOT)}}},[t._v("Hot")])]),t._v(" "),n("li",{class:{active:t.order===t.ORDER_FRESH}},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.changeOrder(t.ORDER_FRESH)}}},[t._v("Fresh")])])]),t._v(" "),t.canModerate?n("div",{staticClass:"overflow-menu"},[n("a",{staticClass:"menu-trigger",attrs:{href:"javascript:void(0);"},on:{click:t.clickMenu}},[t._m(0)]),t._v(" "),n("div",{ref:"menu",class:{"comment-pop-menu":t.showMenu,hide:!t.showMenu}},[n("ul",[n("li",[n("a",{attrs:{target:"_blank",href:"//"+t.host+"/admin"}},[t._v("Comment Admin")])]),t._v(" "),n("li",[t.lock?t._e():n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.updateLock(1)}}},[t._v("Lock Post")])]),t._v(" "),n("li",[t.lock?n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.updateLock(0)}}},[t._v("Unlock Post")]):t._e()]),t._v(" "),n("li",[t.isNewOnly?t._e():n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.updateStatus(t.STATUS_NEW_SORTING)}}},[t._v("Sort by New Only")])]),t._v(" "),n("li",[t.isNewOnly?n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.updateStatus(t.STATUS_DEFAULT)}}},[t._v("Default Sorting")]):t._e()]),t._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+t.host+"/admin/comments/search?"+t.params}},[t._v("All Comments")])]),t._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+t.host+"/admin/comments/hidden?"+t.params}},[t._v("Hidden Comments")])]),t._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+t.host+"/admin/comments/reported?"+t.params}},[t._v("Reported Comments")])]),t._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+t.host+"/admin/comments/image-comments?"+t.params}},[t._v("Image Comments")])]),t._v(" "),n("li",[n("a",{attrs:{target:"_blank",href:"//"+t.host+"/admin/comment-score/index?"+t.params}},[t._v("Comment Score")])])])])]):t._e()])},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"inline-icon"},[e("span",{staticClass:"dot-menu"},[e("span",{staticClass:"dot-1"}),e("span",{staticClass:"dot-2"}),e("span",{staticClass:"dot-3"})])])}],!1,null,null,null).exports,w=Object(u.a)("commentSystem/comment"),j=w.mapState,H=(w.mapActions,{computed:o()({},j(["commentsCount"])),components:{TabBarOrderView:D}}),F=Object(x.a)(H,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tab-bar clearfix"},[e("div",{staticClass:"tab-bar-left"},[e("h3",[this._v(this._s(this.commentsCount)+" Comments")])]),this._v(" "),e("TabBarOrderView")],1)},[],!1,null,null,null).exports,B=(n(72),n(305),n(73),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),V={htmlDecode:function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},endsWith:function(t,e){return-1!==t.indexOf(e,t.length-e.length)},getErrorMessage:function(t){var e="Error occurred. Please try again later.",n=t||{},d=n.code,o=n.error;switch(o&&(e=o),d){case"IMAGE_INVALID_TYPE":e="Unsupported type.";break;case"IMAGE_INVALID_SIZE":e="Image size should be less than 10MB"}return e},getCurrentTime:function(){return Math.floor(Date.now()/1e3)},getTimeAgo:function(t){if(!t)return"";var e=this.getCurrentTime()-t;if(e<60)return"just now";if(e<3600)return"".concat(Math.floor(e/60),"m");if(e<86400)return"".concat(Math.floor(e/3600),"h");if(e<604800)return"".concat(Math.floor(e/86400),"d");var n=new Date(1e3*t),d="".concat(n.getDate()," ").concat(B[n.getMonth()]);return n.getFullYear()!==(new Date).getFullYear()&&(d+=" ".concat(n.getFullYear().toString().substr(-2))),d}},G=Object(u.a)("commentSystem/user").mapGetters,$=Object(u.a)("commentSystem/comment").mapState,K={computed:o()({},G({_isLoggedIn:"isLoggedIn"}),$({_loginCallback:"loginCallback"})),methods:{redirectLogin:function(){if(!this._isLoggedIn)return S.track(y.redirectLogin),this._loginCallback&&this._loginCallback(),!0}}},Y=Object(u.a)("commentSystem/app").mapState,z=Object(u.a)("commentSystem/user"),W=z.mapState,J=z.mapGetters,q=Object(u.a)("commentSystem/comment"),X=q.mapState,Z=q.mapActions,Q=q.mapMutations,tt=q.mapGetters,et={data:function(){return{loading:!1,errorMessage:null,commentText:"",isReactionMode:!1,uploading:!1,media:!1,delegateUserId:null}},mixins:[K],props:["isChild"],computed:o()({},J(["canModerate"]),tt(["isLocked"]),X(["lock","replyBoxCommentId","replyMentionUser","replyNotifyId","addCommentCallback"]),Y({appInfo:"info"}),W({userInfo:"info"}),{remainingCharactersLimit:function(){return this.appInfo.maxMessageLength-this.commentText.length},messageLengthExceeded:function(){return this.remainingCharactersLimit<0},profileUrl:function(){return this.delegateUser&&this.delegateUser.profileUrl||this.userInfo.profileUrl||"javascript:void(0)"},avatarUrl:function(){return this.delegateUser&&this.delegateUser.avatarUrl||this.userInfo.avatarUrl||this.appInfo.anonymousAvatarUrl},canPostComment:function(){return!this.loading&&(this.commentText.trim()||this.media)&&!this.messageLengthExceeded},canShowReactionButton:function(){return!this.isReactionMode&&this.appInfo.allowPostUrlComment&&this.appInfo.reactionImageSite},canShowImageUploadButton:function(){return!this.isReactionMode&&this.appInfo.allowImageUploadFeature},canShowUploadImageView:function(){return this.uploading||this.media},uploadedMediaUrl:function(){return this.media&&this.media.imageMetaByType.image.url},mentionUser:function(){return this.isChild?"@".concat(this.replyMentionUser.displayName):""},canShowDelegate:function(){return this.canModerate&&this.userInfo.delegates.length>0},delegateUser:function(){var t=this;return this.delegateUserId?this.userInfo.delegates.find(function(e){return e.userId===t.delegateUserId}):null},canShowInput:function(){return null!==this.lock&&!this.isLocked}}),watch:{replyMentionUser:function(t,e){var n=this;if(this.isChild&&(this.focusInput(),e&&t&&t.displayName!==e.displayName)){var d=!1;this.commentText=this.commentText.replace("@".concat(e.displayName),function(){return d=!0,n.mentionUser}),d||(this.commentText="".concat(this.mentionUser," ").concat(this.commentText))}}},methods:o()({},Z({addComment:"ADD_COMMENT"}),Q({clearReplyInfo:"CLEAR_REPLY_INFO"}),{clearAllInput:function(){this.commentText="",this.loading=!1,this.media=null,this.isReactionMode=!1,this.clearReplyInfo()},postComment:function(){var t=this;if(!this.redirectLogin()&&this.canPostComment){var e={text:this.commentText};this.delegateUserId&&(e.delegateUserId=this.delegateUserId),this.media&&(e.userMedia=this.media.sourceMeta,e.hash=this.media.hash),this.isChild&&(e.parent=this.replyBoxCommentId,e.notifyId=this.replyNotifyId),this.loading=!0,this.addComment(e).then(function(){t.errorMessage="",t.clearAllInput();var n=e.parent?y.replyComment:y.addComment;S.track(n),t.addCommentCallback&&t.addCommentCallback()}).catch(function(e){t.errorMessage=V.getErrorMessage(e),t.loading=!1})}},toggleReactionMode:function(t){if(this.redirectLogin())return t.preventDefault(),void t.stopPropagation();S.track(y.clickMemeUpload),this.isReactionMode=!this.isReactionMode,this.media=null,this.commentText=""},showFileInputBox:function(){this.redirectLogin()||this.$refs.imageFileInput.click()},uploadImage:function(t){var e=this,n=(t.target||t.srcElement).files[0];this.uploading=!0,C.uploadMedia(n).then(function(t){e.media=t,e.uploading=!1,e.$refs.imageFileInput.value=null}).catch(function(t){e.media=null,e.errorMessage=V.getErrorMessage(t),e.uploading=!1,e.$refs.imageFileInput.value=null})},focusInput:function(){this.$refs.commentInput.focus()},changeDelegate:function(t){var e=t.srcElement||t.target,n=e.selectedIndex;this.delegateUserId=e[n].value},focusPostTextarea:function(){S.track(y.writeComment)}}),mounted:function(){this.isChild&&(this.commentText="".concat(this.mentionUser," "),this.focusInput())}},nt=Object(x.a)(et,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.canShowInput?n("div",{staticClass:"comment-box first",class:{loading:t.loading,"indent-1":t.isChild}},[n("div",{staticClass:"avatar"},[n("div",{staticClass:"image-container"},[n("a",{attrs:{href:t.profileUrl,target:"_blank"}},[n("img",{attrs:{src:t.avatarUrl}})])])]),t._v(" "),n("div",{staticClass:"payload"},[t.errorMessage?n("div",{staticClass:"notice-message error"},[n("p",[t._v(t._s(t.errorMessage))]),t._v(" "),n("a",{staticClass:"close-btn",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.errorMessage=""}}},[t._v("×")])]):t._e(),t._v(" "),n("div",{staticClass:"textarea-container"},[n("div",[t.isReactionMode?t._e():n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],ref:"commentInput",staticClass:"post-text-area focus",attrs:{placeholder:"Write comments..."},domProps:{value:t.commentText},on:{click:t.redirectLogin,focus:t.focusPostTextarea,input:function(e){e.target.composing||(t.commentText=e.target.value)}}}),t._v(" "),t.isReactionMode?n("input",{directives:[{name:"model",rawName:"v-model",value:t.commentText,expression:"commentText"}],staticClass:"focus",attrs:{type:"url",placeholder:"Paste Memeful URL..."},domProps:{value:t.commentText},on:{click:t.redirectLogin,input:function(e){e.target.composing||(t.commentText=e.target.value)}}}):t._e()])]),t._v(" "),t.canShowUploadImageView?n("div",{staticClass:"cmnt-image-container"},[n("div",{staticClass:"img-container",class:{loading:t.uploading}},[t.uploading?n("div",{staticClass:"spinner-here"}):t._e(),t._v(" "),t.uploading?t._e():n("img",{attrs:{src:t.uploadedMediaUrl}}),t._v(" "),t.uploading?t._e():n("div",{staticClass:"overlay"},[n("a",{staticClass:"btn-delete",attrs:{href:"javascript:void(0);"},on:{click:function(e){t.media=null}}},[t._v("Delete")])])])]):t._e(),t._v(" "),n("div",{staticClass:"action"},[n("div",{staticClass:"lhs"},[t.canShowReactionButton?n("a",{staticClass:"cmnt-reaction",attrs:{href:"http://"+this.appInfo.reactionImageSite,target:"_blank"},on:{click:t.toggleReactionMode}},[t._v("Post reaction")]):t._e(),t._v(" "),t.isReactionMode?n("a",{staticClass:"cmnt-btn link grey size-30 submit-reaction",attrs:{href:"javascript:void(0);"},on:{click:t.toggleReactionMode}},[t._v("Cancel")]):t._e(),t._v(" "),t.canShowImageUploadButton?n("span",[n("a",{staticClass:"cmnt-image",attrs:{href:"javascript:void(0)"},on:{click:t.showFileInputBox}},[t._v("Post image")]),t._v(" "),n("input",{ref:"imageFileInput",staticClass:"hide",attrs:{type:"file",name:"blob"},on:{change:t.uploadImage}})]):t._e(),t._v(" "),t.canShowDelegate?n("label",{staticClass:"cmnt-identity"},[n("select",{on:{change:t.changeDelegate}},[n("option",{key:t.userInfo.userId,domProps:{value:t.userInfo.userId}},[t._v(t._s(t.userInfo.displayName)+" (Current user)")]),t._v(" "),t._l(t.userInfo.delegates,function(e){return n("option",{key:e.userId,domProps:{value:e.userId}},[t._v(t._s(e.displayName))])})],2)]):t._e()]),t._v(" "),n("div",{staticClass:"rhs"},[t.isReactionMode?t._e():n("p",{staticClass:"word-count",class:{red:t.messageLengthExceeded}},[n("span",[t._v(t._s(t.remainingCharactersLimit))])]),t._v(" "),n("a",{staticClass:"cmnt-btn size-30 submit-comment",attrs:{href:"javascript:void(0);"},on:{click:t.postComment}},[t._v("Post")])])])]),t._v(" "),n("div",{staticClass:"clearfix"})]):t._e()},[],!1,null,null,null).exports,dt=(n(300),Object(u.a)("commentSystem/app").mapState,Object(u.a)("commentSystem/comment")),ot=(dt.mapState,dt.mapActions),ut=(dt.mapGetters,dt.mapMutations,{props:["comment"],mixins:[K],data:function(){return{UPVOTE:"up",DOWNVOTE:"down"}},computed:{commentId:function(){return this.comment.commentId},isUp:function(){return this.comment.isLike.value>=1},isDown:function(){return this.comment.isLike.value<=-1}},methods:o()({},ot({_updateLike:"UPDATE_LIKE"}),{updateLike:function(t){var e=this;if(!this.redirectLogin()){var n=y.unvoteComment;return 1===t?n=y.upvoteComment:-1===t&&(n=y.downvoteComment),this._updateLike({isLike:{value:t},commentId:this.commentId}).then(function(){S.track(n,{CommentLevel:e.comment.level,CommentId:e.commentId})})}},vote:function(t){"up"===t?this.isUp?this.updateLike(0):this.updateLike(1):"down"===t&&(this.isDown?this.updateLike(0):this.updateLike(-1))}})}),it=Object(x.a)(ut,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vote-buttons"},[n("a",{class:{up:t.isUp},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.vote(t.UPVOTE)}}},[n("span",{staticClass:"icn-up"})]),t._v(" "),n("span",{staticClass:"seperator"}),t._v(" "),n("a",{class:{down:t.isDown},attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.vote(t.DOWNVOTE)}}},[n("span",{staticClass:"icn-down"})])])},[],!1,null,null,null).exports,at=Object(u.a)("commentSystem/comment"),ct=at.mapState,st=at.mapActions,rt=(at.mapGetters,at.mapMutations,Object(u.a)("commentSystem/user")),mt=rt.mapState,lt=rt.mapGetters,ft=Object(u.a)("commentSystem/app"),ht=ft.mapState,pt=(ft.mapGetters,{props:["comment"],mixins:[K,k],computed:o()({},ct(["reportPromise","opUserId"]),mt({userInfo:"info"}),lt(["isLoggedIn"]),ht({appInfo:"info"}),{commentId:function(){return this.comment.commentId},isAuthor:function(){return this.isLoggedIn&&V.endsWith(this.comment.user.userId,this.userInfo.userId)},canShowReport:function(){return!this.isAuthor},canShowDelete:function(){return!this.comment.childrenTotal&&this.isAuthor},canShowOpDelete:function(){return this.appInfo.opHideCommentFeature&&this.isLoggedIn&&!this.isAuthor&&V.endsWith(this.opUserId,this.userInfo.userId)},canShowMainMenu:function(){return this.canShowDelete||this.canShowReport}}),methods:o()({},st({_deleteComment:"DELETE_COMMENT",_opHideComment:"OP_HIDE_COMMENT",_reportComment:"REPORT_COMMENT"}),{deleteComment:function(){var t=this,e=o()({},this.comment);this._deleteComment({commentId:this.commentId}).then(function(){S.track(y.deleteComment,{CommentId:e.commentId,CommentLevel:e.level})}).catch(function(){t.hideMenu()})},opHideComment:function(){var t=this;this._opHideComment({commentId:this.commentId}).then(function(){S.track(y.opHideComment,{CommentId:comment.commentId,CommentLevel:comment.level})}).catch(function(){t.hideMenu()})},dislikeComment:function(){this.reportComment(function(){return Promise.resolve({reportType:12})})},reportComment:function(t){var e=this;if(!this.redirectLogin()){var n=o()({},this.comment);t(this.comment).then(function(t){return i.log("report promise data",t),e._reportComment({userReportData:t,commentId:e.comment.commentId})}).then(function(){S.track(y.reportComment,{CommentLevel:n.level,CommentId:n.commentId})}).catch(function(){e.hideMenu()})}},trackOpenMenu:function(){S.track(y.openCommentMenu,{CommentId:this.commentId})},trackCloseMenu:function(){S.track(y.closeCommentMenu,{CommentId:this.commentId})},insideMenu:function(t){return t===this.$refs.menu}})}),vt=Object(x.a)(pt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.canShowMainMenu?n("div",{staticClass:"extra-menu"},[n("a",{staticClass:"menu-trigger",attrs:{href:"javascript:void(0);"},on:{click:t.clickMenu}},[n("span",{staticClass:"drop"})]),t._v(" "),n("div",{ref:"menu",staticClass:"comment-pop-menu",class:[t.showMenu?"active":"hide"]},[n("ul",[t.canShowDelete?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:t.deleteComment}},[t._v("Delete comment")])]):t._e(),t._v(" "),t.canShowOpDelete?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:t.opHideComment}},[t._v("Delete comment")])]):t._e(),t._v(" "),t.canShowReport?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.reportComment(t.reportPromise)}}},[t._v("Report comment")])]):t._e(),t._v(" "),t.canShowReport?n("li",[n("a",{attrs:{href:"javascript:void(0);"},on:{click:t.dislikeComment}},[t._v("I just don't like it")])]):t._e()])])]):t._e()},[],!1,null,null,null).exports,_t=(n(199),n(34),Object(u.a)("commentSystem/app").mapState),gt={props:["comment"],computed:o()({},_t({appInfo:"info"})),methods:{clickMention:function(t){S.track(y.clickMention,{CommentId:this.comment.commentId,CommentLevel:this.comment.level,Url:t})}},render:function(){var t=this,e=arguments[0],n=[],d=[],o=V.htmlDecode(this.comment.mediaText);o.replace(/@[a-z0-9_]+/gi,function(n,o){var u=t.comment.mentionMapping;if(u[n]){var i=t.appInfo.mentionUrlPattern+u[n];d.push({start:o,end:o+n.length,el:e("a",{attrs:{target:"_blank",href:i},on:{click:t.clickMention.bind(t,i)}},[n])})}return n}),o.replace(/\n/g,function(t,n){return d.push({start:n,end:n+t.length,el:e("br")}),t}),d.sort(function(t,e){return t.start-e.start});var u=0;return d.forEach(function(t){u!==t.start&&(n.push(o.substring(u,t.start)),u=t.start),n.push(t.el),u=t.end}),u!==o.length&&n.push(o.substring(u,o.length)),e("div",{class:"content"},[n.map(function(t){return t})])}},Ct=Object(x.a)(gt,void 0,void 0,!1,null,null,null).exports,It=function(){var t={base:"https://twemoji.maxcdn.com/2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(t){var e="string"==typeof t?parseInt(t,16):t;if(e<65536)return a(e);return a(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:p},onerror:function(){this.parentNode&&this.parentNode.replaceChild(c(this.alt,!1),this)},parse:function(e,d){d&&"function"!=typeof d||(d={callback:d});return("string"==typeof e?function(t,e){return h(t,function(t){var n,d,o=t,u=m(t),i=e.callback(u,e);if(u&&i){for(d in o="<img ".concat('class="',e.className,'" ','draggable="false" ','alt="',t,'"',' src="',i,'"'),n=e.attributes(t,u))n.hasOwnProperty(d)&&0!==d.indexOf("on")&&-1===o.indexOf(" "+d+"=")&&(o=o.concat(" ",d,'="',s(n[d]),'"'));o=o.concat("/>")}return o})}:function(t,e){var d,o,u,a,s,r,l,f,h,p,v,_,g,C=function t(e,n){var d,o,u=e.childNodes,a=u.length;for(;a--;)d=u[a],3===(o=d.nodeType)?n.push(d):1!==o||"ownerSVGElement"in d||i.test(d.nodeName.toLowerCase())||t(d,n);return n}(t,[]),I=C.length;for(;I--;){for(u=!1,a=document.createDocumentFragment(),s=C[I],r=s.nodeValue,f=0;l=n.exec(r);){if((h=l.index)!==f&&a.appendChild(c(r.slice(f,h),!0)),v=l[0],_=m(v),f=h+v.length,g=e.callback(_,e),_&&g){for(o in(p=new Image).onerror=e.onerror,p.setAttribute("draggable","false"),d=e.attributes(v,_))d.hasOwnProperty(o)&&0!==o.indexOf("on")&&!p.hasAttribute(o)&&p.setAttribute(o,d[o]);p.className=e.className,p.alt=v,p.src=g,u=!0,a.appendChild(p)}p||a.appendChild(c(v,!1)),p=null}u&&(f<r.length&&a.appendChild(c(r.slice(f),!0)),s.parentNode.replaceChild(a,s))}return t})(e,{callback:d.callback||r,attributes:"function"==typeof d.attributes?d.attributes:f,base:"string"==typeof d.base?d.base:t.base,ext:d.ext||t.ext,size:d.folder||function(t){return"number"==typeof t?t+"x"+t:t}(d.size||t.size),className:d.className||t.className,onerror:d.onerror||t.onerror})},replace:h,test:function(t){n.lastIndex=0;var e=n.test(t);return n.lastIndex=0,e}},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[\u0023\u002a\u0030-\u0039]\ufe0f?\u20e3|(?:[\u00a9\u00ae\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,d=/\uFE0F/g,o=String.fromCharCode(8205),u=/[&<>'"]/g,i=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,a=String.fromCharCode;return t;function c(t,e){return document.createTextNode(e?t.replace(d,""):t)}function s(t){return t.replace(u,l)}function r(t,e){return"".concat(e.base,e.size,"/",t,e.ext)}function m(t){return p(t.indexOf(o)<0?t.replace(d,""):t)}function l(t){return e[t]}function f(){return null}function h(t,e){return String(t).replace(n,e)}function p(t,e){for(var n=[],d=0,o=0,u=0;u<t.length;)d=t.charCodeAt(u++),o?(n.push((65536+(o-55296<<10)+(d-56320)).toString(16)),o=0):55296<=d&&d<=56319?o=d:n.push(d.toString(16));return n.join(e||"-")}}(),bt=(n(171),Object(u.a)("commentSystem/app").mapState),Et=Object(u.a)("commentSystem/comment"),Tt=Et.mapState,St=Et.mapActions,Mt=Et.mapGetters,yt=Et.mapMutations,kt=Object(u.a)("commentSystem/user"),Ot=kt.mapState,Lt=kt.mapGetters,Ut={name:"CommentItemView",props:["comment"],data:function(){return{TYPE_USER_MEDIA:"userMedia",isLoadingReplies:!1,hidden:!1,banned:!1,pinned:null,defaultHideReplies:!0}},mixins:[K],components:{CommentItemVoteBtnView:it,CommentInputView:nt,CommentItemExtraMenuView:vt,CommentItemCommentText:Ct},mounted:function(){this.emojiStatus&&this.$refs.emojiStatus&&It.parse(this.$refs.emojiStatus)},computed:o()({},bt({appInfo:"info"}),Mt(["isLocked"]),Tt(["opUserId","cdnHost","replyBoxCommentId"]),Ot({userInfo:"info"}),Lt(["canModerate","isLoggedIn"]),{emojiStatus:function(){return this.comment.user.emojiStatus||""},profileUrl:function(){return this.comment.user.profileUrl||""},isPro:function(){return this.comment.user.isActivePro},isOp:function(){return this.comment.user.userId===this.opUserId},isAuthor:function(){return this.isLoggedIn&&V.endsWith(this.comment.user.userId,this.userInfo.userId)},commentAge:function(){return V.getTimeAgo(this.comment.timestamp)},pointsText:function(){return this.comment.isVoteMasked&&!this.isAuthor?"Points hidden":this.points},points:function(){var t=this.comment.likeCount;if(t<=0)return"";var e=t>1?"points":"point";return"".concat(t," ").concat(e)},isChild:function(){return this.comment.level>1},hasReplies:function(){return!this.comment.isChild&&(1===this.comment.childrenTotal&&this.hideReplies||this.comment.hasNext)},lastChild:function(){var t=this.getChildren.length-1;return this.comment.children[t]},imageInfo:function(){var t=this.comment,e="",n="";if("userMedia"===t.type&&t.media.length>0){var d=t.media[0].imageMetaByType;"ANIMATED"===d.type&&d.animated?e=d.animated.url:"STATIC"===d.type&&d.image&&(e=d.image.url),n="https://".concat(this.cdnHost,"/image?ref=").concat(this.appInfo.refDomain,"#").concat(e)}return{imageUrl:e,imageHref:n}},firstLevelCommentId:function(){return this.isChild?this.comment.parent:this.comment.commentId},canShowReplyBox:function(){return!this.isChild&&this.replyBoxCommentId===this.firstLevelCommentId},getChildren:function(){return this.comment.children.filter(function(t){return!t.isLocal})},getLocalChildren:function(){return this.comment.children.filter(function(t){return t.isLocal})},isPinned:function(){return null!==this.pinned?this.pinned:this.comment.isPinned},loadReplyText:function(){if(this.hideReplies){var t="replies";return 1===this.comment.childrenTotal&&(t="reply"),"View ".concat(this.comment.childrenTotal," ").concat(t)}return"Load more replies…"},hideReplies:function(){return this.defaultHideReplies&&!this.comment.section}}),methods:o()({},St({_fetchMoreReplies:"FETCH_MORE_REPLIES"}),yt({setReplyInfo:"SET_REPLY_INFO"}),{fetchMoreReplies:function(){var t=this;1===this.comment.childrenTotal&&this.hideReplies?this.defaultHideReplies=!1:this.isLoadingReplies||(this.isLoadingReplies=!0,this._fetchMoreReplies({refCommentId:this.lastChild?this.lastChild.commentId:this.comment.commentId}).then(function(){S.track(y.clickLoadMoreReply,{ReplyCount:t.comment.children.length}),t.isLoadingReplies=!1,t.defaultHideReplies=!1}).catch(function(){t.isLoadingReplies=!1}))},showReplyBox:function(){this.redirectLogin()||(S.track(y.clickReply,{CommentId:this.comment.commentId,CommentLevel:this.comment.level}),this.setReplyInfo({commentId:this.firstLevelCommentId,mentionUser:this.comment.user,notifyId:this.comment.commentId}))},_hide:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e={commentId:this.comment.commentId,badImage:t?1:0};this.hidden?C.unhide(e):C.hide(e),this.hidden=!this.hidden},hide:function(){this._hide()},hideBadImage:function(){this._hide(!0)},ban:function(){var t={userId:this.comment.user.userId};confirm("Admin: Confirm ".concat(this.banned?"unban":"ban"," ").concat(this.comment.user.displayName,"?"))&&(this.banned?C.unban(t):C.ban(t),this.banned=!this.banned)},pin:function(){var t=!this.isPinned,e={commentId:this.comment.commentId,pinned:t?1:0};confirm("Admin: Confirm ".concat(t?"pin":"unpin"," comment?"))&&(C.pinComment(e),this.pinned=t)},clickAvatar:function(){S.track(y.clickAvatar,{CommentId:this.comment.commentId,CommentLevel:this.comment.level,UserId:this.comment.user.userId,AccountId:this.comment.user.accountId})},clickName:function(){S.track(y.clickAuthorName,{CommentId:this.comment.commentId,CommentLevel:this.comment.level,UserId:this.comment.user.userId,AccountId:this.comment.user.accountId})},clickAge:function(){S.track(y.clickCommentAge,{CommentId:this.comment.commentId,CommentLevel:this.comment.level})},clickImage:function(){S.track(y.clickImage,{CommentId:this.comment.commentId,CommentLevel:this.comment.level})}})},At=Object(x.a)(Ut,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"comment-entry",class:{"indent-1":t.isChild}},[n("div",{staticClass:"avatar"},[n("div",{staticClass:"image-container"},[n("a",{attrs:{href:t.profileUrl,target:"_blank"},on:{click:t.clickAvatar}},[n("img",{attrs:{src:t.comment.user.avatarUrl}})])])]),t._v(" "),n("div",{staticClass:"payload"},[n("div",{staticClass:"info"},[n("p",[n("a",{ref:"username",staticClass:"username",attrs:{href:t.profileUrl,target:"_blank"},on:{click:t.clickName}},[t._v(t._s(t.comment.user.displayName))]),t._v(" "),t.emojiStatus?n("span",{ref:"emojiStatus",staticClass:"status"},[t._v(t._s(t.emojiStatus))]):t._e(),t._v(" "),t.isPro?n("span",{staticClass:"badge pro",attrs:{title:"9GAG Pro User"}},[t._v("Pro")]):t._e(),t._v(" "),n("span",{staticClass:"meta"},[t.isOp?n("span",[n("span",{staticClass:"label role-op",attrs:{title:"Original Poster"}},[t._v("OP")]),t._v(" "),n("span",[t._v(" · ")])]):t._e(),t._v(" "),t.pointsText?n("span",[n("span",{staticClass:"points"},[t._v(t._s(t.pointsText))]),t._v(" "),n("span",[t._v(" · ")])]):t._e(),t._v(" "),n("span",{staticClass:"time"},[n("a",{staticClass:"comment-permalink",attrs:{href:t.comment.permalink,target:"_blank"},on:{click:t.clickAge}},[t._v(t._s(t.commentAge))])])])])]),t._v(" "),n("CommentItemCommentText",{attrs:{comment:t.comment}}),t._v(" "),t.imageInfo.imageUrl?n("div",{staticClass:"media"},[n("a",{staticClass:"img-embed",attrs:{href:t.imageInfo.imageHref,target:"_blank"},on:{click:t.clickImage}},[n("img",{attrs:{src:t.imageInfo.imageUrl}})])]):t._e(),t._v(" "),n("div",{staticClass:"action"},[t.isLocked?t._e():n("span",[n("a",{staticClass:"reply",attrs:{href:"javascript:void(0);"},on:{click:t.showReplyBox}},[t._v("Reply")])]),t._v(" "),n("CommentItemVoteBtnView",{attrs:{comment:t.comment}}),t._v(" "),!t.isAuthor&&t.canModerate?n("span",[n("span",[n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:t.hide}},[t._v(t._s(this.hidden?"Unhide":"Hide"))])]),t._v(" "),n("span",[t.comment.type===t.TYPE_USER_MEDIA?n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:t.hideBadImage}},[t._v(t._s(this.hidden?"Unhide (Bad Image)":"Hide (Bad Image)"))]):t._e()]),t._v(" "),n("span",[n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:t.ban}},[t._v(t._s(this.banned?"Unban":"Ban"))])])]):t._e(),t._v(" "),t.canModerate?n("span",[n("span",[t.isChild?t._e():n("a",{staticClass:"admin",attrs:{href:"javascript:void(0);"},on:{click:t.pin}},[t._v(t._s(this.isPinned?"Unpin":"Pin"))])])]):t._e()],1)],1),t._v(" "),n("CommentItemExtraMenuView",{attrs:{comment:t.comment}}),t._v(" "),n("div",{staticClass:"clearfix"})],1),t._v(" "),n("div",t._l(t.getChildren,function(e){return t.hideReplies?t._e():n("CommentItemView",{key:e.commentId,attrs:{comment:e}})}),1),t._v(" "),t.hasReplies?n("div",{staticClass:"comment-entry indent-1"},[n("a",{staticClass:"collapsed-comment",class:{loading:t.isLoadingReplies},attrs:{href:"javascript:void(0);"},on:{click:t.fetchMoreReplies}},[t.isLoadingReplies?t._e():n("span",[t._v(t._s(t.loadReplyText))]),t._v(" "),t.isLoadingReplies?n("span",[t._v("Loading…")]):t._e()])]):t._e(),t._v(" "),n("div",t._l(t.getLocalChildren,function(t){return n("CommentItemView",{key:t.commentId,attrs:{comment:t}})}),1),t._v(" "),t.canShowReplyBox?n("CommentInputView",{attrs:{"is-child":!0}}):t._e()],1)},[],!1,null,null,null).exports,Pt=Object(u.a)("commentSystem/comment"),Nt=Pt.mapState,Rt=Pt.mapActions,xt=Pt.mapMutations,Dt=Pt.mapGetters,wt=Object(u.a)("commentSystem/app").mapState,jt={props:["isSection"],mixins:[K],computed:o()({},Nt(["highlightedId","comments","hasNext","isLoading","order","autoLoadCount"]),Dt(["isLocked"]),wt({appInfo:"info"}),{showNoCommentText:function(){return!(this.isLocked||this.comments.length||this.isLoading||this.isSection)},canLoadMore:function(){return this.hasNext&&!this.isLoading&&!this.isSection},canScrollMore:function(){var t=this.appInfo.autoLoadMaxTimes,e=-1===t;return this.canLoadMore&&(e||this.autoLoadCount<t)},canShowLoading:function(){return!this.isSection&&this.isLoading},getComments:function(){return this.isSection?this.comments.filter(function(t){return""!==t.section}):this.comments.filter(function(t){return""===t.section})},sectionName:function(){return this.isSection&&!this.highlightedId?"My Comments":"Linked Comment"}}),components:{CommentItemView:At},methods:o()({},xt({increaseAutoLoadCount:"INCREASE_AUTO_LOAD_COUNT"}),Rt({fetchComments:"FETCH_COMMENTS"}),{fetchMoreComments:function(t){var e=this,n=this.comments[this.comments.length-1];this.fetchComments({ref:n.orderKey,order:this.order}).then(function(n){S.track(y.loadMore,{CommentCount:e.comments.length,TriggerAction:t})})},handleScroll:function(){if(this.canScrollMore){var t=this.getAbsPosition(this.$refs.loadMore);window.scrollY+document.documentElement.clientHeight-t.top>-700&&(i.log("scroll triggered load more comments"),this.increaseAutoLoadCount(),this.fetchMoreComments("Scroll"))}else i.log("Abort loading more as it is currently loading or there is no more comments or max scroll count exceeded")},getAbsPosition:function(t){var e=t,n=0,d=0;if(document.getElementById||document.all)do{for(d+=t.offsetLeft-t.scrollLeft,n+=t.offsetTop-t.scrollTop,t=t.offsetParent,e=e.parentNode;e!=t;)d-=e.scrollLeft,n-=e.scrollTop,e=e.parentNode}while(t.offsetParent);else document.layers&&(n+=t.y,d+=t.x);return{top:n,left:d}},firstToComment:function(){this.redirectLogin()||(document.getElementsByClassName("post-text-area")[0].focus(),S.track(y.clickFirstToComment))}}),created:function(){!this.isSection&&window.addEventListener("scroll",this.handleScroll)},destroyed:function(){!this.isSection&&window.removeEventListener("scroll",this.handleScroll)}},Ht=Object(x.a)(jt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isSection&&t.getComments.length>0?n("div",{staticClass:"comment-section-title"},[n("h3",[t._v(t._s(t.sectionName))]),t._v(" "),n("div",{staticClass:"clearfix"})]):t._e(),t._v(" "),t.showNoCommentText?n("div",{staticClass:"notice-message"},[n("p",{staticClass:"align-center"},[t._v("Be the first to comment!")]),t._v(" "),n("div",{staticClass:"btn-container align-center"},[n("a",{staticClass:"btn",attrs:{href:"javascript:void(0);"},on:{click:t.firstToComment}},[t._v("Say something nice")])])]):t._e(),t._v(" "),t._l(t.getComments,function(t){return n("CommentItemView",{key:t.commentId,attrs:{comment:t}})}),t._v(" "),t.canShowLoading?n("div",{staticClass:"spinner-here"}):t._e(),t._v(" "),t.canLoadMore?n("div",{ref:"loadMore",staticClass:"comment-pagination"},[n("div",{staticClass:"btn-container"},[n("a",{staticClass:"cmnt-btn more grey",attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.fetchMoreComments("Click")}}},[n("span",{staticClass:"label"},[t._v("Load More Comments")])])])]):t._e()],2)},[],!1,null,null,null).exports,Ft={version:"v1"},Bt={init:function(t){Ft=o()({},Ft,t)},baseUrl:function(){return"https://".concat(Ft.host,"/").concat(Ft.version)},baseCdnUrl:function(){return"https://".concat(Ft.cdnHost,"/").concat(Ft.version,"/cacheable")},fetchAppInfo:function(){i.log(this.baseUrl(),Ft);var t="".concat(this.baseCdnUrl(),"/app.json");return h.a.get(t,{params:{id:Ft.appId}}).then(function(t){return t.data.payload.app})},fetchUserInfo:function(){var t="".concat(this.baseUrl(),"/user.json"),e=v()(Ft,["appId","auth"]);return i.log(this.baseUrl(),Ft),h.a.post(t,s.a.stringify(e)).then(function(t){return t.data.payload})}},Vt={namespaced:!0,state:{info:{appId:null,maxDisplayLevel:null,maxMessageLength:null,allowImageUploadFeature:null,opHideCommentFeature:null,anonymousAvatarUrl:null,reactionImageSite:null,mentionUrlPattern:null,refDomain:null,autoLoadMaxTimes:null,allowPostUrlComment:null}},mutations:{SET_APP_INFO:function(t,e){t.info=e}},actions:{FETCH_APP_INFO:function(t,e){var n=t.commit,d=t.state;return d.info.appId&&d.info.appId===e.appId?Promise.resolve():Bt.fetchAppInfo().then(function(t){i.log("App info data",t),n("SET_APP_INFO",o()({appId:e.appId,autoLoadMaxTimes:e.autoLoadMaxTimes||0},t))}).catch(function(t){i.log(t)})}}},Gt={userId:null,displayName:null,emojiStatus:null,avatarUrl:null,role:null,profileUrl:null,moderate:null,permissions:null,delegates:null},$t={namespaced:!0,state:{auth:null,info:o()({},Gt),commentedPostUrls:{},reportedPostUrls:{},likeMapping:{}},getters:{isLoggedIn:function(t){return null!==t.info.userId},hasActivities:function(t,e,n){if(null===t.info.userId)return!1;if(t.info.moderate)return!0;var d=n.commentSystem.comment.url,o=t.commentedPostUrls,u=t.reportedPostUrls,i=!1;return o&&o[d]&&(i=!0),u&&u[d]&&(i=!0),i},canModerate:function(t){return t.info.moderate}},mutations:{SET_AUTH:function(t,e){t.auth=e},SET_USER_INFO:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.info=e.user||o()({},Gt),t.commentedPostUrls=e.commentedPostUrls||{},t.reportedPostUrls=e.reportedPostUrls||{},t.likeMapping=e.likeMapping||{}},UPDATE_COMMENTED_POST_URLS:function(t,e){t.commentedPostUrls=e},UPDATE_REPORTED_POST_URLS:function(t,e){t.reportedPostUrls=e},UPDATE_LIKE_MAPPING:function(t,e){t.likeMapping=e}},actions:{FETCH_USER_INFO:function(t,e){var n=t.commit,d=t.state,o=e.auth;return o&&d.auth===o||n("SET_USER_INFO"),n("SET_AUTH",o),!o||d.info.userId?Promise.resolve():Bt.fetchUserInfo().then(function(t){i.log("User data",t),n("SET_USER_INFO",t)}).catch(function(t){i.log(t)})},UPDATE_COMMENTED_POST_URLS:function(t,e){var n=t.commit,d=t.state;n("UPDATE_COMMENTED_POST_URLS",o()({},d.commentedPostUrls,e))},UPDATE_REPORTED_POST_URLS:function(t,e){var n=t.commit,d=t.state;n("UPDATE_REPORTED_POST_URLS",o()({},d.reportedPostUrls,e))},UPDATE_LIKE_MAPPING:function(t,e){var n=t.commit,d=t.state;n("UPDATE_LIKE_MAPPING",o()({},d.likeMapping,e))}}},Kt=n(203),Yt="expiry",zt="comment::";function Wt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t.setState=function(t,n,d){return e&&(n[Yt]=Date.now()+1e3*e),d.setItem("".concat(zt).concat(t),JSON.stringify(n))},t.getState=function(t,n,d){try{if(d=n.getItem("".concat(zt).concat(t))){var o=JSON.parse(d);if(!e)return o;if(Date.now()<o[Yt])return delete o[Yt],o}return}catch(t){return}},Object(Kt.a)(t)}var Jt=Object(u.a)("commentSystem/comment"),qt=Jt.mapState,Xt=Jt.mapMutations,Zt=Object(u.a)("commentSystem/app").mapActions,Qt=Object(u.a)("commentSystem/user").mapActions,te={components:{TabBarView:F,CommentInputView:nt,CommentListView:Ht},methods:o()({},Xt({setHighlightedId:"SET_HIGHLIGHTED_ID",setCommentInfo:"SET_COMMENT_INFO"}),Zt({fetchAppInfo:"FETCH_APP_INFO"}),Qt({fetchUserInfo:"FETCH_USER_INFO"}),{init:function(t){var e=o()({},e,t);if(location.hash){var n,d=s.a.parse(location.hash.substr(1));d.cs_comment_id&&(n=d.cs_comment_id,this.setHighlightedId(n),e.highlightedId=n)}i.log("CommentSystem.init",e),Bt.init(e),C.init(e),this.setCommentInfo(e);var u=this.fetchAppInfo(e),c=this.fetchUserInfo(e);Promise.all([u,c]).then(function(){return a.$emit("refreshComments")})}}),computed:o()({},qt(["lock"])),created:function(){this.$store.state.commentSystem||(this.$store.registerModule("commentSystem",{namespaced:!0,modules:{comment:T,app:Vt,user:$t}}),function(t){Wt({key:"appState",paths:["commentSystem.app.info"],filter:function(t){return["commentSystem/app/SET_APP_INFO"].includes(t.type)}},600)(t),Wt({key:"userState",paths:["commentSystem.user.auth","commentSystem.user.info","commentSystem.user.commentedPostUrls","commentSystem.user.reportedPostUrls","commentSystem.user.likeMapping"],filter:function(t){return["commentSystem/user/SET_AUTH","commentSystem/user/SET_USER_INFO","commentSystem/user/UPDATE_COMMENTED_POST_URLS","commentSystem/user/UPDATE_REPORTED_POST_URLS","commentSystem/user/UPDATE_LIKE_MAPPING"].includes(t.type)}},600)(t)}(this.$store)),i.log("CommentSystem.created"),a.$on("init",this.init)},destroyed:function(){a.$off("init",this.init)}},ee=Object(x.a)(te,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"CS3"},[e("TabBarView"),this._v(" "),e("div",{staticClass:"comment-embed"},[this.lock?e("div",{staticClass:"notice-message"},[e("p",{staticClass:"align-center"},[this._v("This post is locked.")])]):this._e(),this._v(" "),e("CommentListView",{attrs:{"is-section":"1"}}),this._v(" "),e("CommentInputView"),this._v(" "),e("CommentListView")],1)],1)},[],!1,null,null,null).exports;e.default={init:function(t){a.$emit("init",t)},install:function(t){t.component("comment-system",ee)}}},440:function(t,e,n){var d=n(473),o=n(460)(function(t,e){return null==t?{}:d(t,e)});t.exports=o},447:function(t,e){var n=9007199254740991,d=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var o=typeof t;return!!(e=null==e?n:e)&&("number"==o||"symbol"!=o&&d.test(t))&&t>-1&&t%1==0&&t<e}},460:function(t,e){t.exports=function(t){return t}},461:function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},462:function(t,e){t.exports=function(){return!1}},463:function(t,e,n){var d=n(298),o=n(462),u=n(86),i=n(447),a=n(461),c=n(299);t.exports=function(t,e,n){for(var s=-1,r=(e=d(e,t)).length,m=!1;++s<r;){var l=c(e[s]);if(!(m=null!=t&&n(t,l)))break;t=t[l]}return m||++s!=r?m:!!(r=null==t?0:t.length)&&a(r)&&i(l,r)&&(u(t)||o(t))}},464:function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},465:function(t,e,n){var d=n(464),o=n(463);t.exports=function(t,e){return null!=t&&o(t,e,d)}},466:function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},467:function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},468:function(t,e,n){var d=n(467),o=function(){try{var t=d(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},469:function(t,e,n){var d=n(468);t.exports=function(t,e,n){"__proto__"==e&&d?d(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},470:function(t,e,n){var d=n(469),o=n(301),u=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var i=t[e];u.call(t,e)&&o(i,n)&&(void 0!==n||e in t)||d(t,e,n)}},471:function(t,e,n){var d=n(470),o=n(298),u=n(447),i=n(466),a=n(299);t.exports=function(t,e,n,c){if(!i(t))return t;for(var s=-1,r=(e=o(e,t)).length,m=r-1,l=t;null!=l&&++s<r;){var f=a(e[s]),h=n;if(s!=m){var p=l[f];void 0===(h=c?c(p,f,l):void 0)&&(h=i(p)?p:u(e[s+1])?[]:{})}d(l,f,h),l=l[f]}return t}},472:function(t,e,n){var d=n(302),o=n(471),u=n(298);t.exports=function(t,e,n){for(var i=-1,a=e.length,c={};++i<a;){var s=e[i],r=d(t,s);n(r,s)&&o(c,u(s,t),r)}return c}},473:function(t,e,n){var d=n(472),o=n(465);t.exports=function(t,e){return d(t,e,function(e,n){return o(t,n)})}},474:function(t,e,n){"use strict";var d=n(26),o=n(304)(6),u="findIndex",i=!0;u in[]&&Array(1)[u](function(){i=!1}),d(d.P+d.F*i,"Array",{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(176)(u)}}]);