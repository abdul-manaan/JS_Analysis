if (self.CavalryLogger) { CavalryLogger.start_js(["2TtdC"]); }

__d("KaiOSAppMigrationEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMPLETED_ROUNDTRIP:"completed_roundtrip",HIT_JIO_HOME_GEN_DELEGATE:"hit_jio_home_gen_delegate",HIT_JIO_STARTUP_GEN_DELEGATE:"hit_jio_startup_gen_delegate",DELEGATE_TO_MIGRATION_RESPONSE:"delegate_to_migration_response",DELEGATE_TO_JIO_HOME:"delegate_to_jio_home",RESPOND_WITH_MIGRATION:"respond_with_migration",DELEGATE_TO_MINDEX:"delegate_to_mindex",REDIRECT_TO_MINDEX:"redirect_to_mindex",COMPLETED_BROWSER_IFRAME_INIT:"completed_browser_iframe_init"})}),null);
__d("KaiOSAppMigrationExperimentName",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PREREQUISITE:"prerequisite",CURSOR_1_1:"cursor_1_1"})}),null);
__d("KaiOSSendMessageUtil",["Event","KaiOSSpatialNavInfraConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=!1,this.$2=null,this.$3()}var b=a.prototype;b.$3=function(){var a=this;h.messageUnloadEnabled&&(this.$2=g.listen(window,"beforeunload",function(){a.$1=!0,a.$2&&(a.$2.remove(),a.$2=null)}))};b.postMessage=function(a,b,c,d){if(a&&b&&!this.$1){var e=new Map();e.set(i.Action,b);c&&e.set(i.ActionPayload,c);d!=null&&e.set(i.CallbackID,d);a.postMessage(e,"*")}};return a}();var i={Type:Object.freeze({HANDLE_BACK:"handle_back",MESSAGE_RECEIVED:"received",OPEN_URL:"open_url",REGISTER_PUSH:"register_push",SCREEN_ORIENTATION_LOCK:"screen_orientation_lock",UNREGISTER_PUSH:"unregister_push",CHECK_FOR_PUSH_UPDATE:"check_for_push_update",PUSH_UPDATE_COMPLETED:"push_update_completed",SET_VOLUME:"set_volume",FBT_STRINGS:"fbt_strings",CONFIG_RESPONSE:"config_response",FETCH_MSISDN:"fetch_msisdn",GET_CONTACTS:"get_contacts",TOGGLE_SPATIAL_NAV:"toggle_spatial_nav",LITE_MIGRATION_STATUS:"lite_migration_status"}),Action:"action",ActionPayload:"payload",CallbackID:"callback_id",_singletonImpl:new a(),postMessage:function(a,b,c,d){i._singletonImpl.postMessage(a,b,c,d)}};e.exports=i}),null);
__d("KaiOSConnectionHelper",["KaiOSSendMessageUtil"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="app://m.facebook.com";a=function(){__p&&__p();function a(){this.hostWindow=null,this.resolveOnConnect=null}var b=a.prototype;b.receiveMessage=function(a){if(!a||a.origin!==h||!a.source)return!1;if(a.data==="ping"){this.hostWindow||(this.hostWindow=a.source,g.postMessage(this.hostWindow,g.Type.MESSAGE_RECEIVED));a=this.resolveOnConnect;a&&(a(),this.resolveOnConnect=null)}return!0};return a}();b=new a();e.exports=b}),null);
__d("KaiOSControllerConfig",[],(function(a,b,c,d,e,f){"use strict";a={};e.exports=a}),null);
__d("URLSearchParams",[],(function(a,b,c,d,e,f){__p&&__p();var g=/\+/g,h=/[!\'()*]/g,i=/%20/g;function j(a){return encodeURIComponent(a).replace(i,"+").replace(h,function(a){return"%"+a.charCodeAt(0).toString(16)})}function k(a){return decodeURIComponent(a).replace(g," ")}var l=typeof Symbol==="function"?Symbol.iterator:"@@iterator";a=function(){"use strict";__p&&__p();function a(a){a===void 0&&(a="");a=a;a[0]==="?"&&(a=a.substr(1));this.$1=a.length?a.split("&").map(function(a){a=a.split("=");var b=a[0];a=a[1];return[k(b),k(a)]}):[]}var b=a.prototype;b.append=function(a,b){this.$1.push([a,String(b)])};b["delete"]=function(a){for(var b=0;b<this.$1.length;b++)this.$1[b][0]===a&&(this.$1.splice(b,1),b--)};b.entries=function(){return this.$1[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]()};b.get=function(a){for(var b=0,c=this.$1.length;b<c;b++)if(this.$1[b][0]===a)return this.$1[b][1];return null};b.getAll=function(a){var b=[];for(var c=0,d=this.$1.length;c<d;c++)this.$1[c][0]===a&&b.push(this.$1[c][1]);return b};b.has=function(a){for(var b=0,c=this.$1.length;b<c;b++)if(this.$1[b][0]===a)return!0;return!1};b.keys=function(){var a=this.$1.map(function(a){var b=a[0];a[1];return b});return a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]()};b.set=function(a,b){var c=!1;for(var d=0;d<this.$1.length;d++)this.$1[d][0]===a&&(c?(this.$1.splice(d,1),d--):(this.$1[d][1]=String(b),c=!0));c||this.$1.push([a,String(b)])};b.toString=function(){return this.$1.map(function(a){var b=a[0];a=a[1];return j(b)+"="+j(a)}).join("&")};b.values=function(){var a=this.$1.map(function(a){a[0];a=a[1];return a});return a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]()};b[l]=function(){return this.entries()};return a}();e.exports=a}),null);
__d("KaiOSControllerUtils",["KaiOSConnectionHelper","KaiOSControllerConfig","KaiOSSendMessageUtil","MRegMultiStepConstants","URLSearchParams","qex"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m=function(){__p&&__p();function a(){this.callbacks=new Map(),this.nextCallbackID=1}var b=a.prototype;b.setCallback=function(a){var b=(this.nextCallbackID++).toString();this.callbacks.set(b,a);return b};b.handleCallback=function(a,b){if(a){var c=this.callbacks.get(a);c&&(this.callbacks["delete"](a),c(b));return!0}return!1};return a}();function a(a){__p&&__p();if(!!l._("873998")||!h.backButtonOnRegPage||a!="Backspace"&&a!="BrowserBack")return!1;a=location.pathname.split("/");a=a.length>=2&&a[1]==="reg";if(!a)return!1;a=document.getElementById(j.BACK_BUTTON);if(a&&a.offsetHeight>0){a.click();return!0}return!1}function b(){var a=location.pathname;a=a==="/"||a==="/kaiosapp/jio/home/"||a.startsWith("/home.php")||a.startsWith("/index.php")||a.startsWith("/confirmemail.php");var b=new k(window.location.search);b=b.has("soft");return a&&!b}function c(a){var b=new Map();b.set("url",a);i.postMessage(g.hostWindow,i.Type.OPEN_URL,b)}d={createCallbackHandler:function(){return new m()},sendBasicPost:function(a,b,c){var d=new XMLHttpRequest();d.open("POST",a);d.setRequestHeader("Content-Type","application/x-www-form-urlencoded");a=[];for(var e in b)a.push(encodeURIComponent(e)+"="+encodeURIComponent(b[e]));d.onload=function(){c&&c(d)};d.send(a.join("&"))},keyDownEventHandledByRegPage:a,isOnHomeOrConfPage:b,openUrl:c};e.exports=d}),null);
__d("KaiOSFullscreenVideoHandler",["KaiOSSendMessageUtil","getActiveElement"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=Object.freeze({RIGHT:6,LEFT:4,UP:2,DOWN:8,MIDDLE:5}),j=Object.freeze({KEY:"type",DOWN:-1,UP:1});a=function(){__p&&__p();function a(a){this.hostWindow=a}var b=a.prototype;b.handleKeyDownEvent=function(a){__p&&__p();var b=this.getVideoIfFullScreen();if(!b)return!1;if(a.key==="SoftLeft"){document.exitFullscreen();return!0}else if(a.key==="SoftRight"){b.muted=!b.muted;return!0}return!1};b.handleClickEvent=function(a){a=this.getVideoIfFullScreen();if(!a)return!1;this.togglePause(a);return!0};b.handleMouseMoveEvent=function(a){return!1};b.getVideoIfFullScreen=function(){return document.fullscreenElement&&document.fullscreenElement.nodeName&&document.fullscreenElement.nodeName=="VIDEO"?h():null};b.seek=function(a,b){b?a.currentTime=Math.min(a.duration,a.currentTime+10):a.currentTime=Math.max(0,a.currentTime-10)};b.togglePause=function(a){a.paused?a.play():a.pause()};b.volume=function(a){if(!a||a!=j.UP&&a!=j.DOWN)return;var b=new Map();b.set(j.KEY,a.toString());g.postMessage(this.hostWindow,g.Type.SET_VOLUME,b)};b.control=function(a,b){__p&&__p();if(b)switch(b){case i.UP:this.volume(j.UP);break;case i.DOWN:this.volume(j.DOWN);break;case i.LEFT:this.seek(a,!1);break;case i.RIGHT:this.seek(a,!0);break;case i.MIDDLE:this.togglePause(a);break}};return a}();e.exports=a}),null);
__d("SpatialNavigationAttribute",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({PRIMARY_ELEMENT:"data-kaios-spatial-navigation",FOCUS_TRANSPARENT:"data-kaios-focus-transparent",STYLE_PARENT_INSTEAD:"data-kaios-style-parent-instead",STYLE_PARENT_HTML:"data-kaios-style-parent-html",STYLE_CHILD_HTML:"data-kaios-style-child-html",CLICK_THROUGH:"data-kaios-click-through",NO_CLICK_THROUGH:"data-kaios-no-click-through",BLACKLIST_ELEMENT:"data-kaios-blacklist-nav",WHITELIST_ELEMENT:"data-kaios-whitelist-nav",SCROLL_PARENT:"data-kaios-scroll-parent",SWALLOW_CLICK:"data-kaios-swallow-click",FILE_UPLOAD_ELEMENT:"data-kaios-file-upload-element",FOCUS_ON_HIGHLIGHT_ELEMENT:"data-kaios-focus-on-highlight"})}),null);
__d("KaiOSHTMLElementUtils",["EventListener","KaiOSSpatialNavInfraConfig","Keys","SpatialNavigationAttribute","Style"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=["email","number","password","search","tel","text","url"];function m(a){a=a;while(a&&a!==document&&k.get(a,"visibility")!="hidden"&&k.get(a,"display")!="none")a=a.parentNode;return a===document}function n(a){return(a.offsetHeight!==0&&a.offsetWidth!==0||a.offsetParent!==null)&&window.getComputedStyle(a).visibility!=="hidden"}function o(a){__p&&__p();var b=a.tabIndex;if(parseInt(b,10)<0)return!1;if(b>0||b===0&&a.getAttribute("tabIndex")!==null)return!0;if(a instanceof HTMLAnchorElement)return!!a.href&&a.rel!="ignore";else if(a instanceof HTMLInputElement)return a.type!="hidden"&&a.type!="file"&&!a.disabled;else if(a instanceof HTMLButtonElement||a instanceof HTMLSelectElement||a instanceof HTMLTextAreaElement)return!a.disabled;return!1}var p={isTextfieldInput:function(a){return a instanceof HTMLTextAreaElement||a instanceof HTMLInputElement&&(l.includes(a.type)||a.type==="")},isLink:function(a){return a.tagName==="A"},isNTElement:function(a){return a.hasAttribute("data-nt")},isFileUploadElement:function(a){return a.hasAttribute(j.FILE_UPLOAD_ELEMENT)},isSpatialNavElement:function(a){return(a.hasAttribute(j.PRIMARY_ELEMENT)||a.hasAttribute(j.WHITELIST_ELEMENT)||o(a))&&!a.hasAttribute(j.BLACKLIST_ELEMENT)&&p.isVisible(a)},isVisible:function(a){return h.fastVisibilityEnabled?n(a):m(a)},getFirstLink:function(a){__p&&__p();for(var b=0;b<a.children.length;++b)if(p.isLink(a.children[b]))return a.children[b];for(var b=0;b<a.children.length;++b){var c=a.children[b];for(var d=0;d<c.children.length;++d)if(p.isLink(c.children[d]))return c.children[d]}return null},attachClickHandlerToSubmitFormOnElement:function(a,b){g.listen(a,"click",function(){b.submit()}),g.listen(a,"keyup",function(a){a.keyCode===i.RETURN&&b.submit()})}};e.exports=p}),null);
__d("KaiOSNavigator",["Event","KaiOSConnectionHelper","KaiOSSendMessageUtil","TabbableElements","getActiveElement"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=new Map([["nav_mode","spatial"]]),m=new Map([["nav_mode","cursor"]]),n=500;a=function(){__p&&__p();function a(){this.mousemoveTrap=null,this.blurTrap=null,this.focusTrap=null,this.blurTimer=null,this.currElement=document.body||window,this.currIndex=0,this.objects=[],this.trapContainer=null,this.activated=!1}var b=a.prototype;b.refreshList=function(){if(!this.trapContainer)return;this.objects=j.find(this.trapContainer)};b.handleKeyDown=function(a){__p&&__p();if(!this.activated)return;var b=this.objects[this.currIndex],c=this.objects.length;switch(a.key){case"ArrowLeft":this.currIndex=(this.currIndex-1+c)%c;break;case"ArrowRight":this.currIndex=(this.currIndex+1)%c;break;case"ArrowDown":this.exitHandler(b);a.preventDefault();return;case"Enter":return}c=this.objects[this.currIndex];this.$1(b);c&&this.$2(c)};b.$2=function(a){if(!a)return;a.focus()};b.$1=function(a){if(!a)return;a.blur()};b.$3=function(){this.changeNavigationMode(l),this.activated=!0};b.$4=function(a){__p&&__p();var b=this;this.trapContainer=a;this.$5();this.mousemoveTrap=g.listen(this.trapContainer,"mousemove",function(a){(a.movementY<0||a.movementX!==0)&&b.activateSpatialNavOnEvent(a)});this.blurTrap=g.capture(this.trapContainer,"blur",function(a){b.blurTimer=setTimeout(function(){b.exitHandler(null),b.blurTimer=null},n)});this.focusTrap=g.capture(this.trapContainer,"focus",function(a){b.blurTimer==null?b.activateSpatialNavOnEvent(null,b.currIndex):(clearTimeout(b.blurTimer),b.blurTimer=null)})};b.$5=function(){var a=[this.mousemoveTrap,this.blurTrap,this.focusTrap];for(var b=0;b<a.length;b++){var c=a[b];c&&c.remove()}};b.activateSpatialNavOnEvent=function(a,b){a===void 0&&(a=null);b===void 0&&(b=0);this.currIndex=b;if(a!=null){b=this.$6(a.clientX,a.clientY);b!==-1&&(this.currIndex=b)}this.$3();this.$2(this.objects[this.currIndex])};b.focusOnFirstTarget=function(){if(this.objects==null||this.objects.length==0)return;this.currIndex=0;this.$3();this.$2(this.objects[this.currIndex])};b.$6=function(a,b){__p&&__p();a=document.elementFromPoint(a,b);b=a;while(b!=null&&b!==this.trapContainer){var c=this.objects.indexOf(b);if(c!==-1)return c;b=b.parentNode}b=j.find(a);for(var c=0;c<b.length;c++){a=this.objects.indexOf(b[c]);if(a!==-1)return a}return-1};b.setupNavOnContainer=function(a,b,c){c===void 0&&(c=null),this.$4(a),this.refreshList(),b&&this.activateSpatialNavOnEvent(c)};b.exitHandler=function(a){this.$1(a),this.$1(this.currElement),this.changeNavigationMode(m),this.activated=!1};b.changeNavigationMode=function(a){a===m&&this.$1(k()),i.postMessage(h.hostWindow,i.Type.TOGGLE_SPATIAL_NAV,a)};b.isSpatialNavEnabled=function(){return this.activated};return a}();var o={impl:new a(),setupNavOnContainer:function(a,b){o.impl.setupNavOnContainer(a,b,null)},showCursor:function(){o.impl.changeNavigationMode(m)},hideCursor:function(){o.impl.changeNavigationMode(l)},isSpatialNavEnabled:function(){return o.impl.isSpatialNavEnabled()},handleKeyDown:function(a){o.impl.handleKeyDown(a)},focusOnFirstTarget:function(){o.impl.focusOnFirstTarget()}};e.exports=o}),null);
__d("KaiOSSoftkeyTrayLogger",["BanzaiLogger","KaiOSLoggerEvent","KaiOSLoggerEventCategory"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a={logSoftkeyTrayButtonClicked:function(a){__p&&__p();var b={event_category:i.SOFTKEY_TRAY};switch(a){case"kaios_tray_back":b.event=h.SOFTKEY_BACK_BUTTON_CLICKED;break;case"kaios_tray_menu":b.event=h.SOFTKEY_MENU_BUTTON_CLICKED;break;case"kaios_tray_post":b.event=h.SOFTKEY_POST_BUTTON_CLICKED;break;case"kaios_tray_menu_close":b.event=h.SOFTKEY_MENU_CLOSE_BUTTON_CLICKED;break;default:b.event=h.SOFTKEY_OTHER_BUTTON_CLICKED;b.miscellaneous={detail:a};break}g.log("KaiOSEventsLoggerConfig",b)}};e.exports=a}),null);
__d("KaiOSSpatialNavPath",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NONE:0,BOTTOM_SHEET:1,CONTACT_IMPORTER:2,CONFIRMATION:3,FRIENDS_TAB:4,LIKE_REACTION_FLYOUT:5,LOGIN_PAGE:6,MENU:7,MOVERLAY:8,NEWSFEED:9,NOTIFICATION:10,NUX_FRIENDS_SUGGESTION:11,PHOTO:12,PLAYGROUND:13,PLAYGROUND_VISIBILITY:14,REGISTRATION:15,STORY:16,TEST:17,NUX_PROFILE_PIC_PAGE:18,SAVE_DEVICE_PAGE:19,ACCOUNT_SWITCHER:20})}),null);
__d("KaiOSSpatialNavTraverserKind",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({LINEAR:"linear",HIERARCHICAL:"hierarchical",HORIZONTAL:"horizontal"})}),null);
__d("SpatialNavControllerTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({CONTEXT_STACK:"context_stack",MENU_CONTEXT:"menu_context",NO_CONTEXT:"no_context"});e.exports={SpatialNavContextState:a}}),null);
__d("SpatialNavDirection",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right"})}),null);
__d("SpatialNavMutationSpecTypes",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({PUSH_CONTEXT:"push_context",POP_CONTEXT:"pop_context",MOVE_TO_NODE:"move_to_node",INTERACT_WITH_NODE:"interact_with_node",REBUILD_TREE:"rebuild_tree",BUILD_MENU:"build_menu",HIGHLIGHT_NODE:"highlight_node",SWITCH_CONTEXT:"switch_context",CLEAR_CONTEXT:"clear_context",REMOVE_CONTEXT:"remove_context",REBUILD_PARTIAL_TREE:"rebuild_partial_tree"});e.exports=a}),null);
__d("SpatialNavTreeNodeUtils",["CSS","MViewport","SpatialNavigationAttribute","Vector","cx"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l={isPrimaryNode:function(a){return a.getHTMLElement().hasAttribute(i.PRIMARY_ELEMENT)},isFocusTransparent:function(a){return a.getHTMLElement().hasAttribute(i.FOCUS_TRANSPARENT)},shouldPreventClickThrough:function(a){return a.getHTMLElement().hasAttribute(i.NO_CLICK_THROUGH)},shouldSwallowClick:function(a){return a.getHTMLElement().hasAttribute(i.SWALLOW_CLICK)},isPrimaryOverrideChild:function(a){var b=a.getParent();return b!=null&&b.getPrimaryChildOverride()===a},shouldStylePrimaryInstead:function(a){return!l.isPrimaryNode(a)&&a.getHTMLElement().hasAttribute(i.STYLE_PARENT_INSTEAD)},shouldStyleParentHTML:function(a){return!l.isPrimaryNode(a)&&a.getHTMLElement().hasAttribute(i.STYLE_PARENT_HTML)},shouldStyleChildHTML:function(a){return!l.isPrimaryNode(a)&&a.getHTMLElement().hasAttribute(i.STYLE_CHILD_HTML)},shouldClickChildInstead:function(a){return!l.isPrimaryNode(a)&&a.getHTMLElement().hasAttribute(i.CLICK_THROUGH)},getFirstHighlightableNode:function(a){a=a.getFirstChild();while(a!=null&&l.isFocusTransparent(a))a=a.getFirstChild();return a},getLastHighlightableNode:function(a){a=a.getLastChild();while(a!=null&&l.isFocusTransparent(a))a=a.getLastChild();return a},getFirstHighlightableNodeInViewport:function(a){__p&&__p();var b=[],c=a.getChildren();for(var d=c.length-1;d>=0;d--)b.push(c[d]);while(b.length!==0){c=b.pop();d=c.getHTMLElement();var e=j.getPos(d).y,f=h.getScrollTop();if(!l.isFocusTransparent(c)&&e-f>0)return c;else if(e+d.clientHeight>f){e=c.getChildren();for(var d=e.length-1;d>=0;d--)b.push(e[d])}}return this.getFirstHighlightableNode(a)},getPrevNode:function(a){__p&&__p();var b=a.getLeftSibling();if(b!=null){b=b;var c=b.getLastChild();while(c!=null)b=c,c=c.getLastChild();return b}c=a.getParent();return c!=null&&c.getParent()!=null?c:null},getNextNode:function(a){__p&&__p();var b=a.getFirstChild();if(b!=null)return b;b=a.getRightSibling();if(b!=null)return b;b=a.getParent();while(b!=null){a=b.getRightSibling();if(a!=null)return a;b=b.getParent()}return null},getPrevNodeFiltered:function(a,b){a=l.getPrevNode(a);while(a!=null){if(b(a))return a;a=l.getPrevNode(a)}return null},getNextNodeFiltered:function(a,b){a=l.getNextNode(a);while(a!=null){if(b(a))return a;a=l.getNextNode(a)}return null},getRootNode:function(a){var b=a;a=a.getParent();while(a!=null)b=a,a=b.getParent();return b},findNodeForElement:function(a,b){__p&&__p();b=[b];var c;while(b.length!==0){c=b.pop();if(c.getHTMLElement()===a)return c;c=c.getChildren();for(var d=0;d<c.length;d++)b.push(c[d])}return null},isFirstNode:function(a){var b=l.getRootNode(a),c=b.getFirstChild();while(c!=null){if(b===a)return!0;b=c;c=c.getFirstChild()}return b===a},getSelectedMenuNode:function(a){__p&&__p();var b=a.getChildren();a=a.getHTMLElement();for(var c=0;c<b.length;c++){var d=b[c].getHTMLElement();while(d!=null&&d!==a){if(g.hasClass(d,"popoverOpen"))return b[c];d=d.parentElement}}return null},findMenuNodeFromElement:function(a,b){__p&&__p();for(var b=b.getChildren(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;var f=e.getHTMLElement();if(f===a||f.compareDocumentPosition(a)&(Node.DOCUMENT_POSITION_CONTAINS|Node.DOCUMENT_POSITION_CONTAINED_BY))return e}return null},getStyledHTMLElement:function(a){__p&&__p();var b=a.getHTMLElement(),c=a.getParent();if(l.shouldStylePrimaryInstead(a)&&c!=null)b=c.getHTMLElement();else if(l.shouldStyleParentHTML(a)){c=a.getHTMLElement().parentElement;c!=null&&(b=c)}else if(l.shouldStyleChildHTML(a)&&a.getHTMLElement().children.length>0){c=a.getHTMLElement().children[0];c!=null&&(b=c)}return b}};e.exports=l}),null);
__d("TraverserUtils",["SpatialNavMutationSpecTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return[{mutationType:g.MOVE_TO_NODE,currentNode:a,nextNode:b}]}e.exports={getSingleMoveToNodeMutation:a}}),null);
__d("HierarchicalTraverser",["KaiOSSpatialNavTraverserKind","SpatialNavDirection","SpatialNavMutationSpecTypes","SpatialNavTreeNodeUtils","TraverserUtils","invariant"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m=k.getSingleMoveToNodeMutation;function n(a,b){if(b==null)return[];if(j.isFocusTransparent(b)){var c;c=(c=b.getPrimaryChildOverride())!=null?c:b.getFirstChild();c!=null||l(0,2529);return m(a,c)}return m(a,b)}function o(a,b){__p&&__p();var c=a.getLeftSibling();if(c!=null)return n(a,c);c=a.getEnforceParent();if(j.isFocusTransparent(c)){var d=c.getLeftSibling();if(d!=null&&!q(a,b)){b=(b=d.getPrimaryChildOverride())!=null?b:d.getLastChild();b!=null||l(0,2529);return m(a,b)}return n(a,c.getLeftSibling())}return m(a,c)}function p(a,b){var c=a.getRightSibling(),d=a.getEnforceParent();return c!=null&&!q(a,b)?m(a,c):n(a,d.getRightSibling())}function q(a,b){var c=a.getEnforceParent(),d=a.getLeftSibling();return(b===h.DOWN||b===h.UP)&&j.isFocusTransparent(c)&&d==null&&j.getRootNode(a)!=c}a={traverserName:g.HIERARCHICAL,onLeft:function(a){a=a.currentNode;if(j.isPrimaryNode(a)){var b,c=a.getLeftSibling();if(c==null)return[];b=(b=(b=c.getPrimaryChildOverride())!=null?b:c.getLastChild())!=null?b:c;return m(a,b)}return o(a,h.LEFT)},onRight:function(a){a=a.currentNode;if(j.isPrimaryNode(a)){var b;b=(b=a.getPrimaryChildOverride())!=null?b:a.getFirstChild();return b==null?n(a,a.getRightSibling()):m(a,b)}return p(a,h.RIGHT)},onUp:function(a){__p&&__p();var b=a.currentNode,c=a.config.wrapAround;a=function(a){if(a.length>0||c!==!0)return a;a=j.getLastHighlightableNode(j.getRootNode(b));return a==null?[]:m(b,a)};if(j.isPrimaryNode(b))return a(n(b,b.getLeftSibling()));if(j.isPrimaryOverrideChild(b)){var d=b.getEnforceParent();return a(n(b,d.getLeftSibling()))}return a(o(b,h.UP))},onDown:function(a){__p&&__p();var b=a.currentNode,c=a.config.wrapAround;a=function(a){if(a.length>0||c!==!0)return a;a=j.getFirstHighlightableNode(j.getRootNode(b));return a==null?[]:m(b,a)};if(j.isPrimaryNode(b))return a(n(b,b.getRightSibling()));if(j.isPrimaryOverrideChild(b)){var d=b.getEnforceParent();return a(n(b,d.getRightSibling()))}return a(p(b,h.DOWN))},onCenterSoftKey:function(a){__p&&__p();a=a.currentNode;if(j.shouldSwallowClick(a))return[];var b=a.getChildren();if(b.length===0)return[{mutationType:i.INTERACT_WITH_NODE,node:a}];if(b.length===1&&!j.shouldPreventClickThrough(a))return[{mutationType:i.INTERACT_WITH_NODE,node:b[0]}];b=(b=a.getPrimaryChildOverride())!=null?b:a.getFirstChild();b!=null||l(0,2529);return m(a,b)}};e.exports=a}),null);
__d("HorizontalTraverser",["KaiOSSpatialNavTraverserKind","SpatialNavMutationSpecTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){a.config.optionalCallback&&a.config.optionalCallback()}a={traverserName:g.HORIZONTAL,onLeft:function(a){__p&&__p();var b=a.currentNode,c=b.getLeftSibling();if(c!=null)return[{mutationType:h.MOVE_TO_NODE,currentNode:b,nextNode:c}];if(a.config.wrapAround!==!0)return[];a=b.getParent();if(a==null)return[];c=a.getLastChild();return c==null?[]:[{mutationType:h.MOVE_TO_NODE,currentNode:b,nextNode:c}]},onUp:function(a){i(a);return[]},onRight:function(a){__p&&__p();var b=a.currentNode,c=b.getRightSibling();if(c!=null)return[{mutationType:h.MOVE_TO_NODE,currentNode:b,nextNode:c}];if(a.config.wrapAround!==!0)return[];a=b.getParent();if(a==null)return[];c=a.getFirstChild();return c==null?[]:[{mutationType:h.MOVE_TO_NODE,currentNode:b,nextNode:c}]},onDown:function(a){i(a);return[]},onCenterSoftKey:function(a){return[{mutationType:h.INTERACT_WITH_NODE,node:a.currentNode}]}};e.exports=a}),null);
__d("LinearTraverser",["KaiOSSpatialNavTraverserKind","SpatialNavMutationSpecTypes","TraverserUtils"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i.getSingleMoveToNodeMutation;function k(a){var b;a=a.getLeftSibling();return a==null?null:(b=a.getLastChild())!=null?b:a}function l(a){var b;a=a.getRightSibling();return a==null?null:(b=a.getFirstChild())!=null?b:a}var m={traverserName:g.LINEAR,onLeft:function(a){a=a.currentNode;var b=k(a);if(b!=null)return j(a,b);b=a.getParent();if(b==null||b.getParent()==null)return[];b=k(b);return b==null?[]:j(a,b)},onUp:function(a){return m.onLeft(a)},onRight:function(a){a=a.currentNode;var b=l(a);if(b!=null)return j(a,b);b=a.getParent();if(b==null||b.getParent()==null)return[];b=l(b);return b==null?[]:j(a,b)},onDown:function(a){return m.onRight(a)},onCenterSoftKey:function(a){return[{mutationType:h.INTERACT_WITH_NODE,node:a.currentNode}]}};e.exports=m}),null);
__d("SpatialNavControllerUtils",["CSS","HierarchicalTraverser","HorizontalTraverser","KaiOSSpatialNavEvents","KaiOSSpatialNavPath","KaiOSSpatialNavTraverserKind","LinearTraverser","SpatialNavControllerTypes","cx","fbt","qex"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r=n.SpatialNavContextState;a={getContextFromState:function(a,b){if(b!=null)return this._getContextFromStateImpl(a,b);else return this._getContextFromStateImpl(a,a.contextState)},getStackContextFromState:function(a){a=a.contextStack;return a.length!==0?a[a.length-1]:null},_getContextFromStateImpl:function(a,b){if(b===r.MENU_CONTEXT&&a.menuContext!=null)return a.menuContext;return b===r.CONTEXT_STACK?this.getStackContextFromState(a):null},shouldInterceptBackKey:function(a){return a.target&&a.target instanceof HTMLElement&&g.hasClass(a.target,"_777b")?!0:!1},isBottomSheetFlyout:function(a){return a.config.contextSigil==="share-popup"||a.config.contextSigil==="story-popup-context-init"||a.config.contextSigil==="story-popup-context"},getTraverserFromType:function(a){switch(a){case l.LINEAR:return m;case l.HORIZONTAL:return i;case l.HIERARCHICAL:default:return h}},updateSoftkeyTray:function(a){a=new CustomEvent(j.UPDATE_TRAY,a);window.dispatchEvent(a)},updateCenterSoftkey:function(a,b){__p&&__p();a=a.contextStack[0].config.pathType;if(a===k.FRIENDS_TAB&&q._("816772"))if(b===r.CONTEXT_STACK){a=p._("Select");a={detail:{centerButtonText:a}};this.updateSoftkeyTray(a)}else if(b===r.MENU_CONTEXT){a={detail:{centerButtonText:""}};this.updateSoftkeyTray(a)}}};e.exports=a}),null);
__d("SpatialNavScrollUtils",["MViewport","SpatialNavTreeNodeUtils","Vector"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=20,k=.25,l=50;function m(a){var b=a.getVScrollParent();return b!=null?function(a){b.scrollTop=a}:function(a){g.scrollTo(0,a)}}function n(a,b){var c=a.getVScrollParent(),d=c?c.offsetHeight:g.getHeight(),e=c?c.scrollTop:g.getScrollTop();c=c?i.getPos(c).y:0;var f=m(a),j=a.getHTMLElement();c=i.getPos(j).y-c;j=j.offsetHeight;var l=c+j,n=Math.ceil(d*k);b.scrollToTopOnFirst===!0&&h.isFirstNode(a)?f(0):c<e+n?d<j+n?f(l-d+n):f(c-n):l>e+d-n&&(d<j+n?f(c-n):f(l-d+n))}function o(a){var b=a.getHScrollParent();if(b==null)return;var c=b.offsetWidth,d=b.scrollLeft,e=a.getHTMLElement(),f=i.getPos(e).x-i.getPos(b).x;e=e.offsetWidth;var g=f+e;f<d+j?b.scrollLeft=f-j:g>d+c-j&&(c<e?b.scrollLeft=f-j:b.scrollLeft=g-c+j);d=a.getParent();d!=null&&d.setPrimaryChildOverride(a)}a={scrollToNodeIfNecessary:function(a,b){if(b.disableScrollToNode===!0)return;n(a,b);o(a)},shouldScrollUpInTheSameNode:function(a){if(a.getVScrollParent())return!1;a=a.getHTMLElement();a=i.getPos(a).y;var b=g.getScrollTop();return a<b},scrollUpInTheSameNodeBySmallIncrement:function(){g.scrollBy(0,-l)},shouldScrollDownInTheSameNode:function(a){if(a.getVScrollParent())return!1;a=a.getHTMLElement();var b=i.getPos(a).y;a=a.offsetHeight;b=b+a;a=g.getScrollTop()+g.getScreenHeight();return b>a},scrollDownInTheSameNodeBySmallIncrement:function(){g.scrollBy(0,l)},isVScrollParent:function(a){a=window.getComputedStyle(a);return a.overflow==="auto"||a.overflow==="scroll"||a.overflowY==="auto"||a.overflowY==="scroll"},isHScrollParent:function(a){a=window.getComputedStyle(a);return a.overflow==="auto"||a.overflow==="scroll"||a.overflowX==="auto"||a.overflowX==="scroll"}};e.exports=a}),null);
__d("MutationUtils",["DataStore","KaiOSHTMLElementUtils","SpatialNavControllerTypes","SpatialNavControllerUtils","SpatialNavigationAttribute","SpatialNavScrollUtils","SpatialNavTreeNodeUtils","cx","gkx"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){"use strict";__p&&__p();var p=i.SpatialNavContextState;function q(a){return h.isTextfieldInput(a)||h.isLink(a)||h.isNTElement(a)||h.isFileUploadElement(a)||a.hasAttribute(k.FOCUS_ON_HIGHLIGHT_ELEMENT)}var r={SPATIAL_NAV_ELEMENT_FOCUS_KEY:"spatial_nav_element_focus_key",maybeFocusNode:function(a){a=a.getHTMLElement();q(a)&&r.focusAndTagElement(a)},focusAndTagElement:function(a){o("800552")&&g.set(a,r.SPATIAL_NAV_ELEMENT_FOCUS_KEY,!0),a.focus()},unhighlightNode:function(a){var b=m.getStyledHTMLElement(a);b.classList.remove("_6-_f");o("730367")&&b.classList.remove("_76fa");m.isPrimaryNode(a)&&!m.isFocusTransparent(a)&&b.classList.remove("_79wz")},unhighlightStackContext:function(a){a=j.getStackContextFromState(a);if(a==null)return;a=a.currentNode;a.getHTMLElement().blur();r.unhighlightNode(a)},highlightNode:function(a){var b=m.getStyledHTMLElement(a);b.classList.add("_6-_f");o("730367")&&b.classList.add("_76fa");m.isPrimaryNode(a)&&!m.isFocusTransparent(a)&&b.classList.add("_79wz")},moveToNewNode:function(a,b,c){l.scrollToNodeIfNecessary(b,c);c=a.getHTMLElement();c!==b.getHTMLElement()&&(a.getHTMLElement().blur(),r.maybeFocusNode(b),r.unhighlightNode(a),r.highlightNode(b))},getNewControllerState:function(a,b){__p&&__p();if(a.contextState===p.MENU_CONTEXT&&a.menuContext!=null){var c={traverser:a.menuContext.traverser,currentNode:b,config:a.menuContext.config,mutationObserver:a.menuContext.mutationObserver};return{contextStack:a.contextStack,menuContext:c,contextState:a.contextState}}c=j.getStackContextFromState(a);if(c==null)return a;b={traverser:c.traverser,currentNode:b,config:c.config,mutationObserver:c.mutationObserver};c=[].concat(a.contextStack);c.splice(-1,1,b);return{contextStack:c,menuContext:a.menuContext,contextState:a.contextState}}};e.exports=r}),null);
__d("HierarchicalTreeOptimizer",["SpatialNavTreeNodeUtils"],(function(a,b,c,d,e,f,g){"use strict";a={validateTreeStructure:function(a){a=g.getRootNode(a);var b=a.getChildren();b.forEach(function(a,c){a.hasChildren()||b.splice(c,1)})}};e.exports=a}),null);
__d("SpatialNavTreeNode",["invariant"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){this.$1=a,this.$2=[],this.$3=null}var b=a.prototype;b.getHTMLElement=function(){return this.$1};b.addChild=function(a){this.$2.push(a),a.setParent(this)};b.getChildren=function(){return this.$2};b.removeChild=function(a){a=this.$2.indexOf(a);a!==-1&&this.$2.splice(a,1)};b.insertChildren=function(a,b){var c;(c=this.$2).splice.apply(c,[a,0].concat(b))};b.setParent=function(a){this.$3=a};b.getParent=function(){return this.$3};b.getEnforceParent=function(){this.$3!=null||g(0,12374);return this.$3};b.hasChildren=function(){return this.$2.length!==0};b.setVScrollParent=function(a){this.$4=a};b.getVScrollParent=function(){return this.$4};b.setHScrollParent=function(a){this.$5=a};b.getHScrollParent=function(){return this.$5};b.setPrimaryChildOverride=function(a){this.$6=a};b.getPrimaryChildOverride=function(){return this.$6};b.getLeftSibling=function(){if(this.$3==null)return null;var a=this.$3.getChildren(),b=a.indexOf(this);return b===-1||b===0?null:a[b-1]};b.getRightSibling=function(){if(this.$3==null)return null;var a=this.$3.getChildren(),b=a.indexOf(this);return b===-1||b===a.length-1?null:a[b+1]};b.getFirstChild=function(){return this.$2.length===0?null:this.$2[0]};b.getLastChild=function(){return this.$2.length===0?null:this.$2[this.$2.length-1]};return a}();e.exports=a}),null);
__d("SpatialNavTreeBuilder",["Event","KaiOSHTMLElementUtils","SpatialNavigationAttribute","SpatialNavScrollUtils","SpatialNavTreeNode","SpatialNavTreeNodeUtils"],(function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();a={buildSpatialNavTree:function(a,b,c){__p&&__p();var d=new k(a);c=a.hasAttribute(i.SCROLL_PARENT)&&j.isVScrollParent(a)?a:c;b=a.hasAttribute(i.SCROLL_PARENT)&&j.isHScrollParent(a)?a:b;var e=[{element:a,parentNode:d,vScrollParent:c,hScrollParent:b}],f=new Set(),m,n,o,p=function(){__p&&__p();a=e.pop();var d=a.element;c=a.parentNode;b=a.vScrollParent;o=a.hScrollParent;if(d.hasAttribute(i.BLACKLIST_ELEMENT))return"continue";n=h.isSpatialNavElement(d)?new k(d):null;n!=null&&(l.isPrimaryNode(n)&&l.isPrimaryNode(c)&&f.add(c),n.setParent(c),c.addChild(n),c=n,b!=null&&n.setVScrollParent(b),o!=null&&n.setHScrollParent(o),d.hasAttribute(i.FILE_UPLOAD_ELEMENT)&&g.listen(d,"keypress",function(a){a.key==="Enter"&&d.click()}));d.hasAttribute(i.SCROLL_PARENT)&&(b=j.isVScrollParent(d)?d:b,o=j.isHScrollParent(d)?d:o);if(n!=null&&!l.isPrimaryNode(n))return"continue";m=d.children;for(var p=d.childElementCount-1;p>=0;p--)e.push({element:m[p],parentNode:c,vScrollParent:b,hScrollParent:o})};while(e.length!==0){var q=p();if(q==="continue")continue}f.forEach(function(a){__p&&__p();var b=a.getParent();if(b==null)return;var c=b.getChildren().indexOf(a);if(c===-1)return;var d=a.getChildren();for(var e=0;e<d.length;e++)d[e].setParent(b);b.removeChild(a);b.insertChildren(c,d)});return d}};e.exports=a}),null);
__d("RebuildTreeMutation",["HierarchicalTreeOptimizer","KaiOSSpatialNavTraverserKind","MutationUtils","SpatialNavControllerUtils","SpatialNavTreeBuilder","SpatialNavTreeNodeUtils","keyMirror"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m){"use strict";__p&&__p();var n=m({HIGHLIGHT_FIRST:null,HIGHLIGHT_CLOSEST:null});function o(a,b){var c=l.findNodeForElement(a.getHTMLElement(),b);if(c==null){a=a.getParent();if(a!=null){var d=a.getRightSibling();d!=null&&l.isFocusTransparent(a)&&(d=d.getFirstChild(),d!=null&&(c=l.findNodeForElement(d.getHTMLElement(),b)))}}return c}function p(a,b,c,d){__p&&__p();var e=l.getRootNode(a);e=k.buildSpatialNavTree(e.getHTMLElement());c.traverserName===h.HIERARCHICAL&&d.validateTree===!0&&g.validateTreeStructure(e);c=b;c==null&&(c=n.HIGHLIGHT_CLOSEST);if(e==null)return null;d=null;c===n.HIGHLIGHT_CLOSEST&&(d=o(a,e));(c===n.HIGHLIGHT_FIRST||d==null)&&(d=l.getFirstHighlightableNode(e));return d}a={mutateState:function(a,b){__p&&__p();var c=j.getStackContextFromState(a);if(c==null||c.mutationObserver!=null)return a;var d=c.currentNode;b=p(d,b.highlightConfig,c.traverser,c.config);if(b==null)return a;i.moveToNewNode(d,b,c.config);d={traverser:c.traverser,currentNode:b,config:c.config,mutationObserver:c.mutationObserver};b=[].concat(a.contextStack);b.splice(-1,1,d);return{contextStack:b,menuContext:a.menuContext,contextState:a.contextState}}};e.exports={RebuildTreeMutation:a,RebuildHighlightConfig:n}}),null);
__d("BuildMenuMutation",["MutationUtils","SpatialNavControllerTypes","SpatialNavTreeBuilder","SpatialNavTreeNodeUtils"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=h.SpatialNavContextState;function l(a,b){if(a.contextState===k.CONTEXT_STACK&&a.contextStack.length!==0){a=a.contextStack[a.contextStack.length-1].currentNode;a.getHTMLElement().blur();g.unhighlightNode(a)}g.maybeFocusNode(b);g.highlightNode(b)}a={mutateState:function(a,b){__p&&__p();var c=i.buildSpatialNavTree(b.rootElement);if(c==null)return a;var d=null;b.config.focusMenuElementOnFirst!=null&&(d=j.findMenuNodeFromElement(b.config.focusMenuElementOnFirst,c));d==null&&(d=j.getFirstHighlightableNode(c));if(d==null)return a;c=a.contextState;b.config.shouldFocusMenuOnSetup===!0&&(l(a,d),c=k.MENU_CONTEXT);return{contextStack:a.contextStack,menuContext:{currentNode:d,traverser:b.traverser,config:b.config,mutationObserver:null},contextState:c}}};e.exports=a}),null);
__d("ClearContextMutation",["MutationUtils","SpatialNavControllerTypes"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h.SpatialNavContextState;a={mutateState:function(a,b){__p&&__p();if(b.contextStateToClear===i.MENU_CONTEXT&&a.menuContext!=null){var c=a.menuContext.currentNode;c.getHTMLElement().blur();g.unhighlightNode(c);c=b.newContextState!=null?b.newContextState:a.contextStack.length===0?i.NO_CONTEXT:i.CONTEXT_STACK;return{contextStack:a.contextStack,menuContext:null,contextState:c}}if(b.contextStateToClear===i.CONTEXT_STACK&&a.contextStack.length!==0){c=a.contextStack;var d=c[c.length-1].currentNode;d.getHTMLElement().blur();g.unhighlightNode(d);for(var d=c,c=Array.isArray(d),e=0,d=c?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=d.length)break;f=d[e++]}else{e=d.next();if(e.done)break;f=e.value}f=f;f.mutationObserver!=null&&f.mutationObserver.release()}f=b.newContextState!=null?b.newContextState:a.menuContext==null?i.NO_CONTEXT:i.MENU_CONTEXT;return{contextStack:[],menuContext:a.menuContext,contextState:f}}return a}};e.exports=a}),null);
__d("HighlightNodeMutation",["MutationUtils","SpatialNavControllerUtils","SpatialNavScrollUtils","SpatialNavTreeNodeUtils"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a={mutateState:function(a,b){__p&&__p();var c=h.getContextFromState(a);if(c==null)return a;var d=c.currentNode;b=b.targetElement;if(d.getHTMLElement()===b)return a;b=j.findNodeForElement(b,j.getRootNode(d));if(b==null)return a;i.scrollToNodeIfNecessary(b,c.config);d&&(d.getHTMLElement().blur(),g.unhighlightNode(d));g.maybeFocusNode(b);g.highlightNode(b);return g.getNewControllerState(a,b)}};e.exports=a}),null);
__d("InteractWithNodeMutation",["KaiOSHTMLElementUtils","MutationUtils","SpatialNavTreeNodeUtils","getActiveElement"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function k(a){return a instanceof HTMLSelectElement||a instanceof HTMLInputElement&&a.type==="date"}a={mutateState:function(a,b){var c=b.node.getHTMLElement();k(c)&&h.focusAndTagElement(c);g.isTextfieldInput(c)&&j(document)!==c&&h.focusAndTagElement(c);if(i.shouldClickChildInstead(b.node)){b=g.getFirstLink(c);b!=null&&b.click()}else c.click();return a}};e.exports=a}),null);
__d("MoveToNodeMutation",["MutationUtils","SpatialNavControllerUtils","SpatialNavScrollUtils"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a={mutateState:function(a,b){__p&&__p();var c=b.currentNode;b=b.nextNode;var d=h.getContextFromState(a);if(d==null)return a;i.scrollToNodeIfNecessary(b,d.config);c.getHTMLElement().blur();g.maybeFocusNode(b);g.unhighlightNode(c);g.highlightNode(b);return g.getNewControllerState(a,b)}};e.exports=a}),null);
__d("PopContextMutation",["MutationUtils","SpatialNavControllerTypes","SpatialNavControllerUtils"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h.SpatialNavContextState;a={mutateState:function(a){g.unhighlightStackContext(a);var b=a.contextStack.length<=1&&a.contextState===j.CONTEXT_STACK?j.NO_CONTEXT:a.contextState,c=a.contextStack.length;if(b===j.CONTEXT_STACK&&c>=2){c=a.contextStack[c-2].currentNode;g.highlightNode(c)}c=i.getStackContextFromState(a);c!=null&&c.mutationObserver!=null&&c.mutationObserver.release();return{contextStack:a.contextStack.slice(0,-1),menuContext:a.menuContext,contextState:b}}};e.exports=a}),null);
__d("SpatialNavDOMMutationObserver",["SpatialNavMutationSpecTypes"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h={attributes:!0,attributeFilter:["style"],attributeOldValue:!0,childList:!0,subtree:!0},i=new RegExp(/display:\s*none/);a=function(){__p&&__p();function a(a,b,c,d){__p&&__p();var e=this;this.$5=function(a){__p&&__p();var b=e.$2,c=e.$3,d=e.$4;if(b==null||c==null)return;var f=[];for(var a=a,h=Array.isArray(a),i=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=a.length)break;j=a[i++]}else{i=a.next();if(i.done)break;j=i.value}j=j;var k=j.target;if(!(k instanceof HTMLElement))continue;if(j.type==="attributes"){if(e.$6(j))f.push({domMutationType:"ADD",addedElement:k});else if(e.$7(j)){var l=k.parentNode;l instanceof HTMLElement&&f.push({domMutationType:"REMOVE",removedElement:k,removedElementParent:l})}}else if(j.type==="childList"){for(var l=j.removedNodes,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}o=o;o instanceof HTMLElement&&f.push({domMutationType:"REMOVE",removedElement:o,removedElementParent:k})}for(var o=j.addedNodes,n=Array.isArray(o),m=0,o=n?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(n){if(m>=o.length)break;l=o[m++]}else{m=o.next();if(m.done)break;l=m.value}k=l;k instanceof HTMLElement&&f.push({domMutationType:"ADD",addedElement:k})}}}f.length!==0&&c([{mutationType:g.REBUILD_PARTIAL_TREE,pathType:b,domMutations:f,highlightNext:d}])};this.$2=b;this.$3=c;this.$4=d;this.$1=new MutationObserver(this.$5);this.$1.observe(a,h)}var b=a.prototype;b.release=function(){this.$1!=null&&this.$1.disconnect(),this.$1=null,this.$2=null,this.$3=null};b.$6=function(a){var b=a.oldValue;a=a.target;return b!=null&&i.test(b)&&a instanceof HTMLElement&&a.style.display===""};b.$7=function(a){var b=a.oldValue;a=a.target;return(b==null||!i.test(b))&&a instanceof HTMLElement&&a.style.display==="none"};return a}();e.exports=a}),null);
__d("PushContextMutation",["HierarchicalTreeOptimizer","KaiOSSpatialNavPath","KaiOSSpatialNavTraverserKind","MutationUtils","SpatialNavControllerTypes","SpatialNavControllerUtils","SpatialNavDOMMutationObserver","SpatialNavScrollUtils","SpatialNavTreeBuilder","SpatialNavTreeNodeUtils","fbt","qex"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s=k.SpatialNavContextState;function t(a,b,c){n.scrollToNodeIfNecessary(b,c);c=l.getStackContextFromState(a);c!=null&&c.currentNode.getHTMLElement().blur();j.maybeFocusNode(b);j.highlightNode(b)}a={mutateState:function(a,b){__p&&__p();var c=o.buildSpatialNavTree(b.rootElement);if(c==null)return a;var d=null;b.config.focusMenuElementOnFirst!=null&&(d=p.findMenuNodeFromElement(b.config.focusMenuElementOnFirst,c));d==null&&(d=b.config.pathType===h.BOTTOM_SHEET||b.config.pathType===h.LIKE_REACTION_FLYOUT||b.config.pathType===h.MOVERLAY?p.getFirstHighlightableNode(c):p.getFirstHighlightableNodeInViewport(c));if(d==null)return a;var e=s.CONTEXT_STACK;a.contextState===s.MENU_CONTEXT&&a.menuContext!=null&&p.getRootNode(a.menuContext.currentNode).getHTMLElement()!==b.rootElement?e=s.MENU_CONTEXT:(j.unhighlightStackContext(a),t(a,d,b.config));b.traverser.traverserName===i.HIERARCHICAL&&b.config.validateTree===!0&&g.validateTreeStructure(c);c=null;b.config.observeDOMChanges===!0&&(c=new m(b.rootElement,b.config.pathType,b.stateUpdateFunction,b.config.highlightNext));if(b.config.pathType===h.FRIENDS_TAB&&e===s.CONTEXT_STACK&&r._("816772")){var f=q._("Select");f={detail:{centerButtonText:f}};l.updateSoftkeyTray(f)}else{f={detail:{centerButtonText:""}};l.updateSoftkeyTray(f)}return{contextStack:[].concat(a.contextStack,[{currentNode:d,traverser:b.traverser,config:b.config,mutationObserver:c}]),menuContext:a.menuContext,contextState:e}}};e.exports=a}),null);
__d("SpatialNavTreeUpdater",["KaiOSHTMLElementUtils","SpatialNavigationAttribute","SpatialNavScrollUtils","SpatialNavTreeBuilder","SpatialNavTreeNodeUtils"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(a,b){b=b.parentNode;a=a.getHTMLElement().parentNode;var c=null,d=null;while(b!=null&&b!==a&&b!==document&&b instanceof HTMLElement&&(c==null||d==null))b.hasAttribute(h.SCROLL_PARENT)&&(c==null&&(c=i.isVScrollParent(b)?b:null),d==null&&(d=i.isHScrollParent(b)?b:null)),b=b.parentNode;return{hScrollParent:d,vScrollParent:c}}function m(a,b){__p&&__p();a=l(a,b);b=j.buildSpatialNavTree(b,a.hScrollParent,a.vScrollParent);a=[];for(var b=b.getChildren(),c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e.setParent(null);a.push(e)}return a}function n(a,b){b=b;while(b!=null&&b!==document&&b instanceof HTMLElement){if(b===a.getHTMLElement()&&g.isVisible(b)||g.isSpatialNavElement(b))return k.findNodeForElement(b,a);b=b.parentNode}return null}a={maybeAddNodes:function(a,b){__p&&__p();var c=m(a,b);if(c.length===0)return[];a=n(a,b.parentNode);if(a==null)return[];var d=a.getChildren(),e;for(e=0;e<d.length;e++){var f=d[e].getHTMLElement();if(f.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_PRECEDING)break}d.splice.apply(d,[e,0].concat(c));for(var f=c,b=Array.isArray(f),d=0,f=b?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(b){if(d>=f.length)break;e=f[d++]}else{d=f.next();if(d.done)break;e=d.value}e=e;e.setParent(a)}return c},maybeRemoveNodes:function(a,b,c,d){__p&&__p();a=n(a,c);c={removedNodes:[],removedCurrentNode:!1,closestPrevNode:null,closestNextNode:null};if(a==null)return c;a=a.getChildren();var e=0,f;for(f=0;f<a.length;f++){var h=a[f].getHTMLElement();if(b.contains(h))e+=1;else if(e!==0)break}if(e===0)return c;h=b.contains(d.getHTMLElement());c=f-e;b=h?k.getPrevNode(a[c]):null;d=k.getNextNodeFiltered(a[f-1],function(a){return k.isPrimaryNode(a)&&g.isVisible(a.getHTMLElement())});if(d!=null&&k.isFocusTransparent(d)){d=(f=d.getPrimaryChildOverride())!=null?f:d.getFirstChild()}return{removedNodes:a.splice(c,e),removedCurrentNode:h,closestPrevNode:b,closestNextNode:d}}};e.exports=a}),null);
__d("RebuildPartialTreeMutation",["HierarchicalTreeOptimizer","KaiOSSpatialNavTraverserKind","MutationUtils","SpatialNavTreeNodeUtils","SpatialNavTreeUpdater"],(function(a,b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();function l(a,b){a=a.contextStack;for(var c=a.length-1;c>=0;c--){var d=a[c];if(d.config.pathType===b)return d}return null}function m(a,b){if(b==null)return j.getFirstHighlightableNode(a);else{a=j.getNextNodeFiltered(b,function(a){return!j.isFocusTransparent(a)});return(a=a)!=null?a:b}}a={mutateState:function(a,b){__p&&__p();var c=l(a,b.pathType);if(c==null)return a;var d=j.getRootNode(c.currentNode),e=!1,f=null,n=null;for(var o=b.domMutations,p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}r=r;switch(r.domMutationType){case"ADD":k.maybeAddNodes(d,r.addedElement);break;case"REMOVE":r=k.maybeRemoveNodes(d,r.removedElement,r.removedElementParent,c.currentNode);r.removedCurrentNode&&(f=r.closestPrevNode,n=r.closestNextNode,e=!0);break;default:}}if(!e)return a;r=null;b.highlightNext===!0&&n!==null?r=n:r=m(d,f);q=a.contextStack;p=q.indexOf(c);if(p===-1||r==null)return a;o=c.currentNode;i.moveToNewNode(o,r,c.config);e=o.getParent();if(e!=null&&e.getPrimaryChildOverride()===o){b=r.getParent()===e?r:null;e.setPrimaryChildOverride(b)}c.traverser.traverserName===h.HIERARCHICAL&&c.config.validateTree===!0&&g.validateTreeStructure(d);n=[].concat(q.slice(0,p),[babelHelpers["extends"]({},c,{currentNode:r})],q.slice(p+1));return babelHelpers["extends"]({},a,{contextStack:n})}};e.exports=a}),null);
__d("RemoveContextMutation",["MutationUtils","SpatialNavControllerTypes","SpatialNavTreeNodeUtils"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=h.SpatialNavContextState;a={mutateState:function(a,b){__p&&__p();if(a.contextStack==null||a.contextStack.length===0)return a;for(var c=a.contextStack.length-1;c>=0;c--){var d=a.contextStack[c],e=d.currentNode,f=i.getRootNode(e).getHTMLElement(),h=a.contextStack[c].config.pathType;if(f===b.rootElement||h===b.pathType){e.getHTMLElement().blur();g.unhighlightNode(e);f=a.contextStack.length===1&&a.contextState===j.CONTEXT_STACK?j.NO_CONTEXT:a.contextState;d.mutationObserver!=null&&d.mutationObserver.release();return{contextStack:a.contextStack.slice(0,c).concat(a.contextStack.slice(c+1)),menuContext:a.menuContext,contextState:f}}}return a}};e.exports=a}),null);
__d("SwitchContextMutation",["MutationUtils","SpatialNavControllerTypes","SpatialNavControllerUtils","SpatialNavScrollUtils"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=h.SpatialNavContextState;a={mutateState:function(a,b){__p&&__p();if(a.contextState===b.switchToContextState)return a;var c={contextStack:a.contextStack,menuContext:a.menuContext,contextState:b.switchToContextState},d=i.getContextFromState(c);if(b.switchToContextState!==k.NO_CONTEXT&&d==null)return a;a=b.currentNode;a!=null&&(a.getHTMLElement().blur(),g.unhighlightNode(a));if(d!=null){a=b.nextNode!=null?b.nextNode:d.currentNode;j.scrollToNodeIfNecessary(a,d.config);g.maybeFocusNode(a);g.highlightNode(a);c=g.getNewControllerState(c,a)}return c}};e.exports=a}),null);
__d("SpatialNavMutator",["BuildMenuMutation","ClearContextMutation","HighlightNodeMutation","InteractWithNodeMutation","MoveToNodeMutation","PopContextMutation","PushContextMutation","RebuildPartialTreeMutation","RebuildTreeMutation","RemoveContextMutation","SpatialNavMutationSpecTypes","SwitchContextMutation"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();var s=o.RebuildTreeMutation,t={mutateState:function(a,b){var c=a;b.forEach(function(a){c=t._applyMutation(c,a)});return c},_applyMutation:function(a,b){__p&&__p();switch(b.mutationType){case q.PUSH_CONTEXT:return m.mutateState(a,b);case q.POP_CONTEXT:return l.mutateState(a);case q.MOVE_TO_NODE:return k.mutateState(a,b);case q.INTERACT_WITH_NODE:return j.mutateState(a,b);case q.REBUILD_TREE:return s.mutateState(a,b);case q.BUILD_MENU:return g.mutateState(a,b);case q.HIGHLIGHT_NODE:return i.mutateState(a,b);case q.SWITCH_CONTEXT:return r.mutateState(a,b);case q.CLEAR_CONTEXT:return h.mutateState(a,b);case q.REMOVE_CONTEXT:return p.mutateState(a,b);case q.REBUILD_PARTIAL_TREE:return n.mutateState(a,b);default:return a}}};e.exports=t}),null);
__d("SpatialNavPathUtils",["KaiOSSpatialNavPath","URI"],(function(a,b,c,d,e,f,g,h){"use strict";var i=Object.freeze({"/":g.NEWSFEED,"/kaiosapp/jio/home":g.NEWSFEED,"/kaiosapp/jio/home/startup":g.NEWSFEED,"/home.php":g.NEWSFEED,"/index.php":g.NEWSFEED,"/friends/center/kaios":g.FRIENDS_TAB,"/notifications.php":g.NOTIFICATION,"/kaiosapp/playground":g.PLAYGROUND,"/kaiosapp/playground/visibility":g.PLAYGROUND_VISIBILITY,"/login/save-device":g.SAVE_DEVICE_PAGE});a={getSpatialNavPathType:function(a){a=new h(a).getPath();a.length>1&&a[a.length-1]==="/"&&(a=a.slice(0,a.length-1));return i[a]!=null?i[a]:g.NONE}};e.exports=a}),null);
__d("SpatialNavController",["Promise","regeneratorRuntime","DataStore","Event","KaiOSConnectionHelper","KaiOSSendMessageUtil","KaiOSSpatialNavEvents","KaiOSSpatialNavPath","KaiOSSpatialNavTraverserKind","MFlyout","MOverlay","MutationUtils","RebuildTreeMutation","SpatialNavControllerUtils","SpatialNavigationAttribute","SpatialNavMutationSpecTypes","SpatialNavMutator","SpatialNavPathUtils","SpatialNavScrollUtils","SpatialNavTreeNodeUtils","Stratcom","SubscriptionsHandler","URI","fbt","gkx","promiseDone","SpatialNavControllerTypes"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G){"use strict";__p&&__p();var H=s.RebuildHighlightConfig,I=new Map([["nav_mode","spatial"]]),J=new Map([["nav_mode","cursor"]]),K=G.SpatialNavContextState;a=function(){__p&&__p();function a(){__p&&__p();var a=this;this.$1=!1;this.$3=null;this.$4=null;this.$5=[];this.$6=!1;this.$12=function(b,c){c===void 0&&(c=!1),F(g.resolve().then(function(a){var b=this;this.$2=w.mutateState(this.$2,a);a.forEach(function(a){a.mutationType===v.PUSH_CONTEXT&&A.invoke(m.INIT_COMPLETE),b.$15(a,b.$2)&&c&&b.enableSpatialNav()})}.bind(a,b)))};this.$2={contextStack:[],menuContext:null,contextState:K.NO_CONTEXT}}var b=a.prototype;b.enableSpatialNav=function(){this.$7(I),this.$1=!0,this.$8(),this.$9(),this.$10()};b.disableSpatialNav=function(a,b){__p&&__p();var c;return h.async(function(d){__p&&__p();while(1)switch(d.prev=d.next){case 0:b===void 0&&(b=!1);this.$7(J);this.$1=!1;this.$3!=null&&this.$3.release();b&&this.$11();d.next=7;return h.awrap(this.getCurrentState());case 7:c=d.sent,a&&this.clearContext(c.contextState,K.NO_CONTEXT);case 9:case"end":return d.stop()}},null,this)};b.disableSpatialNavForAll=function(){this.disableSpatialNav(!1),this.clearContext(K.MENU_CONTEXT),this.clearContext(K.CONTEXT_STACK)};b.isSpatialNavEnabled=function(){return this.$1};b.setupNavOnContainer=function(a,b,c){c===void 0&&(c=!1);var d=t.getTraverserFromType(b.traverserType);b.isMenu===!0?this.$12([{mutationType:v.BUILD_MENU,rootElement:a,traverser:d,config:b}],c):this.$12([{mutationType:v.PUSH_CONTEXT,rootElement:a,traverser:d,config:b,stateUpdateFunction:this.$12}],c)};b.$7=function(a){l.postMessage(k.hostWindow,l.Type.TOGGLE_SPATIAL_NAV,a)};b.rebuildSpatialNavTree=function(a){this.$12([{mutationType:v.REBUILD_TREE,highlightConfig:a}])};b.handleFocusChange=function(a){if(E("800552")&&i.get(a,r.SPATIAL_NAV_ELEMENT_FOCUS_KEY,!1)){i.remove(a,r.SPATIAL_NAV_ELEMENT_FOCUS_KEY);return}this.$12([{mutationType:v.HIGHLIGHT_NODE,targetElement:a}])};b.getCurrentState=function(){var a=this;return h.async(function(b){while(1)switch(b.prev=b.next){case 0:return b.abrupt("return",g.resolve().then(function(){return a.$2}));case 1:case"end":return b.stop()}},null,this)};b.$13=function(){var a;return h.async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return h.awrap(this.getCurrentState());case 2:a=b.sent;return b.abrupt("return",t.getContextFromState(a));case 4:case"end":return b.stop()}},null,this)};b.getCurrentStackContext=function(){var a;return h.async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return h.awrap(this.getCurrentState());case 2:a=b.sent;return b.abrupt("return",t.getContextFromState(a,K.CONTEXT_STACK));case 4:case"end":return b.stop()}},null,this)};b.getCurrentContextState=function(){var a;return h.async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return h.awrap(this.getCurrentState());case 2:a=b.sent;return b.abrupt("return",a.contextState);case 4:case"end":return b.stop()}},null,this)};b.handleKeyDown=function(a){__p&&__p();var b,c,d,e,f;return h.async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:g.next=2;return h.awrap(this.getCurrentState());case 2:b=g.sent;c=t.getContextFromState(b);if(!(c==null)){g.next=6;break}return g.abrupt("return");case 6:d=null;g.t0=a.key;g.next=g.t0==="ArrowLeft"?10:g.t0==="ArrowRight"?12:g.t0==="ArrowUp"?14:g.t0==="ArrowDown"?19:g.t0==="Enter"?24:26;break;case 10:d=c.traverser.onLeft;return g.abrupt("break",26);case 12:d=c.traverser.onRight;return g.abrupt("break",26);case 14:if(!y.shouldScrollUpInTheSameNode(c.currentNode)){g.next=17;break}y.scrollUpInTheSameNodeBySmallIncrement();return g.abrupt("return");case 17:d=c.traverser.onUp;return g.abrupt("break",26);case 19:if(!y.shouldScrollDownInTheSameNode(c.currentNode)){g.next=22;break}y.scrollDownInTheSameNodeBySmallIncrement();return g.abrupt("return");case 22:d=c.traverser.onDown;return g.abrupt("break",26);case 24:d=c.traverser.onCenterSoftKey;return g.abrupt("break",26);case 26:if(!(d!=null)){g.next=36;break}e=d(c);if(!(e.length!==0)){g.next=32;break}this.$12(e);g.next=36;break;case 32:g.next=34;return h.awrap(this.$14(b,a.key));case 34:f=g.sent,f.length!==0?this.$12(f):a.key==="ArrowUp"&&c.config.hybridMode===!0&&(r.unhighlightNode(c.currentNode),this.disableSpatialNav(!1,!0));case 36:case"end":return g.stop()}},null,this)};b.popContext=function(){this.$12([{mutationType:v.POP_CONTEXT}])};b.removeContextByElement=function(a){this.$12([{mutationType:v.REMOVE_CONTEXT,rootElement:a}])};b.removeContextByPath=function(a){this.$12([{mutationType:v.REMOVE_CONTEXT,pathType:a}])};b.clearContext=function(a,b){this.$12([{mutationType:v.CLEAR_CONTEXT,contextStateToClear:a,newContextState:b}])};b.switchContext=function(a,b,c){__p&&__p();var d;return h.async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return h.awrap(this.getCurrentState());case 2:d=e.sent;if(!(a===K.MENU_CONTEXT&&d.menuContext==null||a===K.CONTEXT_STACK&&d.contextStack.length===0)){e.next=5;break}return e.abrupt("return");case 5:this.$12([{mutationType:v.SWITCH_CONTEXT,switchToContextState:a,currentNode:b,nextNode:c}]);case 6:case"end":return e.stop()}},null,this)};b.$15=function(a,b){return a.mutationType===v.PUSH_CONTEXT||a.mutationType===v.BUILD_MENU&&b.contextState===K.MENU_CONTEXT};b.$14=function(a,b){__p&&__p();var c,d,e,f;return h.async(function(g){__p&&__p();while(1)switch(g.prev=g.next){case 0:c=a.menuContext;if(!(a.contextState===K.MENU_CONTEXT&&c!=null&&b==="ArrowDown")){g.next=21;break}d=location.href;if(!(d!=null)){g.next=10;break}e=new C(d).getQueryData().soft;if(!(e==="search")){g.next=10;break}r.unhighlightNode(c.currentNode);c.currentNode.getHTMLElement().blur();this.disableSpatialNav(!1);return g.abrupt("return",[]);case 10:if(!(a.contextStack.length!==0)){g.next=15;break}t.updateCenterSoftkey(a,K.CONTEXT_STACK);return g.abrupt("return",[{mutationType:v.SWITCH_CONTEXT,switchToContextState:K.CONTEXT_STACK,currentNode:c.currentNode}]);case 15:this.disableSpatialNav(!1);g.next=18;return h.awrap(this.switchContext(K.NO_CONTEXT,c.currentNode));case 18:return g.abrupt("return",[]);case 19:g.next=26;break;case 21:if(!(a.contextState===K.CONTEXT_STACK&&a.contextStack.length===1&&(b==="ArrowUp"||b==="ArrowLeft"))){g.next=26;break}if(!(c!=null)){g.next=26;break}t.updateCenterSoftkey(a,K.MENU_CONTEXT);f=z.getSelectedMenuNode(z.getRootNode(c.currentNode));return g.abrupt("return",[{mutationType:v.SWITCH_CONTEXT,switchToContextState:K.MENU_CONTEXT,currentNode:a.contextStack[a.contextStack.length-1].currentNode,nextNode:f}]);case 26:return g.abrupt("return",[]);case 27:case"end":return g.stop()}},null,this)};b.$8=function(){__p&&__p();var a=this;this.$3!=null&&this.$3.release();this.$3=new B();this.$3.addSubscriptions(A.listen([m.REFRESH,"m:more_item_automatic:items_loaded"],null,function(b){b=b.getData();Object.prototype.hasOwnProperty.call(H,b)||(b=null);a.rebuildSpatialNavTree(b)}),A.listen("Layer:show",null,function(b){__p&&__p();if(a.isSpatialNavEnabled()==!1)return;b=b.getData();if(b instanceof q)a.setupNavOnContainer(b.getRoot(),{traverserType:o.LINEAR,pathType:n.MOVERLAY});else if(b instanceof p)if(b.config.contextSigil==="like-reaction-flyout")a.setupNavOnContainer(b.getContentRoot(),{traverserType:o.HORIZONTAL,pathType:n.LIKE_REACTION_FLYOUT,optionalCallback:function(a){return function(){a.isShown()&&typeof a.hide==="function"&&a.hide()}}(b),wrapAround:!1});else if(t.isBottomSheetFlyout(b)){b.getContentRoot().setAttribute(u.SCROLL_PARENT,!0);a.setupNavOnContainer(b.getContentRoot(),{traverserType:o.LINEAR,pathType:n.BOTTOM_SHEET,backKeyCallback:function(a){return function(){a.isShown()&&typeof a.hide==="function"&&a.hide()}}(b)});b=D._("Close");b={detail:{leftButtonText:b,leftButtonEvent:"close_bottom_sheet"}};t.updateSoftkeyTray(b)}}),A.listen("m:layer:hide",null,function(a){__p&&__p();var b,c,d,e,f,g;return h.async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:b=a.getData();c=null;b instanceof p?c=b.getContentRoot():b instanceof q&&(c=b.getRoot());i.next=5;return h.awrap(this.getCurrentState());case 5:d=i.sent;e=t.getStackContextFromState(d);if(!(e==null)){i.next=9;break}return i.abrupt("return");case 9:f=z.getRootNode(e.currentNode),b instanceof q&&c===f.getHTMLElement()?this.popContext():b instanceof p&&(c!==null&&c===f.getHTMLElement()&&(g=t.isBottomSheetFlyout(b),(b.config.contextSigil==="like-reaction-flyout"||g)&&(this.popContext(),g&&A.invoke(m.RESTORE_TRAY))));case 11:case"end":return i.stop()}},null,this)}.bind(this)),A.listen(m.NAVIGATE,null,function(b){a.handleKeyDown(b.getData())}))};b.$9=function(){if(this.$4!=null)return;this.$4=new B();this.$4.addSubscriptions(A.listen(["m:history:change","m:history:change-default"],null,this.$16.bind(this)),A.listen("m:page:unload",null,this.$17.bind(this)))};b.$16=function(a){__p&&__p();var b=this;return h.async(function(c){__p&&__p();while(1)switch(c.prev=c.next){case 0:return c.abrupt("return",g.resolve().then(function(){__p&&__p();b.$6&&(b.$6=!1,A.invoke(m.RESTORE_TRAY));var c=a.getData();if(c.soft==="composer"||c.soft==="search"){b.disableSpatialNav(!1);if(c.soft==="search"){var d={detail:{rightButtonText:""}};t.updateSoftkeyTray(d);b.$6=!0}return}d=b.$2;if(d.contextState===K.MENU_CONTEXT){b.$1||b.$18();return}var e=x.getSpatialNavPathType(c.path);if(c.soft==null&&d.contextStack!=null&&d.contextStack.length>0){c=d.contextStack[d.contextStack.length-1].config;c.pathType===n.BOTTOM_SHEET&&c.backKeyCallback?c.backKeyCallback():c.pathType===n.LIKE_REACTION_FLYOUT&&c.optionalCallback&&c.optionalCallback();c.pathType===e?b.$1||b.$18():b.disableSpatialNav(!1)}}));case 1:case"end":return c.stop()}},null,this)};b.$17=function(a){a=a.getData();a=x.getSpatialNavPathType(a.path);a!==n.NONE&&this.removeContextByPath(a)};b.$11=function(){var a=this,b,c;return h.async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return h.awrap(this.$13());case 2:b=d.sent,b&&(c=z.getRootNode(b.currentNode).getHTMLElement(),this.$5=[j.listen(c,"mouseenter",this.$18.bind(this)),j.listen(c,"mousemove",function(b){b.movementY===10&&a.$18()})]);case 4:case"end":return d.stop()}},null,this)};b.$18=function(){var a;return h.async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return h.awrap(this.$13());case 2:a=b.sent,a&&(this.enableSpatialNav(),r.highlightNode(a.currentNode),r.maybeFocusNode(a.currentNode));case 4:case"end":return b.stop()}},null,this)};b.$10=function(){this.$5&&(this.$5.forEach(function(a){return a.remove()}),this.$5=[])};b.interceptBackKey=function(){var a;return h.async(function(b){while(1)switch(b.prev=b.next){case 0:b.next=2;return h.awrap(this.$13());case 2:a=b.sent,a&&a.config&&a.config.backKeyCallback&&a.config.backKeyCallback();case 4:case"end":return b.stop()}},null,this)};b.scrollToTop=function(){__p&&__p();var a,b,c,d;return h.async(function(e){__p&&__p();while(1)switch(e.prev=e.next){case 0:e.next=2;return h.awrap(this.$13());case 2:a=e.sent;if(!(a==null)){e.next=5;break}return e.abrupt("return");case 5:b=a.currentNode;c=z.getRootNode(b);d=z.getFirstHighlightableNode(c);if(!(d==null)){e.next=10;break}return e.abrupt("return");case 10:this.$12([{mutationType:v.MOVE_TO_NODE,currentNode:b,nextNode:d}]);case 11:case"end":return e.stop()}},null,this)};return a}();e.exports=new a()}),null);
__d("KaiOSMenuHandler",["regeneratorRuntime","CSS","DOM","Event","KaiOSNavigator","KaiOSSoftkeyTrayLogger","KaiOSSpatialNavEvents","KaiOSSpatialNavPath","KaiOSSpatialNavTraverserKind","MViewport","SpatialNavController","SpatialNavControllerTypes","SpatialNavTreeNodeUtils","Stratcom","URI","csx","cx","fbt"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){"use strict";__p&&__p();var y=r.SpatialNavContextState;a=function(){__p&&__p();function a(){__p&&__p();var a=this;this.menuShown=!1;this.showPageSoftkeyTray=!1;this.toggleMenuVisibility=function(a,b){__p&&__p();var c=this,d=p.getScrollTop();if(d<=0&&this.menuVisibleOnLoad){this.shouldUseSpatialnavV2||k.focusOnFirstTarget();return}var e=-Math.min(d,a.clientHeight);if(b)if(this.shouldAnimate){a.style.top=e+"px";a.classList.add("float");this.maybeToggleMenuRootVisibility(b);var f=window.setInterval(function(){e+=16,a.style.top=e+"px",e>=0&&(a.style.top="0px",window.clearInterval(f),c.shouldUseSpatialnavV2||k.focusOnFirstTarget())},16)}else a.style.top="0px",a.classList.add("float"),this.maybeToggleMenuRootVisibility(b),!this.menuVisibleOnLoad?this.shouldUseSpatialnavV2||k.setupNavOnContainer(a,!0):this.shouldUseSpatialnavV2||k.focusOnFirstTarget();else{var g=0;if(this.shouldAnimate)var h=window.setInterval(function(){g-=16,a.style.top=g+"px",g<=e&&(a.style.top=e+"px",a.classList.remove("float"),c.maybeToggleMenuRootVisibility(b),window.clearInterval(h))},16);else a.style.top=e+"px",a.classList.remove("float"),this.maybeToggleMenuRootVisibility(b)}};this.$1=function(b){a.showFloatingMenu()};this.$2=function(b){var c=a.leftButtonElement;b=b.getData().path;if(a.menuShown&&c!=null){var d=null;b!=null&&(d=new u(b).getQueryData().soft);b=new CustomEvent("kaios_close_menu",{detail:{showCursor:!a.menuVisibleOnLoad,focusFirstNode:d!=="search"}});c.dispatchEvent(b);p.scrollToTop()}};this.$3=function(b){__p&&__p();b=b.detail;var c=b.leftButtonText;if(c!=null){a.showPageSoftkeyTray||i.show(a.softkeyTrayContainer);var d=b.leftButtonEvent,e=b.leftButtonLoggingId;e=i.create("div",{className:"_6ykc",id:e},c);i.replace(a.leftButtonElement,e);a.leftButtonElement=e;d!=null&&j.listen(e,"click",function(b){b=new CustomEvent(d);window.dispatchEvent(b);a.restorePageTray()})}c=b.rightButtonText;if(c!=null){var f=b.rightButtonEvent;e=b.rightButtonLoggingId;e=i.create("div",{className:"_6ykd",id:e},c);i.replace(a.rightButtonElement,e);a.rightButtonElement=e;f!=null&&j.listen(e,"click",function(a){a=new CustomEvent(f);window.dispatchEvent(a)})}c=b.centerButtonText;if(c!=null&&a.centerButtonElement!=null&&c!=a.centerButtonElement.textContent){e=i.create("div",{className:"_7gvg"},c);i.replace(a.centerButtonElement,e);a.centerButtonElement=e}};this.$4=function(b){a.restorePageTray()}}var b=a.prototype;b.handleKeyEvents=function(a){__p&&__p();if(this.softkeyTrayContainer==null||this.softkeyTrayContainer.style.display!=""||this.viewportElement!=null&&this.viewportElement.style.display!="")return!1;switch(a.key){case"SoftLeft":a=this.leftButtonElement;if(a!=null){a.click();l.logSoftkeyTrayButtonClicked(a.getAttribute("id"));return!0}break;case"SoftRight":a=this.rightButtonElement;if(a!=null){a.click();l.logSoftkeyTrayButtonClicked(a.getAttribute("id"));return!0}break;case"Backspace":case"BrowserBack":case"ArrowUp":case"ArrowDown":if(this.menuShown&&this.leftButtonElement!=null){this.leftButtonElement.click();return!0}break}return!1};b.maybeToggleMenuRootVisibility=function(a){!this.menuVisibleOnLoad&&this.menuRootElement!=null&&(a?this.menuRootElement.classList.add("float"):this.menuRootElement.classList.remove("float"))};b.showFloatingMenu=function(){var a=this.menuContainerElement;a!=null&&(this.menuShown=!0,this.toggleMenuVisibility(a,!0),this.maybeSetupSpatialNavV2(),this.updateBackgroundOverlayVisibility(!0),this.setupCloseMenuButton())};b.maybeSetupSpatialNavV2=function(){__p&&__p();var a,b,c,d,e;return g.async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:a=this.menuContainerElement;if(!(this.shouldUseSpatialnavV2&&a!=null)){f.next=10;break}f.next=4;return g.awrap(q.getCurrentState());case 4:b=f.sent,this.prevSpatialNavContextState=b.contextState,c=null,this.prevSpatialNavContextState===y.MENU_CONTEXT&&b.menuContext!=null?c=b.menuContext.currentNode.getHTMLElement():(d=a.getElementsByClassName("popoverOpen"),d.length!==0&&(c=d[0])),e={traverserType:o.HORIZONTAL,pathType:n.MENU,isMenu:!1,disableScrollToNode:!0,focusMenuElementOnFirst:c,wrapAround:!0},q.setupNavOnContainer(a,e,!0);case 10:case"end":return f.stop()}},null,this)};b.setupCloseMenuButton=function(){__p&&__p();var a=this,b=this.leftButtonElement,c=this.rightButtonElement,d=this.centerButtonElement,e=i.create("div",{className:"_6ykc",id:"kaios_tray_menu_close"},x._("Close"));i.replace(this.leftButtonElement,e);this.leftButtonElement=e;var f=i.create("div"),g=i.create("div");i.replace(this.rightButtonElement,f);this.rightButtonElement=f;i.replace(this.centerButtonElement,g);this.centerButtonElement=g;j.listen(e,"click",function(h){a.hideMenu(),a.swapButtons(e,b,f,c,g,d)});j.listen(e,"kaios_close_menu",function(h){h=h.detail;var i=!0,j=!0;typeof h==="object"&&("showCursor"in h&&(i=h.showCursor),"focusFirstNode"in h&&(j=h.focusFirstNode));a.hideMenu(i,j);a.swapButtons(e,b,f,c,g,d)})};b.hideMenu=function(a,b){__p&&__p();var c,d,e,f;return g.async(function(h){__p&&__p();while(1)switch(h.prev=h.next){case 0:a===void 0&&(a=!0);b===void 0&&(b=!1);c=this.menuContainerElement;if(!c){h.next=37;break}this.menuShown=!1;this.toggleMenuVisibility(c,!1);if(!this.shouldUseSpatialnavV2){h.next=35;break}h.next=9;return g.awrap(q.getCurrentStackContext());case 9:d=h.sent;if(!(d==null)){h.next=14;break}this.prevSpatialNavContextState=null;this.updateBackgroundOverlayVisibility(!1);return h.abrupt("return");case 14:e=d.currentNode;f=s.getRootNode(e);if(!(f.getHTMLElement()!==c)){h.next=21;break}q.removeContextByElement(c);this.prevSpatialNavContextState=null;this.updateBackgroundOverlayVisibility(!1);return h.abrupt("return");case 21:q.popContext();h.t0=this.prevSpatialNavContextState;h.next=h.t0===y.CONTEXT_STACK?25:h.t0===y.MENU_CONTEXT?27:h.t0===y.NO_CONTEXT?30:32;break;case 25:b&&q.scrollToTop();return h.abrupt("break",32);case 27:q.switchContext(y.MENU_CONTEXT,null,e);q.enableSpatialNav();return h.abrupt("break",32);case 30:q.disableSpatialNav(!0);return h.abrupt("break",32);case 32:this.prevSpatialNavContextState=null;h.next=36;break;case 35:a&&k.showCursor();case 36:this.updateBackgroundOverlayVisibility(!1);case 37:case"end":return h.stop()}},null,this)};b.swapButtons=function(a,b,c,d,e,f){i.replace(a,b),i.replace(c,d),i.replace(e,f),this.leftButtonElement=b,this.rightButtonElement=d,this.centerButtonElement=f};b.updateBackgroundOverlayVisibility=function(a){this.backgroundElement&&(a?this.backgroundElement.classList.add("shown"):this.backgroundElement.classList.remove("shown"))};b.restorePageTray=function(){this.showPageSoftkeyTray||i.hide(this.softkeyTrayContainer),i.replace(this.leftButtonElement,this.pageLeftButtonElement),i.replace(this.rightButtonElement,this.pageRightButtonElement),this.leftButtonElement=this.pageLeftButtonElement,this.rightButtonElement=this.pageRightButtonElement};b.restoreMenuOnInitIfShown=function(){this.menuShown&&this.hideMenu(!this.menuVisibleOnLoad)};b.setupSoftKeyElements=function(a,b,c,d,e){this.backgroundElement=a,this.menuContainerElement=b,this.menuRootElement=c,this.softkeyTrayContainer=d,this.viewportElement=e};b.setupLeftButton=function(a){this.leftButtonElement=a,this.pageLeftButtonElement=a};b.setupMenuButton=function(a){this.setupLeftButton(a),this.menuShown=!1,j.listen(a,"click",this.$1)};b.setupRightButton=function(a){this.rightButtonElement=a,this.pageRightButtonElement=a};b.setupCenterButton=function(a){this.centerButtonElement=a};b.setupHistoryListener=function(){t.listen("history:change",null,this.$2)};b.setupNavigationUpdateListener=function(){j.listen(window,m.UPDATE_TRAY,this.$3)};b.setupRestoreTrayListener=function(){t.listen(m.RESTORE_TRAY,null,this.$4)};b.setupSoftKeyTrayShowHideListener=function(){var a=this;t.listen(m.HIDE_TRAY,null,function(){if(!a.softkeyTrayContainer)return;h.addClass(a.softkeyTrayContainer,"_7hj_")});t.listen(m.SHOW_TRAY,null,function(){if(!a.softkeyTrayContainer)return;h.removeClass(a.softkeyTrayContainer,"_7hj_")})};return a}();b={impl:new a(),setup:function(a){var b=document.querySelector("._6yui"),c=document.querySelector("._6ywo"),d=document.querySelector("._6usn"),e=document.getElementById("viewport"),f=document.getElementById("kaios_tray");this.impl.showPageSoftkeyTray=a;a||i.hide(f);this.impl.setupSoftKeyElements(b,c,d,f,e)},initForPage:function(a,b,c,d,e){this.setup(e),this.impl.setupNavigationUpdateListener(),this.impl.setupSoftKeyTrayShowHideListener(),this.impl.setupLeftButton(a),this.impl.setupCenterButton(d),this.impl.setupRightButton(b)},initForMenu:function(a){this.impl.restoreMenuOnInitIfShown(),this.impl.setupMenuButton(a),this.impl.setupHistoryListener(),this.impl.setupRestoreTrayListener(),this.impl.updateBackgroundOverlayVisibility(!1)},handleKeyEvents:function(a){return this.impl.handleKeyEvents(a)},initExperimentValues:function(a){this.impl.shouldAnimate=a.shouldAnimate,this.impl.menuVisibleOnLoad=a.menuVisibleOnLoad,this.impl.shouldUseSpatialnavV2=a.shouldUseSpatialnavV2}};e.exports=b}),null);
__d("KaiOSKeyEventHandlers",["KaiOSConnectionHelper","KaiOSControllerConfig","KaiOSControllerUtils","KaiOSHTMLElementUtils","KaiOSMenuHandler","KaiOSNavigator","KaiOSSendMessageUtil","MViewport","SpatialNavController","SpatialNavControllerUtils","URI","isLinkshimURI"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){"use strict";__p&&__p();function a(a){__p&&__p();if(h.fullScreenVideoHandler&&h.fullScreenVideoHandler.handleClickEvent(a)){a.preventDefault();a.stopPropagation();return}var b=a.target,c=null;b&&b.tagName==="A"?c=b.href:b&&b.parentElement&&b.parentElement.tagName==="A"?c=b.parentElement.href:b&&b.parentElement&&b.parentElement.parentElement&&b.parentElement.parentElement.tagName==="A"&&(c=b.parentElement.parentElement.href);b=new q(c);var d=c!=null&&c!==""&&!/\.facebook.com$/i.test(b.getDomain());c!=null&&(r(b)||d)&&(i.openUrl(c),a.preventDefault(),a.stopPropagation())}function s(a){return h.appVersion!=null&&!l.isSpatialNavEnabled()&&!o.isSpatialNavEnabled()&&j.isTextfieldInput(a.target)}function b(a){s(a)?l.hideCursor():o.isSpatialNavEnabled()&&a.target instanceof HTMLElement&&o.handleFocusChange(a.target)}function c(a){s(a)?l.showCursor():(a.target instanceof HTMLTextAreaElement||a.target instanceof HTMLInputElement)&&o.isSpatialNavEnabled()&&l.hideCursor()}function d(a){__p&&__p();if(k.handleKeyEvents(a)||h.fullScreenVideoHandler&&h.fullScreenVideoHandler.handleKeyDownEvent(a)){a.preventDefault();a.stopPropagation();return}switch(a.key){case"Backspace":case"BrowserBack":t(a);break;case"Enter":u(a);break;case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":v(a);break}}function t(a){o.isSpatialNavEnabled()&&p.shouldInterceptBackKey(a)?(a.preventDefault(),a.stopPropagation(),o.interceptBackKey()):document.fullscreenElement?(document.exitFullscreen(),a.preventDefault(),a.stopPropagation()):i.keyDownEventHandledByRegPage(a.key)?(a.preventDefault(),a.stopPropagation()):i.isOnHomeOrConfPage()&&n.getScrollTop()>5?(a.preventDefault(),a.stopPropagation(),o.isSpatialNavEnabled()==!0?o.scrollToTop():n.scrollTo(0,0)):i.isOnHomeOrConfPage()||(m.postMessage(g.hostWindow,m.Type.HANDLE_BACK),a.preventDefault(),a.stopPropagation())}function u(a){h.appVersion!=null&&a.target.type=="textarea"?(a.target.blur(),a.preventDefault(),a.stopPropagation()):v(a)}function v(a){l.isSpatialNavEnabled()?l.handleKeyDown(a):o.isSpatialNavEnabled()&&!w(a)&&(a.preventDefault(),o.handleKeyDown(a))}function w(a){__p&&__p();var b=!1,c=x();switch(a.key){case"ArrowLeft":b=(a=c.shouldOverrideLeft)!=null?a:!1;break;case"ArrowRight":b=(a=c.shouldOverrideRight)!=null?a:!1;break;case"ArrowUp":b=(a=c.shouldOverrideUp)!=null?a:!1;break;case"ArrowDown":b=(a=c.shouldOverrideDown)!=null?a:!1;break;case"Enter":b=(a=c.shouldOverrideCSK)!=null?a:!1;break}return b}function x(){var a=document.activeElement;if(a instanceof HTMLInputElement&&j.isTextfieldInput(a))return{shouldOverrideLeft:!0,shouldOverrideRight:!0};return a instanceof HTMLElement&&j.isFileUploadElement(a)?{shouldOverrideCSK:!0}:{}}e.exports={interceptClick:a,handleTextfieldFocus:b,handleTextfieldBlur:c,handleKeyDown:d}}),null);
__d("XExternalShareComposerController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/kaiosapp/composer/",{csid:{type:"String"},length:{type:"Int"}})}),null);
__d("KaiOSShareHandler",["XAsyncRequest","XExternalShareComposerController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={handle:function(a){if(a===void 0)return;var b=Math.min(a.length,3),c=new FormData();for(var d=0;d<b;d++)c.append("file_"+d,a[d]);d=h.getURIBuilder().setInt("length",b).getURI();new g(d).setRawData(c).setMethod("POST").send()}};e.exports=a}),null);
__d("XKaiOSAppJioTagController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/kaiosapp/jio/tag/",{})}),null);
__d("XKaiOSUpdatePushController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/kaiosapp/push/update/",{})}),null);
__d("KaiOSController",["Promise","regeneratorRuntime","KaiOSAppMigrationEvent","KaiOSAppMigrationExperimentName","KaiOSConnectionHelper","KaiOSControllerConfig","KaiOSControllerUtils","KaiOSFullscreenVideoHandler","KaiOSKeyEventHandlers","KaiOSLogger","KaiOSMenuHandler","KaiOSNavigator","KaiOSSendMessageUtil","KaiOSShareHandler","MRequest","SpatialNavController","Stratcom","XKaiOSAppJioTagController","XKaiOSUpdatePushController","getActiveElement","nullthrows","promiseDone","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){"use strict";__p&&__p();var D=m.createCallbackHandler(),E="app://m.facebook.com",F=Object.freeze({APP_INFO:"app_info",UPDATE_PUSH:"update_push",CONFIG_REQUEST:"config_request",SHARE_PHOTO:"share_photo",LOG_MIGRATION_EVENT:"log_migration_event",TIME_TO_BROWSER_IFRAME_INIT:"time_to_browser_iframe_init"});function G(a){__p&&__p();if(!(a instanceof Map))return;var b=a.get(s.Action),c=a.get(s.ActionPayload);a=a.get(s.CallbackID);if(D.handleCallback(a,c))return;switch(b){case F.APP_INFO:c&&c.get&&(l.appVersion=c.get("app_version"),l.shouldLogAppVersion&&(p.logAppVersion(l.appVersion),l.shouldLogAppVersion=!1),Q.setup());break;case F.UPDATE_PUSH:if(c&&c.get){a=c.get("subscription");Q.updatePush(a.endpoint,JSON.stringify(a.keys))}break;case F.CONFIG_REQUEST:b=new Map();b.set("show_news_feed_on_notification_back",l.showNewsFeedOnNotificationBack);s.postMessage(k.hostWindow,s.Type.CONFIG_RESPONSE,b);break;case F.SHARE_PHOTO:t.handle(c);break;case F.LOG_MIGRATION_EVENT:if(c&&c.get){a=c.get("migration_phase");b=c.get("roundtrip_durations");if(b&&b instanceof Array)for(var d=0;d<b.length;d++)p.logAppMigrationEvent(i.COMPLETED_ROUNDTRIP,a,b[d],{roundtrip_count:d+1})}break;case F.TIME_TO_BROWSER_IFRAME_INIT:if(c&&c.get){d=c.get("timeToBrowserIframeInit");a=c.get("timestampAtBrowserIframeInit");b=c.get("migrationPhase");c=c.get("experimentGroup");d&&p.logAppMigrationEvent(i.COMPLETED_BROWSER_IFRAME_INIT,b,d,{timestamp_at_browser_iframe_init:a},j.CURSOR_1_1,c)}break}}function H(a){l.fullScreenVideoHandler&&l.fullScreenVideoHandler.handleMouseMoveEvent(a)&&(a.preventDefault(),a.stopPropagation())}function I(a){if(document.fullscreenElement)document.fullscreenElement.nodeName=="VIDEO"&&(screen.orientation&&screen.orientation.lock("landscape"),document.fullscreenElement.mozRequestPointerLock());else{a=new Map();a.set("orientation","natural");s.postMessage(k.hostWindow,s.Type.SCREEN_ORIENTATION_LOCK,a)}}var J=null,K=!1,L=!1,M=null,N=null,O=new g(function(a){M=a}),P=new g(function(a){N=a}),Q={waitForKaiOS:function(){return P},init:function(a){a.get("kaios__dev__")&&(M?M():function(){},N?N():function(){},M=null,this.setup()),l.appID=Number(a.get("app_id")),l.shouldLogAppVersion=!!a.get("should_log_app_version"),J=a.get("fbt_strings"),l.showNewsFeedOnNotificationBack=!!a.get("show_news_feed_on_notification_back"),l.userLoggedIn=!!a.get("user_logged_in"),l.inLatestMigrationPhase=!!a.get("in_latest_migration_phase"),l.migrationGroup=String(a.get("migration_group")),window.addEventListener("message",Q.receiveMessage,!1),B(O,function(){K?v.enableSpatialNav():v.disableSpatialNavForAll(),K=!1})},enableBackButtonOnRegPage:function(){l.backButtonOnRegPage=!0},setup:function(){__p&&__p();window.addEventListener("click",o.interceptClick,!0);window.addEventListener("keydown",o.handleKeyDown,!1);window.addEventListener("mousemove",H,!0);window.addEventListener("focus",o.handleTextfieldFocus,!0);window.addEventListener("blur",o.handleTextfieldBlur,!0);l.appVersion!=null&&window.addEventListener("fullscreenchange",I,!1);w.listen("click",["m-composer","composer-submit"],function(a){C(function(){var b=z();b&&b==a.getNode("composer-submit")&&b.blur()},100)});l.userLoggedIn&&s.postMessage(k.hostWindow,s.Type.CHECK_FOR_PUSH_UPDATE);if(J!=null&&J!==""){var a=new Map();a.set("fbt_strings",J);s.postMessage(k.hostWindow,s.Type.FBT_STRINGS,a)}a=new Map();a.set("inLatestMigrationPhase",l.inLatestMigrationPhase);a.set("migrationGroup",l.migrationGroup);s.postMessage(k.hostWindow,s.Type.LITE_MIGRATION_STATUS,a);N?N():(function(){})},sendMessageToAppWithCallback:function(a,b){b=D.setCallback(b);s.postMessage(k.hostWindow,a,null,b)},maybeTagMeAsKaiOSApp:function(){k.hostWindow!=null?Q.tagMeAsKaiOSApp():L=!0},tagMeAsKaiOSApp:function(){var a=x.getURIBuilder().getURI();a=new u(a).setMethod("POST").setData({is_kaios_app:!0});L=!1;a.send()},registerPush:function(a){a=D.setCallback(a);s.postMessage(k.hostWindow,s.Type.REGISTER_PUSH,null,a)},unregisterPush:function(){B(Q.waitForKaiOS(),function(){s.postMessage(k.hostWindow,s.Type.UNREGISTER_PUSH)})},updatePush:function(a,b){var c=y.getURIBuilder().getURI();c=new u(c).setMethod("POST").setData({push_endpoint:a,app_id:l.appID,subscription_keys:b});c.listen("done",function(a){a.payload&&a.payload.success&&s.postMessage(k.hostWindow,s.Type.PUSH_UPDATE_COMPLETED)});c.send()},receiveMessage:function(a){if(!a||E!=a.origin||!a.source)return;M&&(M(),M=null);k.hostWindow||(k.hostWindow=a.source,l.fullScreenVideoHandler=new n(k.hostWindow),s.postMessage(k.hostWindow,s.Type.MESSAGE_RECEIVED));a.data&&G(a.data);L&&Q.tagMeAsKaiOSApp()},_setHostWindowUnitTestsOnly:function(a){k.hostWindow=a},isTagIfInsideApp:function(){return L},fetchMsisdn:function(a){a=D.setCallback(a);s.postMessage(k.hostWindow,s.Type.FETCH_MSISDN,null,a)},setupNavOnContainer_DEPRECATED:function(a,b){return h.async(function(c){while(1)switch(c.prev=c.next){case 0:c.next=2;return h.awrap(Q.waitForKaiOS());case 2:r.setupNavOnContainer(a,b);case 3:case"end":return c.stop()}},null,this)},setupNavOnDocument_DEPRECATED:function(a){return h.async(function(b){while(1)switch(b.prev=b.next){case 0:Q.setupNavOnContainer_DEPRECATED(A(document.documentElement),a);case 1:case"end":return b.stop()}},null,this)},setupNavOnContainer:function(a){__p&&__p();var b;return h.async(function(c){while(1)switch(c.prev=c.next){case 0:b=!a.config.isMenu||a.config.shouldFocusMenuOnSetup;K=b||K;c.next=4;return h.awrap(Q.waitForKaiOS());case 4:v.setupNavOnContainer(a.element,a.config,b);case 5:case"end":return c.stop()}},null,this)},setupNavOnDocument:function(a){return h.async(function(b){while(1)switch(b.prev=b.next){case 0:Q.setupNavOnContainer({element:A(document.getElementById("viewport")),config:a.config});case 1:case"end":return b.stop()}},null,this)},setupNavOnPageRoot:function(a){return h.async(function(b){while(1)switch(b.prev=b.next){case 0:Q.setupNavOnContainer({element:A(document.getElementById("root")),config:a.config});case 1:case"end":return b.stop()}},null,this)},refreshSpatialNav:function(){v.rebuildSpatialNavTree(null)}};e.exports=Q}),null);
__d("MLoggedOutBannerGooglePlayRedirectWithFallback",["BanzaiLogger","DirectDownloadEvents","DOM","UserAgent","clearInterval","clearTimeout","goURI","setInterval","setTimeout"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=200,q=300,r=350,s=1500,t=2500;a=function(){"use strict";__p&&__p();function a(a){this.$1=a.button,this.$2=a.native_app_url,this.$3=a.fallback_url,this.$4=a.logging_data,this.$5=null,this.$6=null,this.$7=null,this.$8=null,this.$9=0,this.$10=!0,this.$11=i.create("iframe",{style:{display:"none"}}),i.insertAfter(this.$1,this.$11),g.create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:h.logged_out_banner_impression_client,app_referrer:this.$4.app_referrer,app:this.$4.app,country:this.$4.country}),this.$12()}var b=a.prototype;b.$12=function(){var a=this;this.$1.addEventListener("click",function(){a.$13()});this.$10=!0};b.$13=function(){this.$10&&(this.$10=!1,this.$14(),this.$15())};b.$15=function(){var a=this;a.$9=Date.now();var b=function(){a.$16(a.$3)},c=function(){a.$17(a.$2,b)},d=function(){a.$6=o(c,s),a.$18(a.$2,b)};a.$5=n(function(){a.$19()?a.$20():a.$9=Date.now()},p);j.isBrowser("Firefox")?d():c()};b.$17=function(a,b){__p&&__p();var c=this;if(c.$19())return;l(c.$8);var d=!1;c.$11.src="";c.$11.onload=function(){d=!0,g.create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:h.logged_out_banner_google_play_redirect_failed,app_referrer:c.$4.app_referrer,app:c.$4.app,country:c.$4.country}),b()};c.$11.src=a;c.$8=o(function(){var e=c.$11.contentDocument||c.$11.contentWindow.document;e.readyState=="complete"&&!d&&c.$18(a,b)},r)};b.$18=function(a,b){if(this.$19())return;this.$7=o(b,t);this.$16(a)};b.$20=function(){k(this.$5),l(this.$6),l(this.$7),l(this.$8)};b.$19=function(){if(document.hidden||Date.now()-this.$9>=q){this.$10=!0;return!0}return!1};b.$16=function(a){if(this.$19())return;m(a)};b.$14=function(){this.$4||(this.$4={app_referrer:"",app:"",country:""}),g.create({signal:!0,delay:1e3}).log("DirectDownloadLoggerConfig",{event:h.logged_out_banner_upgrade_button_click,app_referrer:this.$4.app_referrer,app:this.$4.app,country:this.$4.country})};return a}();e.exports=a}),null);
__d("XBrowserPushDisabledController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/notifications/client/push/disabled/",{})}),null);