if (self.CavalryLogger) { CavalryLogger.start_js(["9AJzy"]); }

__d("MFirefoxAppDetect",[],(function(a,b,c,d,e,f){__p&&__p();function a(a,b){__p&&__p();if(!navigator.mozApps){b();return}if(window.locationbar&&!window.locationbar.visible){a();return}if(navigator.mozApps.getSelf){var c=navigator.mozApps.getSelf();c.onsuccess=function(){c.result?a():b()};c.onerror=b}else b()}f.isFirefoxApp=a}),null);
__d("MPageHeaderLeft",["DOM","MFirefoxAppDetect","$"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={};function k(a){if(!j.back_button){var b=i("page");j.back_button=g.find(b,"a","back-button");j.menu_button=g.find(b,"a","menu-link")}a.show_back_button?(g.hide(j.menu_button),g.show(j.back_button)):(g.hide(j.back_button),g.show(j.menu_button))}a=function a(b){var c=window.navigator;c.standalone||j.isMozApp?k(b):j.isMozApp===void 0&&(j.lastConfig=b,h.isFirefoxApp(function(){j.isMozApp=!0,b===j.lastConfig&&(a(b),delete j.lastConfig)},function(){j.isMozApp=!1}))};f.main=a}),null);
__d("MPageHeaderRight",["DOM","Stratcom"],(function(a,b,c,d,e,f,g,h){__p&&__p();function i(){return g.scry(document.body,"*","mChromeHeaderRight")[0]}f.setup=function(a){if(a){var b=i();b&&(g.setContent(b,a.node||""),h.listen("m:page:unload",null,function(a){h.removeCurrentListener(),g.setContent(b,"")}))}};f.getChromeHeaderRightContent=function(){var a=i();return a?Array.prototype.slice.call(a.childNodes):null}}),null);
__d("RemoteDevice",["Banzai","Cookie","GeneratedLoggerUtils","MViewport","Run","isInIframe"],(function(a,b,c,d,e,f,g,h,i,j,k,l){__p&&__p();var m=!1,n={init:function(b){__p&&__p();if(!l()&&!window.APP_ENABLED&&!window.FW_ENABLED){if(/\((?:iPad|iPhone|iPod(?: touch));/.test(navigator.userAgent)){var c=Math.min(screen.width,screen.height),d=Math.max(screen.width,screen.height);c&&d&&(h.set("wd",c+"x"+d),h.set("m_pixel_ratio",window.devicePixelRatio));b&&b.performHardwareDetection&&b.hashId!==null&&k.onAfterLoad(function(){n.logHardwareInfo(b.hashId||"")});return}c=j.getWidth();d=j.getScreenHeight();if(!c||!d)return;a.DEFER_COOKIES||h.set("wd",c+"x"+d)}},logHardwareInfo:function(a){__p&&__p();if(m)return;m=!0;var b=document.createElement("canvas");if(!b)return;b=b.getContext("webgl")||b.getContext("experimental-webgl");if(!b)return;var c=b.getExtension("WEBGL_debug_renderer_info");if(!c)return;var d="unknown",e="unknown";c!=null&&(d=b.getParameter(c.UNMASKED_RENDERER_WEBGL),e=b.getParameter(c.UNMASKED_VENDOR_WEBGL));b=0;window.navigator&&(b=window.navigator.hardwareConcurrency);c=window.screen.width;var f=window.screen.height,h=Math.min(c,f);c=Math.max(c,f);f={gpu_renderer:d,gpu_vendor:e,logical_cpu_count:b,screen_width_pixel:h,screen_height_pixel:c,device_pixel_ratio:window.devicePixelRatio,hashid:a};i.log("logger:MHardwareDetectorLoggerConfig",f,g.VITAL)}};e.exports=n}),null);
__d("ViewportTrackingHooks",["Base64"],(function(a,b,c,d,e,f,g){__p&&__p();var h={},i=[];a={registerFeedObject:function(a,b){h[a]=g.encode(b)},updateVisibleViewportObjects:function(a){var b=[],c=!1;for(var d=0;d<a.length;d++){var e=a[d],f=e.id;while(!(f in h)&&e.firstChild!=void 0&&e.firstChild.id!=void 0&&e.firstChild.id.startsWith("u_"))f=e.firstChild.id,e=e.firstChild;f in h&&(b.push(h[f]),(!(d in i)||i[d]!=h[f])&&(c=!0))}!c&&i.length!=b.length&&(c=!0);c&&(i=b,typeof __EXT__updateVisibleViewportObjects==="function"&&__EXT__updateVisibleViewportObjects(i))}};e.exports=a}),null);
__d("MViewportTracking",["DataAttributeUtils","DOM","FBJSON","MPageController","MPopoverVisiblityTracker","MViewport","NavigationMetrics","Stratcom","Style","Vector","ViewportTrackingHooks","Visibility","VisibilityTrackingHelper","gkx","invariant","onAfterTTI","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){"use strict";__p&&__p();var x=97,y=200,z=new Map();a=function(){__p&&__p();function a(){this.$2=[],this.debugConsole=!1,this.activeStories={},this.cachedViewportHeight=0,this.discardVPVDIntervalThreshold=9e4,this.isLoose=!1,this.isTimeTrackingEnabled=!1,this.latestTimeTrackingTimestamp=0,this.maxScrollPosition=0,this.minSizeToBeVisible=0,this.readStoryIDs={},this.relaxedMinSize=!1,this.throttleNoDelay=!1,this.trackingHooks=!1,this.vpvdDebug=!1,this.vpvDebug=!1,this.enableAdsAllocationIntegrityLogging=!1}var b=a.prototype;b.getDataFromConfig=function(a){u(0,2199)};b.getStoryID=function(a){u(0,2200)};b.getDataToLog=function(a){u(0,2201)};b.sendDataToLog=function(a){u(0,2202)};b.getTimeout=function(){u(0,2203)};b.getAllStories=function(){u(0,2204)};b.init=function(b){__p&&__p();var c=this;this.isLoose=!!b.is_loose;this.throttleNoDelay=!!b.throttle_no_delay;this.relaxedMinSize=!!b.relaxed_min_size;this.vpvDebug=!!b.vpv_debug;this.trackingHooks=!!b.tracking_hooks;this.isTimeTrackingEnabled=!1;var d=a.shouldRunTrackingAfterTTI();k.init();d||(this.cachedViewportHeight=l.getHeight());this.getDataFromConfig(b);this.maxScrollPosition=0;this.readStoryIDs=this.getCachedReadStoryIDs()||{};this.$2=[n.listen("m:page:unload",null,this.onUnload.bind(this)),n.listen("m:viewport:update-complete",null,function(){c.cachedViewportHeight=l.getHeight()})];b.triggerOverride?this.$2=this.$2.concat(b.triggerOverride.map(function(a){var b=a[0];a=a[1];return n.listen(b,a,c.queueLogAction.bind(c))})):this.$2.push(n.listen("scroll",null,this.queueLogAction.bind(this)));this.isTimeTrackingEnabled&&(this.$2.push(r.addListener(r.VISIBLE,function(){return c.startRecordingTimeTrackingData()})),this.$2.push(r.addListener(r.HIDDEN,function(){return c.stopRecordingTimeTrackingData()})));this.$2.push(n.listen("m:newsfeed:popup-visible",null,function(){c.stopRecordingTimeTrackingData()}),n.listen("m:newsfeed:popup-hidden",null,function(){c.startRecordingTimeTrackingData(),c.fireEvent()}));d?v(function(){c.fireEvent()},!1):(this.fireEvent(),m.addRetroactiveListener(m.Events.EVENT_OCCURRED,function(a,b){a=b.event;a==="tti"&&(c.fireEvent(),m.removeCurrentListener())}))};b.getFBFeedLocation=function(){return-1};b.unitTestOnlyGetListeners=function(){return[].concat(this.$2)};b.getCachedReadStoryIDs=function(){return null};b.getMinSizeToBeVisible=function(a){if(!this.relaxedMinSize)return y;a="getBoundingClientRect"in a?a.getBoundingClientRect().height:p.getDim(a).y;return Math.min(y,a*.5)};b.fireEvent=function(){__p&&__p();if(s.isSnippetFlyoutVisible())return;var a=this.getAllStoriesInView();for(var b=0;b<a.length;b++){var c=a[b],d=this.getStoryID(c);if(!d||d in this.readStoryIDs)continue;this.readStoryIDs[d]=!0;this.sendDataToLog(this.getDataToLog(c));if(this.vpvDebug){d=h.scry(c,"div")[0];d&&o.set(d,"background-color","#fffbe2")}this.markStoryRead(c);this.fireStoryVisibleHandlers(c)}this.trackingHooks&&q.updateVisibleViewportObjects(this.getAllStoriesInView(!0))};b.fireStoryVisibleHandlers=function(a){(z.get(a)||[]).forEach(function(a){return a()}),z["delete"](a)};b.markStoryRead=function(a){};b.queueLogAction=function(){var a=this;this.isLoose?this.$3||(this.$3=w(function(){a.isTimeTrackingEnabled&&a.startRecordingTimeTrackingData(),a.$3=null,a.maxScrollPosition=Math.max(a.maxScrollPosition,l.getScrollTop()),!a.throttleNoDelay?(clearTimeout(a.$1),a.$1=w(function(){return a.fireEvent()},a.getTimeout())):a.fireEvent()},100)):(clearTimeout(this.$1),this.$1=w(function(){a.isTimeTrackingEnabled&&a.startRecordingTimeTrackingData(),a.fireEvent()},this.getTimeout()))};b.getTimetrackingDataToLog=function(b){var c=h.scry(b.story,"*","data-is-cta").map(function(a){a=g.getDataFt(a);a=a&&JSON.parse(a);return a&&a.cta_types}).filter(function(a){return!!a});this.cachedViewportHeight===0&&a.shouldRunTrackingAfterTTI()&&(this.cachedViewportHeight=l.getHeight());return{evt:x,fbfeed_location:this.getFBFeedLocation(),story_height:b.story_height,viewport_height:this.cachedViewportHeight,vpvd_start_timestamp:b.evp_ts/1e3,vpvd_time_delta:Math.round(b.vpvd||0),cta_types:c}};b.recordTimeStoryWasInView=function(a){if(this.isTimeTrackingEnabled&&a.vpvd>0){var b=this.getTimetrackingDataToLog(a);if(typeof b!=="string"){a=g.getDataFt(a.story);a&&(b=babelHelpers["extends"]({},b,i.parse(a,e.id)))}this.sendTimetrackingDataToLog(b)}};b.startRecordingTimeTrackingData=function(){this.$4(!1)};b.stopRecordingTimeTrackingData=function(){this.$4(!0)};b.$4=function(a){__p&&__p();this.activeStories||(this.activeStories={});var b=Date.now();this.latestTimeTrackingTimestamp||(this.latestTimeTrackingTimestamp=b);var c=this.getAllStoriesInView();this.updateVPVDurations(b);if(this.debugConsole){var d=Object.values(this.activeStories);d.length&&(console.table&&console.table(d))}d=this.updateActiveStories(c,b);this.debugConsole&&(d.length&&(console.table&&console.table(d)));this.recordVPVDurations(c,a);this.latestTimeTrackingTimestamp=a?0:b};b.updateVPVDurations=function(a){var b=a-this.latestTimeTrackingTimestamp;if(b>this.discardVPVDIntervalThreshold)return;b=a-this.latestTimeTrackingTimestamp;for(var c in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,c)&&(this.activeStories[c].vpvd+=b)};b.isVisible=function(a,b){for(var c=0;c<b.length;c++)if(this.getStoryID(b[c])===a)return!0;return!1};b.recordVPVDurations=function(a,b){this.recordVPVDurationsInternal(a,b)};b.recordVPVDurationsInternal=function(a,b){for(var c in this.activeStories)Object.prototype.hasOwnProperty.call(this.activeStories,c)&&((b||!this.isVisible(c,a))&&(this.recordTimeStoryWasInView(this.activeStories[c]),delete this.activeStories[c]))};b.updateActiveStories=function(a,b){var c=[];for(var d=0;d<a.length;d++){var e=this.getStoryID(a[d]);if(!e)break;e in this.activeStories||(this.activeStories[e]={evp_ts:b,story:a[d],vpvd:0,story_height:a[d].offsetHeight},c.push(this.activeStories[e]));this.activeStories[e].ts=b}return c};b.getAllStoriesInView=function(a){__p&&__p();a===void 0&&(a=!1);var b=[],c=this.getAllStories(),d=l.getScrollTop(),e=l.getHeight(),f=this.isLoose,g=e+this.maxScrollPosition-d;for(var h=0;h<c.length;h++){var i=c[h],j=this.getStoryBounds(d,i),k=j.top;j=j.bottom;if(!k&&!j)continue;var m=this.getMinSizeToBeVisible(i);if(!f&&k>e-m)break;m=!f&&k<=e-m&&j>=m||f&&k<g;a&&(j<0||k>e)&&(m=!1);m&&b.push(i)}return b};b.getStoryBounds=function(a,b){if("getBoundingClientRect"in b){var c=b.getBoundingClientRect();return{bottom:c.bottom,top:c.top}}else{c=p.getPos(b).y-a;return{top:c,bottom:c+p.getDim(b).y}}};b.cleanup=function(){this.$2.forEach(function(a){return a.remove()}),this.$2=[],z.clear()};b.onUnload=function(){this.isTimeTrackingEnabled&&this.stopRecordingTimeTrackingData(),this.cleanup()};b.sendTimetrackingDataToLog=function(a){this.sendDataToLog(a)};a.shouldRunTrackingAfterTTI=function(){return j.isHomeishPath(location.href)&&t("676812")};a.addStoryVisibleHandler=function(a,b){z.set(a,[].concat(z.get(a)||[],[b]));return{remove:function(){z.set(a,(z.get(a)||[]).filter(function(a){return a!==b}))}}};return a}();e.exports=a}),null);
__d("MCommentViewportTracking",["Banzai","DataStore","DOM","FBJSON","MParent","MViewportTracking","Stratcom","StratcomManager","compactArray","gkx","onAfterTTI"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){"use strict";__p&&__p();var r=null,s={m_group_stories_container:"group",m_newsfeed_stream:"",m_story_permalink_view:"",structured_composer_async_container:"user",root:""};a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.loadedReplies=function(){m.invoke("m:commentViewportTracking:loadedReplies")};b.loadedComments=function(){r&&r.isTimeTrackingEnabled&&r.startRecordingTimeTrackingData()};b.singleton=function(a){__p&&__p();if(!r){a={triggerOverride:[["scroll",null],["m:commentViewportTracking:loadedReplies",null],["m:feed-ufi-flyout:comments-displayed",null],["m:ufi:live-comments:render",null],["m:ufi:live-comments:new-comment",null],["m:feed-ufi-flyout:reset",null],["m:page:render:complete",null]]};n.enableDispatch(document,"scroll");r=new b();r.init(a);r.debugConsole;r.isTimeTrackingEnabled&&(l.shouldRunTrackingAfterTTI()?q(function(){r instanceof b&&r.startRecordingTimeTrackingData()},!1):r.startRecordingTimeTrackingData());m.listen("m:page:unload",null,function(){r=null,m.removeCurrentListener()})}};b.registerFlyout=function(a,b){var c;r&&(r.debugConsole,r.streamRoot=a);s=babelHelpers["extends"]((c={},c[a.id]=b||"",c),s)};var c=b.prototype;c.getDataFromConfig=function(){this.debugConsole=p("676811"),this.isTimeTrackingEnabled=!0,this.idle_timeout=5e3,this.min_duration_to_log=100,this.min_visible_size=200,this.relaxedMinSize=!0};c.__getRootNode=function(){this.streamRoot||(this.streamRoot=o(Object.keys(s).map(function(a){return document.getElementById(a)}))[0]||null);return this.streamRoot};c.__getStaticTemplateRootNode=function(){this.staticElementRoot||(this.staticElementRoot=document.getElementById("static_templates"));return this.staticElementRoot};c.getAllStories=function(){var a=this.__getRootNode();if(!a)return[];a=i.scry(this.__getRootNode(),"div","comment-body");return this.__getStaticTemplateRootNode()?a.concat(i.scry(this.__getStaticTemplateRootNode(),"div","comment-body")):a};c.getTimeout=function(){return this.min_duration_to_log};c.getDataToLog=function(a){return{}};c.getStoryID=function(a){var b=a.getAttribute("data-commentid");return!b?String(h.get(a,"token"))||null:b};c.getContainerModule=function(){var a=this.__getRootNode();return!a||!(a.id in s)?"other":s[a.id]};c.getTimetrackingDataToLog=function(a){var b=a.story,c;try{var d=k.bySigil(a.story,"story-div")||k.bySigil(a.story,"m-feed-single-story");d&&(c=j.parse(d.getAttribute("data-ft"),e.id))}catch(a){}return{comment_id:this.getStoryID(b),duration_ms:Math.round(a.vpvd),container_module:this.getContainerModule(),mf_story_key:c?c.mf_story_key||c.top_level_post_id:null}};c.sendDataToLog=function(a){if(a.comment_id){this.debugConsole;var b=g.isEnabled("comment_vpv_vital")?g.VITAL:null;g.post("comment_vpvd",a,b)}};return b}(l);e.exports=a}),null);
__d("MLogging",["MLogState"],(function(a,b,c,d,e,f,g){a=function(a){g.setRefid(a.refid)};f.main=a}),null);
__d("AccessibilityWebAssistiveTechTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var b=a.prototype;b.log=function(){h.log("logger:AccessibilityWebAssistiveTechLoggerConfig",this.$1,g.BASIC)};b.logVital=function(){h.log("logger:AccessibilityWebAssistiveTechLoggerConfig",this.$1,g.VITAL)};b.logImmediately=function(){h.log("logger:AccessibilityWebAssistiveTechLoggerConfig",this.$1,{signal:!0})};b.clear=function(){this.$1={};return this};b.getData=function(){return babelHelpers["extends"]({},this.$1)};b.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.setIndicatedBrowsers=function(a){this.$1.indicated_browsers=h.serializeVector(a);return this};b.setIsVirtualCursorAction=function(a){this.$1.is_virtual_cursor_action=a;return this};b.setTime=function(a){this.$1.time=a;return this};b.setVC=function(a){this.$1.vc=a;return this};b.setWeight=function(a){this.$1.weight=a;return this};b.updateExtraData=function(a){a=i(h.serializeMap(a));h.checkExtraDataFieldNames(a,j);this.$1=babelHelpers["extends"]({},this.$1,a);return this};b.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var j={indicated_browsers:!0,is_virtual_cursor_action:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("VisibilityListener",[],(function(a,b,c,d,e,f){"use strict";a={getHiddenTime:function(a,b){throw new Error("not supported here")},supported:function(){return!1}};e.exports=a}),null);
__d("MNotificationClick",["CSS","MLegacyDataStore","MRequest","Stratcom"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k="notification",l="list_",m="acw",n="aclb",o={},p=!1;e.exports={init:function(){if(p)return;j.listen("click",k,q);j.listen("m:page:render:cache:complete",null,r);p=!0}};function q(a){var b=a.getNode("touchable");if(!b)return;var c=h.get(b).notif_id;if(!c)return;new i("/a/jewel_notifications_log.php").addData({click_type:"notification_click",id:c,target_id:h.get(b).target_id}).send();s(a)}function r(a){if(a.getData().path.indexOf("notifications")>-1)for(var b in o)t(b)}function s(a){__p&&__p();a=a.getNode("marea");if(!a)return;a=a.getAttribute("id");if(!a)return;t(a);var b=a.startsWith(l)?a.substring(l.length):l+a;t(b);o[a]=!0;o[b]=!0}function t(a){a=document.getElementById(a);a&&(g.addClass(a,m),g.removeClass(a,n))}}),null);
__d("MNotificationsImpressionLogger",["MRequest"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=new g("/a/jewel_notifications_read.php");b.addData({ids:a,count:a.length,seen:!0});b.send()}e.exports={markSeenOnDisplay:a}}),null);
__d("MPageTitle",[],(function(a,b,c,d,e,f){f.setTitle=function(a){document.title=a}}),null);
__d("MAsyncPageLoadWithGraphSearch",["Stratcom"],(function(a,b,c,d,e,f,g){var h="graph-search-entry-point";a={pageLoad:function(a){g.invoke("setSearchText",h,{title:a.searchTitle||""}),g.invoke("setCurrentProfileID",h,{profileID:a.currentProfileID})}};e.exports=a}),null);
__d("MBackButton",["Stratcom"],(function(a,b,c,d,e,f,g){var h=!1;a=function(){if(h)return;h=!0;g.listen("click","back-button",function(a){history.length>1&&(a.prevent(),history.go(-1))})};f.main=a}),null);
__d("VirtualCursorStatus",["Event","UserAgent","emptyFunction","setImmediate"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();var k=null,l=null;function m(){l||(l=g.listen(window,"blur",function(){k=null,n()}))}function n(){l&&(l.remove(),l=null)}function a(a){k=a.keyCode,m()}function b(){k=null,n()}if(typeof window!=="undefined"&&window.document&&window.document.createElement){c=document.documentElement;if(c)if(c.addEventListener)c.addEventListener("keydown",a,!0),c.addEventListener("keyup",b,!0);else if(c.attachEvent){d=c.attachEvent;d("onkeydown",a);d("onkeyup",b)}}var o={isKeyDown:function(){return!!k},getKeyDownCode:function(){return k}},p=!1,q=!1,r=null,s=!1;function t(a){__p&&__p();var b=new Set(),c=o.isKeyDown(),d=a.clientX,e=a.clientY,f=a.isPrimary,g=a.isTrusted,i=a.offsetX,j=a.offsetY,k=a.pointerType,l=a.mozInputSource,m=a.WEBKIT_FORCE_AT_MOUSE_DOWN,n=a.webkitForce;a=a.target;var r=a.clientWidth;a=a.clientHeight;d===0&&e===0&&i>=0&&j>=0&&q&&g&&l==null&&b.add("Chrome");p&&q&&!c&&n!=null&&n<m&&i===0&&j===0&&l==null&&b.add("Safari-edge");d===0&&e===0&&i<0&&j<0&&q&&l==null&&b.add("Safari-old");!p&&!q&&c&&f===!1&&g&&k===""&&d===0&&e===0&&i===0&&j===0&&l==null;!p&&!q&&!c&&g&&h.isBrowser("IE >= 10")&&l==null&&(d<0&&e<0?b.add("IE"):(i<0||i>r)&&(j<0||j>a)&&b.add("MSIE"));l===0&&g&&b.add("Firefox");return b}function u(){p=!0,j(function(){p=!1})}function v(){q=!0,j(function(){q=!1})}function w(a,b){r===null&&(r=t(a));s=r.size>0;a=a.target.getAttribute("data-accessibilityid")==="virtual_cursor_trigger";b(s,r,a);j(function(){s=!1,r=null})}f={isVirtualCursorTriggered:function(){return s},add:function(a,b){b===void 0&&(b=i);var c=function(a){return w(a,b)};a.addEventListener("click",c);var d=g.listen(a,"mousedown",u),e=g.listen(a,"mouseup",v);return{remove:function(){a.removeEventListener("click",c),d.remove(),e.remove()}}}};e.exports=f}),null);
__d("AccessibilityWebVirtualCursorClickLogger",["AccessibilityWebAssistiveTechTypedLogger","VirtualCursorStatus"],(function(a,b,c,d,e,f,g,h){a={init:function(a){var b=this;a.forEach(function(a){h.add(a,b._log)},this)},_log:function(a,b,c){c===void 0&&(c=!1),a&&new g().setIndicatedBrowsers(b).setIsVirtualCursorAction(c).log()}};e.exports=a}),null);
__d("NavigationMetricsEnumJS",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({NAVIGATION_START:"navigationStart",UNLOAD_EVENT_START:"unloadEventStart",UNLOAD_EVENT_END:"unloadEventEnd",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",SECURE_CONNECTION_START:"secureConnectionStart",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED_EVENT_START:"domContentLoadedEventStart",DOM_CONTENT_LOADED_EVENT_END:"domContentLoadedEventEnd",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"})}),null);
__d("ResourceTimingMetricsEnumJS",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({START_TIME:"startTime",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",SECURE_CONNECTION_START:"secureConnectionStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd"})}),null);
__d("ImageTimingHelper",["Arbiter","BigPipe","URI"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();var j={},k={};function l(a){__p&&__p();var b=a.lid,c=a.pagelet,d=a.images,e=a.timeslice,f=a.ts,g=j[b];g||(g=j[b]=[]);d.forEach(function(a){try{var b=new i(a);a=b.setFragment("").toString()}catch(a){return}if(k[a])return;k[a]=!0;g.push({pagelet:c,timeslice:e,ts:f,uri:a})})}g.subscribe(h.Events.init,function(a,b){b.lid&&b.lid!=="0"&&b.arbiter.subscribe("images_displayed",function(a,b){l(b)})});g.subscribe("MRenderingScheduler/images_displayed",function(a,b){l(b)});e.exports.getImageTimings=function(a){return j[a]||[]}}),null);
__d("NavigationTimingHelper",["NavigationMetricsEnumJS","forEachObject","performance"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();function j(a,b){var c={};h(g,function(d){var e=b[d];e&&(c[d]=e+a)});return c}var k={getAsyncRequestTimings:function(a){if(!a||!i.timing||!i.getEntriesByName)return void 0;a=i.getEntriesByName(a);return a.length===0?void 0:j(i.timing.navigationStart,a[0])},getPerformanceNavigationTiming:function(){if(!i.timing||!i.getEntriesByType)return{};var a=i.getEntriesByType("navigation");return!a.length?{}:j(i.timing.navigationStart,a[0])},getNavTimings:function(){if(!i.timing)return void 0;var a=babelHelpers["extends"]({},j(0,i.timing),k.getPerformanceNavigationTiming());return j(0,a)}};e.exports=k}),null);
__d("ResourceTimingBootloaderHelper",["Bootloader","ErrorUtils","ImageTimingHelper","ResourceTimingMetricsEnumJS","ResourceTimingsStore","ResourceTypes","URI","forEachObject","isEmpty","performance"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){__p&&__p();var q=500,r=[],s={},t={},u={},v=[".mp4",".m4v",".mpd","m4a"],w=new Set(["bootload","js_exec","start_bootload","tag_bootload"]);function x(a){for(var b=0;b<v.length;b++){var c=v[b];if(a.endsWith(c))return!0}return!1}function y(a){__p&&__p();var b=new Map();k.getMapFor(a).forEach(function(a){if(a.requestSent!=null){var c=b.get(a.uri);c!=null?c.push(a):b.set(a.uri,[a])}});b.forEach(function(a){return a.sort(function(a,b){return a.requestSent-b.requestSent})});return b}function z(a,b,c,d){__p&&__p();var e=a.get(b);if(e==null){var f=b.indexOf("?");if(f!==-1){b=b.substring(0,f);e=a.get(b)}}if(e!=null)for(var f=0;f<e.length;f++){a=e[f];b=a.requestSent;a=a.responseReceived;if((c==null||b!=null&&b<=c)&&(d==null||a!=null&&a>=d))return e.splice(f,1)[0]}return null}function A(a,b,c,d,e,f,g){__p&&__p();if(!p.timing||!p.getEntriesByType)return null;var h={},m=p.timing.navigationStart;c&&(h=i.getImageTimings(d).sort(function(a,b){return a.ts-b.ts}).reduce(function(a,b){if(a[b.uri])return a;a[b.uri]=b.pagelet;return a},{}));c=Array.from(p.getEntriesByType("resource"));d=c.filter(function(a){return a.duration>=0&&a.startTime!=null&&a.startTime+m>b&&(e==null||a.responseEnd==null||a.responseEnd+m<e)});d.sort(function(a,b){return a.startTime-b.startTime});c=d.length;var n=0,o=0,q=0,r=0,s=0,v=y(l.XHR),w=y(l.CSS),A=y(l.JS);for(var E=0;E<d.length;E++){var F=d[E],G="",H="",I=void 0,J=F.initiatorType;switch(J){case"css":case"link":case"script":J=k.parseMakeHasteURL(F.name);if(!J)continue;var K=J[0];J=J[1];if(J==="css"||J==="js"){var L=J==="css"?w:A;I=z(L,F.name,F.startTime+m,F.responseEnd+m);if(I!=null&&g){H=J;G=I.uid;break}else{H=J;L=u[F.name]||q++;G=L+"_"+K}}else{J=D(F.name);L=J[0];H=J[1];G=o+++"_"+L}break;case"img":G=o+++"_"+B(F.name);H="img";break;case"iframe":G=r+++"_"+B(F.name)+C(F.name);H="iframe";break;case"xmlhttprequest":if(f){K=B(F.name);J=C(F.name);if(x(J)){G=s+++"_"+K+J;H="video";break}else{I=z(v,F.name,F.startTime+m,F.responseEnd+m);if(I!=null){H=l.XHR;G=I.uid;break}}}default:continue}L={};K=Object.keys(j);for(var J=0;J<K.length;J++){var M=j[K[J]],N=F[M];N&&(L[M]=N+p.timing.navigationStart)}if(I!=null){M=I;N=M.requestSent;J=M.responseReceived;if(b!=null&&N!=null&&N<b||e!=null&&J!=null&&J>e)continue;L.requestSent=N;L.responseReceived=J}L.type=H;L.desc=G;if(I!=null&&(H===l.JS||H===l.CSS||H===l.XHR)){K=k.getAnnotationsFor(H,I.uid);K!=null&&(L.annotations=K)}H=="img"&&Object.prototype.hasOwnProperty.call(h,F.name)&&(L.pagelet=h[F.name]);L.transferSize=F.transferSize;L.encodedBodySize=F.encodedBodySize;a[F.name]==void 0&&(a[F.name]=[]);n++;a[F.name].push(L)}return g?{numValidEntries:c,numSuccessfulMetrics:n}:null}function B(a){a=new m(a).getDomain();return a}function C(a){a=new m(a).getPath();return a}function D(a){return[B(a),"img"]}function E(a){__p&&__p();var b=Object.keys(a).filter(function(a){return a.startsWith("start_bootload/")}).sort(function(b,c){return a[b]-a[c]}).map(function(a){return a.substring(a.indexOf("/")+1)});b.forEach(function(b){return w.forEach(function(c){c=c+"/"+b;a[c]!=null&&(s[c]=a[c])})});r=r.concat(b);if(r.length>q){b=r.splice(0,r.length-q);b.forEach(function(a){return w.forEach(function(b){s[b+"/"+a]&&delete s[b+"/"+a]})})}}a={addPastBootloaderMetricsToResourceTimings:function(b,c){__p&&__p();b===void 0&&(b={});c===void 0&&(c={});var a=g.getURLToHashMap();n(b,function(b,d){__p&&__p();var e=a[d];if(!e)return;var f=new Map();f.set("bootloader_hash",e);w.forEach(function(a){var b=a+"/"+e;b=c[b]||s[b];b!=null&&f.set(a,b)});f.size>0&&b.forEach(function(a){if(a.requestSent||a.responseReceived)return;f.forEach(function(b,c){return a[c]=b})})})},mergeBootloaderMetricsAndResourceTimings:function(a,b,c){__p&&__p();a===void 0&&(a={});b===void 0&&(b={});c===void 0&&(c=!0);o(u)&&(u=g.getURLToHashMap());var d=new Map();n(u,function(a,b){d.set(a,b)});var e=[];n(b,function(b,c){__p&&__p();var f=c.indexOf("/");if(f===-1)return;var g=c.substring(0,f);if(!w.has(g))return;e.push(c);var h=c.substring(f+1);c=d.get(h);if(!c){c=h;h=u[c];if(!h)return}c.startsWith("data:")&&(c="inlined resource: "+h);a[c]==null&&(a[c]=[{}]);a[c].forEach(function(a){a.bootloader_hash=h,a[g]=b})});c||(E(b),e.forEach(function(a){return delete b[a]}));return a},getLastTTIAndE2EImageResponseEnds:function(a,b,c){__p&&__p();var d={TTI:a,E2E:b};if(!p.timing)return d;var e=c.filter(function(b){return b.ts<=a}).map(function(a){return a.uri}).reduce(function(b,a){b[a]=!0;return b},{}),f=c.map(function(a){return a.uri}).reduce(function(b,a){b[a]=!0;return b},{});for(var g in t)t[g].forEach(function(a){a.type==="img"&&(e[g]&&(d.TTI=Math.max(d.TTI,a.responseEnd)),f[g]&&(d.E2E=Math.max(d.E2E,a.responseEnd)))});return d},getMetrics:function(a,b,c,d,e,f){t={};o(u)&&(u=g.getURLToHashMap());a=A(t,a,b,c,d,e,f);return{data:t,diagnostics:a}}};e.exports=a}),null);
__d("PerfXFlusher",["Banzai","invariant"],(function(a,b,c,d,e,f,g,h){var i="perfx_custom_logger_endpoint",j=["perfx_page","perfx_page_type","lid"];function k(a){j.forEach(function(b){return h(b in a,'PerfXFlusher: Field "%s" missing in the PerfX payload',b)})}a={flush:function(a){k(a),g.post(i,a,{signal:!0})},registerToSendWithBeacon:function(a){g.registerToSendWithBeacon(i,a)}};e.exports=a}),null);
__d("QuicklingRefreshOverheadUtil",["QuicklingConfig","WebStorage","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=null,k=1e4;a={onQuicklingStart:function(){j=i()},onQuicklingVersionMatch:function(){j=null},onQuicklingRefreshStart:function(){if(!g.logRefreshOverhead||j===null)return;var a=h.getSessionStorage();if(!a)return;a.setItem("quickling_refresh_overhead",(i()-j).toString());a.setItem("quickling_refresh_start",Date.now().toString())},getOverhead:function(a){__p&&__p();if(!g.logRefreshOverhead)return null;var b=h.getSessionStorageForRead();if(!b)return null;var c=b.getItem("quickling_refresh_start");if(c==null)return null;if(a-parseInt(c,10)>k)return null;a=b.getItem("quickling_refresh_overhead");return a!=null?parseFloat(a):null}};e.exports=a}),null);
__d("pageLoadedViaSWCache",[],(function(a,b,c,d,e,f){function a(){return self.__SW_CACHE__===1}e.exports=a}),null);
__d("PerfXLogger",["ArtilleryOnUntilOffLogging","BanzaiODS","DataAttributeUtils","NavigationMetrics","NavigationTimingHelper","PerfXFlusher","PerfXSharedFields","QuicklingRefreshOverheadUtil","VisibilityListener","forEachObject","pageLoadedViaSWCache","performanceAbsoluteNow","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){__p&&__p();var t={},u={},v=65*1e3,w=["e2e","tti","all_pagelets_displayed","all_pagelets_loaded","artillery_disable_time"],x={},y={_listenersSetUp:!1,_uploadEarly:!1,_alreadyUploadedEarly:!1,_setupListeners:function(){__p&&__p();var a=this;if(this._listenersSetUp)return;this._subscribeToNavigationMetrics();l.registerToSendWithBeacon(function(){var b=[];p(t,function(c,d){if(!t[d].sent){c=a.getPayload(d,"unload fired");c!=null&&b.push(c)}});t={};return b});this._listenersSetUp=!0},_init:function(a){__p&&__p();var b=a.lid;if(b==null)return;this._alreadyUploadedEarly=!1;this._uploadEarly=!!a.upload_perfx_early;delete a.upload_perfx_early;var c=u[b]||[];delete u[b];if(a.sw_controlled_tags){if(navigator.serviceWorker&&navigator.serviceWorker.controller)for(var d=0;d<a.sw_controlled_tags.length;d++)c.push(a.sw_controlled_tags[d]);delete a.sw_controlled_tags}t[b]=babelHelpers["extends"]({tags:new Set(c),sent:!1},a);this._registerTimeoutSendback(b);this._setupListeners()},initWithNavigationMetricsLID:function(a,b){__p&&__p();var c=j.getFullPageLoadLid();if(!c)return;this._init(babelHelpers["extends"]({},b,{lid:c}));if(a&&a.always)for(var b=0;b<a.always.length;b++)y.addTag(c,a.always[b]);if(a&&a.swCache&&q())for(var b=0;b<a.swCache.length;b++)y.addTag(c,a.swCache[b])},init:function(a,b){b!=null&&a.lid!=null&&(x[a.lid]=b),this._init(a)},addTag:function(a,b){this._alreadyUploadedEarly&&h.bumpEntityKey("PerfXLateTag",b);var c=t[a];if(c){c.tags.add(b);return}u[a]||(u[a]=[]);u[a].push(b)},addTagWithNavigationMetricsLID:function(a){this._alreadyUploadedEarly&&h.bumpEntityKey("PerfXLateTag",a);var b=j.getFullPageLoadLid();if(!b)return;y.addTag(b,a)},_registerTimeoutSendback:function(a){var b=this,c=this._getFetchStart(a),d=v;c!=null&&(d-=r()-c);s(function(){return b._uploadPayload(a,"sendback time out")},d)},_subscribeToNavigationMetrics:function(){__p&&__p();var a=this;j.addRetroactiveListener(j.Events.EVENT_OCCURRED,function(b,c){if(!(b in t))return;w.includes(c.event)&&Object.prototype.hasOwnProperty.call(c,"timestamp")&&c.timestamp!=null&&(t[b][c.event]=c.timestamp);c.event==="all_pagelets_displayed"&&a._uploadEarly&&(w.forEach(function(a){Object.prototype.hasOwnProperty.call(c,a)&&c[a]!=null&&(t[b][a]=c[a])}),a._uploadPayload(b),a._alreadyUploadedEarly=!0)});j.addRetroactiveListener(j.Events.NAVIGATION_DONE,function(b,c){var d=c.serverLID;if(!(d in t))return;w.forEach(function(a){Object.prototype.hasOwnProperty.call(c,a)&&c[a]!=null&&(t[d][a]=c[a])});a._uploadPayload(d)})},_getPayloadWithOffset:function(a,b,c){__p&&__p();a=t[a];if(a==null)return null;var d=Object.assign({},a),e=document.querySelector('[id^="hyperfeed_story_id"]');if(e){e=JSON.parse(i.getDataFt(e));e&&(d.mf_query_id=e.qid)}d.tags=Array.from(a.tags);d.art_id||(d.artillery_disable_time=g.lastDisableTime());this._adjustValues(d,b);d.fetch_start=b;if(d.perfx_page_type==="normal"){e=k.getNavTimings();e!=null&&e.navigationStart!=null&&(d.nav_to_fetch=b-e.navigationStart);a=n.getOverhead(b);a!==null&&(d.quickling_refresh_overhead=a)}c!=null&&(d.sendback_reason=c);m.addCommonValues(d);o.supported()&&d.fetch_start&&d.all_pagelets_displayed&&d.tti&&d.e2e&&(d.tab_hidden_time_dd=o.getHiddenTime(d.fetch_start,d.fetch_start+d.all_pagelets_displayed),d.tab_hidden_time_tti=o.getHiddenTime(d.fetch_start,d.fetch_start+d.tti),d.tab_hidden_time_e2e=o.getHiddenTime(d.fetch_start,d.fetch_start+d.e2e));window&&window.location&&window.location.pathname&&(d.request_uri=window.location.pathname);delete d.sent;return d},_uploadPayload:function(a,b){if(t[a]!=null&&!t[a].sent){b=this.getPayload(a,b);b!=null&&(l.flush(b),t[a].sent=!0)}},getPayload:function(a,b){return this._getPayloadWithOffset(a,this._getFetchStart(a),b)},_getFetchStart:function(a){if(!(a in t))return null;var b=t[a].perfx_page_type;if(b=="quickling")if(!(a in x))return null;else b=k.getAsyncRequestTimings(x[a]);else b=k.getNavTimings();return!b||!b.fetchStart?null:b.fetchStart},_adjustValues:function(a,b){w.forEach(function(c){Object.prototype.hasOwnProperty.call(a,c)&&(a[c]-=b)})}};e.exports=y}),null);