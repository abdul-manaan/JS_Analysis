!function(e){function n(n){for(var i,o,s=n[0],c=n[1],l=n[2],h=0,p=[];h<s.length;h++)o=s[h],r[o]&&p.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(u&&u(n);p.length;)p.shift()();return a.push.apply(a,l||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],i=!0,s=1;s<t.length;s++){var c=t[s];0!==r[c]&&(i=!1)}i&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var i={},r={2:0},a=[];function o(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="/assets/experiment/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var u=c;a.push([73,1,0]),t()}({73:function(e,n,t){e.exports=t(74)},74:function(e,n,t){"use strict";t.r(n);var i=t(5),r=t.n(i),a=t(69),o=t.n(a),s=t(19),c=t.n(s),l=t(0);window.clickAds={eventAction:"",expValue:0,banner:null,path:"/assets/experiment/clickads/",done:!1,clickTimer:0,clickTimeout:2e3,placement:{a:"main-form-click",b:"main-form-submit",c:"result-link-click"},storageKey:"clickads",isAvailable:function(){return!0},isActive:function(){return Boolean(this.banner)},checkExperiment:function(){return"televzr-android-auth-02"==_sf.experiment||(!(!window.playerJS||!playerJS.showBanner)||!(!window.propellerAds||!propellerAds.isActive()))},init:function(){var e=this;if(!this.isAvailable())return!1;var n={};if(this.isControlGroup())this.banner=null,this.gaParameters={dimension1:"control group"},this.eventCategory+="-control",this.eventAction="control",this.controlGroup.gaSampleRate&&((n=n||{}).sampleRate=this.controlGroup.gaSampleRate);else{var t=this.chooseBanner();if(!t||!this.bannerList[t])return!1;var i=this.bannerList[t];if(this.eventCategory+="-"+t,i.gaResource&&(this.gaResource=i.gaResource),i.gaSampleRate&&((n=n||{}).sampleRate=i.gaSampleRate),this.banner=this.banner||{},this.banner.name=t,this.banner.url=i.url,this.banner.type=i.type,i.img&&(this.banner.img=i.img),this.banner.placement=this.chooseBannerPlacement(t,i.placement),!this.banner.placement||!this.placement[this.banner.placement])return!1;this.gaParameters={dimension1:"variant "+this.banner.placement.toUpperCase()},_sf.ads=_sf.ads||{},_sf.ads.propelleradsInterstitial=!1,this.eventAction=i.type,this.yandexMetrikaEnabled&&this.addYandexMetrika()}return _sf.gaTrackers[this.trackerName]={id:this.gaResource,sendPageview:!1,parameters:n},this.appendBanner(),$(function(){e.sendPageview()}),!0},isControlGroup:function(){var e=this.getCountrolGroupMinExpValue();return!!(e&&this.expValue>=e)},getCountrolGroupMinExpValue:function(){if(!this.controlGroup||!this.controlGroup.sample)return 0;var e=100-this.controlGroup.sample;return this.expSample&&(e=this.expSample-this.controlGroup.sample),++e},isClickUnderBanner:function(){return!(!this.banner||"clickunder"!=this.banner.type)},isInterstitialBanner:function(){return!(!this.banner||"interstitial"!=this.banner.type)},isInterstitialAvailable:function(){return!_sf.ads||!1!==_sf.ads.interstitial},isClickUnderAvailable:function(){return!_sf.ads||!1!==_sf.ads.clickunder},checkBanner:function(e){return!(!e||!e.url)&&((!e.lang||-1!=e.lang.indexOf(_sf.lang))&&((!e.country||-1!=e.country.indexOf(_sf.country))&&(!(e.mobile&&!_sf.mobile)&&(!e.os||-1!==e.os.indexOf(_sf.os.name)))))},chooseBanner:function(){var e=this.expValue;for(var n in this.bannerList){var t=this.bannerList[n];if(this.checkBanner(t)){if(!(e>t.proportion))return n;if((e-=t.proportion)<=0)return""}}return""},chooseBannerPlacement:function(e,n){return n?"string"==typeof n?n:c()(n)?1==n.length?n[0]:Object(l.b)("".concat(this.expName,"-").concat(e),n[Math.floor(Math.random()*n.length)]):"":""},sendEvent:function(e,n,t){e=e||this.eventCategory,n=n||this.eventAction,t=t||"",window.ga&&window.ga(this.trackerName+".send","event",e,n,t,this.gaParameters)},sendPageview:function(){window.ga&&window.ga(this.trackerName+".send","pageview",this.gaParameters)},triggerClick:function(e){var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),e[0].dispatchEvent(n)},appendBanner:function(){var e=this;sf.result.addResultCallback(function(n,t,i,r){n&&null!==n.supported_resource&&!1!==n.success&&(void 0===n.listItem||n.listLastItem)&&e.sendEvent("","vidacha-result","show")}),$("body").on("click",".downloader-2 .result-box .link-download",function(n){e.sendEvent("","vidacha-result","click"),e.banner&&"c"==e.banner.placement&&e.showBanner(n,this)}),this.banner&&("a"==this.banner.placement?$("body").on("click",".sf-form",function(n){e.showBanner(n,this)}):"b"==this.banner.placement&&$("body").on("submit",".sf-form",function(n){e.showBanner(n,this)}))},showBanner:function(e,n){if(this.banner&&!this.done&&!this.checkExperiment())return this.done=!0,this.isClickUnderBanner()?this.showClickUnderBanner(e,n):this.isInterstitialBanner()?this.showInterstitialBanner():void 0},isOneTabBrowser:function(){return!!_sf.app&&"rd_documents"!=_sf.app},showClickUnderBanner:function(e,n){if(this.isClickUnderAvailable()&&(!_sf.mobile||"cis"!=_sf.countryTierName||!$(n).hasClass("no-downloadable")))if(this.checkFrequencyCapping()){var t=this;this.sendEvent("","","open window"),this.storeImpression(),this.isOneTabBrowser()?this.getBandwidth(function(e){var n=t.getDownloadDelay(e,t.clickTimeout,1e4);t.sendEvent("","download delay",n),t.clickTimer=setTimeout(function(){window.location=t.banner.url},n)}):(window.open(this.banner.url),_sf.mobile&&(e.preventDefault(),clearTimeout(this.clickTimer),this.clickTimer=setTimeout(function(){t.triggerClick($(n))},this.clickTimeout)))}else this.sendEvent("","","frequency-capping")},showInterstitialBanner:function(){if(this.isInterstitialAvailable()){var e=this;$.fancybox({href:this.path+"img/"+this.banner.img,type:"image",padding:0,touch:!1,autoCenter:!0,helpers:{overlay:{css:{background:"rgba(0, 0, 0, .7)"},locked:!1}},beforeShow:function(){$(".fancybox-skin").css("background-color","#000")},afterShow:function(){e.sendEvent("","","show"),$(this.inner).on("click",function(){window.open(e.banner.url),e.sendEvent("","","click"),$.fancybox.close()})},beforeClose:function(){e.sendEvent("","","close")}})}},checkFrequencyCapping:function(){if(!this.frequencyCapping||!window.localStorage||!window.JSON)return!0;var e=localStorage.getItem(this.storageKey);if(!e)return!0;if(!(e=JSON.parse(e))||!c()(e))return!0;if(e.length<this.frequencyCapping)return!0;for(var n=(new Date).getTime()-864e5,t=0;t<3;t++)if(e[t]<n)return!0;return!1},storeImpression:function(){if(this.frequencyCapping&&window.localStorage&&window.JSON){var e=localStorage.getItem(this.storageKey);e&&(e=JSON.parse(e));var n=(new Date).getTime();if(e&&c()(e)){var t=n-864e5;e=e.filter(function(e){return e>t})}else e=[];e.unshift(n),e.length>this.frequencyCapping&&(e=e.slice(0,this.frequencyCapping)),localStorage.setItem(this.storageKey,o()(e))}},getDownloadDelay:function(e,n,t){var i=n;if(e>0){var r=1e3/e;(i=Math.round(i*r))<n&&(i=n),i>t&&(i=t)}return i},getBandwidth:function(e){var n=(new Date).getTime();$.get(this.path+"img/100kb.data?_="+(new Date).getTime()+Math.random()).done(function(t,i,a){var o=(new Date).getTime(),s=0,c=a.getResponseHeader("Content-Length");if(((c=r()(c))<0||isNaN(c))&&(c=0),c){var l=a.getAllResponseHeaders();l&&(c+=l.length),s=Math.round(8*c/((o-n)/1e3)/1024)}_sf.debug&&console.log("bandwidth: ",s+" Kbps"),e&&e(s)}).fail(function(){e&&e(0)})},addYandexMetrika:function(){function e(){try{window.yaCounter47997479=new Ya.Metrika2({id:47997479,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,webvisor:!0})}catch(e){}}this.ymStarted||(this.ymStarted=!0,window.Ya?e():function(n,t,i){(t[i]=t[i]||[]).push(e);var r=n.getElementsByTagName("script")[0],a=n.createElement("script"),o=function(){r.parentNode.insertBefore(a,r)};a.type="text/javascript",a.async=!0,a.src="https://mc.yandex.ru/metrika/tag.js","[object Opera]"==t.opera?n.addEventListener("DOMContentLoaded",o,!1):o()}(document,window,"yandex_metrika_callbacks2"))}}}});
//# sourceMappingURL=/assets/experiment/clickads/js/main.min.js.map