(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{100:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return d});var a=n(5),o=n(0),i=n(16),r=n.n(i),c=n(52),u=function(e,t){return"".concat(e,":").concat(t)},d=function(e){var t=o.a.get("googleAnalytics.trackers.editorial"),n={play:"metric1",skip:"metric2",25:"metric3",50:"metric4",75:"metric5",end:"metric6"},i=function(e){var t={video:{id:"gu-video-youtube-".concat(e.mediaId),eventType:"video:content:".concat(e.eventType)}};r.a.record(t)};["play","25","50","75","end"].forEach(function(o){a.a.once(u(o,e),function(a){var r={mediaId:e,mediaType:"video",eventType:o,isPreroll:!1};i(r),window.ga("".concat(t,".send"),"event",Object(c.a)(r,n,a,"gu-video-youtube",function(){return"video content"},e))})}),i({mediaId:e,mediaType:"video",eventType:"ready",isPreroll:!1})},s=function(e,t){a.a.emit(u(e,t),t)}},135:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var a=n(51),o=function(e){Object.keys(e).forEach(function(t){a.a.set("".concat("accessibility",".").concat(t),e[t])})},i=function(e){return!0===function(e){return!1!==a.a.get("".concat("accessibility",".").concat(e))}(e)}},139:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(4),o=n.n(a),i=n(0),r=n(136),c=n(122),u=new Promise(function(e){window.YT&&window.YT.Player?e():window.onYouTubeIframeAPIReady=e}),d=function(e){e&&e.classList.add("youtube__video-started")},s=function(e){return document.getElementById("youtube-".concat(e))},f=function(e,t,n,a){return Object(r.a)("https://www.youtube.com/iframe_api",{}),u.then(function(){return function(e,t,n,a,o,r){var u=!1!==Object(c.b)(c.e),d=!i.a.get("switches.youtubeRelatedVideos");return new window.YT.Player(e,{videoId:t,width:"100%",height:"100%",events:{onReady:a,onStateChange:o,onError:function(e){console.error("YOUTUBE: ".concat(e))}},embedConfig:{relatedChannels:[],disableRelatedVideos:d,adsConfig:{nonPersonalizedAd:!u}}})}(e.id,n,0,function(e){var a=s(n);(function(e){return e.target.getCurrentTime()>0})(e)&&d(a),function(e,t,n){o.a.write(function(){n&&n.classList.add("youtube__video-ready")}),t&&"function"==typeof t.onPlayerReady&&t.onPlayerReady(e)}(e,t,a)},function(e){!function(e,t,n){if(n&&i.a.get("page.isDev")){var a=window.YT.PlayerState,r=Object.keys(a).find(function(t){return a[t]===e.data});r&&console.log("Player ".concat(n.id," is ").concat(r))}o.a.write(function(){["ENDED","PLAYING","PAUSED","BUFFERING","CUED"].forEach(function(t){n&&(n.classList.toggle("youtube__video-".concat(t.toLocaleLowerCase()),e.data===window.YT.PlayerState[t]),d(n))})}),t&&"function"==typeof t.onPlayerStateChange&&t.onPlayerStateChange(e)}(e,t,s(n))})})}},143:function(e,t,n){"use strict";n.d(t,"a",function(){return I}),n.d(t,"b",function(){return k});var a=n(6),o=(n(2),n(7)),i=n(14),r=n(139),c=n(100),u=n(30),d=n(12),s=n(0),f=n(10),l=n(31),m=n.n(l),y=n(135),v=n(28),b={},g=[];document.addEventListener("focusout",function(){g.forEach(function(e){a.a.read(function(){if(document.activeElement===e)return Object(d.a)(".vjs-big-play-button",e.parentElement)}).then(function(e){a.a.write(function(){e&&e.addClass("youtube-play-btn-focussed")})})})}),document.addEventListener("focusin",function(){a.a.read(function(){return Object(d.a)(".vjs-big-play-button")}).then(function(e){a.a.write(function(){e&&e.removeClass("youtube-play-btn-focussed")})})});var p=function(e){b[e].progressTracker&&clearInterval(b[e].progressTracker)},w=function(e,t){var n=t.trackingId,a=t.iframe,o=t.overlay,i=t.endSlate,r=t.paused;p(e),function(e){b[e].progressTracker=setInterval(function(e){var t=b[e];if(t){var n=t.pendingTrackingCalls,a=t.youtubePlayer,o=t.duration,i=t.trackingId;if(n.length){var r=a.getCurrentTime();if(o){var u=Math.round(r/o*100);n.length&&u>=n[0]&&(Object(c.b)(n[0].toString(),i),n.shift())}}}}.bind(null,e),1e3),b[e].progressTracker}(e),r?t.paused=!1:Object(c.b)("play",n);var u=a.closest(".immersive-main-media");if(u&&u.classList.add("atom-playing"),o&&i&&!i.rendered){var d=o.parentElement;d&&i.fetch(d,"html")}},h=function(e){var t=e.split("?");return 1===t.length?"":Object(v.d)(t[1]).v||""},T={ENDED:function(e){var t=b[e];p(e),Object(c.b)("end",t.trackingId),t.pendingTrackingCalls=[25,50,75];var n=t.iframe&&t.iframe.closest(".immersive-main-media")||null;n&&n.classList.remove("atom-playing")},PLAYING:function(e){var t=b[e];if(t){var n=b[e],a=n.youtubePlayer,r=n.youtubeId,u=h(a.getVideoUrl());r!==u?Object(o.a)("/atom/youtube/".concat(u,".json")).then(function(n){var o=n.atomId;o&&(t.trackingId=o,t.youtubeId=u,t.duration=a.getDuration(),Object(c.a)(o),w(e,t))}).catch(function(e){Object(i.a)(Error("Failed to get atom ID for youtube ID ".concat(u,". ").concat(e)),{feature:"youtube"},!1)}):w(e,t)}},PAUSED:function(e){b[e].paused=!0,p(e)}},j=function(){var e=document.querySelector(".immersive-main-media__media .youtube-media-atom"),t=e?e.offsetHeight:0,n=document.querySelector(".immersive-main-media__headline-container"),a=t-(n?n.offsetHeight:0),o=document.querySelector(".youtube-media-atom__immersive-interface");o&&(o.style.top="".concat(a,"px"))},E=function(e,t,n,a,o){var i=document.getElementById(n);if(i){g.push(i);var r=o.target,c=h(r.getVideoUrl()),d=r.getDuration();if(b[t]={iframe:i,trackingId:e,youtubeId:c,duration:d,youtubePlayer:r,paused:!1,pendingTrackingCalls:[25,50,75]},function(e){return("video"===s.a.get("page.contentType","").toLowerCase()&&(s.a.get("page.isDev")?0===document.referrer.indexOf(window.location.origin):0===document.referrer.indexOf(s.a.get("page.host")))&&(b[e].iframe&&!!b[e].iframe.closest('figure[data-component="main video"]')||!1)||s.a.get("page.isFront"))&&!(Object(f.o)()||Object(f.l)())&&Object(y.a)("flashing-elements")}(t)&&o.target.playVideo(),a&&(b[t].overlay=a,s.a.get("page.section")&&!s.a.get("switches.youtubeRelatedVideos")&&Object(f.m)({min:"desktop"}))){var l=function(e){var t=e.parentNode;if(t instanceof HTMLElement){var n=(t.dataset||{}).endSlate;if(n){var a=new u.a;return a.endpoint=n,a}}}(a);l&&(b[t].endSlate=l)}i.closest(".immersive-main-media__media")&&(j(),window.addEventListener("resize",m()(j.bind(null),200)))}},O=function(e){a.a.read(function(){if(e){var t=e.querySelector(".youtube-media-atom__iframe");if(t){var n=t.id,a=e.getAttribute("data-media-atom-id")||"",o="".concat(a,"/").concat(Math.random().toString(36).substr(2,9));e.setAttribute("data-unique-atom-id",o);var i=e.querySelector(".youtube-media-atom__overlay"),u=e.getAttribute("data-channel-id")||"";Object(c.a)(a),Object(r.a)(t,{onPlayerReady:function(e){E(a,o,n,i,e)},onPlayerStateChange:function(e){!function(e,t){var n=t.data,a=Object.keys(T).find(function(e){return n===window.YT.PlayerState[e]});a&&T[a](e)}(o,e)}},t.dataset.assetId,u)}}})},P=function(e){e&&a.a.read(function(){Object(d.a)(".youtube-media-atom:not(.no-player)",e).each(function(e){var t=e.querySelector(".youtube-media-atom__overlay");s.a.get("page.isFront")?t.addEventListener("click",function(){O(e)}):O(e)})})},I=function(e){e&&e.length?e.forEach(P):P(document.body)},k=function(e){var t=b[e];t&&t.youtubePlayer.pauseVideo()}},216:function(e,t,n){"use strict";n.r(t),n.d(t,"init",function(){return o});var a=n(143),o=function(){Object(a.a)()}},52:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a=function(e,t,n,a,o,i){var r=a,c={eventCategory:"media",eventAction:o(e),eventLabel:n,dimension19:i,dimension20:r},u=t[e.eventType];return u&&(c[u]=1),c},o=function(e){var t="".concat(e.mediaType," ");return e.isPreroll?t+="preroll":t+="content",t}}}]);
//# sourceMappingURL=graun.youtube.js.map