(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["main"],{"0146":function(t,i,e){},"2ad4":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("a",{on:{click:function(i){return t.$router.push({path:"/search?containerid=231583"})}}},[e("aside",[e("label",{staticClass:"m-search"},[e("i",{staticClass:"m-font m-font-search"}),e("div",{staticClass:"m-text-cut"},[t._v(t._s(t.getHotword))])])])])},s=[],n=e("cebc"),r=e("2f62"),o={data:function(){return{}},computed:Object(n["a"])({},Object(r["c"])(["hotword"]),{getHotword:function(){return this.hotword.length?"大家都在搜：".concat(this.hotword):"搜索微博、找人"}})},l=o,c=(e("e36e"),e("0c7c")),d=Object(c["a"])(l,a,s,!1,null,"3a1729fe",null);i["default"]=d.exports},"362c":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"lite-topbar main-top"},[e("div",{staticClass:"nav-top"},[t.mlogin?e("div",{staticClass:"nav-left lite-iconf lite-iconf-profile",on:{click:t.goProfile}},[e("em",{directives:[{name:"show",rawName:"v-show",value:t.unread.follower,expression:"unread.follower"}],staticClass:"m-bubble m-bubble-red-s"})]):e("div",{staticClass:"nav-left unlogin-logo"}),e("search-bar",{staticClass:"nav-search",class:{"unlogin-search":!t.mlogin}}),e("div",{staticClass:"nav-right"},[t.mlogin?e("div",{staticClass:"lite-iconf lite-iconf-msg",on:{click:t.goMsg}},[e("em",{directives:[{name:"show",rawName:"v-show",value:t.allUnreadMsg,expression:"allUnreadMsg"}],staticClass:"m-bubble m-bubble-red",domProps:{textContent:t._s(t.allUnreadMsg)}})]):t._e(),e("div",{staticClass:"lite-iconf lite-iconf-releas",on:{click:t.goCompose}})])],1),e("div",{staticClass:"nav-main"},[e("div",{staticClass:"m-box"},[e("div",{staticClass:"m-box-col inner-box"},[e("div",{staticClass:"scroll-box slide-container"},[e("div",{staticClass:"slide-wrap"},[e("ul",{ref:"navtab",staticClass:"nav_item"},t._l(t.tabs,function(i,a){return e("li",{key:i.gid,staticClass:"item_li",class:{cur:t.isInThisTabGroup(t.curTab,i.children)},on:{click:function(e){return t.clickTabGroup(i,a)}}},[e("span",{directives:[{name:"mactive",rawName:"v-mactive"}]},[t._v("\n                  "+t._s(i.children[i.curGroupIndex||0].name)+"\n                  "),e("em")]),i.children.length>1&&t.isInThisTabGroup(t.curTab,i.children)?e("span",{staticClass:"triangle",class:{aniRotate:t.isShowTabGroup}}):t._e()])}),0)])]),t.curTabGroup&&t.curTabGroup.children.length>1&&t.isShowTabGroup&&t.isInThisTabGroup(t.curTab,t.curTabGroup.children)?e("transition",{attrs:{name:"slideInDown"}},[e("div",{staticClass:"lite-nav-sublist m-col-4"},[e("ul",{staticClass:"m-auto-list"},t._l(t.curTabGroup.children,function(i,a){return e("li",{key:i.gid,staticClass:"m-auto-box",class:{cur:i.gid===t.curTab.gid},on:{click:function(e){return t.changeTab(i,t.curTabGroup,a)}}},[e("span",{staticClass:"m-text-cut"},[t._v(t._s(i.name))]),0===i.type&&t.unread.status?e("em",{staticClass:"m-bubble m-bubble-red-s"}):t._e()])}),0)])]):t._e(),t.isShowAllTabGroup?e("transition",{attrs:{name:"slideInDown"}},[e("div",{staticClass:"lite-nav-sublist m-col-4"},[e("ul",{staticClass:"m-auto-list"},t._l(t.tabs,function(i,a){return e("li",{key:a,staticClass:"m-auto-box",class:{cur:t.curTab.gid===i.children[i.curGroupIndex||0].gid},on:{click:function(e){return t.clickTabGroup(i,a)}}},[e("span",{staticClass:"m-text-cut"},[t._v(t._s(i.children[i.curGroupIndex||0].name))])])}),0)])]):t._e()],1),e("div",{staticClass:"nav-plus m-box-center m-box-center-a",on:{click:t.showAllTabGroup}},[e("i",{staticClass:"m-font m-font-arrow-down",class:{aniRotate:t.isShowAllTabGroup}})])])])])},s=[],n=(e("20d6"),e("386d"),e("f499")),r=e.n(n),o=e("a745"),l=e.n(o),c=e("cebc"),d=(e("7f7f"),e("2f62")),u=e("5d2d"),h=e("383a"),_=null;function f(t){return"lbs"===t.type?{type:1,name:t.name,gid:t.type,api:"api/lbs/near"}:{type:1,name:t.name,gid:t.gid,api:"api/container/getIndex?containerid=".concat(t.gid,"&openApp=0"),url:"/p/index?containerid=".concat(t.gid)}}function p(t){return t.map(function(t){return Object(c["a"])({},t,{type:1,name:t.name,gid:t.gid,api:"feed/group?gid=".concat(t.gid),typeId:"max_id"})})}var g={components:{searchBar:e("2ad4").default},data:function(){return{curTab:{},curTabGroup:null,isShowAllTabGroup:!1,isShowTabGroup:!1,tabs:[]}},props:["curGroup"],created:function(){this.initTab();var t=this;h["a"].$on("restoreNetWork",function(i){i&&(t.tabs.length||t.initTab())})},watch:{mlogin:function(t){if(t&&this.getTabGroup(),l()(this.tabs)&&this.tabs[0]&&this.tabs[0].children){var i=this.tabs[0].children[0];this.changeTab(i)}},curPosition:function(t){var i=t[0];this.tabs[i].curGroupIndex=t[1]}},destroyed:function(){this.clearUnreadTimer(),h["a"].$off("restoreNetWork")},computed:Object(c["a"])({},Object(d["c"])(["unread","config","mlogin"]),{allUnreadMsg:function(){return this.unread.mention+this.unread.cmt+this.unread.attitude+this.unread.dm},curPosition:function(){for(var t=0;t<this.tabs.length;t++)for(var i=0;i<this.tabs[t].children.length;i++)if(this.tabs[t].children[i].gid===this.curTab.gid)return[t,i];return[0,0]}}),methods:Object(c["a"])({},Object(d["b"])(["freezeUnreadKey","clearUnreadTimer","unreadAction","updateHotword"]),{initTab:function(){_?(this.tabs=_,this.initCurTab()):this.getTabGroup()},goProfile:function(){var t=this.config.uid;t&&this.$router.push({path:"/profile/".concat(t)})},goMsg:function(){"/message"===this.$route.path?this.$emit("updateFeed"):this.$router.push({path:"/message"})},getTabGroup:function(){var t=this;return this.$http.get("api/config/list").then(function(i){if(i.data&&i.data.ok>0){var e=i.data.data,a=[],s=e.hot;if(s&&s.hotWord&&t.updateHotword(s.hotWord),e.groups&&e.groups.length){t.$store.dispatch("updateLoggedin",!0);var n=p(e.groups),r=[{type:0,name:"关注",gid:"all",api:"feed/friends",typeId:"max_id"},{type:1,name:"好友圈",gid:"circle",api:"feed/circle",typeId:"max_id"},{type:1,name:"悄悄关注",gid:"private",api:"feed/private",typeId:"max_id"},{type:1,name:"我赞过",api:"api/container/getIndex?containerid=230869".concat(t.config.uid,"_-_mix&openApp=0"),gid:"230869".concat(t.config.uid,"_-_mix"),url:"/p/index?containerid=230869".concat(t.config.uid,"_-_mix")},{type:1,name:"我的收藏",api:"api/container/getIndex?containerid=230259&openApp=0",gid:"230259",url:"/p/index?containerid=230259"}];a.push({children:r.concat(n),curGroupIndex:0})}else t.$store.dispatch("updateLoggedin",!1);if(+u["a"].getData("h5_mlogin")!==+t.mlogin&&(u["a"].setData("h5_mlogin",+t.mlogin),u["a"].removeData("h5_cur_group"),u["a"].removeData("h5_feed_data"),u["a"].removeData("h5_curscroll")),e.channel&&e.channel.length){var o=e.channel.map(function(t){return{children:[f(t)]}});a=a.concat(o)}t.tabs=a,_=a,t.initCurTab()}})},initCurTab:function(){var t=this.tabs[0].children[0],i=u["a"].getData("h5_cur_group"),e=i&&i.api?r()(this.tabs).indexOf('"gid":"'.concat(i.gid,'"'))>0:0;i&&e&&(t=i),this.mlogin&&this.unreadAction(),this.curTab.gid&&t.gid!==this.curTab.gid?this.changeTab(t):this.setCurTab(t)},setCurTab:function(t){t&&(u["a"].setData("h5_cur_group",t),this.curTab=t,this.$emit("update:curGroup",t),this.scrollToCurTab(t))},clickTabGroup:function(t){var i=this;if(this.curTabGroup=t,this.isShowAllTabGroup=!1,t.children&&"lbs"===t.children[0].gid){var e=t.children[0];navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){var a=new URL("".concat(window.location.origin,"/").concat(e.api));a.searchParams.set("lat",t.coords.latitude),a.searchParams.set("lon",t.coords.longitude),e.api="api/lbs/near".concat(a.search),i.setCurTab(e)},function(){},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}this.isInThisTabGroup(this.curTab,t.children)?t.children.length>1?this.isShowTabGroup=!this.isShowTabGroup:this.changeTab(t.children[0]):(this.isShowTabGroup=!1,this.changeTab(t.children[t.curGroupIndex||0]))},changeTab:function(t,i){var e=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;2!==t.type?3!==t.type?(t.gid===this.curTab.gid?this.$emit("updateFeed"):(this.setCurTab(t),i&&(i.curGroupIndex=a),this.$nextTick(function(){e.$emit("changeGroup")})),this.isShowTabGroup=!1):window.location.href=t.url:this.$router.push({path:t.url})},scrollToCurTab:function(){var t=this,i=-1;this.tabs.some(function(e,a){return!!t.isInThisTabGroup(t.curTab,e.children)&&(i=a,!0)}),this.$nextTick(function(){var e=t.$refs.navtab;if(e&&i>-1){var a=e.children[i].getBoundingClientRect();e.parentElement.scrollLeft+=a.left-window.innerWidth/2}})},showAllTabGroup:function(){this.isShowAllTabGroup=!this.isShowAllTabGroup,this.isShowTabGroup=!1},goCompose:function(){this.mlogin?this.$router.push({name:"composer"}):window.location.href="https://passport.weibo.cn/signin/login?entry=mweibo&res=wel&wm=3349&r=".concat(encodeURIComponent(window.location.href))},isInThisTabGroup:function(t,i){return i.some(function(i){return t.gid===i.gid})}})},m=g,b=(e("683a"),e("0c7c")),v=Object(b["a"])(m,a,s,!1,null,"f5efd7b4",null);i["default"]=v.exports},"383e":function(t,i,e){},"3d1e":function(t,i,e){},"683a":function(t,i,e){"use strict";var a=e("0146"),s=e.n(a);s.a},7401:function(t,i,e){"use strict";var a=e("383e"),s=e.n(a);s.a},"8eae":function(t,i,e){"use strict";e.r(i);e("7f7f");var a=e("5d73"),s=e.n(a);i["default"]={methods:{deleteWeiboInList:function(t,i){var e=!0,a=!1,n=void 0;try{for(var r,o=s()(i);!(e=(r=o.next()).done);e=!0){var l=r.value,c=-1;if(this[l].some(function(i,e){return i.id===t&&(c=e)}),c>-1)return this[l].splice(c,1),!0}}catch(d){a=!0,n=d}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}return!1}}}},cc3e:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"lite-enter-btns"},[e("a",{staticClass:"lite-sign-in",on:{click:t.goLogin}},[t._v("登录/注册")])])},s=[],n=(e("a481"),e("cebc")),r=e("2f62"),o={data:function(){return{login:"https://passport.weibo.cn/signin/login?entry=mweibo&res=wel&wm=3349&r=".concat(encodeURIComponent(window.location.href)),signin:"https://m.weibo.cn/reg/index?wm=3349&backURL=".concat(encodeURIComponent(window.location.href))}},methods:Object(n["a"])({},Object(r["b"])(["updateConfig"]),{goLogin:function(){var t=this;this.$router.replace({path:"/login",query:{backURL:"".concat(encodeURIComponent(window.location.href))}}),"standalone"in window.navigator&&window.navigator.standalone&&this.$http.get("/api/config").then(function(i){i.data&&i.data.ok>0&&t.updateConfig(i.data.data)})}})},l=o,c=e("0c7c"),d=Object(c["a"])(l,a,s,!1,null,null,null);i["default"]=d.exports},cd56:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"main-wrap"},[e("top-bar",{attrs:{curGroup:t.cur_group},on:{"update:curGroup":function(i){t.cur_group=i},"update:cur-group":function(i){t.cur_group=i},changeGroup:t.switch_groups,updateFeed:t.loadmoreHandle}}),t.list_cur&&t.list_cur.length>0?[e("mv-loadmore",{ref:"loadmore",attrs:{"top-method":t.pull_refresh}},[e("div",{ref:"cont",staticClass:"pannelwrap",style:{"padding-top":t.to_rem(t.padding_top),"padding-bottom":t.to_rem(t.padding_bottom)}},t._l(t.list_cur,function(i,a){return e("div",{key:i.id||(i.mblog?i.mblog.id:a)||i.itemid,staticClass:"wb-item-wrap"},[i.extraCard?e("card",{attrs:{card:i}}):e("div",{staticClass:"wb-item"},[e("weibo",{attrs:{item:i.mblog||i,showTriangle:t.show_triangle,showOgRCL:!0,showRpRCL:!1}})],1)],1)}),0),t.re_do?e("div",{staticClass:"m-tips m-tips-tp cursor",on:{click:function(i){return t.load_more(t.nextPageApi)}}},[t._v("\n        网络异常，请稍后点击重试~\n      ")]):t._e(),e("mv-nextpage",{attrs:{requesting:t.is_request}}),e("div",{ref:"hei",staticClass:"temporary"},t._l(t.diff_items,function(i,a){return e("div",{key:i.id||(i.mblog?i.mblog.id:a),staticClass:"wb-item-wrap"},[e("div",{staticClass:"wb-item"},[e("weibo",{attrs:{item:i.mblog||i,showTriangle:t.show_triangle,showOgRCL:!0,showRpRCL:!1}})],1)])}),0)],1),t.followerInfo?e("friendships",{attrs:{isFirstFollow:!0}}):t._e()]:[t.net_error.flag?e("div",[e("no-data",{attrs:{msg:t.net_error}})],1):t._e(),!t.net_error.flag&&t.no_data.flag?e("div",[e("no-data",{attrs:{msg:t.no_data}})],1):t._e(),t.net_error.flag||t.no_data.flag?t._e():e("div",[e("empty"),e("empty"),e("empty"),e("empty"),e("empty")],1)],e("router-view"),e("transition",{attrs:{name:"fade"}},[t.mlogin?e("div",{directives:[{name:"show",rawName:"v-show",value:!t.is_upglide,expression:"!is_upglide"}],class:["refresh-btn lite-iconf"],on:{click:t.handle_refresh}},[e("div",{class:["lite-iconf-refresh",t.isRefreshRotate?"refresh-rotate":""]})]):e("loginSignin",{directives:[{name:"show",rawName:"v-show",value:!t.is_upglide,expression:"!is_upglide"}]})],1),t.pageLoaded?e("pop-video-new"):t._e(),t.showAppTips?e("appTips"):t._e()],2)},s=[],n=e("7618"),r=e("5176"),o=e.n(r),l=(e("28a5"),e("5d73")),c=e.n(l),d=(e("386d"),e("cebc")),u=e("2f62"),h=e("383a"),_=e("5d2d"),f=e("685a"),p={data:function(){return{timer:null,is_upglide:!1,is_refresh:!1,lastHeight:0,first_scroll:0,is_scrolling:!1,is_loading:!1,is_request:!1,list_all:[],list_cur:[],since:"",max:"",padding_top:0,padding_bottom:0,page:"",since_id:"",max_id:"",count:20,last_scrolltop:0,diff_items:[],feed_id:5e3,show_triangle:!0,no_data:{flag:!1,msg:"暂无数据"},net_error:{flag:!1,msg:"网络异常，请稍后刷新重试~"},re_do:!1,cur_group:null,showAppTips:!1,pageLoaded:!1}},destroyed:function(){this.is_refresh=!1},computed:Object(d["a"])({livePhotoSupported:function(){return"iOS"===f["a"].os&&"Chrome"===f["a"].browser||"Safari"===f["a"].browser},isRefreshRotate:function(){return this.is_refresh&&this.is_request},nextPageApi:function(){var t=new URL("".concat(window.location.origin,"/").concat(this.cur_group.api));return this.cur_group.typeId?t.searchParams.set(this.cur_group.typeId,this[this.cur_group.typeId]):this.since_id?t.searchParams.set("since_id",this.since_id):this.page&&t.searchParams.set("page",this.page),"".concat(t.pathname).concat(t.search)}},Object(u["c"])(["config","mlogin","followerInfo","curWeiboData"])),mixins:[e("8eae")],components:{card:e("0f56").default,topBar:e("362c").default,loginSignin:e("cc3e").default,weibo:e("cef8").default,empty:e("d773").default,popVideoNew:function(){return Promise.resolve().then(e.bind(null,"6af8"))},noData:e("ee2f").default,appTips:e("e698").default,friendships:e("1395").default},watch:{list_all:function(){var t=!0,i=!1,e=void 0;try{for(var a,s=c()(this.list_cur);!(t=(a=s.next()).done);t=!0){var n=a.value,r=n.mblog||n;if(r.id===this.curWeiboData.id)return void(this.curWeiboData.isUpdate?r.text=this.curWeiboData.text:(r.attitudes_count=this.curWeiboData.attitudes_count,r.liked=this.curWeiboData.liked))}}catch(o){i=!0,e=o}finally{try{t||null==s.return||s.return()}finally{if(i)throw e}}!0===this.is_loading&&this.scrolling()},cur_group:function(t,i){i||this.list_all.length||this.init_first_data()}},beforeRouteLeave:function(t,i,e){this.save_storage("vue-router"),this.is_scrolling=!1,this.is_loading=!1,this.is_request=!1,window.onscroll=null,h["a"].$off("ChangeGroup"),h["a"].$off("H5_Refresh"),h["a"].$off("restoreNetWork"),e()},created:function(){this.is_refresh=!1;var t=this;h["a"].$on("restoreNetWork",function(i){i&&(t.net_error.flag=!1,t.list_all&&t.list_all.length?t.load_more(t.nextPageApi):t.pull_refresh())})},mounted:function(){var t=this,i=this,e=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance,a=!e||e&&2===e.navigation.type;if(h["a"].$on("ChangeGroup",function(){t.switch_groups()}),h["a"].$on("H5_Refresh",function(){t.pull_refresh()}),_["a"].hasData("h5_feed_data")&&_["a"].hasData("h5_curscroll")&&_["a"].hasData("h5_cur_group")&&_["a"].getData("h5_last_time")&&(new Date).getTime()-_["a"].getData("h5_last_time")<=108e5&&("change-href"===_["a"].getData("h5_jump_type")&&a||"vue-router"===_["a"].getData("h5_jump_type"))){var s=_["a"].getData("h5_feed_data"),n=_["a"].getData("h5_curscroll");for(var r in s)({}).hasOwnProperty.call(s,r)&&(this[r]=s[r]);setTimeout(function(){i.is_scrolling=!1,i.is_request=!1,i.is_loading=!1;var t=document.scrollingElement||document.body;t.scrollTop=n,window.onscroll=i.scrolling},0)}else this.clear_storage(),this.init_first_data();window.onbeforeunload=function(){i.save_storage("change-href"),i.is_scrolling=!1,i.is_request=!1,i.is_loading=!1,window.onscroll=null,h["a"].$off("ChangeGroup"),h["a"].$off("H5_Refresh")},window.onunload=function(){i.save_storage("change-href"),i.is_scrolling=!1,i.is_request=!1,i.is_loading=!1,window.onscroll=null,h["a"].$off("ChangeGroup"),h["a"].$off("H5_Refresh")},i.showAppTips=!1,this.$nextTick(function(){t.pageLoaded=!0})},methods:Object(d["a"])({},Object(u["b"])(["freezeUnreadKey"]),{loadmoreHandle:function(){this.$refs.loadmore&&this.$refs.loadmore.loadStart()},switch_groups:function(){this.is_refresh=!1,this.no_data.flag=!1,this.net_error.flag=!1,this.re_do=!1,this.list_all=[],this.list_cur=[],this.padding_top=0,this.padding_bottom=0,this.last_scrolltop=0;var t=document.scrollingElement||document.body;t.scrollTop=0,window.onscroll=null,this.clear_storage(),this.init_first_data()},clear_storage:function(){_["a"].removeData("h5_feed_data"),_["a"].removeData("h5_curscroll"),_["a"].removeData("h5_jump_type"),_["a"].removeData("h5_last_time")},save_storage:function(t){if(this.list_all.length>0){_["a"].setData("h5_feed_data",this.$data);var i=document.scrollingElement||document.body,e=i.scrollTop;_["a"].setData("h5_curscroll",e),this.cur_group&&_["a"].setData("h5_cur_group",this.cur_group),_["a"].setData("h5_jump_type",t),_["a"].setData("h5_last_time",(new Date).getTime())}},change_data:function(t){this.livePhotoSupported&&t.statuses.map(function(t){if(t.pic_video)for(var i=t.pic_video.split(","),e=t.live_photo,a=0;a<i.length;a++)for(var s=0;s<e.length;s++){var n=i[a].split(":")[0],r=i[a].split(":")[1];if(e[s].indexOf(r)>-1){o()(t.pics[n],{videoSrc:e[s]});break}}return t})},init_first_data:function(){var t=this;if(this.cur_group){var i=this.cur_group.api,e=i.indexOf("?")>0?i:"".concat(i,"?");if(!0!==this.is_request){this.is_request=!0;var a=this;this.$http.get(e,{timeout:3e4}).then(function(i){if(i.data&&i.data.ok){"all"===t.cur_group.gid&&t.freezeUnreadKey("status");var e=i.data.data;if(e.statuses=e.statuses||e.cards,e.statuses&&e.statuses.length>0)if(e.cards&&22===e.cards[0].card_type)a.no_data.flag=!0;else{var s=e.statuses;t.max_id=e.max_id,t.since_id=e.cardlistInfo?e.cardlistInfo.since_id:"",e.page?t.page=e.page:e.cardlistInfo&&(t.page=e.cardlistInfo.page),t.change_data(e),e.trends&&e.trends[0]&&(o()(e.trends[0],{extraCard:!0}),s=e.trends.concat(s)),a.list_cur=s,a.$nextTick(function(){var t,i,e,n=a.$refs.cont.children;for(t=0;t<n.length;t++)i=n[t].offsetHeight,e=a.feed_id++,o()(s[t],{hei:i,feed_id:e});a.list_all=s;var r=document.documentElement.clientHeight||window.innerHeight,l=a.list_cur.length;a.since=a.list_cur[0].feed_id,a.max=a.list_cur[l-1].feed_id,a.first_scroll=.5*a.$refs.cont.offsetHeight-r/2,window.onscroll=a.scrolling}),a.no_data.flag=!1}else a.no_data.flag=!0}else a.net_error.flag=!0,a.net_error.msg=i.data.msg||a.net_error.msg;a.$nextTick(function(){a.is_request=!1,a.is_refresh=!1,h["a"].$emit("mvLoadEnd")})}).catch(function(){a.is_request=!1,h["a"].$emit("mvLoadEnd"),a.net_error.flag=!0,a.net_error.msg="网络异常，稍后请刷新重试~"})}}},deleteWeibo:function(t){this.deleteWeiboInList(t,["list_cur","list_all"])},pull_refresh:function(){var t=document.scrollingElement||document.body;t.scrollTop=0,this.padding_top=0,this.padding_bottom=0,this.last_scrolltop=0,this.clear_storage(),this.init_first_data()},handle_refresh:function(){var t=this;this.is_refresh=!0;var i=document.scrollingElement||document.body;i.scrollTop=0,setTimeout(function(){t.loadmoreHandle()},250)},load_more:function(t,i){var e=this;!0!==this.is_request&&(this.is_request=!0,this.re_do=!1,this.$http.get(t,{timeout:3e4}).then(function(t){if(!t.data||!t.data.ok)throw new Error({msg:t.data.msg});"all"===e.cur_group.gid&&e.freezeUnreadKey("status");var i=t.data.data;i.statuses=i.statuses||i.cards,i.statuses.length>0&&(i.cards&&22===i.cards[0].card_type?(e.is_request=!1,h["a"].$emit("mvLoadEnd")):(e.max_id=i.max_id,e.since_id=i.cardlistInfo?i.cardlistInfo.since_id:"",i.page?e.page=i.page:i.cardlistInfo&&(e.page=i.cardlistInfo.page),e.change_data(i),e.save_height(i)))}).catch(function(t){i&&h["a"].$emit("mvToast",{type:"error",text:t.msg||"网络异常，请稍后再试~"}),e.is_request=!1,e.re_do=!0}))},save_height:function(t,i){var e,a,s,n,r=t.statuses||t.cards,l=r.length,c=this;c.diff_items=r,c.$nextTick(function(){if(c.$refs.hei.children.length===l){for(e=c.$refs.hei.children,a=0;a<l;a++)s=e[a].offsetHeight,n=c.feed_id++,o()(r[a],{hei:s,feed_id:n});c.set_list_all(t,i),c.diff_items=[]}})},set_list_all:function(t,i){var e=this;e.is_request=!1;var a=t.statuses;this.list_all="start"===i?a.concat(this.list_all):this.list_all.concat(a)},get_item_H:function(t,i){var e=0;if(this.$refs.cont){var a,s=this.$refs.cont.children,n=s.length,r=i||n;if("start"===t)for(a=0;a<r;a++)e+=s[a].offsetHeight;else for(a=n-1;a>=n-r;a--)e+=s[a].offsetHeight}return e},get_wb_hei:function(t){var i,e=0;for(i=0;i<t.length;i++)e+=t[i].hei;return e},get_scroll_items:function(t,i){var e,a,s=this.list_all.length,n="",r=[],o=[],l=[],c=[],d=0,u=0,h=0,_=0;for(e=0;e<s;e++)if("since"===i&&this.since===this.list_all[e].feed_id||"max"===i&&this.max===this.list_all[e].feed_id){n=e;break}if("max"===i){var f=n+1-this.list_cur.length;for(e=f;e<s;e++){if(!(h+this.list_all[e].hei<=t))break;h+=this.list_all[e].hei,d++}for(a=n+1;a<s;a++){if(!(_+this.list_all[a].hei<=t))break;_+=this.list_all[a].hei,u++}if(this.list_all[a]&&_+this.list_all[a].hei>=t&&this.list_all[n+1+u])return o=this.list_all.slice(n+1,n+1+u),l=this.list_all.slice(u>this.count?n+1+u-this.count:n+1,n+1+u),r=this.list_all.slice(f,f+d),c=d>this.list_cur.length?this.list_cur:this.list_all.slice(f,f+d),{add_wb_list:l,wb_list_top:r,wb_list_bottom:o,diff_wb_list:c}}if("since"===i&&this.list_all[n-1]){var p=n-1+this.list_cur.length;for(e=p;e>=0;e--){if(!(_+this.list_all[e].hei<=t))break;_+=this.list_all[e].hei,u++}for(a=n-1;a>=0;a--){if(!(h+this.list_all[a].hei<=t))break;h+=this.list_all[a].hei,d++}var g=Math.max(n-d,0);return r=this.list_all.slice(g,n),o=this.list_all.slice(Math.max(p+1-u,0),p+1),n-d<=0?(l=this.list_all.slice(0,this.count),c=this.list_cur):(l=this.list_all.slice(g,d>this.count?g+this.count:n),c=u>this.list_cur.length?this.list_cur:this.list_all.slice(Math.max(p+1-u,0),p+1)),{add_wb_list:l,wb_list_top:r,wb_list_bottom:o,diff_wb_list:c}}return""},to_rem:function(t){return"".concat(Math.ceil(t),"px")},scrolling:function(){var t=this,i=this,e=document.scrollingElement||document.body,a=e.scrollTop;!i.is_refresh&&a>0&&(a>=i.lastHeight?i.is_upglide=!0:i.is_upglide=!1),i.lastHeight=a,!0!==i.is_scrolling&&(i.is_scrolling=!0,setTimeout(function(){if(i.is_scrolling=!1,t.$refs.cont&&!(0===i.padding_top&&a<i.first_scroll)){var e=a-i.first_scroll-i.last_scrolltop;if(e>0&&a-i.last_scrolltop>0){if(Math.abs(e)>=i.get_item_H("start",1)){var s=i.get_scroll_items(e,"max");if("object"===Object(n["a"])(s)){if(s.wb_list_top.length>0&&s.wb_list_bottom.length>0){i.padding_top+=i.get_wb_hei(s.wb_list_top),i.padding_bottom>i.get_wb_hei(s.wb_list_bottom)?i.padding_bottom-=i.get_wb_hei(s.wb_list_bottom):i.padding_bottom=0;var r=i.list_cur.slice(s.diff_wb_list.length);i.list_cur=r.concat(s.add_wb_list),i.max=i.list_cur[i.list_cur.length-1].feed_id,i.since=i.list_cur[0].feed_id,i.last_scrolltop+=i.get_wb_hei(s.wb_list_top),i.is_loading=!1}}else i.load_more(i.nextPageApi),i.is_loading=!0}}else if(e<0&&a-(i.last_scrolltop+i.first_scroll)<0&&Math.abs(e)>=i.get_item_H("end",1)){var o=i.get_scroll_items(Math.abs(e),"since");if("object"===Object(n["a"])(o)){if(o.wb_list_top.length>0&&o.wb_list_bottom.length>0){i.padding_bottom+=i.get_wb_hei(o.wb_list_bottom),i.padding_top>i.get_wb_hei(o.wb_list_top)?i.padding_top-=i.get_wb_hei(o.wb_list_top):i.padding_top=0;var l=i.list_cur.length,c=i.list_cur.slice(0,l-o.diff_wb_list.length);i.list_cur=o.add_wb_list.concat(c),i.max=i.list_cur[i.list_cur.length-1].feed_id,i.since=i.list_cur[0].feed_id,0===a?i.last_scrolltop=0:i.last_scrolltop-=i.get_wb_hei(o.wb_list_top)}}else i.padding_top=0}}},300))}})},g=p,m=(e("7401"),e("0c7c")),b=Object(m["a"])(g,a,s,!1,null,"7e09ab40",null);i["default"]=b.exports},d773:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement;t._self._c;return t._m(0)},s=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"wb-item-wrap"},[e("div",{staticClass:"wb-item"},[e("div",{staticClass:"card m-panel card9 f-weibo"},[e("div",{staticClass:"card-wrap"},[e("header",{staticClass:"weibo-top m-box"},[e("div",{staticClass:"m-avatar-box"},[e("a",{staticClass:"m-img-box anim-load",attrs:{href:"javascript:;"}})]),e("div",{staticClass:"m-box-dir m-box-col"},[e("div",{staticClass:"m-text-box"},[e("h4",{staticClass:"m-text-cut f-r"}),e("h3",{staticClass:"m-text-cut empty-bg width-min inline-block anim-load"})])])]),e("article",{staticClass:"weibo-main"},[e("div",{staticClass:"weibo-og"},[e("p",{staticClass:"empty-bg txt-margin anim-load"}),e("p",{staticClass:"empty-bg txt-margin anim-load"}),e("p",{staticClass:"empty-bg txt-margin anim-load"}),e("p",{staticClass:"empty-bg txt-margin anim-load"}),e("p",{staticClass:"empty-bg txt-margin anim-load"})])]),e("footer",{staticClass:"f-footer-ctrl"},[e("div",{staticClass:"m-diy-btn"},[e("i",{staticClass:"lite-iconf lite-iconf-report"}),e("h4",[t._v("转发")])]),e("div",{staticClass:"m-diy-btn"},[e("i",{staticClass:"lite-iconf lite-iconf-comments"}),e("h4",[t._v("评论")])]),e("div",{staticClass:"m-diy-btn"},[e("i",{staticClass:"lite-iconf lite-iconf-like"}),e("h4",[t._v("赞")])]),e("aside",[e("i",{staticClass:"f-more"},[t._v("...")])])])])])])])}],n=e("0c7c"),r={},o=Object(n["a"])(r,a,s,!1,null,null,null);i["default"]=o.exports},e36e:function(t,i,e){"use strict";var a=e("3d1e"),s=e.n(a);s.a}}]);
//# sourceMappingURL=main.2675145a.js.map