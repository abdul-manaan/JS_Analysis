!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";window.postTvScriptsLoaded=window.postTvScriptsLoaded||!1,window.powaTranslate=function(){var els=document.querySelectorAll(".wpv-player, .posttv-video-embed:not(.powa), .posttv-player-video");Array.prototype.forEach.call(els,function(el,i){el.classList.add("powa"),el.setAttribute("data-org","wapo"),el.setAttribute("data-ad-bar","true"),"1"===el.getAttribute("data-show-endscreen")&&el.setAttribute("data-playthrough","true"),"1"===el.getAttribute("data-show-caption")&&el.setAttribute("data-blurb","1"),"live"===el.getAttribute("data-category-id")&&el.setAttribute("data-live","1")})};var anyPlayer=document.querySelector(".wpv-player, .posttv-video-embed:not(.powa), .posttv-player-video");anyPlayer||"pwa"===window.wp_site?!function(){var queryStringObj=function(){if(!window.location.search)return{};for(var queries=window.location.search.slice(1).split("&"),count=queries.length,queryStringObj={},i=0;count>i;i++){var query=queries[i].split("=");query[0]&&(query.length<2&&query.push(""),queryStringObj[decodeURIComponent(query[0])]=decodeURIComponent(query[1]))}return queryStringObj}(),os=window.wp_pb&&wp_pb.BrowserInfo&&wp_pb.BrowserInfo.OS,webview=!1;"Android"==os&&navigator.userAgent.indexOf("Version")>-1?webview=!0:/iPhone|iPad/.test(os)&&-1===navigator.userAgent.indexOf("Version")&&(webview=!0);var ptvenv=queryStringObj.ptvenv||localStorage.getItem("ptvenv");!ptvenv&&window.wp_pb&&wp_pb.pageName&&0===wp_pb.pageName.indexOf("article")&&(ptvenv="powa");var isHomepage=window.wp_meta_data&&wp_meta_data.isHomepage||/homepage/.test(window.wp_page_name),isPrimetime=!!window.Primetime;/powa/.test(ptvenv)&&(isHomepage||isPrimetime)&&(console.log("opting out of powa"),ptvenv=void 0),window.postTvScriptsLoaded?(console.log("Embed script already on page.  Skip loading scripts"),window.postTvProcessEmbeds&&window.postTvProcessEmbeds(),/powa/.test(ptvenv)&&(window.powaTranslate(),"function"==typeof window.powaBoot&&window.powaBoot())):!function(){window.postTvScriptsLoaded=!0;var cacheToken="917745005",loadScript=function(src,cb){var script=document.createElement("script");script.type="text/javascript",script.src=src;var timeout=1e3,timeoutHandler=setTimeout(function(){script.onreadystatechange=script.onload=script.onerror=null,cb&&cb()},timeout);script.readyState?script.onreadystatechange=function(){("loaded"==script.readyState||"complete"==script.readyState)&&(script.onreadystatechange=null,clearTimeout(timeoutHandler),cb&&cb())}:script.onload=script.onerror=function(){clearTimeout(timeoutHandler),cb&&cb()},document.getElementsByTagName("head")[0].appendChild(script)},envs={local:"/pb",prod:"https:"===window.location.protocol?"//www.washingtonpost.com/video":"//js.washingtonpost.com/video",beta:"https:"===window.location.protocol?"//www.washingtonpost.com/posttv-beta":"//js.washingtonpost.com/posttv-beta",ptvBeta:"//posttvbeta.washingtonpost.com/posttv-beta",diBeta:"//posttvbeta.digitalink.com/posttv-beta",powa:"//d1pz6dax0t5mop.cloudfront.net"},href=window.location.href,local=href.indexOf("use_local=1")>-1,beta=href.indexOf(envs.beta)>-1||"beta"===ptvenv,ptvBeta=href.indexOf(envs.ptvBeta)>-1||"ptvV2Beta"===ptvenv,diBeta=href.indexOf(envs.diBeta)>-1||"diBeta"===ptvenv,powa="powa"===ptvenv,powaBeta="powaBeta"===ptvenv,powaSandbox="powaSandbox"===ptvenv,scriptEl=document.querySelector('script[src*="WapoVideoEmbed.min.js"], script[src*="posttv-video-embed.v3.js"], script[src*="posttv-video-embed.v3.min.js"]'),fullJsUrl=scriptEl?scriptEl.getAttribute("src"):null,wpvContextPath=envs.prod;if(powa||powaBeta||powaSandbox)console.debug("Using PoWa player"),window.powaTranslate(),wpvContextPath=envs.powa;else if(local)wpvContextPath=envs.local;else if(beta)wpvContextPath=envs.beta;else if(ptvBeta)wpvContextPath=envs.ptvBeta;else if(diBeta)wpvContextPath=envs.diBeta;else if(fullJsUrl){var fullJsUrlResources=fullJsUrl.indexOf("/resources/env/WapoVideo/dist")>-1?fullJsUrl.indexOf("/resources/env/WapoVideo/dist"):fullJsUrl.indexOf("/resources/js/posttv")>-1?fullJsUrl.indexOf("/resources/js/posttv"):fullJsUrl.indexOf("/static/js/posttv");fullJsUrlResources>=0&&(wpvContextPath=fullJsUrl.substr(0,fullJsUrlResources),0===wpvContextPath.indexOf("http")&&(wpvContextPath=wpvContextPath.substr(wpvContextPath.indexOf("//"))))}var wpvConfigPath="//d21rhj7n383afu.cloudfront.net/WapoVideo/WapoVideoConfig.js";(window.location.hostname.indexOf("local")>-1||href.indexOf("posttv-beta")>-1)&&(wpvConfigPath="/pb/resources/env/WapoVideo/src/WapoVideoConfig.js");var script=powaSandbox?wpvContextPath+"/sandbox/powaBoot.js?_="+cacheToken:powaBeta?wpvContextPath+"/beta/powaBoot.js?_="+cacheToken:powa?wpvContextPath+"/prod/powaBoot.js?_="+cacheToken:wpvContextPath+"/resources/env/WapoVideo/dist/WapoVideoEmbed.main.min.js?_="+cacheToken;loadScript(wpvConfigPath,function(){if(/powa/.test(ptvenv)){var needPowaPlayer="undefined"==typeof window.powaBoot||"powaSandbox"===ptvenv;console.log("loading powa player dynamically?",needPowaPlayer),needPowaPlayer?loadScript(script):"function"==typeof window.powaBoot&&window.powaBoot()}else"function"!=typeof window.Promise?loadScript(wpvContextPath+"/resources/js/posttv/vendor/es6-promise.min.js",function(){console.log("loading embed script",script),loadScript(script)}):(console.log("loading embed script",script),loadScript(script))})}()}():console.log("Could not find a player div on the page, skipping")},{}]},{},[1]);
//# sourceMappingURL=WapoVideoEmbed.min.js.map
