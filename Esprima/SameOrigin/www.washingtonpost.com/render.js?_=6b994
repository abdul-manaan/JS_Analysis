(function($){var feature={initBetaOptInOutButton:function(){var headerEl=document.getElementById("wp-header"),forceEligible=!!document.location.search.match(/[?&]betaOptInStatus[=$&]/),forceOptedIn=!!document.location.search.match(/[?&]betaOptInStatus=true[$&]/),okToShowBetaOptInButton=forceEligible||(headerEl?headerEl.getAttribute("data-beta-btn")=="true":false);if(okToShowBetaOptInButton)headerEl.setAttribute("data-beta-btn","true");function _init(){if(_isEligible()){_insertButton(_isOptedIn());
_setUpClickHandler()}}function _isEligible(){if(forceEligible)return true;else return okToShowBetaOptInButton&&!!document.cookie.match("NWSRDRBTEL:")}function _setUpClickHandler(){$("body").on("click",function(ev){if($(ev.target).closest("#beta-container").length==0)$("#beta-container input[type\x3dcheckbox]:checked").trigger("click")})}function _isOptedIn(){if(forceEligible)return forceOptedIn;else return okToShowBetaOptInButton&&_isEligible()&&!!document.cookie.match("NWSRDRBT:")}function _getForceFlyoutOpen(){if(wp_pb.StaticMethods.isLocalStorageAccessible()&&
localStorage.getItem("forceNewsreaderFlyoutOpen")=="true"){localStorage.removeItem("forceNewsreaderFlyoutOpen");return true}else return false}function _insertButton(isOptedIn){var el=document.querySelector("#main-navigation-right .sign-up-buttons");if(el!=null)el.insertAdjacentHTML("afterend",_getHtml(isOptedIn,_getForceFlyoutOpen()))}function _getHtml(isOptedIn,forceFlyoutOpen){var checkedAttr=forceFlyoutOpen?' checked\x3d"checked"':"";var openingHtml='\x3cdiv id\x3d"beta-container"\x3e\x3cinput type\x3d"checkbox" id\x3d"beta-cbx" class\x3d"hidden"'+
checkedAttr+'\x3e\x3clabel for\x3d"beta-cbx" class\x3d"btn"\x3e\x3cspan class\x3d"fa fa-beta icon"\x3e\x3c/span\x3e\x3cspan class\x3d"text"\x3eBETA\x3c/span\x3e\x3c/label\x3e\x3cdiv class\x3d"flyout"\x3e\x3cdiv class\x3d"flyout-top-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"flyout-msg"\x3e';var flyoutHtml="";switch(isOptedIn){case false:flyoutHtml='You will no longer be presented with our new article experience. If you decide to give it another try, please \x3ca href\x3d"javascript:void( TWP.newsreader._optIn() )"\x3eopt-in\x3c/a\x3e again.';
break;default:flyoutHtml='\x3cdiv class\x3d"flyout-header"\x3eWelcome to our new reading experience.\x3c/div\x3e Thank you for trying out our new article format. It\u2019s still in development, so we\u2019d \x3ca href\x3d"https://helpcenter.washingtonpost.com/hc/en-us/requests/new?ticket_form_id\x3d360000023891"\x3elove your feedback\x3c/a\x3e. If you no longer wish to participate, you can opt out \x3ca href\x3d"javascript:void( TWP.newsreader._optOut() )"\x3ehere\x3c/a\x3e.';break}var closingHtml=
"\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";return openingHtml+flyoutHtml+closingHtml}_init()},init:function(){this.initBetaOptInOutButton()}};feature.init()})(jQuery);
(function($){var Masthead={init:function(){if(window.location.pathname.indexOf("regional")<0)wp_pb.StaticMethods.setRegionCookie(0);if($.cookie("region_cookie")=="1"||window.location.pathname.indexOf("regional")>0||localStorage.getItem("region_cookie")=="1"){$("ul.edition-toggle li #national-edition, ul.edition-toggle li #national-edition-mobile").parent().removeClass("active");$("ul.edition-toggle li #regional-edition, ul.edition-toggle li #regional-edition-mobile").parent().addClass("active")}else{$("ul.editon-toggle li #regional-edition, ul.edition-toggle li #regional-edition-mobile").parent().removeClass("active");
$("ul.edition-toggle li #national-edition, ul.edition-toggle li #national-edition-mobile").parent().addClass("active")}$("ul.edition-toggle li #national-edition, ul.edition-toggle li #national-edition-mobile").on("click",function(ev){ev.preventDefault();ev.stopPropagation();var location=$(this).data("location");$(this).parent().parent().find("li").removeClass("active");$(this).parent().addClass("active");wp_pb.StaticMethods.setRegionCookie(0);setTimeout(function(){window.location.href=location},200)});
$("ul.edition-toggle li #regional-edition, ul.edition-toggle li #regional-edition-mobile").on("click",function(ev){ev.preventDefault();ev.stopPropagation();var location=$(this).data("location");$(this).parent().parent().find("li").removeClass("active");$(this).parent().addClass("active");wp_pb.StaticMethods.setRegionCookie(1);setTimeout(function(){window.location.href=location},200)});setTimeout(function(){$("#edition-toggle").addClass("masthead-load");$("#weather-wrapper").addClass("masthead-load");
$("#edition-toggle-right").addClass("masthead-load")},500)},initWeather:function(){var env=TWP&&TWP.Data&&TWP.Data.environment;var weatherUrl=env!=="prod"?"/pb/resources/json/weather/20001.json":"https://www.washingtonpost.com/wp-stat/apps/national/weather/20001.json";$.getJSON(weatherUrl,function(data){var buildHtml="";if(data.forecast.per_day.length>0){buildHtml+='\x3cdiv class\x3d"weather-image vg-homepage vg-homepage-'+data.conditions.weather_image.replace(/\d+/g,"")+'"\x3e\x3c/div\x3e';buildHtml+=
"\x3cstrong\x3e";buildHtml+=data.conditions.temp_f.split(".")[0]+"\x26deg;";buildHtml+="\x3c/strong\x3e ";buildHtml+="Washington, D.C."}$("#weather-widget").html(buildHtml);if($("#weather-dropdown").length>0&&buildHtml!=""){var todayLabel="Today";var todayImage=data.conditions.weather_image.replace(/\d+/g,"");var todayTemp=data.conditions.temp_f.split(".")[0]+"\x26deg";var todayMax="";if(data.forecast.per_day.length>0){var firstDay=data.forecast.per_day[0].date.day_of_week;var firstDayConc=firstDay.substring(0,
3);var dayUpdated=data.conditions.observation_time_rfc822;var dayUpdatedConc=dayUpdated.substring(0,3);if(firstDayConc!=dayUpdatedConc){todayLabel="Tomorrow";todayImage=data.forecast.per_day[0].conditions.evening.image.replace(/\d+/g,"");todayTemp="";todayMax="Max"}}var currenConditions="";currenConditions+="\x3cspan class\x3d\"label label-normal\"\x3e\x3ca href\x3d'//www.washingtonpost.com/weather/'\x3e"+todayLabel+" in Washington, D.C.\x3c/a\x3e\x3c/span\x3e";currenConditions+='\x3cdiv class\x3d"row"\x3e';
currenConditions+='\x3cdiv class\x3d"pl20 pr0"\x3e';currenConditions+='\x3cdiv class\x3d"vg-homepage vg-homepage-'+todayImage+'"\x3e\x3c/div\x3e';currenConditions+="\x3c/div\x3e";currenConditions+='\x3cdiv class\x3d"pl0 current-temps"\x3e';currenConditions+='\x3cspan class\x3d"h2"\x3e'+todayTemp+"\x3c/span\x3e";if(data.forecast.per_day[0].temperature&&data.forecast.per_day[0].temperature.maximum!=null&&data.forecast.per_day[0].temperature.minimum!=null&&todayMax!="Max")currenConditions+='\x3cspan class\x3d"h5 subhead"\x3e'+
data.forecast.per_day[0].temperature.maximum+"\x26deg;/"+data.forecast.per_day[0].temperature.minimum+"\x26deg;\x3c/span\x3e";currenConditions+="\x3c/div\x3e";currenConditions+="\x3c/div\x3e";currenConditions+='\x3cspan class\x3d"h5 subhead"\x3e';if(data.conditions.weather&&data.conditions.weather!=null)currenConditions+=data.conditions.weather+" currently. ";if(data.forecast.per_day[0].temperature){if(data.forecast.per_day[0].temperature.maximum!=null)currenConditions+="The high will be "+data.forecast.per_day[0].temperature.maximum+
"\x26deg;";if(data.forecast.per_day[0].temperature.maximum!=null&&data.forecast.per_day[0].temperature.minimum!=null)currenConditions+=" and ";if(data.forecast.per_day[0].temperature.minimum!=null){if(data.forecast.per_day[0].temperature.maximum!=null)currenConditions+="the ";else currenConditions+="The ";currenConditions+="low will be "+data.forecast.per_day[0].temperature.minimum+"\x26deg;"}if(data.forecast.per_day[0].temperature.maximum!=null||data.forecast.per_day[0].temperature.minimum!=null)currenConditions+=
" "}if(data.conditions.relative_humidity!=null)currenConditions+="with a humidity of "+data.conditions.relative_humidity+"%. ";if(data.conditions.wind_dir!=null){currenConditions+="Wind is coming from the "+data.conditions.wind_dir;if(data.conditions.wind_mph!=null&&data.conditions.wind_mph>0)currenConditions+=" at "+data.conditions.wind_mph+" MPH";currenConditions+=". "}if(data.forecast.per_day[0].probability_of_precipitation!=null)if(data.forecast.per_day[0].probability_of_precipitation.evening!=
null){var rainProbability=data.forecast.per_day[0].probability_of_precipitation.evening!=null?parseInt(data.forecast.per_day[0].probability_of_precipitation.evening):null;if(rainProbability){var roundedRainProbability=Math.round(rainProbability/10)*10;if(roundedRainProbability>=20)currenConditions+="The likelihood of rain is "+roundedRainProbability+"%. "}}currenConditions+="\x3c/span\x3e";$("#weather-dropdown").find(".current-conditions").html(currenConditions);var forecast="";$.each(data.forecast.per_day,
function(index,item){if(index>0&&index<=5){forecast+='\x3cdiv class\x3d"forecast-item text-center';if(index!=5)forecast+=" border-right";forecast+='"\x3e';forecast+='\x3cspan class\x3d"h6 day"\x3e\x3ca href\x3d"//www.washingtonpost.com/local/weather/"\x3e'+item.date.day_of_week+"\x3c/a\x3e\x3c/span\x3e";forecast+='\x3cspan class\x3d"h3"\x3e\x3cdiv class\x3d"vg-homepage vg-homepage-'+item.conditions.evening.image.replace(/\d+/g,"")+'"\x3e\x3c/div\x3e\x3c/span\x3e';if(item.temperature&&item.temperature.maximum!=
null&&item.temperature.minimum!=null)forecast+='\x3cspan class\x3d"h6 subhead"\x3e'+item.temperature.maximum+"\x26deg;/\x3cspan\x3e"+item.temperature.minimum+"\x26deg;\x3c/span\x3e\x3c/span\x3e";if(item.probability_of_precipitation!=undefined)if(item.probability_of_precipitation.morning!=null&&item.probability_of_precipitation.evening!=null){var rainProbability=item.probability_of_precipitation.evening!=null?parseInt(item.probability_of_precipitation.evening):null;if(rainProbability){var roundedRainProbability=
Math.round(rainProbability/10)*10;if(roundedRainProbability>=20)forecast+='\x3cspan class\x3d"h6 subhead"\x3e\x3ci class\x3d"fa fa-tint post-blue"\x3e\x3c/i\x3e'+roundedRainProbability+"%\x3c/span\x3e"}}forecast+="\x3c/div\x3e"}});$("#weather-dropdown").find(".forecast-days").html(forecast);buildHtml+='\x3ca class\x3d"fa fa-caret-down pl5 toggle-caret hidden-sm"\x3e\x3c/a\x3e';$("#weather-widget").html(buildHtml);var toggleWeather=function(){$("#weather-widget").find(".toggle-caret").toggleClass("fa-caret-down").toggleClass("fa-caret-up");
$("#weather-dropdown").slideToggle()};$("#weather-widget").addClass("link").on("click",toggleWeather);$("#close-weather").on("click",toggleWeather)}})},initMobile:function(){var mobileMasthead={root:"#mastnav-wrapper-mobile",keepSpace:false,threshold:30,dragStart:0,preventOpening:false,cssObjHideHeader:{transform:"translateY(0px)","-moz-transform":"translateY(0px)","-webkit-transform":"translateY(0px)","-o-transform":"translateY(0px)","-ms-transform":"translateY(0px)"},cssObjHide:{transform:"translateY(-30px)",
"-moz-transform":"translateY(-30px)","-webkit-transform":"translateY(-30px)","-o-transform":"translateY(-30px)","-ms-transform":"translateY(-30px)"}};$(mobileMasthead.root).insertBefore("#pb-root");wp_pb.report("masthead","masthead-init-correlation",mobileMasthead.threshold);wp_pb.register("nav","menu_finish_open",function(){wp_pb.report("masthead","masthead-remove-space",mobileMasthead.cssObjHideHeader);$(mobileMasthead.root+" .toggle-container").css(mobileMasthead.cssObjHide);mobileMasthead.preventOpening=
true});wp_pb.register("nav","menu_finish_close",function(){mobileMasthead.preventOpening=false});var handleHammer=function(ev){var mastheadSpace=0,space=0;if($(window).scrollTop()<=600&&!mobileMasthead.preventOpening){if($("#pb-root").css("transform")=="matrix(1, 0, 0, 1, 0, 0)"||$("#pb-root").css("transform")=="none")mobileMasthead.keepSpace=false;switch(ev.type){case "dragstart":mobileMasthead.dragStart=$(window).scrollTop();break;case "drag":case "swipe":if(ev.type=="swipe"&&ev.gesture.direction==
"up"){wp_pb.report("masthead","masthead-remove-space",mobileMasthead.cssObjHideHeader);$(mobileMasthead.root+" .toggle-container").css(mobileMasthead.cssObjHide)}else if($(window).scrollTop()<0){space=mobileMasthead.threshold;wp_pb.report("masthead","masthead-add-space",{movableSpace:space,cssObj:{transform:"translateY("+space+"px)","-moz-transform":"translateY("+space+"px)","-webkit-transform":"translateY("+space+"px)","-o-transform":"translateY("+space+"px)","-ms-transform":"translateY("+space+
"px)"}});mastheadSpace=space-mobileMasthead.threshold;if(space<=mobileMasthead.threshold)$(mobileMasthead.root+" .toggle-container").css({transform:"translateY("+mastheadSpace+"px)","-moz-transform":"translateY("+mastheadSpace+"px)","-webkit-transform":"translateY("+mastheadSpace+"px)","-o-transform":"translateY("+mastheadSpace+"px)","-ms-transform":"translateY("+mastheadSpace+"px)"});mobileMasthead.keepSpace=true}else if(!mobileMasthead.keepSpace&&$(window).scrollTop()<=0){space=Math.floor(ev.gesture.deltaY-
mobileMasthead.dragStart);if(space<0)space=space*-1;else if(space>mobileMasthead.threshold)space=mobileMasthead.threshold;wp_pb.report("masthead","masthead-add-space",{movableSpace:space,cssObj:{transform:"translateY("+space+"px)","-moz-transform":"translateY("+space+"px)","-webkit-transform":"translateY("+space+"px)","-o-transform":"translateY("+space+"px)","-ms-transform":"translateY("+space+"px)"}});mastheadSpace=space-mobileMasthead.threshold;if(space<=mobileMasthead.threshold)$(mobileMasthead.root+
" .toggle-container").css({transform:"translateY("+mastheadSpace+"px)","-moz-transform":"translateY("+mastheadSpace+"px)","-webkit-transform":"translateY("+mastheadSpace+"px)","-o-transform":"translateY("+mastheadSpace+"px)","-ms-transform":"translateY("+mastheadSpace+"px)"});mobileMasthead.keepSpace=space>=mobileMasthead.threshold}else if(mobileMasthead.keepSpace&&$(window).scrollTop()>150){wp_pb.report("masthead","masthead-remove-space",mobileMasthead.cssObjHideHeader);$(mobileMasthead.root+" .toggle-container").css(mobileMasthead.cssObjHide)}break}}};
var hammertime=new Hammer($("#pb-root")[0]);hammertime.on("dragstart drag swipe",handleHammer);var regionIsNotSelected=$.cookie("region_cookie")!=="0"&&$.cookie("region_cookie")!=="1"&&localStorage.getItem("region_cookie")!=="0"&&localStorage.getItem("region_cookie")!=="1";if(regionIsNotSelected){var space=mobileMasthead.threshold;wp_pb.report("masthead","masthead-add-space",{movableSpace:space,cssObj:{transform:"translateY("+space+"px)","-moz-transform":"translateY("+space+"px)","-webkit-transform":"translateY("+
space+"px)","-o-transform":"translateY("+space+"px)","-ms-transform":"translateY("+space+"px)"}});var mastheadSpace=space-mobileMasthead.threshold;if(space<=mobileMasthead.threshold)$(mobileMasthead.root+" .toggle-container").css({transform:"translateY("+mastheadSpace+"px)","-moz-transform":"translateY("+mastheadSpace+"px)","-webkit-transform":"translateY("+mastheadSpace+"px)","-o-transform":"translateY("+mastheadSpace+"px)","-ms-transform":"translateY("+mastheadSpace+"px)"});mobileMasthead.keepSpace=
true}}};Masthead.init();Masthead.initWeather();if($("#mastnav-wrapper-mobile").hasClass("showRegButtonsOnMobile")&&window.isMobile.any()&&!window.isMobile.tablet())Masthead.initMobile()})(jQuery);
(function($){var breakingNewsBar=$(".pb-f-page-breaking-news-bar .breaking-news-bar").first();var navBar=$("#nav-bar");var navBarHeight=navBar.outerHeight();var abTestShow=true;var closeBarTime=localStorage.getItem("breaking_news_bar_close_time")===null?0:parseInt(localStorage.getItem("breaking_news_bar_close_time"));var omnitureShowBreakingNews=function(){$(function(){window.sendDataToOmniture&&sendDataToOmniture("breakingnews-view","event66",{eVar1:window.wp_page_name,prop2:window.wp_subsection,
eVar2:window.wp_channel,prop3:window.wp_content_type,eVar17:window.wp_content_type,eVar26:"a_breakingnews-view"},{wait:true})})};var showBreakingNewsBar=function(show){abTestShow=show;if(!breakingNewsBar.data("suppressed")&&breakingNewsBar.data("hasTimestamp")&&(breakingNewsBar.data("inEditor")||breakingNewsBar.data("timestamp")>closeBarTime)&&show){breakingNewsBar.parent().show();if(!breakingNewsBar.data("inEditor"))omnitureShowBreakingNews()}else{breakingNewsBar.parent().css("height","0px");breakingNewsBar.css("height",
"0px").css("padding","0px")}};if(!$("html").hasClass("article")&&!$("html").hasClass("blog")||breakingNewsBar.data("inEditor"))showBreakingNewsBar(true);var UPDATE_INTERVAL=3E4;if(!breakingNewsBar.data("inEditor"))setInterval(reloadBar,UPDATE_INTERVAL);var notificationBar=$(".pb-f-page-notification-bar");var notificationBarHeight=0;var notificationBarClosed=true;if(notificationBar.length){notificationBarHeight=notificationBar.outerHeight();notificationBarClosed=false}$("#pb-root").before(breakingNewsBar.parent());
updateBar(false);$(window).resize(function(){navBarHeight=navBar.outerHeight();notificationBarHeight=notificationBar.outerHeight();updateBar(false)});$(function(){wp_pb.register("notificationbar","close",function(){breakingNewsBar.animate({top:navBarHeight+"px"});notificationBarHeight=0;notificationBarClosed=true})});$(function(){wp_pb.register("nav","start_close",function(){breakingNewsBar.addClass("breaking-news-bar-nav-hide")})});$(function(){wp_pb.register("nav","start_open",function(){setTimeout(function(){breakingNewsBar.removeClass("breaking-news-bar-nav-hide")},
250)})});$(window).scroll(function(){if(!notificationBarClosed)if($(this).scrollTop()<notificationBarHeight)breakingNewsBar.css("top",navBarHeight+notificationBarHeight-$(this).scrollTop()+"px");else breakingNewsBar.css("top",navBarHeight+"px")});function updateBar(isReload){var notifBarH=0;if(notificationBarHeight)notifBarH=notificationBarHeight;breakingNewsBar.css("top",navBarHeight+notifBarH+"px");if(isReload===true){wp_pb.report("breakingnews","reload",{});breakingNewsBar.parent().show().animate({height:breakingNewsBar.outerHeight()+
"px"})}else if(!breakingNewsBar.hasClass("suppress"))breakingNewsBar.parent().animate({height:breakingNewsBar.outerHeight()+"px"});else breakingNewsBar.parent().animate({height:"0px"});var navBarHidden=navBar.parent().hasClass("bar-hidden");if(navBarHidden)breakingNewsBar.addClass("breaking-news-bar-nav-hide");else breakingNewsBar.removeClass("breaking-news-bar-nav-hide")}$(".pb-f-page-breaking-news-bar").on("click",".breaking-news-bar .breaking-news-bar-close-btn",function(){breakingNewsBar.animate({height:0});
breakingNewsBar.parent().animate({height:0},function(){$(this).hide()});wp_pb.report("breakingnews","close",{});if(localStorageAvailable())localStorage.setItem("breaking_news_bar_close_time",(new Date).getTime())});function reloadBar(){var path=breakingNewsBar.data("path"),page=breakingNewsBar.data("linked-page").trim(),feature=breakingNewsBar.data("linked-feature").trim();if(!String.prototype.endsWith)String.prototype.endsWith=function(pattern){var d=this.length-pattern.length;return d>=0&&this.lastIndexOf(pattern)===
d};if(!String.prototype.startsWith)String.prototype.startsWith=function(searchString,position){position=position||0;return this.indexOf(searchString,position)===position};if(typeof page=="undefined"||page=="//"||page=="")page=breakingNewsBar.parents().attr("linked-page-name");else breakingNewsBar.parents().attr("linked-page-name",page);if(typeof page!="undefined"&&!page.startsWith("/"))page="/"+page;if(typeof page!="undefined"&&!page.endsWith("/"))page=page+"/";$.ajax({url:path+"/api/v2/render/feature?uri\x3d"+
page+"\x26name\x3d"+feature,success:function(data){var newBar=$($.parseHTML(data.rendering)).find(".breaking-news-bar");var newBarHtml=newBar[0].outerHTML;var currBarTime=breakingNewsBar.data("timestamp");var currBarSupp=breakingNewsBar.data("suppressed");var newBarTime=newBar.data("timestamp");var newBarSupp=newBar.data("suppressed");if(!currBarSupp&&newBarSupp){breakingNewsBar.animate({height:0});breakingNewsBar.parent().animate({height:0},function(){$(this).hide();if(!breakingNewsBar.hasClass("suppress"))breakingNewsBar.addClass("suppress")});
wp_pb.report("breakingnews","close",{})}else{if(breakingNewsBar.parent().hasClass("move-for-masthead"))newBarHtml=$(newBarHtml).attr("style",breakingNewsBar.attr("style"))[0].outerHTML;breakingNewsBar.replaceWith(newBarHtml);breakingNewsBar=$(".pb-f-page-breaking-news-bar .breaking-news-bar").first();if(!newBarSupp&&newBarTime!==currBarTime&&newBarTime>closeBarTime){breakingNewsBar.removeClass("suppress");updateBar(true&&abTestShow);$(window).scroll();omnitureShowBreakingNews()}else{breakingNewsBar.addClass("no-transition");
updateBar(false);setTimeout(function(){breakingNewsBar.removeClass("no-transition")},300)}}}})}function localStorageAvailable(){var test="test";try{localStorage.setItem(test,test);localStorage.removeItem(test);return true}catch(e){return false}}wp_pb.register("masthead","masthead-init-correlation",function(maxSpace){$(".pb-f-page-breaking-news-bar").addClass("move-for-masthead");if(maxSpace==undefined)maxSpace=30;wp_pb.register("masthead","masthead-add-space",function(object){if(object.movableSpace<=
maxSpace&&object.cssObj!=undefined)breakingNewsBar.css(object.cssObj)});wp_pb.register("masthead","masthead-remove-space",function(cssObj){if(cssObj!=undefined)breakingNewsBar.css(cssObj)})});$(window.document).on("abtest-ready",function(e,ABT){var test=ABT.get("article-breakingnews");if(test.is("nobreakingnews"))showBreakingNewsBar(false);if(test.is("sectionbreakingnews")){var ssRootBNB=breakingNewsBar.data("item-section-id"),ssRootArticle=breakingNewsBar.data("section-id");if(ssRootBNB==ssRootArticle)showBreakingNewsBar(true);
else showBreakingNewsBar(false)}if(test.is("allbreakingnews"))showBreakingNewsBar(true)})})(jQuery);
(function(){var featureRoot=document.querySelector("#livebar-feature-root");var liveBarRoot=document.querySelector("#LiveBar-root");var breakingNewsBar=document.querySelector(".breaking-news-bar");var navBar=document.querySelector("#nav-bar");var PBRoot=document.querySelector("#pb-root");var liveBarHeight;var breakingHeight;var navBarHeight;var featureRootDisplayed;var takeoverOpen;var id;var menuNav;if(featureRoot)if(featureRoot.getAttribute("data-use-yt")==="true")id=featureRoot.getAttribute("data-ytid");
else id=featureRoot.getAttribute("data-uuid");var pausePageRefresh=function(){if(!!window.TWP&&!!TWP.hpRefreshTests)TWP.hpRefreshTests[id]=function(){return false}};var resumePageRefresh=function(){if(!!window.TWP&&!!TWP.hpRefreshTests)delete TWP.hpRefreshTests[id]};var adjustMargin=function(open){var style=window.getComputedStyle(PBRoot,null);var PBMargin=style.marginLeft;if(open===true){liveBarRoot.style.transform="translateX(25px)";liveBarRoot.style.marginLeft="-"+PBMargin}else{liveBarRoot.style.marginLeft=
0;liveBarRoot.style.transform="translateX(0)"}};var adjustHeight=function(closed){featureRootDisplayed=featureRoot&&featureRoot.style.display==="block";var navBarHidden=document.querySelector("#wp-header.bar-hidden #nav-bar");if(takeoverOpen===true){PBRoot.style.paddingTop=0;liveBarRoot.style.top=0}else if(featureRootDisplayed){breakingNewsBar=document.querySelector(".breaking-news-bar");liveBarHeight=liveBarRoot?liveBarRoot.clientHeight:0;breakingHeight=breakingNewsBar?breakingNewsBar.clientHeight:
0;navBarHeight=navBar?navBar.clientHeight:0;liveBarRoot.style.top=breakingHeight+(navBarHidden?0:navBarHeight)+"px";PBRoot.style.paddingTop=liveBarHeight+breakingHeight+navBarHeight+"px"}else if(closed===true){breakingNewsBar=document.querySelector(".breaking-news-bar");liveBarHeight=0;breakingHeight=breakingNewsBar?breakingNewsBar.clientHeight:0;navBarHeight=navBar?navBar.clientHeight:0;liveBarRoot.style.top=breakingHeight+(navBarHidden?0:navBarHeight)+"px";PBRoot.style.paddingTop=liveBarHeight+
breakingHeight+navBarHeight+"px";closed=false}};var adjustTop=function(open){breakingNewsBar=document.querySelector(".breaking-news-bar");liveBarHeight=0;breakingHeight=breakingNewsBar?breakingNewsBar.clientHeight:0;var navBarHidden=document.querySelector("#wp-header.bar-hidden #nav-bar");if(open===true)navBarHeight=navBarHidden?0:navBar?navBar.clientHeight:0;else navBarHeight=0;liveBarRoot.style.top=breakingHeight+navBarHeight+"px"};if(liveBarRoot)liveBarRoot.addEventListener("click",function(){pausePageRefresh()});
window.addEventListener("live-bar-unmuted",function(){pausePageRefresh()});window.addEventListener("takeover-opened",function(){featureRoot.classList.add("lb-hidden");featureRoot.setAttribute("data-takeover-shown",true);PBRoot.style.paddingTop=0;takeoverOpen=true});window.addEventListener("takeover-closed",function(){featureRoot.classList.remove("lb-hidden");featureRoot.removeAttribute("data-takeover-shown");takeoverOpen=false;adjustHeight()});window.addEventListener("live-bar-expanded",function(){adjustHeight();
var event=document.createEvent("HTMLEvents");event.initEvent("resize",true,false);window.dispatchEvent(event)});window.addEventListener("live-bar-rendered",function(){adjustHeight()});window.addEventListener("live-bar-minimized",function(){adjustHeight();pausePageRefresh();var event=document.createEvent("HTMLEvents");event.initEvent("resize",true,false);window.dispatchEvent(event)});window.addEventListener("live-bar-closed",function(){var closed=true;adjustHeight(closed);resumePageRefresh()});wp_pb.register("nav",
"menu_finish_open",function(){var open=true;menuNav=true;adjustMargin(open)});wp_pb.register("nav","menu_finish_close",function(){var open=false;menuNav=false;adjustMargin(open)});wp_pb.register("nav","finish_open",function(){var open=true;adjustTop(open)});wp_pb.register("nav","finish_close",function(){var open=false;adjustTop(open)});window.addEventListener("resize",function(){adjustHeight();adjustMargin(menuNav)});if(document.querySelector(".breaking-news-bar"))window.setTimeout(function(){adjustHeight()},
410);wp_pb.register("breakingnews","close",function(){window.setTimeout(function(){adjustHeight()},410)});wp_pb.register("breakingnews","reload",function(){window.setTimeout(function(){adjustHeight()},410)});wp_pb.register("notificationbar","close",function(){adjustHeight()});wp_pb.register("masthead","masthead-remove-space",function(){adjustHeight()});wp_pb.register("masthead","masthead-add-space",function(){adjustHeight()})})();var __e=window.__e||[];
(function($){var $w=$(window),$d=$(document),logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-homepage-story"):window.console;var feature={handleTimestamps:function(){var $items=$(".flex-item");$items.each(function(){var $feature=$(this);var $timestamps=$feature.find("*[data-timestamp][data-timestamp-duration]");var now=(new Date).getTime();$timestamps.each(function(){try{var $e=$(this);var duration=$e.attr("data-timestamp-duration");var hoursAgo=Math.floor((now-$e.attr("data-timestamp"))/
(1*60*60*1E3));if(hoursAgo<=duration){try{$e.text(wp_pb.StaticMethods.getTwitterTime($e.attr("data-timestamp")/1))}catch(e){}$e.show().css({display:"inline-block"})}else{var $p=$e.parent();$e.remove();if(!$.trim($p.html()))$p.remove()}}catch(e){$e.show()}})})},handleFlippers:function(){var $flippers=$(".flex-flipper.unprocessed");if($flippers.length>0){wp_pb.StaticMethods.handleFlexFlippers();$flippers.each(function(){var $this=$(this),size=$this.children().length,count=0,targetBgColor="";$this.find(".flex-flipper-item,.art-in-flipper").each(function(i){var $item=
$(this),bgColor=$item.css("background-color");if(i==0&&(bgColor=="transparent"||bgColor=="rgba(0, 0, 0, 0)"||bgColor==undefined)){var lookForBgColor=true;$item.parents().filter(function(){var color=$(this).css("background-color");if(lookForBgColor&&color!="transparent"&&color!="rgba(0, 0, 0, 0)"&&color!=undefined){lookForBgColor=false;targetBgColor=color}})}if(targetBgColor)$item.css({"background-color":targetBgColor})});$this.children(":not(:first-child)").hide();$this.removeClass("unprocessed");
var loops=$this.data("maxLoops");loops=isNaN(loops)?100:loops;if(loops>0){var time=$this.data("duration");time=isNaN(time)||time<=0?6E3:time*1E3;var fadeSpeed=$this.data("fadeSpeed");fadeSpeed=isNaN(fadeSpeed)||fadeSpeed<=0?1400:fadeSpeed*1E3;var interval=setInterval(function(){count++;if(count<size*loops){$this.data("count",count);$this.children(":first-child").fadeOut(fadeSpeed).next().show().end().appendTo($this)}if(count>=size*loops){clearInterval(interval);$this.removeClass("equalize-heights");
$this.children().css("height","auto")}},time)}})}},handleImageRefreshRates:function(){var $imgs=$("*[data-refresh-rate-status\x3d'unprocessed'][data-refresh-rate]");if($imgs.length>0){logger.info("handle images with refresh rates");$imgs.each(function(){var $img=$(this),src=$img.attr("src"),rate=$img.attr("data-refresh-rate");$img.attr("data-refresh-rate-status","processed");logger.info("\nimg: "+src+"\nrate: "+Math.round(rate/1E3)+" secs");setInterval(function(){logger.info("\nrefreshing: "+src);
$img.attr("src",src)},rate)})}},handleChartable:function(){var chartContainer=document.getElementById("chartContainer");if(!chartContainer)return;var ts=(new Date).getTime();var chartId=$("#chartContainer").attr("data-chartable-id");var script=document.createElement("script");script.type="text/javascript";script.setAttribute("id","chartScript");script.setAttribute("class","twp-module-chart-embed");script.setAttribute("data-move","false");script.setAttribute("data-data-uri","https://postgraphics.s3.amazonaws.com/chartable/"+
chartId+"/latest.json?v\x3d"+ts);script.setAttribute("data-fallback-image","https://chartable.wpentdev.com/"+chartId+"/2300.jpg");script.src="https://chartable.wpentdev.com/public/TWP.Module.chart.embed-0.0.54.min.js?v\x3d3";$("#chartContainer").empty();chartContainer.appendChild(script)},handleStoryTypeWarnings:function(){$(".story-type-warning").each(function(){var $this=$(this),$open=$this.find(".story-type-warning-tools-open"),$closed=$this.find(".story-type-warning-tools-closed"),timeout=null;
$open.on("click",function(){$this.removeClass("open").addClass("closed",{duration:500});if(timeout)clearTimeout(timeout);timeout=setTimeout(function(){if(!$open.is(":visible"))$closed.trigger("click")},6E4)});$closed.on("click",function(){$this.removeClass("closed").addClass("open",{duration:500})})})},handleFishyContentEdits:function(){try{$('*[data-will-poison-app\x3d"true"]').each(function(){var $el=$(this),msgInfo=_getMessageInfo($el,{textTmpl:"{{type}}: BAD CODING"});$el.removeAttr("data-will-poison-app");
msgInfo.$target.before(msgInfo.html)})}catch(e){logger.error("ERROR in handleFishyContentEdits:"+e)}function _getMessageInfo($el,options){options=$.extend(true,{textTmpl:"{{type}}: BAD CODING",htmlTmpl:'\x3cdiv class\x3d"content-editable-warning"\x3e\x3cspan class\x3d"fa fa-exclamation-triangle"\x3e\x3c/span\x3e {{text}} \x3cspan class\x3d"fa fa-exclamation-triangle"\x3e\x3c/span\x3e\x3c/div\x3e'},options||{});var msgInfo={},type="";if($el.hasClass("blurb")){msgInfo.$target=$el.closest(".blurb");
type="BLURB"}else if($el.hasClass("byline")||$el.parent().hasClass("byline")){msgInfo.$target=$el.closest(".sigline");type="BYLINE"}else if($el.hasClass("caption")){msgInfo.$target=$el.closest(".caption");type="CAPTION"}else if($el.hasClass("deck")||$el.parent().hasClass("deck")){msgInfo.$target=$el.closest(".deck");type="DECK"}else if($el.hasClass("headline")||$el.parent().hasClass("headline")){msgInfo.$target=$el.closest(".headline");type="HEADLINE"}else if($el.hasClass("label-primary")){msgInfo.$target=
$el.closest(".label-wrapper");type="PRIMARY LABEL";if($el.hasClass("label-item"))type="PRIMARY ITEM LABEL"}else if($el.hasClass("label-secondary")){msgInfo.$target=$el.closest(".label-wrapper");type="SECONDARY LABEL"}else{msgInfo.$target=$el;type="TEXT"}msgInfo.text=options.textTmpl.replace("{{type}}",type);msgInfo.html=options.htmlTmpl.replace("{{text}}",msgInfo.text);return msgInfo}},init:function(){var self=this;self.handleTimestamps();if(document.readyState=="complete")self.handleFlippers();else $w.on("load",
function(){self.handleFlippers()});self.handleImageRefreshRates();self.handleFishyContentEdits();self.handleStoryTypeWarnings()}};__e.push(["phase1-1",applyFeature]);function applyFeature(){feature.init();if($w.width()>1024)setInterval(function(){feature.handleTimestamps()},6E4);$d.on("dom-manipulation-complete",function(){feature.handleTimestamps()});setInterval(function(){feature.handleChartable()},6E4)}})(jQuery);
(function($){var __e=window.__e||[],wp_pb=window.wp_pb||{},env=wp_pb.environment||"production",moduleIndex;function Subscription($root){var moduleType,promoCode,tidVal,moduleData={Trust:{headline:"Our journalism keeps watch on Washington and the world.",className:"trust",promo:"_d_am_1",hp_promo:"_d_1",tid:"usw_submod_"},Support:{headline:"Your support helps our journalists report news that matters.",className:"support",promo:"_d_am_2",hp_promo:"_d_2",tid:"usw_submod_"},Speed:{headline:"Be the first to know.",
body:"Our award-winning journalists are there when the news breaks.",className:"speed",promo:"_d_am_3",hp_promo:"_d_3",tid:"usw_submod_"},Established:{headline:"Reporting the facts for over 140 years.",className:"established",promo:"_d_am_4",hp_promo:"_d_4",tid:"usw_submod_"},Thanks:{headline:"Thank you.",body:"Your subscription supports journalism that matters.",className:"thanks",promo:"_d_am_5",hp_promo:"_d_5"}},randomNumber=function(min,max){return Math.floor(Math.random()*(max-min+1)+min)},loadRandomView=
function(){var dataIndexes=["Trust","Support","Speed","Established","Thanks"];var index;if(moduleIndex!==undefined)index=moduleIndex;else if(wp_pb&&wp_pb.StaticMethods&&wp_pb.StaticMethods.isSubscriber())moduleIndex=index=4;else moduleIndex=index=randomNumber(0,3);var data=moduleData[dataIndexes[index]];var subscribeUrl=$root.find(".rml-subscribe-link.link").attr("href");moduleType=$root.find(".subscription.signup").data("location")||"rr";promoCode=data[moduleType+"_promo"]?moduleType+data[moduleType+
"_promo"]:moduleType+data.promo;tidVal=data.tid+moduleType;var $module=$root.find(".subscription.signup").addClass(data.className);$module.find(".rml-subscribe-lang").text(data.headline);$module.find(".rml-subscribe-link").attr("href",subscribeUrl+"?promo\x3d"+promoCode);if(data.body)$module.find(".rml-subscribe-tagline").text(data.body);$module.removeClass("hide")},getLocation=function(){function isInternational(_rpld1){if(_rpld1){var matches=_rpld1.match(/20:([^|]*)/);if(matches&&matches.length>
1){var country=matches[1];if(["usa","mnull","***","-1"].indexOf(country)==-1)return true}}return false}var offerType="national";var _local=$.cookie("client_region")==1;var _rpld1=$.cookie("rpld1");var _international=isInternational(_rpld1);if(_international)offerType="international";else if(_local)offerType="local";return offerType},subscribe=function(captcha_res){var email=$root.find("#subscription-input").val();var data,url,offerType=getLocation();if(env=="production")url="https://subscribe.washingtonpost.com/subscriptionapi/remind-me-later";
else url="https://subscribe.digitalink.com/subscriptionapi/remind-me-later";data={email:email,recaptchaResponse:captcha_res,offerType:offerType,promoCode:promoCode};$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:url,data:JSON.stringify(data),success:function(data){if(data.status=="SUCCESS"){$root.find(".rml-subscribe-tagline.email").text(email);$root.find(".subscription.signup").addClass("hide");$root.find(".subscription.success").removeClass("hide");document.dispatchEvent(new CustomEvent("twp_tracking",
{detail:"subscribe_module_email"}))}else showError("Error while sending offer, please try later.")},error:function(){showError("Error while sending offer, please try later.")}})},showError=function(msg){$root.find(".email-error").text(msg).removeClass("hide");$root.find(".rml-subscribe-btn.send-offer").addClass("disabled").removeClass("active");$root.find(".rml-subscribe-btn.send-offer").find(".spinner").addClass("hide")},subscribeProcess=function(elm){var $elm=$(elm);if($elm.hasClass("active")){$elm.find(".rml-subscribe-link.send-offer").text("Sending..");
$elm.addClass("sending");$elm.find(".spinner").removeClass("hide");window.recaptcha_rml=window.grecaptcha.render("recaptcha_rml",{sitekey:"6Lf0DRoUAAAAAEawkoNEUKcpWx8eh_I7PRArTA9V",callback:subscribe,size:"invisible"});window.grecaptcha.execute(window.recaptcha_rml)}else if(!$elm.hasClass("disabled")){$root.find(".subscription.signup").find(".form-ui").removeClass("hide");$root.find(".rml-subscribe-btn.subscribe").addClass("hide");$root.find(".subscribe-link").addClass("hide");$elm.addClass("disabled")}},
initUI=function(){if(document.cookie.match(/wpnisecure=([^;]+)/))$root.find(".subscribe-link").remove();else $root.find(".subscribe-link").click(function(event){event.preventDefault();TWP.Identity.uswTid=tidVal;TWP.Identity._showSignIn()});$root.find(".rml-subscribe-btn.send-offer").click(function(event){event.preventDefault();if(typeof grecaptcha==="undefined")$.ajax({url:"https://www.google.com/recaptcha/api.js",dataType:"script",cache:true,success:function(){var findCaptcha=setInterval(function(){if(typeof grecaptcha!==
"undefined"){clearInterval(findCaptcha);subscribeProcess(event.delegateTarget)}},50)},error:function(){}});else subscribeProcess(event.delegateTarget);return false});$root.find(".form-ui.input").bind("input",function(){var re=/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}/gim;var subscribeEmail=$(this).val();if(subscribeEmail==""||!re.test(subscribeEmail)){$root.find(".rml-subscribe-btn.send-offer").addClass("disabled").removeClass("active");$root.find(".form-ui.input").addClass("error");$root.find(".email-error").removeClass("hide")}else{$root.find(".rml-subscribe-btn.send-offer").removeClass("disabled").addClass("active");
$root.find(".form-ui.input").removeClass("error");$root.find(".email-error").addClass("hide")}return false});$root.find(".close-btn").click(function(){$root.find(".subscription").remove()})};this.init=function(){loadRandomView();if(wp_pb&&wp_pb.StaticMethods&&!wp_pb.StaticMethods.isSubscriber())initUI()}}var lifecycle={init:function(){$(".pb-f-page-subscription-remind-later").each(function(){if(wp_pb&&wp_pb.StaticMethods&&!wp_pb.StaticMethods.isSubscriber()){var sb=new Subscription($(this));sb.init()}else $(this).remove()})}};
if(wp_pb.StaticMethods.isPageHydrated())lifecycle.init();__e.push(["shamble",function(){lifecycle.init()}])})(jQuery);$(function(){});var __e=window.__e||[];
(function($){var $w=$(window),$d=$(document),logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-homepage-story"):window.console;var feature={handleTimestamps:function(){var $items=$(".flex-item");$items.each(function(){var $feature=$(this);var $timestamps=$feature.find("*[data-timestamp][data-timestamp-duration]");var now=(new Date).getTime();$timestamps.each(function(){try{var $e=$(this);var duration=$e.attr("data-timestamp-duration");var hoursAgo=Math.floor((now-$e.attr("data-timestamp"))/
(1*60*60*1E3));if(hoursAgo<=duration){try{$e.text(wp_pb.StaticMethods.getTwitterTime($e.attr("data-timestamp")/1))}catch(e){}$e.show().css({display:"inline-block"})}else{var $p=$e.parent();$e.remove();if(!$.trim($p.html()))$p.remove()}}catch(e){$e.show()}})})},handleFlippers:function(){var $flippers=$(".flex-flipper.unprocessed");if($flippers.length>0){wp_pb.StaticMethods.handleFlexFlippers();$flippers.each(function(){var $this=$(this),size=$this.children().length,count=0,targetBgColor="";$this.find(".flex-flipper-item,.art-in-flipper").each(function(i){var $item=
$(this),bgColor=$item.css("background-color");if(i==0&&(bgColor=="transparent"||bgColor=="rgba(0, 0, 0, 0)"||bgColor==undefined)){var lookForBgColor=true;$item.parents().filter(function(){var color=$(this).css("background-color");if(lookForBgColor&&color!="transparent"&&color!="rgba(0, 0, 0, 0)"&&color!=undefined){lookForBgColor=false;targetBgColor=color}})}if(targetBgColor)$item.css({"background-color":targetBgColor})});$this.children(":not(:first-child)").hide();$this.removeClass("unprocessed");
var loops=$this.data("maxLoops");loops=isNaN(loops)?100:loops;if(loops>0){var time=$this.data("duration");time=isNaN(time)||time<=0?6E3:time*1E3;var fadeSpeed=$this.data("fadeSpeed");fadeSpeed=isNaN(fadeSpeed)||fadeSpeed<=0?1400:fadeSpeed*1E3;var interval=setInterval(function(){count++;if(count<size*loops){$this.data("count",count);$this.children(":first-child").fadeOut(fadeSpeed).next().show().end().appendTo($this)}if(count>=size*loops){clearInterval(interval);$this.removeClass("equalize-heights");
$this.children().css("height","auto")}},time)}})}},handleImageRefreshRates:function(){var $imgs=$("*[data-refresh-rate-status\x3d'unprocessed'][data-refresh-rate]");if($imgs.length>0){logger.info("handle images with refresh rates");$imgs.each(function(){var $img=$(this),src=$img.attr("src"),rate=$img.attr("data-refresh-rate");$img.attr("data-refresh-rate-status","processed");logger.info("\nimg: "+src+"\nrate: "+Math.round(rate/1E3)+" secs");setInterval(function(){logger.info("\nrefreshing: "+src);
$img.attr("src",src)},rate)})}},handleChartable:function(){var chartContainer=document.getElementById("chartContainer");if(!chartContainer)return;var ts=(new Date).getTime();var chartId=$("#chartContainer").attr("data-chartable-id");var script=document.createElement("script");script.type="text/javascript";script.setAttribute("id","chartScript");script.setAttribute("class","twp-module-chart-embed");script.setAttribute("data-move","false");script.setAttribute("data-data-uri","https://postgraphics.s3.amazonaws.com/chartable/"+
chartId+"/latest.json?v\x3d"+ts);script.setAttribute("data-fallback-image","https://chartable.wpentdev.com/"+chartId+"/2300.jpg");script.src="https://chartable.wpentdev.com/public/TWP.Module.chart.embed-0.0.54.min.js?v\x3d3";$("#chartContainer").empty();chartContainer.appendChild(script)},handleStoryTypeWarnings:function(){$(".story-type-warning").each(function(){var $this=$(this),$open=$this.find(".story-type-warning-tools-open"),$closed=$this.find(".story-type-warning-tools-closed"),timeout=null;
$open.on("click",function(){$this.removeClass("open").addClass("closed",{duration:500});if(timeout)clearTimeout(timeout);timeout=setTimeout(function(){if(!$open.is(":visible"))$closed.trigger("click")},6E4)});$closed.on("click",function(){$this.removeClass("closed").addClass("open",{duration:500})})})},handleFishyContentEdits:function(){try{$('*[data-will-poison-app\x3d"true"]').each(function(){var $el=$(this),msgInfo=_getMessageInfo($el,{textTmpl:"{{type}}: BAD CODING"});$el.removeAttr("data-will-poison-app");
msgInfo.$target.before(msgInfo.html)})}catch(e){logger.error("ERROR in handleFishyContentEdits:"+e)}function _getMessageInfo($el,options){options=$.extend(true,{textTmpl:"{{type}}: BAD CODING",htmlTmpl:'\x3cdiv class\x3d"content-editable-warning"\x3e\x3cspan class\x3d"fa fa-exclamation-triangle"\x3e\x3c/span\x3e {{text}} \x3cspan class\x3d"fa fa-exclamation-triangle"\x3e\x3c/span\x3e\x3c/div\x3e'},options||{});var msgInfo={},type="";if($el.hasClass("blurb")){msgInfo.$target=$el.closest(".blurb");
type="BLURB"}else if($el.hasClass("byline")||$el.parent().hasClass("byline")){msgInfo.$target=$el.closest(".sigline");type="BYLINE"}else if($el.hasClass("caption")){msgInfo.$target=$el.closest(".caption");type="CAPTION"}else if($el.hasClass("deck")||$el.parent().hasClass("deck")){msgInfo.$target=$el.closest(".deck");type="DECK"}else if($el.hasClass("headline")||$el.parent().hasClass("headline")){msgInfo.$target=$el.closest(".headline");type="HEADLINE"}else if($el.hasClass("label-primary")){msgInfo.$target=
$el.closest(".label-wrapper");type="PRIMARY LABEL";if($el.hasClass("label-item"))type="PRIMARY ITEM LABEL"}else if($el.hasClass("label-secondary")){msgInfo.$target=$el.closest(".label-wrapper");type="SECONDARY LABEL"}else{msgInfo.$target=$el;type="TEXT"}msgInfo.text=options.textTmpl.replace("{{type}}",type);msgInfo.html=options.htmlTmpl.replace("{{text}}",msgInfo.text);return msgInfo}},init:function(){var self=this;self.handleTimestamps();if(document.readyState=="complete")self.handleFlippers();else $w.on("load",
function(){self.handleFlippers()});self.handleImageRefreshRates();self.handleFishyContentEdits();self.handleStoryTypeWarnings()}};__e.push(["phase1-1",applyFeature]);function applyFeature(){feature.init();if($w.width()>1024)setInterval(function(){feature.handleTimestamps()},6E4);$d.on("dom-manipulation-complete",function(){feature.handleTimestamps()});setInterval(function(){feature.handleChartable()},6E4)}})(jQuery);
(function($){$(".pb-f-generic-promo-image").each(function(){var $hasLabel=$(this).find(".label-wrapper");if($hasLabel.length==0)$(this).find("\x3e:first-child").addClass("mobile-border")})})(jQuery);__e=window.__e||[];
(function($){var homepageCard={$myRoot:$(".pb-f-homepage-card"),myRootClass:".pb-f-homepage-card",heroImageSizing:function(){var $myRoot=this.$myRoot,$heroCardCotainter=$myRoot.find(".story-card-hero .panel"),$heroCardCotainterDiff=$myRoot.find(".story-card-hero .panel-merger"),$heroCardImgCotainter=$myRoot.find(".story-card-hero .post-thumbnail"),$heroCardContent=$myRoot.find(".story-card-hero .content"),$heroCardImg=$heroCardImgCotainter.find("img"),resizing=function(){if($heroCardCotainterDiff.css("display")==
"flex"){var ratio=$heroCardCotainter.outerWidth()/3/$heroCardCotainter.outerHeight();if(ratio>=1.31){if($heroCardImg.hasClass("fill-height"))$heroCardImg.removeClass("fill-height").addClass("fill-width");$heroCardImgCotainter.height($heroCardImg.height());var diff=$heroCardCotainter.outerHeight()-$heroCardImg.height()}else{if($heroCardImg.hasClass("fill-width"))$heroCardImg.removeClass("fill-width").addClass("fill-height");$heroCardImgCotainter.height("")}}else{if($heroCardImg.hasClass("fill-height"))$heroCardImg.removeClass("fill-height").addClass("fill-width");
$heroCardImgCotainter.height($heroCardImg.height())}};$(window).resize(function(){resizing()});resizing()},handleTimestamps:function(){var $feature=this.$myRoot,$timestamps=$feature.find("*[data-timestamp]"),now=(new Date).getTime();$timestamps.each(function(i){try{var $e=$(this);var duration=$e.attr("data-timestamp-duration");var hoursAgo=Math.floor((now-$e.attr("data-timestamp"))/(1*60*60*1E3));if(hoursAgo<=duration)$e.show().css({"display":"inline-block"});else{var $p=$e.parent();$e.remove();if(!$.trim($p.html()))$p.remove()}}catch(e){$e.show()}})}};
__e.push(["phase1-1",applyFeature]);function applyFeature(){homepageCard.handleTimestamps();setTimeout(function(){homepageCard.heroImageSizing()},500)}})(jQuery);
(function($){window.__e=window.__e||[];window._dw=window._dw||[];var feature={initABTest:function(){var self=this;window._dw.push(["global","ready",function(api){var variant=api.get("article-mostReadOpinion"),DEBUG=false;if(DEBUG||variant.is("replaceTwo")||variant.is("addTwo")){var x=2,normalSel="li.pm-content",addlSel="li.pm-addl-content";document.querySelectorAll(".pb-f-page-post-most ul.skin").forEach(function(ulInDom){if(ulInDom.querySelector(addlSel)){var source=ulInDom.cloneNode(true),target=
document.createElement("ul");if(!DEBUG&&variant.is("replaceTwo"))self.helpers._removeX(source,normalSel,x);else if(!DEBUG&&variant.is("addTwo"));else if(DEBUG);self.helpers._dedup(source);self.helpers._addX(source,target,normalSel);self.helpers._addX(source,target,addlSel,x);self.helpers._cleanLastClass(target);self.helpers._cleanDisplayNumbers(target);self.helpers._updateTids(target);ulInDom.innerHTML=target.innerHTML}})}}])},helpers:{_removeX:function(source,sel,x){var els=source.querySelectorAll(sel),
l=els.length;x=x===undefined?l:isNaN(x)||x<0?0:x>l?l:x;for(var i=0;i<x;i++){var child=source.children[l-x];if($(child).is(sel))source.removeChild(child)}},_addX:function(source,target,sel,x){var els=source.querySelectorAll(sel),l=els.length;x=x===undefined?l:isNaN(x)||x<0?0:x>l?l:x;els.forEach(function(el,i){if(i<x){$(el).removeClass("hide");target.append(el)}})},_cleanLastClass:function(el){var children=el.children,l=children.length;for(var i=0;i<l;i++)if(i==l-1)$(children[i]).addClass("last");else $(children[i]).removeClass("last")},
_cleanDisplayNumbers:function(el){var children=[],sel="#select-nothing-yKQcvflTRB";if(el.querySelector(".pm-addl-content .totalShown")){children=el.children;sel=".totalShown"}else if(el.querySelector(".pm-addl-content .thisTotalShown")){children=el.querySelectorAll(".pm-addl-content .thisTotalShown");sel=".thisTotalShown"}var l=children.length;for(var i=0;i<l;i++){var child=children[i];if($(child).is(".pm-addl-content"))try{child.querySelector(sel).innerHTML=i+1}catch(e){}}},_updateTids:function(el){var re=
/((\?|&)tid=[^&]+)/;el.querySelectorAll("a").forEach(function(a){if(a.href.match(re))a.href=a.href.replace(re,RegExp.$1+"_test")})},_dedup:function(target){var hrefs={},ul=document.createElement("ul");Array.prototype.filter.call(target.querySelectorAll("li"),function(li){var href=li.querySelector("a[href]").getAttribute("href").split("?")[0];if(href in hrefs)return false;else{hrefs[href]=true;return true}}).forEach(function(li){ul.append(li)});target.innerHTML=ul.innerHTML}},init:function(){this.initABTest()}};
var lifecycle={init:function(){feature.init()}};if(wp_pb.StaticMethods.isPageHydrated())lifecycle.init();window.__e.push(["shamble",function(){lifecycle.init()}])})(jQuery);(function($){if(wp_pb.StaticMethods&&wp_pb.StaticMethods.isAdfree())$(".pg-f-homepage-brandconnect-sidebar").remove();else{$("#bc-sidebar").removeClass("hide");$("#bc-sidebar ul.large li .outer-div img").hover(function(){$(this).parent().parent().find(".headline").addClass("hover")},function(){$(this).parent().parent().find(".headline").removeClass("hover")})}})(jQuery);
(function($){function detectIE(){var ua=window.navigator.userAgent;var msie=ua.indexOf("MSIE ");if(msie>0)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);var trident=ua.indexOf("Trident/");if(trident>0){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}return false}var isMobile=wp_pb.BrowserInfo.mobile;var isSafari11=wp_pb.BrowserInfo.browser==="Safari"&&parseInt(wp_pb.BrowserInfo.version)>=11;var TWP=window.TWP||{};TWP.JWConfig={};TWP.videoDataId="video-data-id";
TWP.youtube=TWP.youtube||{};TWP.youtube.youtubeVideos=TWP.youtube.youtubeVideos||{};TWP.PostTV=TWP.PostTV||{};TWP.PostTV.Homepage=TWP.PostTV.Homepage||{};TWP.PostTV.Homepage.posttvPlayerData=TWP.PostTV.Homepage.posttvPlayerData||{};TWP.PostTV.Homepage.posttvPlaylistData=TWP.PostTV.Homepage.posttvPlaylistData||{};var posttvPlayerData=TWP.PostTV.Homepage.posttvPlayerData;var posttvPlaylistData=TWP.PostTV.Homepage.posttvPlaylistData;var logger=new TWP.Tools.logger("PostTvPlayer");var players=$(".posttv-player-container:not([initialized])");
var initPlayer=function(playerDom,i){var $root=$(playerDom),localPlayerId=$root.attr("data-moduleId");if($root.length==0){logger.error("Player root is empty, initialization failed.");return}if($root.attr("initialized")==undefined){logger.log("Initializing player: "+localPlayerId);var isYoutube=false,youtubeReadyFlag=false,jwReadyFlag=false,shareUrl=$root.attr("data-shareUrl"),finalShareTitle=$root.attr("data-share-headline"),allowShare=$root.attr("data-allowShare")==="true",autoPlay=detectIE()?false:
$root.attr("data-autoPlay")==="true",isMuted=$root.attr("data-startMuted")==="true",$playlistSibling=undefined,userInteracted=false,youtubePlayerObj=undefined,event75sent=false,event9sent=false,youtubeWrapper=$root.find(".posttv-player-youtube-wrapper"),isForAdmin=window.self!==window.top;var uniquePlayerToken=$root.attr("data-uniqueToken");if(uniquePlayerToken==null||uniquePlayerToken===""){uniquePlayerToken=$root.closest(".pb-chain").attr("id");$playlistSibling=$root.closest(".pb-f-posttv-player").next();
if(!$playlistSibling.hasClass("pb-f-posttv-playlist-item"))$playlistSibling=undefined;else posttvPlayerData[localPlayerId]["playerType"]="posttv-pb-playlist"}var userInteractionEventHandler=function(args){if(args.enable!=undefined&&(args.enable===true||args.enable===false))userInteractionHandler(args.enable)};var userInteractionHandler=function(enable){if(enable===undefined)enable=false;if(isYoutube)if(!userInteracted&&enable){userInteracted=true;var isYtPingEnabled=window.location.href.indexOf("isYtPingEnabled")>
-1||TWP.PostTV.ytConfig&&TWP.PostTV.ytConfig.pingFrequency&&TWP.PostTV.ytConfig.pingFrequency.enabled;if(!!youtubePlayerObj&&!youtubePlayerObj.statusInterval&&isYtPingEnabled)initYTStatusInterval()}else if(userInteracted&&!enable){userInteracted=false;if(!!youtubePlayerObj&&youtubePlayerObj.statusInterval)stopYTStatusInterval()}};var trackingData={section:$root.attr("data-section")||"",subsection:$root.attr("data-subsection")||"",videoUuid:$root.attr("data-video-uuid")||"",displayDate:Number($root.attr("data-display-date")),
videoTitle:$root.attr("data-video-title")||"",isPoolVideo:$root.attr("data-is-pool-video")==="1",streamName:$root.attr("data-stream-name")};var getSectionAsPrefix=function(){var sectionAsPrefix=trackingData.section.toLowerCase();if(/^\/([^/]+)/.test(sectionAsPrefix))sectionAsPrefix=RegExp.$1.toLowerCase();sectionAsPrefix+=sectionAsPrefix?":":"";return sectionAsPrefix},getEstDateString=function(epoch){var localDate=new Date(epoch),estDate=new Date(epoch+localDate.getTimezoneOffset()*6E4-300*6E4),month=
estDate.getMonth()+1;return month+"/"+estDate.getDate()+"/"+estDate.getFullYear()};var getYoutubeStatusText=function(){var status=undefined;if(youtubePlayerObj!=null&&youtubePlayerObj.getPlayerState!=undefined)status=youtubePlayerObj.getPlayerState();switch(status){case -1:return"unstarted";case 0:return"ended";case 1:return"playing";case 2:return"paused";case 3:return"buffering";case 5:return"video cued";default:return"unknown"}};var getTrackingData=function(params){var sectionAsPrefix=getSectionAsPrefix(),
uuidToken=trackingData.videoUuid,date=trackingData.displayDate,dateString=getEstDateString(date),credit={};if(params===undefined)params={};var currentVideoTitle=sectionAsPrefix+"video - "+uuidToken+" - "+dateString+" - "+trackingData.videoTitle.toLowerCase().replace(/[^\w\s[_,.-]]/gi,"");var getCookie=function(name){var nameEQ=name+"\x3d";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,
c.length)}return null};return{sessionId:getCookie("PBSESSIONID"),page:window.s&&window.s.pageName?window.s.pageName:currentVideoTitle,channel:window.s&&window.s.channel?window.s.channel:"wp - posttv",video:currentVideoTitle,videoId:uuidToken,title:currentVideoTitle,type:window.s&&window.s.prop3?window.s.prop3:"video",section:trackingData.section?trackingData.section.toLowerCase():"",subsection:trackingData.subsection?trackingData.subsection.toLowerCase():"",source:trackingData.isPoolVideo?"pool video":
credit.source?credit.source.toLowerCase():"",videoName:credit.editor?credit.editor.toLowerCase():"",userInfo:wp_pb.BrowserInfo.OS.toLowerCase()+" "+wp_pb.BrowserInfo.browser.toLowerCase()+" v"+wp_pb.BrowserInfo.version,browser:wp_pb.BrowserInfo.browser.toLowerCase(),os:wp_pb.BrowserInfo.OS.toLowerCase(),browserVersion:wp_pb.BrowserInfo.version,playerType:"posttv-hp-feature",videoType:"livestream",isLiveStream:true,isAd:false,isFullEpisode:false,isClip:false,segment:0,countOfClips:0,uuidToken:uuidToken,
ytState:getYoutubeStatusText(),streamName:trackingData.streamName,timeSinceInit:params.timeSinceInit}};var sendDataToSplunk=function(n,e,params){var now=(new Date).getTime();var data={browser:params.browser,os:params.os,browserVersion:params.browserVersion,flashVersion:params.flashVersion,vendor:params.vendor,sessionId:params.sessionId,page:params.page,channel:params.channel,video:params.title,videoId:params.uuidToken,videoName:params.title,videoType:params.videoType,videoSource:params.source,dateFirstPublished:params.dateFirstPublished,
dateLastPublished:params.dateLastPublished,type:params.type,creativeType:params.creativeType,section:params.section,url:document.URL,HTTP_REFERER:document.referrer,adsDuration:params.adsDuration,playerType:params.playerType,adSetCode:params.adSetCode,evtName:n,evtType:typeof e=="string"?e:e[0]||"",evtAction:params.evtAction,evtGroup:params.evtGroup,evtModule:params.evtModule,evtTime:now,targetUrl:params.targetUrl,errorCode:params.errorCode,errorText:params.errorText,offsetTop:params.offsetTop,nthVideoOnPage:params.nthVideoOnPage,
skin:params.skin,streamName:params.streamName};if(isYoutube)data.vendor="YouTube";if(params)try{e=typeof e=="undefined"?"":typeof e=="string"?e:$.isArray(e)?e[0]:"";if(e==="event400")data.ytState=params.ytState;now=params.evtTime||now;$.ajax({url:"//videotracker.washingtonpost.com/index.html",dataType:"jsonp",cache:false,timeout:3E3,data:data});if(window.TWP&&TWP.Data&&TWP.Data.Splunk&&TWP.Data.Splunk.addToHistory)TWP.Data.Splunk.addToHistory(self.methodeUuid,e,now)}catch(e){logger.log("Unable to send tracking data: "+
e.stack)}};var initYTStatusInterval=function(){reportYTStatus();youtubePlayerObj.statusInterval=setInterval(reportYTStatus,(TWP.PostTV.ytConfig.pingFrequency.interval.streamingBar||60)*1E3)};var stopYTStatusInterval=function(){clearInterval(youtubePlayerObj.statusInterval);youtubePlayerObj.statusInterval=undefined};var reportYTStatus=function(){var now=(new Date).getTime();if(!youtubePlayerObj.initTime)youtubePlayerObj.initTime=now;sendTrackingData("YT State",["event400"],{vtOnly:true,timeSinceInit:Math.floor((now-
youtubePlayerObj.initTime)/1E3)})};var sendDataToOmniture=function(n,e,params){if(!!window.s&&typeof s.sendDataToOmniture=="function"&&!!params)try{var data=$.extend({eVar1:params.page,eVar2:params.channel,eVar6:params.video,eVar8:params.videoName,eVar12:params.videoId,eVar13:params.title,eVar17:params.type,prop19:params.evtAction?"posttv - "+params.evtModule+" - "+params.evtAction:"",eVar36:params.nthVideoOnPage&&params.offsetTop?params.nthVideoOnPage+":"+params.offsetTop:"",eVar41:params.section,
eVar42:params.source,eVar44:params.userInfo,eVar45:params.page?params.page:"",eVar46:params.previousVideo,eVar47:params.subsection,eVar48:params.adsDuration,eVar49:params.playerType},self.appendToOmniture,params);n=n||"";e=e||[];s.sendDataToOmniture(n,e,data,{wait:true})}catch(e){logger.log("Unable to send tracking data to omniture: "+e.stack)}};var sendTrackingData=function(n,e,params){params=params||{};if(e[0]=="event75")if(event75sent)return;else if(!params.dupFlag||params.dupFlag!=="false")event75sent=
true;if(e[0]=="event9")if(event9sent)return;else if(!params.dupFlag||params.dupFlag!=="false")event9sent=true;var t=getTrackingData(params);if(params&&params.vtOnly)sendDataToSplunk(n,e,t);else{sendDataToSplunk(n,e,t);sendDataToOmniture(n,e,t)}};if(youtubeWrapper.length>0){isYoutube=true;var loadYoutubePlayer=function(args){if(!!window.YT&&window.YT.loaded===1){TWP.youtube.youtubeVideos[args.containerID]=new window.YT.Player(args.containerID,{playerVars:{autohide:1,autoplay:0,controls:1,fs:1,html5:1,
iv_load_policy:3,modestbranding:1,rel:0,showinfo:1,wmode:"transparent"},height:"100%",width:"100%",videoId:args.vidID,events:{onReady:function(){youtubeReadyFlag=true;if(isMobile){isMuted=false;videoPlaying()}if((jwToPlay||autoPlay)&&!isMobile&&!isForAdmin){playVideo();sendTrackingData("autoplay",["event75"]);jwToPlay=true;if(!isMuted)sendTrackingData("interaction",["event9"])}},onError:function(){logger.log("Youtube embed error.")},onStateChange:function(event){if(event.data===window.YT.PlayerState.PLAYING){if(!isMuted)pausePageRefresh();
if(isMobile&&!event9sent)sendTrackingData("interaction",["event9"])}if(event.data===window.YT.PlayerState.ENDED||event.data===window.YT.PlayerState.PAUSED){resumePageRefresh();if(event.data===window.YT.PlayerState.ENDED){videoStopped();sendTrackingData("videoend",["event13"]);stopYTStatusInterval()}else if(event.data===window.YT.PlayerState.PAUSED)sendTrackingData("videopaused",["event73"])}}}});return TWP.youtube.youtubeVideos[args.containerID]}};var initYoutubePlayer=function(){var init=function(){var container=
$root.find(".posttv-player-youtube-container");youtubePlayerObj=loadYoutubePlayer({containerID:container.attr("id"),vidID:container.attr("data-videoId")})};var youtubeIframeApi="https://www.youtube.com/iframe_api";var youtubeScript;if(typeof window.YT=="object")window.YT.ready(init);else if(document.querySelector('script[src\x3d"'+youtubeIframeApi+'"]')){youtubeScript=document.querySelector('script[src\x3d"'+youtubeIframeApi+'"]');youtubeScript.addEventListener("load",function(){window.YT.ready(init)})}else{youtubeScript=
document.createElement("script");youtubeScript.addEventListener("load",function(){window.YT.ready(init)});var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(youtubeScript,firstScriptTag);youtubeScript.src=youtubeIframeApi}}}var onDemandPlayerWrapperId="posttv-player-ondemand-wrapper-"+localPlayerId,onDemandPlayerWrapper=$root.find("#"+onDemandPlayerWrapperId),jwToPlay=autoPlay,jwPlaying=false,videoQueued=undefined,jwPlayerObj,jwStartedPlaying=undefined;
if($root.find(".posttv-player-ondemand").length>0){var onPlayerCreated=function(){jwReadyFlag=true;if(autoPlay)jwToPlay=true;setMute()};var onEmbedCodeChanged=function(){if(typeof videoQueued!=="undefined"){updateVideo(onDemandPlayerWrapper.attr("data-video-uuid"),videoQueued);return}if(isMobile||isSafari11){isMuted=false;videoStopped();jwToPlay=true}else if(jwToPlay)playVideo();else if(!jwToPlay&&!jwPlaying)pauseVideo()};var onPlayCompleted=function(){if(autoPlay&&isMuted&&posttvPlayerData[localPlayerId]["continuousPlay"])playVideo();
else{jwToPlay=false;jwPlaying=false;isMuted=false;videoStopped();resumePageRefresh();getJwPlayerObject().allowTrackProgress=true}if(uniquePlayerToken)wp_pb.report(uniquePlayerToken,"video_completed")};var onPause=function(){jwToPlay=false;jwPlaying=false;resumePageRefresh()};var onPlayheadTimeChanged=function(){if(jwToPlay&&!jwPlaying){jwPlaying=true;if(!isMuted)pausePageRefresh()}if(jwStartedPlaying!==true){jwStartedPlaying=true;if(autoPlay&&isMobile)sendTrackingData("autoplay",["event75"]);setMute()}};
var onAdStarted=function(){$root.addClass("ad-playing")};var onAdCompleted=function(){$root.removeClass("ad-playing")};var onError=function(){onDemandPlayerWrapper.attr("data-show-posttv-promo-screen","1");$root.find(".wpv-overlay").off("click")};var callbacks={onPlayerCreated:onPlayerCreated,onPlayCompleted:onPlayCompleted,onEmbedCodeChanged:onEmbedCodeChanged,onPause:onPause,onPlayheadTimeChanged:onPlayheadTimeChanged,onAdStarted:onAdStarted,onAdCompleted:onAdCompleted,onSetupError:onError};var shouldPlayAdOverride=
function(){return true};var initOptions=function(){var args={callbacks:callbacks,showSharingOverlay:false,hideOverlayButtons:true};if(!posttvPlayerData[localPlayerId]["isLive"])args=$.extend({type:"html5"},args);if(autoPlay&&isMuted)args=$.extend({allowTrackProgress:false},args);if(shouldPlayAdOverride()===false)args=$.extend({shouldPlayAd:false},args);else if(posttvPlayerData[localPlayerId]["isYourThree"])args=$.extend({shouldPlayAd:true},args);if(!posttvPlayerData[localPlayerId]["isLive"]&&(posttvPlayerData[localPlayerId]["requestLowBitRate"]==
true||$root.width()<=500))args=$.extend({jwPlayerConfig:{maxBitrates:{desktop:{maxBitrate:600}}}},args);return args}}var updateVideo=function(uuid,shouldPlayAd){shouldPlayAd=shouldPlayAdOverride(shouldPlayAd);if(isJwReady()){if(shouldPlayAd!==undefined)jwPlayerObj.playUuid(uuid,{shouldPlayAd:shouldPlayAd});else jwPlayerObj.playUuid(uuid);if(jwPlaying&&!jwToPlay)jwToPlay=true;videoQueued=undefined}else videoQueued=shouldPlayAd===true};var socialEl=$root.find(".posttv-player-social");var imageOverlayEl=
$root.find(".posttv-player-full-image-overlay");var muteEl=$root.find(".posttv-player-mute-overlay");var videoTextEl=$("#posttv-player-text-"+localPlayerId);var sentinel=false;var tweetClicked=function(){window.open("https://twitter.com/share?url\x3d"+encodeURIComponent(shareUrl)+"\x26text\x3d"+encodeURIComponent(finalShareTitle),"_blank","width\x3d550,height\x3d450")};var facebookClicked=function(){var winHeight=600,winWidth=600;window.open("https://www.facebook.com/sharer.php?u\x3d"+encodeURIComponent(shareUrl),
"_blank","top\x3d"+(screen.height/2-winHeight/2)+",left\x3d"+(screen.width/2-winWidth/2)+",toolbar\x3d0,status\x3d0,width\x3d"+winWidth+",height\x3d"+winHeight)};$root.find(".posttv-player-social-twitter").click(tweetClicked);$root.find(".posttv-player-social-facebook").click(facebookClicked);var isYoutubeReady=function(){return youtubeReadyFlag};var isJwReady=function(){return TWP.PostTV.players&&getJwPlayerObject()&&jwReadyFlag};var getJwPlayerObject=function(){return TWP.PostTV.players["posttv-player-ondemand-wrapper-"+
localPlayerId]};var setMute=function(){if(isMuted)if(!isYoutube&&isJwReady())getJwPlayerObject().player.setVolume(0);else{if(isYoutubeReady()){youtubePlayerObj.setVolume(0);youtubePlayerObj.mute()}}else if(!isYoutube&&isJwReady())getJwPlayerObject().player.setVolume(100);else if(isYoutubeReady()){youtubePlayerObj.unMute();youtubePlayerObj.setVolume(100)}};var initJwPlayer=function(){jwPlayerObj=TWP.PostTV.initPostTvPlayer(document.getElementById(onDemandPlayerWrapperId),initOptions())};var loadPlayer=
function(loadOnly){loadOnly=typeof loadOnly!=="undefined"?loadOnly:false;if(!isYoutube&&jwPlayerObj===undefined){if(TWP.PostTV.initPostTvPlayer==undefined)$(window).on("initPostTvPlayerReady",function(){initJwPlayer()});else initJwPlayer();playerLoaded=true;if(!loadOnly)jwToPlay=true;if(isMobile||isSafari11){isMuted=false;videoPlaying()}}else if(isYoutube&&youtubePlayerObj===undefined){playerLoaded=true;initYoutubePlayer();if(!loadOnly)jwToPlay=true}else if(!loadOnly)playVideo()};var playVideo=function(){jwToPlay=
true;if(!isYoutube&&isJwReady()){getJwPlayerObject().play();if(uniquePlayerToken)wp_pb.report(uniquePlayerToken,"video_started");videoPlaying()}else if(isYoutubeReady()){if(!isMobile)youtubePlayerObj.playVideo();if(uniquePlayerToken)wp_pb.report(uniquePlayerToken,"video_started");videoPlaying()}};var pauseVideo=function(){if(!isYoutube&&isJwReady()){if(getJwPlayerObject().player.getState()!=="complete")getJwPlayerObject().pause();jwToPlay=false;jwPlaying=false}else if(isYoutubeReady())youtubePlayerObj.pauseVideo()};
var loadAndPlayVideo=function(){loadPlayer(true);playVideo()};var videoStopped=function(){imageOverlayEl.css("display","block");muteEl.css("display","none");$root.addClass("social-buttons-hidden");pauseVideo()};var videoPlaying=function(){imageOverlayEl.css("display","none");if(isMuted){$root.addClass("social-buttons-hidden");muteEl.show()}else{if(allowShare)$root.removeClass("social-buttons-hidden");muteEl.css("display","none")}setMute()};var muteVideo=function(){isMuted=true;setMute()};var unmuteVideo=
function(){isMuted=false;setMute()};imageOverlayEl.click(function(){loadPlayer(false);pausePageRefresh();userInteractionHandler(true);logPlaylistVariant()});muteEl.click(function(){isMuted=false;pausePageRefresh();videoPlaying();if(autoPlay){sendTrackingData("interaction",["event9"]);if(posttvPlayerData[localPlayerId]["isLive"])userInteractionHandler(true);else getJwPlayerObject().allowTrackProgress=true}});$root.click(function(){var overlayTimeout=4E3;if(isMobile&&!sentinel){sentinel=true;socialEl.show();
window.setTimeout(function(){socialEl.hide();sentinel=false},overlayTimeout)}});$("#posttv-player-text-"+localPlayerId).click(function(){logPlaylistVariant();window.location.href=shareUrl;return false});var playButtonTimeEl=$root.find(".posttv-player-play-time");var initPlayButton=function(){if(!posttvPlayerData[localPlayerId]["isLive"]){var padNum=function(n){return n>9?""+n:"0"+n};var readableDate=function(s){return parseInt(s/60)+":"+padNum(parseInt(s%60))};playButtonTimeEl.html(readableDate(posttvPlayerData[localPlayerId]["videoTime"]));
playButtonTimeEl.show()}else playButtonTimeEl.hide()};var initCredits=function(){if(videoTextEl.find(".posttv-player-credits").length>0)if(videoTextEl.find(".posttv-player-caption-editor").html().trim()=="")videoTextEl.find(".posttv-player-caption-separator").hide();else videoTextEl.find(".posttv-player-caption-separator").show()};var setSize=function(){var setSizeHelp=function(){if($root.width()<=235)$root.addClass("player-small");else $root.removeClass("player-small")};setSizeHelp();$(function(){setSizeHelp()});
$(window).on("resize",setSizeHelp);$root.css("padding-bottom",(posttvPlayerData[localPlayerId]["aspectRatio"]*100).toFixed(2)+"%");if(posttvPlayerData[localPlayerId]["aspectRatio"]>1){$root.css("background","url(https://www.washingtonpost.com/wp-apps/imrs.php?src\x3dhttp%3A%2F%2Fwww.washingtonpost.com%2Fpb%2Fresources%2Fimg%2Fposttv%2FWP_Grey_vertical.jpg\x26w\x3d720\x26h\x3d1280) no-repeat center center");$root.css("background-size","contain")}};var playerLoaded=false;$(window).scroll(function(){var autoInitPlatforms=
isMobile;if(!playerLoaded&&autoInitPlatforms){var videoElRect=$root.get()[0].getBoundingClientRect();if(window.innerHeight+150>videoElRect.top)loadPlayer(true)}});var pausePageRefresh=function(){if(!!window.TWP&&!!TWP.hpRefreshTests)TWP.hpRefreshTests["posttv-player-"+localPlayerId]=function(){return false}};var resumePageRefresh=function(){if(!!window.TWP&&!!TWP.hpRefreshTests)delete TWP.hpRefreshTests["posttv-player-"+localPlayerId]};var sendTracking=function(args){sendTrackingData(args.eventName,
[args.eventType],args)};var updatePlaylistVariant=function($feature){if($feature==undefined)posttvPlaylistData.playlistVariantMain=posttvPlaylistData.playlistVariantServed=posttvPlaylistData.currentFeatureId=undefined;else{var featureId=$feature.attr("id");var variantId=$feature.attr("data-pb-variant");if(variantId!=undefined&&window.pageBuilder.variantsByFeatureId[featureId]==undefined)window.pageBuilder.variantsByFeatureId[featureId]={mainVariant:variantId,servedVariant:variantId};if(window.pageBuilder.variantsByFeatureId[featureId]!=
undefined){posttvPlaylistData.playlistVariantMain=window.pageBuilder.variantsByFeatureId[featureId].mainVariant;posttvPlaylistData.playlistVariantServed=window.pageBuilder.variantsByFeatureId[featureId].servedVariant;posttvPlaylistData.currentFeatureId=featureId;if(posttvPlaylistData.playlistVariantMain==undefined)for(var key in window.pageBuilder.variantsByFeatureId)if(window.pageBuilder.variantsByFeatureId[key].servedVariant==posttvPlaylistData.playlistVariantServed){posttvPlaylistData.playlistVariantMain=
window.pageBuilder.variantsByFeatureId[key].mainVariant;break}}else posttvPlaylistData.playlistVariantMain=posttvPlaylistData.playlistVariantServed=posttvPlaylistData.currentFeatureId=undefined}};var logPlaylistVariant=function(){posttvPlaylistData[posttvPlaylistData.currentFeatureId]=posttvPlaylistData[posttvPlaylistData.currentFeatureId]||{};if(posttvPlaylistData[posttvPlaylistData.currentFeatureId].clickLogged!==true&&posttvPlaylistData.playlistVariantMain!=undefined&&posttvPlaylistData.playlistVariantServed!=
undefined){window.pageBuilder.variantLogClick(posttvPlaylistData.playlistVariantMain,posttvPlaylistData.playlistVariantServed);posttvPlaylistData[posttvPlaylistData.currentFeatureId].clickLogged=true;window.onunload=null}};var updateOnDemandPlayer=function(args){try{var src=imageOverlayEl.find("img").attr("src"),low_res=imageOverlayEl.find("img").attr("data-low-res-src"),hi_res=imageOverlayEl.find("img").attr("data-hi-res-src"),srcPrefix=src.match("(.*php\\?src\x3d)");if(srcPrefix==null){srcPrefix=
"https://www.washingtonpost.com/wp-apps/imrs.php?src\x3d";imageOverlayEl.find("img").attr("src",srcPrefix+encodeURIComponent(args.image)+"\x26w\x3d480\x26h\x3d270")}else{srcPrefix=srcPrefix[0];imageOverlayEl.find("img").attr("src",srcPrefix+encodeURIComponent(args.image)+src.match("\\\x26w\x3d.*")[0])}if(low_res!=null)imageOverlayEl.find("img").attr("data-low-res-src",srcPrefix+encodeURIComponent(args.image)+low_res.match("\\\x26w\x3d.*")[0]);if(hi_res!=null)imageOverlayEl.find("img").attr("data-hi-res-src",
srcPrefix+encodeURIComponent(args.image)+hi_res.match("\\\x26w\x3d.*")[0])}catch(ex){logger.error("PostTV Player promo image couldn't be updated.")}onDemandPlayerWrapper.attr("data-video-uuid",args.uuid);videoTextEl.find(".posttv-player-headline").html(args.title);videoTextEl.find(".posttv-player-blurb").html(args.blurb);videoTextEl.find(".posttv-player-caption-editor").html(args.editor);videoTextEl.find(".posttv-player-caption-source").html(args.source);try{wp_pb.StaticMethods.remarryHeadline(videoTextEl.find(".headline"))}catch(e){videoTextEl.find(".headline").css("width",
"auto")}shareUrl=args.url;finalShareTitle=args.title;posttvPlayerData[localPlayerId]["videoTime"]=args.duration;posttvPlayerData[localPlayerId]["isLive"]=String(args.isLive)=="true";posttvPlayerData[localPlayerId]["requestLowBitRate"]=args.lowBitRate===true;initPlayButton();initCredits();$root.removeClass("ad-playing");if(isJwReady()){if(args.startPlaying||imageOverlayEl.css("display")=="none")jwToPlay=true;updateVideo(args.uuid,args.shouldPlayAd)}else if(!isJwReady()&&args.startPlaying)loadPlayer(false);
else videoQueued=args.shouldPlayAd===true;if(args.playlistFeatureId!=undefined){updatePlaylistVariant($("#"+args.playlistFeatureId));if(args.startPlaying){logPlaylistVariant();updatePlaylistVariant()}}if(args.startPlaying&&args.scrollToPlayer){var topOffsetAdjustment=30,$navBarEl=$("#nav-bar"),$liveMainEl=$(".pb-f-posttv-live-main"),$breakingNewsEl=$(".pb-f-page-breaking-news-bar"),$shareBarEl=$(".top-sharebar-wrapper",".pb-f-sharebars-top-share-bar");if($navBarEl.length>0)topOffsetAdjustment+=$navBarEl.height();
if($liveMainEl.length>0)topOffsetAdjustment+=$liveMainEl.height();if($breakingNewsEl.length>0)topOffsetAdjustment+=$breakingNewsEl.height();if($shareBarEl.length>0)topOffsetAdjustment+=$shareBarEl.height();var documentScrollTop=document.documentElement.scrollTop||document.body.scrollTop,playerTopPosition=$root.offset().top-topOffsetAdjustment;if(documentScrollTop>playerTopPosition)$("html, body").animate({scrollTop:playerTopPosition+"px"})}};$(function(){if(uniquePlayerToken){wp_pb.register(uniquePlayerToken,
"new_video_selected",updateOnDemandPlayer,this);wp_pb.register(uniquePlayerToken,"play_video",loadAndPlayVideo,this);wp_pb.register(uniquePlayerToken,"stop_video",videoStopped,this);wp_pb.register(uniquePlayerToken,"mute_video",muteVideo,this);wp_pb.register(uniquePlayerToken,"unmute_video",unmuteVideo,this);wp_pb.register(uniquePlayerToken,"send_tracking",sendTracking,this);wp_pb.register(uniquePlayerToken,"user_interacted",userInteractionEventHandler,this)}});var init=function(){if($playlistSibling){$playlistSibling=
$playlistSibling.find(".posttv-playlist-item-video");updateOnDemandPlayer({title:$playlistSibling.attr("data-video-title"),blurb:$playlistSibling.attr("data-video-blurb"),image:$playlistSibling.attr("data-video-image"),url:$playlistSibling.attr("data-video-url"),uuid:$playlistSibling.attr("data-video-uuid"),duration:$playlistSibling.attr("data-video-duration"),isLive:$playlistSibling.attr("data-video-islive"),editor:$playlistSibling.attr("data-video-editor"),source:$playlistSibling.attr("data-video-source"),
startPlaying:false,scrollToPlayer:false,playlistFeatureId:$playlistSibling.attr("id")})}setSize();initPlayButton();initCredits();if(isMobile)isMuted=false;if(autoPlay&&!isMobile)videoPlaying();else videoStopped();var shouldInitFirstPlayer=isMobile;var shouldInitAllPlayers=!isMobile&&isSafari11;if(autoPlay===true||i==0&&shouldInitFirstPlayer||shouldInitAllPlayers)loadPlayer(true)};init();$root.attr("initialized","yeah")}else{logger.log("Skipped initializing player second time: "+localPlayerId);$root.attr("initialized",
"skipped")}};window.__e.push(["phase1-1",applyFeature]);function applyFeature(){for(var i=0;i<players.length;i++)initPlayer(players[i],i);if(!TWP.PostTV.Homepage.playerVariantsInitialized){var updateVariant=function(variantId){var updatedEl=$(".posttv-player-container","div[data-pb-variant\x3d'"+variantId+"']");if(updatedEl.length>0){logger.log("Variant with PostTV Player loaded: "+variantId);initPlayer(updatedEl,0)}};if(wp_pb.register!=undefined){logger.log("wp_pb.register works. Listening.");wp_pb.register("variants",
"loaded",updateVariant,this)}else{logger.log("wp_pb.register is not defined yet. Listening to jQuery event.");$(window).on("variantsLoaded",function(event,servedVariant){updateVariant(servedVariant)})}}TWP.PostTV.Homepage.playerVariantsInitialized=true}})(jQuery);
(function($){var logger=!!window.TWP&&!!TWP.Tools&&!!TWP.Tools.logger?new TWP.Tools.logger("pb-f-page-force-refresh"):window.console;if(!!window.wp_pb&&!window.wp_pb.isAdmin){TWP=window.TWP||{};TWP.hpForceRefresh=new HomepageForceRefresh}function HomepageForceRefresh(){var self=this,lastLoaded;init();function init(){setLastLoaded();setForceRefresh()}function setLastLoaded(){lastLoaded=(new Date).getTime()}function setForceRefresh(){var $roots=$(".pb-f-page-force-refresh \x3e span.refresh-data[data-feature-name][data-page]");
logger.info("on initial load: looking for pb-f-page-force-refresh with refresh time");if($roots.length>0)$roots.each(function(i){logger.info("on initial load: found pb-f-page-force-refresh with refresh time");var $root=$(this);setInterval(function(){checkForceRefresh($root)},Math.round(minsToMillis(1)))});else logger.info("on initial load: did not find pb-f-page-force-refresh with refresh time");return self}function forceRefresh(t){var searchParam="reload\x3dtrue\x26tid\x3dforce_refresh_"+t+"\x26_\x3d"+
t,url=window.location.href;if(url.indexOf(searchParam)==-1)url+=(!!window.location.search?"\x26":"?")+searchParam;window.location.href=url}function checkForceRefresh($refreshEl){var page=$refreshEl.data("page"),featureName=$refreshEl.data("featureName"),path=$refreshEl.data("path"),url=path+"/api/v2/render/feature?uri\x3d"+page+"\x26name\x3d"+featureName;$.ajax({url:url,timeout:3*1E3,success:function(data){var $rendering=$($.parseHTML(data.rendering)),$el=$rendering.find("span.refresh-data[data-force-refresh-time]");
if($el.length>0){logger.info("on ajax: found pb-f-page-force-refresh");var forceRefreshTime=$el.data("forceRefreshTime");if(!isNaN(forceRefreshTime)&&forceRefreshTime>lastLoaded){logger.info("on ajax: found VALID force-refresh-time in pb-f-page-force-refresh");forceRefresh(forceRefreshTime)}else logger.info("on ajax: cannot find an actionable force-refresh-time in pb-f-page-force-refresh")}},error:function(jqXHR,textStatus){logger.error("on ajax: error in pb-f-page-force-refresh. cannot get url: "+
url);logger.error(jqXHR,textStatus);var fallbackUrl="https://www.washingtonpost.com/wp-stat/pb/features/page/force-refresh/"+(page.match(/^(\/pb\/)?\/utils\//)?"forceRefreshFallbackForUtils.json":"forceRefreshFallback.json")+"?callback\x3d_forceRefreshFallback";logger.info("try: "+fallbackUrl);$.ajax({dataType:"json",url:fallbackUrl,timeout:5*1E3,cache:true,success:function(data){try{var forceRefreshTime=!!data[location.pathname]?data[location.pathname]:data["default"];logger.info("forceRefreshTime: "+
forceRefreshTime);if(!isNaN(forceRefreshTime)&&forceRefreshTime>lastLoaded){logger.info("on fallback ajax: found VALID force-refresh-time via: "+fallbackUrl);forceRefresh()}else logger.info("on fallback ajax: cannot find an actionable force-refresh-time via: "+fallbackUrl)}catch(e){}}})}})}function minsToMillis(mins){return mins*60*1E3}}})(window.jQuery);__darwinmeta__=window.__darwinmeta__||{isFired:false};
(function(window,store){var MAX_WAIT=200;_dw=window._dw||[];_dw.push(["global","ready",function(api){if(!store.isFired){store.isFired=true;fireEvent(api)}}]);setTimeout(function(){if(!store.isFired&&"function"==typeof window._dw)_dw.push(["global","ready",function(api){store.isFired=true;fireEvent(api)}])},MAX_WAIT);function fireEvent(api){$(window.document).trigger("abtest-ready",[api])}})(window,__darwinmeta__);