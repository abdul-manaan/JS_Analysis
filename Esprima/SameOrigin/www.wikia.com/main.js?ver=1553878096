!function(e){function r(e,r,o){return 4===arguments.length?t.apply(this,arguments):void n(e,{declarative:!0,deps:r,declare:o})}function t(e,r,t,o){n(e,{declarative:!1,deps:r,executingRequire:t,execute:o})}function n(e,r){r.name=e,e in v||(v[e]=r),r.normalizedDeps=r.deps}function o(e,r){if(r[e.groupIndex]=r[e.groupIndex]||[],-1==g.call(r[e.groupIndex],e)){r[e.groupIndex].push(e);for(var t=0,n=e.normalizedDeps.length;n>t;t++){var a=e.normalizedDeps[t],u=v[a];if(u&&!u.evaluated){var d=e.groupIndex+(u.declarative!=e.declarative);if(void 0===u.groupIndex||u.groupIndex<d){if(void 0!==u.groupIndex&&(r[u.groupIndex].splice(g.call(r[u.groupIndex],u),1),0==r[u.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");u.groupIndex=d}o(u,r)}}}}function a(e){var r=v[e];r.groupIndex=0;var t=[];o(r,t);for(var n=!!r.declarative==t.length%2,a=t.length-1;a>=0;a--){for(var u=t[a],i=0;i<u.length;i++){var s=u[i];n?d(s):l(s)}n=!n}}function u(e){return y[e]||(y[e]={name:e,dependencies:[],exports:{},importers:[]})}function d(r){if(!r.module){var t=r.module=u(r.name),n=r.module.exports,o=r.declare.call(e,function(e,r){if(t.locked=!0,"object"==typeof e)for(var o in e)n[o]=e[o];else n[e]=r;for(var a=0,u=t.importers.length;u>a;a++){var d=t.importers[a];if(!d.locked)for(var i=0;i<d.dependencies.length;++i)d.dependencies[i]===t&&d.setters[i](n)}return t.locked=!1,r},{id:r.name});t.setters=o.setters,t.execute=o.execute;for(var a=0,i=r.normalizedDeps.length;i>a;a++){var l,s=r.normalizedDeps[a],c=v[s],f=y[s];f?l=f.exports:c&&!c.declarative?l=c.esModule:c?(d(c),f=c.module,l=f.exports):l=p(s),f&&f.importers?(f.importers.push(t),t.dependencies.push(f)):t.dependencies.push(null),t.setters[a]&&t.setters[a](l)}}}function i(e){var r,t=v[e];if(t)t.declarative?f(e,[]):t.evaluated||l(t),r=t.module.exports;else if(r=p(e),!r)throw new Error("Unable to load dependency "+e+".");return(!t||t.declarative)&&r&&r.__useDefault?r["default"]:r}function l(r){if(!r.module){var t={},n=r.module={exports:t,id:r.name};if(!r.executingRequire)for(var o=0,a=r.normalizedDeps.length;a>o;o++){var u=r.normalizedDeps[o],d=v[u];d&&l(d)}r.evaluated=!0;var c=r.execute.call(e,function(e){for(var t=0,n=r.deps.length;n>t;t++)if(r.deps[t]==e)return i(r.normalizedDeps[t]);throw new TypeError("Module "+e+" not declared as a dependency.")},t,n);void 0!==c&&(n.exports=c),t=n.exports,t&&t.__esModule?r.esModule=t:r.esModule=s(t)}}function s(r){var t={};if(("object"==typeof r||"function"==typeof r)&&r!==e)if(m)for(var n in r)"default"!==n&&c(t,r,n);else{var o=r&&r.hasOwnProperty;for(var n in r)"default"===n||o&&!r.hasOwnProperty(n)||(t[n]=r[n])}return t["default"]=r,x(t,"__useDefault",{value:!0}),t}function c(e,r,t){try{var n;(n=Object.getOwnPropertyDescriptor(r,t))&&x(e,t,n)}catch(o){return e[t]=r[t],!1}}function f(r,t){var n=v[r];if(n&&!n.evaluated&&n.declarative){t.push(r);for(var o=0,a=n.normalizedDeps.length;a>o;o++){var u=n.normalizedDeps[o];-1==g.call(t,u)&&(v[u]?f(u,t):p(u))}n.evaluated||(n.evaluated=!0,n.module.execute.call(e))}}function p(e){if(I[e])return I[e];if("@node/"==e.substr(0,6))return I[e]=s(D(e.substr(6)));var r=v[e];if(!r)throw"Module "+e+" not present.";return a(e),f(e,[]),v[e]=void 0,r.declarative&&x(r.module.exports,"__esModule",{value:!0}),I[e]=r.declarative?r.module.exports:r.esModule}var v={},g=Array.prototype.indexOf||function(e){for(var r=0,t=this.length;t>r;r++)if(this[r]===e)return r;return-1},m=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(h){m=!1}var x;!function(){try{Object.defineProperty({},"a",{})&&(x=Object.defineProperty)}catch(e){x=function(e,r,t){try{e[r]=t.value||t.get.call(e)}catch(n){}}}}();var y={},D="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&"undefined"!=typeof require.resolve&&"undefined"!=typeof process&&process.platform&&require,I={"@empty":{}};return function(e,n,o,a){return function(u){u(function(u){for(var d={_nodeRequire:D,register:r,registerDynamic:t,get:p,set:function(e,r){I[e]=r},newModule:function(e){return e}},i=0;i<n.length;i++)(function(e,r){r&&r.__esModule?I[e]=r:I[e]=s(r)})(n[i],arguments[i]);a(d);var l=p(e[0]);if(e.length>1)for(var i=1;i<e.length;i++)p(e[i]);return o?l["default"]:l})}}}("undefined"!=typeof self?self:global)

(["1"], [], false, function($__System) {
var require = this.require, exports = this.exports, module = this.module;
!function(e){function n(e,n){e=e.replace(l,"");var r=e.match(u),t=(r[1].split(",")[n]||"require").replace(s,""),i=p[t]||(p[t]=new RegExp(a+t+f,"g"));i.lastIndex=0;for(var o,c=[];o=i.exec(e);)c.push(o[2]||o[3]);return c}function r(e,n,t,o){if("object"==typeof e&&!(e instanceof Array))return r.apply(null,Array.prototype.splice.call(arguments,1,arguments.length-1));if("string"==typeof e&&"function"==typeof n&&(e=[e]),!(e instanceof Array)){if("string"==typeof e){var l=i.get(e);return l.__useDefault?l["default"]:l}throw new TypeError("Invalid require")}for(var a=[],f=0;f<e.length;f++)a.push(i["import"](e[f],o));Promise.all(a).then(function(e){n&&n.apply(null,e)},t)}function t(t,l,a){"string"!=typeof t&&(a=l,l=t,t=null),l instanceof Array||(a=l,l=["require","exports","module"].splice(0,a.length)),"function"!=typeof a&&(a=function(e){return function(){return e}}(a)),void 0===l[l.length-1]&&l.pop();var f,u,s;-1!=(f=o.call(l,"require"))&&(l.splice(f,1),t||(l=l.concat(n(a.toString(),f)))),-1!=(u=o.call(l,"exports"))&&l.splice(u,1),-1!=(s=o.call(l,"module"))&&l.splice(s,1);var p={name:t,deps:l,execute:function(n,t,o){for(var p=[],c=0;c<l.length;c++)p.push(n(l[c]));o.uri=o.id,o.config=function(){},-1!=s&&p.splice(s,0,o),-1!=u&&p.splice(u,0,t),-1!=f&&p.splice(f,0,function(e,t,l){return"string"==typeof e&&"function"!=typeof t?n(e):r.call(i,e,t,l,o.id)});var d=a.apply(-1==u?e:t,p);return"undefined"==typeof d&&o&&(d=o.exports),"undefined"!=typeof d?d:void 0}};if(t)c.anonDefine||c.isBundle?c.anonDefine&&c.anonDefine.name&&(c.anonDefine=null):c.anonDefine=p,c.isBundle=!0,i.registerDynamic(p.name,p.deps,!1,p.execute);else{if(c.anonDefine&&!c.anonDefine.name)throw new Error("Multiple anonymous defines in module "+t);c.anonDefine=p}}var i=$__System,o=Array.prototype.indexOf||function(e){for(var n=0,r=this.length;r>n;n++)if(this[n]===e)return n;return-1},l=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,a="(?:^|[^$_a-zA-Z\\xA0-\\uFFFF.])",f="\\s*\\(\\s*(\"([^\"]+)\"|'([^']+)')\\s*\\)",u=/\(([^\)]*)\)/,s=/^\s+|\s+$/g,p={};t.amd={};var c={isBundle:!1,anonDefine:null};i.amdDefine=t,i.amdRequire=r}("undefined"!=typeof self?self:global);
$__System.registerDynamic("2", ["3"], true, function ($__require, exports, module) {
  "format cjs";

  var global = this || self,
      GLOBAL = global;
  (function (process) {
    !function (e, n) {
      "object" == typeof exports && "object" == typeof module ? module.exports = n() : "function" == typeof undefined && define.amd ? define([], n) : "object" == typeof exports ? exports.trackingOptIn = n() : e.trackingOptIn = n();
    }(window, function () {
      return function (e) {
        var n = {};
        function t(o) {
          if (n[o]) return n[o].exports;
          var r = n[o] = {
            i: o,
            l: !1,
            exports: {}
          };
          return e[o].call(r.exports, r, r.exports, t), r.l = !0, r.exports;
        }
        return t.m = e, t.c = n, t.d = function (e, n, o) {
          t.o(e, n) || Object.defineProperty(e, n, {
            configurable: !1,
            enumerable: !0,
            get: o
          });
        }, t.r = function (e) {
          Object.defineProperty(e, "__esModule", { value: !0 });
        }, t.n = function (e) {
          var n = e && e.__esModule ? function () {
            return e.default;
          } : function () {
            return e;
          };
          return t.d(n, "a", n), n;
        }, t.o = function (e, n) {
          return Object.prototype.hasOwnProperty.call(e, n);
        }, t.p = "", t(t.s = 29);
      }([function (e, n, t) {
        var o, r;
        !function (i) {
          if (void 0 === (r = "function" == typeof (o = i) ? o.call(n, t, n, e) : o) || (e.exports = r), !0, e.exports = i(), !!0) {
            var a = window.Cookies,
                s = window.Cookies = i();
            s.noConflict = function () {
              return window.Cookies = a, s;
            };
          }
        }(function () {
          function e() {
            for (var e = 0, n = {}; e < arguments.length; e++) {
              var t = arguments[e];
              for (var o in t) n[o] = t[o];
            }
            return n;
          }
          return function n(t) {
            function o(n, r, i) {
              var a;
              if ("undefined" != typeof document) {
                if (arguments.length > 1) {
                  if ("number" == typeof (i = e({ path: "/" }, o.defaults, i)).expires) {
                    var s = new Date();
                    s.setMilliseconds(s.getMilliseconds() + 864e5 * i.expires), i.expires = s;
                  }
                  i.expires = i.expires ? i.expires.toUTCString() : "";
                  try {
                    a = JSON.stringify(r), /^[\{\[]/.test(a) && (r = a);
                  } catch (e) {}
                  r = t.write ? t.write(r, n) : encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), n = (n = (n = encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)).replace(/[\(\)]/g, escape);
                  var c = "";
                  for (var u in i) i[u] && (c += "; " + u, !0 !== i[u] && (c += "=" + i[u]));
                  return document.cookie = n + "=" + r + c;
                }
                n || (a = {});
                for (var l = document.cookie ? document.cookie.split("; ") : [], d = /(%[0-9A-Z]{2})+/g, p = 0; p < l.length; p++) {
                  var f = l[p].split("="),
                      h = f.slice(1).join("=");
                  this.json || '"' !== h.charAt(0) || (h = h.slice(1, -1));
                  try {
                    var v = f[0].replace(d, decodeURIComponent);
                    if (h = t.read ? t.read(h, v) : t(h, v) || h.replace(d, decodeURIComponent), this.json) try {
                      h = JSON.parse(h);
                    } catch (e) {}
                    if (n === v) {
                      a = h;
                      break;
                    }
                    n || (a[v] = h);
                  } catch (e) {}
                }
                return a;
              }
            }
            return o.set = o, o.get = function (e) {
              return o.call(o, e);
            }, o.getJSON = function () {
              return o.apply({ json: !0 }, [].slice.call(arguments));
            }, o.defaults = {}, o.remove = function (n, t) {
              o(n, "", e(t, { expires: -1 }));
            }, o.withConverter = n, o;
          }(function () {});
        });
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 }), n.parseUrl = function (e) {
          var n = document.createElement("a");
          return n.href = e, n;
        }, n.getCookieDomain = function (e) {
          var n = e.split(".");
          if (n.length < 2) return;
          return "." + n[n.length - 2] + "." + n[n.length - 1];
        }, n.getJSON = function (e) {
          return new o.Promise(function (n, t) {
            var o = new XMLHttpRequest();
            o.open("GET", e, !0), o.onload = function () {
              var e = void 0;
              try {
                e = JSON.parse(this.responseText);
              } catch (n) {
                e = null;
              }
              n(e);
            }, o.onerror = function () {
              t(new Error("Cannot fetch: " + e));
            }, o.send(null);
          });
        };
        var o = t(7);
      }, function (e, n, t) {
        "use strict";

        var o,
            r,
            i,
            a,
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        },
            c = (Array.from || (o = function (e) {
          return "function" == typeof e;
        }, r = Math.pow(2, 53) - 1, i = function (e) {
          var n = function (e) {
            var n = Number(e);
            return isNaN(n) ? 0 : 0 !== n && isFinite(n) ? (n > 0 ? 1 : -1) * Math.floor(Math.abs(n)) : n;
          }(e);
          return Math.min(Math.max(n, 0), r);
        }, a = function (e) {
          var n = e.next();
          return !Boolean(n.done) && n;
        }), t(4)),
            u = c.decodeBitsToIds,
            l = c.decodeFromBase64;
        e.exports = { decodeConsentString: function (e) {
            var n = l(e),
                t = n.version,
                o = n.cmpId,
                r = n.vendorListVersion,
                i = n.purposeIdBitString,
                a = n.maxVendorId,
                s = n.created,
                c = n.lastUpdated,
                d = n.isRange,
                p = n.defaultConsent,
                f = n.vendorIdBitString,
                h = n.vendorRangeList,
                v = n.cmpVersion,
                m = n.consentScreen,
                y = n.consentLanguage,
                g = {
              version: t,
              cmpId: o,
              vendorListVersion: r,
              allowedPurposeIds: u(i),
              maxVendorId: a,
              created: s,
              lastUpdated: c,
              cmpVersion: v,
              consentScreen: m,
              consentLanguage: y
            };
            if (d) {
              var b = h.reduce(function (e, n) {
                for (var t = n.isRange, o = n.startVendorId, r = n.endVendorId, i = t ? r : o, a = o; a <= i; a += 1) e[a] = !0;
                return e;
              }, {});
              g.allowedVendorIds = [];
              for (var w = 0; w <= a; w += 1) (p && !b[w] || !p && b[w]) && -1 === g.allowedVendorIds.indexOf(w) && g.allowedVendorIds.push(w);
            } else g.allowedVendorIds = u(f);
            return g;
          } };
      }, function (e, n, t) {
        "use strict";

        var o,
            r,
            i,
            a,
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        };
        Array.from || (o = function (e) {
          return "function" == typeof e;
        }, r = Math.pow(2, 53) - 1, i = function (e) {
          var n = function (e) {
            var n = Number(e);
            return isNaN(n) ? 0 : 0 !== n && isFinite(n) ? (n > 0 ? 1 : -1) * Math.floor(Math.abs(n)) : n;
          }(e);
          return Math.min(Math.max(n, 0), r);
        }, a = function (e) {
          var n = e.next();
          return !Boolean(n.done) && n;
        });
        e.exports = {
          versionNumBits: 6,
          vendorVersionMap: { 1: {
              version: 1,
              metadataFields: ["version", "created", "lastUpdated", "cmpId", "cmpVersion", "consentScreen", "vendorListVersion"],
              fields: [{
                name: "version",
                type: "int",
                numBits: 6
              }, {
                name: "created",
                type: "date",
                numBits: 36
              }, {
                name: "lastUpdated",
                type: "date",
                numBits: 36
              }, {
                name: "cmpId",
                type: "int",
                numBits: 12
              }, {
                name: "cmpVersion",
                type: "int",
                numBits: 12
              }, {
                name: "consentScreen",
                type: "int",
                numBits: 6
              }, {
                name: "consentLanguage",
                type: "language",
                numBits: 12
              }, {
                name: "vendorListVersion",
                type: "int",
                numBits: 12
              }, {
                name: "purposeIdBitString",
                type: "bits",
                numBits: 24
              }, {
                name: "maxVendorId",
                type: "int",
                numBits: 16
              }, {
                name: "isRange",
                type: "bool",
                numBits: 1
              }, {
                name: "vendorIdBitString",
                type: "bits",
                numBits: function (e) {
                  return e.maxVendorId;
                },
                validator: function (e) {
                  return !e.isRange;
                }
              }, {
                name: "defaultConsent",
                type: "bool",
                numBits: 1,
                validator: function (e) {
                  return e.isRange;
                }
              }, {
                name: "numEntries",
                numBits: 12,
                type: "int",
                validator: function (e) {
                  return e.isRange;
                }
              }, {
                name: "vendorRangeList",
                type: "list",
                listCount: function (e) {
                  return e.numEntries;
                },
                validator: function (e) {
                  return e.isRange;
                },
                fields: [{
                  name: "isRange",
                  type: "bool",
                  numBits: 1
                }, {
                  name: "startVendorId",
                  type: "int",
                  numBits: 16
                }, {
                  name: "endVendorId",
                  type: "int",
                  numBits: 16,
                  validator: function (e) {
                    return e.isRange;
                  }
                }]
              }]
            } }
        };
      }, function (e, n, t) {
        "use strict";

        var o,
            r,
            i,
            a,
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        },
            c = Array.from || (o = function (e) {
          return "function" == typeof e;
        }, r = Math.pow(2, 53) - 1, i = function (e) {
          var n = function (e) {
            var n = Number(e);
            return isNaN(n) ? 0 : 0 !== n && isFinite(n) ? (n > 0 ? 1 : -1) * Math.floor(Math.abs(n)) : n;
          }(e);
          return Math.min(Math.max(n, 0), r);
        }, a = function (e) {
          var n = e.next();
          return !Boolean(n.done) && n;
        }, function (e) {
          var n,
              t,
              r,
              c = this,
              u = arguments.length > 1 ? arguments[1] : void 0;
          if (void 0 !== u) {
            if (!o(u)) throw new TypeError("Array.from: when provided, the second argument must be a function");
            arguments.length > 2 && (n = arguments[2]);
          }
          var l = function (e, n) {
            if (null != e && null != n) {
              var t = e[n];
              if (null == t) return;
              if (!o(t)) throw new TypeError(t + " is not a function");
              return t;
            }
          }(e, function (e) {
            if (null != e) {
              if (["string", "number", "boolean", "symbol"].indexOf(void 0 === e ? "undefined" : s(e)) > -1) return Symbol.iterator;
              if ("undefined" != typeof Symbol && "iterator" in Symbol && Symbol.iterator in e) return Symbol.iterator;
              if ("@@iterator" in e) return "@@iterator";
            }
          }(e));
          if (void 0 !== l) {
            t = o(c) ? Object(new c()) : [];
            var d,
                p,
                f = l.call(e);
            if (null == f) throw new TypeError("Array.from requires an array-like or iterable object");
            for (r = 0;;) {
              if (!(d = a(f))) return t.length = r, t;
              p = d.value, t[r] = u ? u.call(n, p, r) : p, r++;
            }
          } else {
            var h = Object(e);
            if (null == e) throw new TypeError("Array.from requires an array-like object - not null or undefined");
            var v,
                m = i(h.length);
            for (t = o(c) ? Object(new c(m)) : new Array(m), r = 0; r < m;) v = h[r], t[r] = u ? u.call(n, v, r) : v, r++;
            t.length = m;
          }
          return t;
        });
        var u = t(10),
            l = t(3),
            d = l.versionNumBits,
            p = l.vendorVersionMap;
        function f(e) {
          for (var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "0", t = "", o = 0; o < e; o += 1) t += n;
          return t;
        }
        function h(e, n) {
          return f(Math.max(0, n)) + e;
        }
        function v(e, n) {
          return e + f(Math.max(0, n));
        }
        function m(e, n) {
          var t = "";
          return "number" != typeof e || isNaN(e) || (t = parseInt(e, 10).toString(2)), n >= t.length && (t = h(t, n - t.length)), t.length > n && (t = t.substring(0, n)), t;
        }
        function y(e) {
          return m(!0 === e ? 1 : 0, 1);
        }
        function g(e, n) {
          return e instanceof Date ? m(e.getTime() / 100, n) : m(e, n);
        }
        function b(e, n) {
          return m(e.toUpperCase().charCodeAt(0) - 65, n);
        }
        function w(e) {
          var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 12;
          return b(e.slice(0, 1), n / 2) + b(e.slice(1), n / 2);
        }
        function k(e, n, t) {
          return parseInt(e.substr(n, t), 2);
        }
        function _(e, n, t) {
          return new Date(100 * k(e, n, t));
        }
        function C(e, n) {
          return 1 === parseInt(e.substr(n, 1), 2);
        }
        function x(e) {
          var n = k(e);
          return String.fromCharCode(n + 65).toLowerCase();
        }
        function A(e, n, t) {
          var o = e.substr(n, t);
          return x(o.slice(0, t / 2)) + x(o.slice(t / 2));
        }
        function E(e) {
          var n = e.input,
              t = e.field,
              o = t.name,
              r = t.type,
              i = t.numBits,
              a = t.encoder,
              s = t.validator;
          if ("function" == typeof s && !s(n)) return "";
          if ("function" == typeof a) return a(n);
          var c = "function" == typeof i ? i(n) : i,
              u = n[o],
              l = null === u || void 0 === u ? "" : u;
          switch (r) {
            case "int":
              return m(l, c);
            case "bool":
              return y(l);
            case "date":
              return g(l, c);
            case "bits":
              return v(l, c - l.length).substring(0, c);
            case "list":
              return l.reduce(function (e, n) {
                return e + S({
                  input: n,
                  fields: t.fields
                });
              }, "");
            case "language":
              return w(l, c);
            default:
              throw new Error("ConsentString - Unknown field type " + r + " for encoding");
          }
        }
        function S(e) {
          var n = e.input;
          return e.fields.reduce(function (e, t) {
            return e += E({
              input: n,
              field: t
            });
          }, "");
        }
        function O(e) {
          var n = e.input,
              t = e.output,
              o = e.startPosition,
              r = e.field,
              i = r.type,
              a = r.numBits,
              s = r.decoder,
              u = r.validator,
              l = r.listCount;
          if ("function" == typeof u && !u(t)) return { newPosition: o };
          if ("function" == typeof s) return s(n, t, o);
          var d = "function" == typeof a ? a(t) : a,
              p = 0;
          switch ("function" == typeof l ? p = l(t) : "number" == typeof l && (p = l), i) {
            case "int":
              return { fieldValue: k(n, o, d) };
            case "bool":
              return { fieldValue: C(n, o) };
            case "date":
              return { fieldValue: _(n, o, d) };
            case "bits":
              return { fieldValue: n.substr(o, d) };
            case "list":
              return new Array(p).fill().reduce(function (e) {
                var t = L({
                  input: n,
                  fields: r.fields,
                  startPosition: e.newPosition
                }),
                    o = t.decodedObject,
                    i = t.newPosition;
                return {
                  fieldValue: [].concat(function (e) {
                    if (Array.isArray(e)) {
                      for (var n = 0, t = Array(e.length); n < e.length; n++) t[n] = e[n];
                      return t;
                    }
                    return c(e);
                  }(e.fieldValue), [o]),
                  newPosition: i
                };
              }, {
                fieldValue: [],
                newPosition: o
              });
            case "language":
              return { fieldValue: A(n, o, d) };
            default:
              throw new Error("ConsentString - Unknown field type " + i + " for decoding");
          }
        }
        function L(e) {
          var n = e.input,
              t = e.fields,
              o = e.startPosition,
              r = void 0 === o ? 0 : o;
          return {
            decodedObject: t.reduce(function (e, t) {
              var o = t.name,
                  i = t.numBits,
                  a = O({
                input: n,
                output: e,
                startPosition: r,
                field: t
              }),
                  s = a.fieldValue,
                  c = a.newPosition;
              return void 0 !== s && (e[o] = s), void 0 !== c ? r = c : "number" == typeof i && (r += i), e;
            }, {}),
            newPosition: r
          };
        }
        function T(e, n) {
          var t = e.version;
          if ("number" != typeof t) throw new Error("ConsentString - No version field to encode");
          if (n[t]) return S({
            input: e,
            fields: n[t].fields
          });
          throw new Error("ConsentString - No definition for version " + t);
        }
        e.exports = {
          padRight: v,
          padLeft: h,
          encodeField: E,
          encodeDataToBits: T,
          encodeIntToBits: m,
          encodeBoolToBits: y,
          encodeDateToBits: g,
          encodeLanguageToBits: w,
          encodeLetterToBits: b,
          encodeToBase64: function (e) {
            var n = T(e, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : p);
            if (n) {
              for (var t = v(n, 7 - (n.length + 7) % 8), o = "", r = 0; r < t.length; r += 8) o += String.fromCharCode(parseInt(t.substr(r, 8), 2));
              return u.encode(o).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "");
            }
            return null;
          },
          decodeBitsToIds: function (e) {
            return e.split("").reduce(function (e, n, t) {
              return "1" === n && -1 === e.indexOf(t + 1) && e.push(t + 1), e;
            }, []);
          },
          decodeBitsToInt: k,
          decodeBitsToDate: _,
          decodeBitsToBool: C,
          decodeBitsToLanguage: A,
          decodeBitsToLetter: x,
          decodeFromBase64: function (e, n) {
            for (var t = e; t.length % 4 != 0;) t += "=";
            t = t.replace(/-/g, "+").replace(/_/g, "/");
            for (var o = u.decode(t), r = "", i = 0; i < o.length; i += 1) {
              var a = o.charCodeAt(i).toString(2);
              r += h(a, 8 - a.length);
            }
            return function (e) {
              var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : p,
                  t = k(e, 0, d);
              if ("number" != typeof t) throw new Error("ConsentString - Unknown version number in the string to decode");
              if (!p[t]) throw new Error("ConsentString - Unsupported version " + t + " in the string to decode");
              return L({
                input: e,
                fields: n[t].fields
              }).decodedObject;
            }(r, n);
          }
        };
      }, function (e, n, t) {
        "use strict";

        var o,
            r,
            i,
            a,
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        },
            c = Object.assign || function (e) {
          for (var n = 1; n < arguments.length; n++) {
            var t = arguments[n];
            for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
          }
          return e;
        },
            u = Array.from || (o = function (e) {
          return "function" == typeof e;
        }, r = Math.pow(2, 53) - 1, i = function (e) {
          var n = function (e) {
            var n = Number(e);
            return isNaN(n) ? 0 : 0 !== n && isFinite(n) ? (n > 0 ? 1 : -1) * Math.floor(Math.abs(n)) : n;
          }(e);
          return Math.min(Math.max(n, 0), r);
        }, a = function (e) {
          var n = e.next();
          return !Boolean(n.done) && n;
        }, function (e) {
          var n,
              t,
              r,
              c = this,
              u = arguments.length > 1 ? arguments[1] : void 0;
          if (void 0 !== u) {
            if (!o(u)) throw new TypeError("Array.from: when provided, the second argument must be a function");
            arguments.length > 2 && (n = arguments[2]);
          }
          var l = function (e, n) {
            if (null != e && null != n) {
              var t = e[n];
              if (null == t) return;
              if (!o(t)) throw new TypeError(t + " is not a function");
              return t;
            }
          }(e, function (e) {
            if (null != e) {
              if (["string", "number", "boolean", "symbol"].indexOf(void 0 === e ? "undefined" : s(e)) > -1) return Symbol.iterator;
              if ("undefined" != typeof Symbol && "iterator" in Symbol && Symbol.iterator in e) return Symbol.iterator;
              if ("@@iterator" in e) return "@@iterator";
            }
          }(e));
          if (void 0 !== l) {
            t = o(c) ? Object(new c()) : [];
            var d,
                p,
                f = l.call(e);
            if (null == f) throw new TypeError("Array.from requires an array-like or iterable object");
            for (r = 0;;) {
              if (!(d = a(f))) return t.length = r, t;
              p = d.value, t[r] = u ? u.call(n, p, r) : p, r++;
            }
          } else {
            var h = Object(e);
            if (null == e) throw new TypeError("Array.from requires an array-like object - not null or undefined");
            var v,
                m = i(h.length);
            for (t = o(c) ? Object(new c(m)) : new Array(m), r = 0; r < m;) v = h[r], t[r] = u ? u.call(n, v, r) : v, r++;
            t.length = m;
          }
          return t;
        });
        function l(e) {
          if (Array.isArray(e)) {
            for (var n = 0, t = Array(e.length); n < e.length; n++) t[n] = e[n];
            return t;
          }
          return u(e);
        }
        var d = t(4),
            p = d.encodeToBase64,
            f = d.padRight;
        function h(e) {
          for (var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : new Set(), t = Math.max.apply(Math, [0].concat(l(e.map(function (e) {
            return e.id;
          })), l(u(n)))), o = "", r = 1; r <= t; r += 1) o += -1 !== n.indexOf(r) ? "1" : "0";
          return o;
        }
        function v(e, n) {
          var t = [],
              o = e.map(function (e) {
            return e.id;
          });
          return e.reduce(function (r, i, a) {
            var s = i.id;
            if (-1 !== n.indexOf(s) && t.push(s), (-1 === n.indexOf(s) || a === e.length - 1 || -1 === o.indexOf(s + 1)) && t.length) {
              var c = t.shift(),
                  u = t.pop();
              return t = [], [].concat(l(r), [{
                isRange: "number" == typeof u,
                startVendorId: c,
                endVendorId: u
              }]);
            }
            return r;
          }, []);
        }
        e.exports = {
          convertVendorsToRanges: v,
          encodeConsentString: function (e) {
            var n = e.maxVendorId,
                t = e.vendorList,
                o = void 0 === t ? {} : t,
                r = e.allowedPurposeIds,
                i = e.allowedVendorIds,
                a = o.vendors,
                s = void 0 === a ? [] : a,
                u = o.purposes,
                l = void 0 === u ? [] : u;
            n || (n = 0, s.forEach(function (e) {
              e.id > n && (n = e.id);
            }));
            var d = p(c({}, e, {
              maxVendorId: n,
              purposeIdBitString: h(l, r),
              isRange: !1,
              vendorIdBitString: function (e) {
                for (var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [], t = "", o = 1; o <= e; o += 1) t += -1 !== n.indexOf(o) ? "1" : "0";
                return f(t, Math.max(0, e - t.length));
              }(n, i)
            })),
                m = v(s, i),
                y = p(c({}, e, {
              maxVendorId: n,
              purposeIdBitString: h(l, r),
              isRange: !0,
              defaultConsent: !1,
              numEntries: m.length,
              vendorRangeList: m
            }));
            return d.length < y.length ? d : y;
          }
        };
      }, function (e, n) {
        var t;
        t = function () {
          return this;
        }();
        try {
          t = t || Function("return this")() || (0, eval)("this");
        } catch (e) {
          "object" == typeof window && (t = window);
        }
        e.exports = t;
      }, function (e, n, t) {
        (function (n, t) {
          var o;
          o = function () {
            "use strict";

            function e(e) {
              return "function" == typeof e;
            }
            var o = Array.isArray ? Array.isArray : function (e) {
              return "[object Array]" === Object.prototype.toString.call(e);
            },
                r = 0,
                i = void 0,
                a = void 0,
                s = function (e, n) {
              h[r] = e, h[r + 1] = n, 2 === (r += 2) && (a ? a(v) : w());
            };
            var c = "undefined" != typeof window ? window : void 0,
                u = c || {},
                l = u.MutationObserver || u.WebKitMutationObserver,
                d = "undefined" == typeof self && void 0 !== n && "[object process]" === {}.toString.call(n),
                p = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;
            function f() {
              var e = setTimeout;
              return function () {
                return e(v, 1);
              };
            }
            var h = new Array(1e3);
            function v() {
              for (var e = 0; e < r; e += 2) {
                (0, h[e])(h[e + 1]), h[e] = void 0, h[e + 1] = void 0;
              }
              r = 0;
            }
            var m,
                y,
                g,
                b,
                w = void 0;
            function k(e, n) {
              var t = this,
                  o = new this.constructor(x);
              void 0 === o[C] && U(o);
              var r = t._state;
              if (r) {
                var i = arguments[r - 1];
                s(function () {
                  return z(r, o, i, t._result);
                });
              } else j(t, o, e, n);
              return o;
            }
            function _(e) {
              if (e && "object" == typeof e && e.constructor === this) return e;
              var n = new this(x);
              return P(n, e), n;
            }
            d ? w = function () {
              return n.nextTick(v);
            } : l ? (y = 0, g = new l(v), b = document.createTextNode(""), g.observe(b, { characterData: !0 }), w = function () {
              b.data = y = ++y % 2;
            }) : p ? ((m = new MessageChannel()).port1.onmessage = v, w = function () {
              return m.port2.postMessage(0);
            }) : w = void 0 === c ? function () {
              try {
                var e = Function("return this")().require("vertx");
                return void 0 !== (i = e.runOnLoop || e.runOnContext) ? function () {
                  i(v);
                } : f();
              } catch (e) {
                return f();
              }
            }() : f();
            var C = Math.random().toString(36).substring(2);
            function x() {}
            var A = void 0,
                E = 1,
                S = 2,
                O = { error: null };
            function L(e) {
              try {
                return e.then;
              } catch (e) {
                return O.error = e, O;
              }
            }
            function T(n, t, o) {
              t.constructor === n.constructor && o === k && t.constructor.resolve === _ ? function (e, n) {
                n._state === E ? I(e, n._result) : n._state === S ? M(e, n._result) : j(n, void 0, function (n) {
                  return P(e, n);
                }, function (n) {
                  return M(e, n);
                });
              }(n, t) : o === O ? (M(n, O.error), O.error = null) : void 0 === o ? I(n, t) : e(o) ? function (e, n, t) {
                s(function (e) {
                  var o = !1,
                      r = function (e, n, t, o) {
                    try {
                      e.call(n, t, o);
                    } catch (e) {
                      return e;
                    }
                  }(t, n, function (t) {
                    o || (o = !0, n !== t ? P(e, t) : I(e, t));
                  }, function (n) {
                    o || (o = !0, M(e, n));
                  }, e._label);
                  !o && r && (o = !0, M(e, r));
                }, e);
              }(n, t, o) : I(n, t);
            }
            function P(e, n) {
              var t, o;
              e === n ? M(e, new TypeError("You cannot resolve a promise with itself")) : (o = typeof (t = n), null === t || "object" !== o && "function" !== o ? I(e, n) : T(e, n, L(n)));
            }
            function N(e) {
              e._onerror && e._onerror(e._result), R(e);
            }
            function I(e, n) {
              e._state === A && (e._result = n, e._state = E, 0 !== e._subscribers.length && s(R, e));
            }
            function M(e, n) {
              e._state === A && (e._state = S, e._result = n, s(N, e));
            }
            function j(e, n, t, o) {
              var r = e._subscribers,
                  i = r.length;
              e._onerror = null, r[i] = n, r[i + E] = t, r[i + S] = o, 0 === i && e._state && s(R, e);
            }
            function R(e) {
              var n = e._subscribers,
                  t = e._state;
              if (0 !== n.length) {
                for (var o = void 0, r = void 0, i = e._result, a = 0; a < n.length; a += 3) o = n[a], r = n[a + t], o ? z(t, o, r, i) : r(i);
                e._subscribers.length = 0;
              }
            }
            function z(n, t, o, r) {
              var i = e(o),
                  a = void 0,
                  s = void 0,
                  c = void 0,
                  u = void 0;
              if (i) {
                if ((a = function (e, n) {
                  try {
                    return e(n);
                  } catch (e) {
                    return O.error = e, O;
                  }
                }(o, r)) === O ? (u = !0, s = a.error, a.error = null) : c = !0, t === a) return void M(t, new TypeError("A promises callback cannot return that same promise."));
              } else a = r, c = !0;
              t._state !== A || (i && c ? P(t, a) : u ? M(t, s) : n === E ? I(t, a) : n === S && M(t, a));
            }
            var V = 0;
            function U(e) {
              e[C] = V++, e._state = void 0, e._result = void 0, e._subscribers = [];
            }
            var D = function () {
              function e(e, n) {
                this._instanceConstructor = e, this.promise = new e(x), this.promise[C] || U(this.promise), o(n) ? (this.length = n.length, this._remaining = n.length, this._result = new Array(this.length), 0 === this.length ? I(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(n), 0 === this._remaining && I(this.promise, this._result))) : M(this.promise, new Error("Array Methods must be provided an Array"));
              }
              return e.prototype._enumerate = function (e) {
                for (var n = 0; this._state === A && n < e.length; n++) this._eachEntry(e[n], n);
              }, e.prototype._eachEntry = function (e, n) {
                var t = this._instanceConstructor,
                    o = t.resolve;
                if (o === _) {
                  var r = L(e);
                  if (r === k && e._state !== A) this._settledAt(e._state, n, e._result);else if ("function" != typeof r) this._remaining--, this._result[n] = e;else if (t === B) {
                    var i = new t(x);
                    T(i, e, r), this._willSettleAt(i, n);
                  } else this._willSettleAt(new t(function (n) {
                    return n(e);
                  }), n);
                } else this._willSettleAt(o(e), n);
              }, e.prototype._settledAt = function (e, n, t) {
                var o = this.promise;
                o._state === A && (this._remaining--, e === S ? M(o, t) : this._result[n] = t), 0 === this._remaining && I(o, this._result);
              }, e.prototype._willSettleAt = function (e, n) {
                var t = this;
                j(e, void 0, function (e) {
                  return t._settledAt(E, n, e);
                }, function (e) {
                  return t._settledAt(S, n, e);
                });
              }, e;
            }();
            var B = function () {
              function e(n) {
                this[C] = V++, this._result = this._state = void 0, this._subscribers = [], x !== n && ("function" != typeof n && function () {
                  throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
                }(), this instanceof e ? function (e, n) {
                  try {
                    n(function (n) {
                      P(e, n);
                    }, function (n) {
                      M(e, n);
                    });
                  } catch (n) {
                    M(e, n);
                  }
                }(this, n) : function () {
                  throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                }());
              }
              return e.prototype.catch = function (e) {
                return this.then(null, e);
              }, e.prototype.finally = function (e) {
                var n = this.constructor;
                return this.then(function (t) {
                  return n.resolve(e()).then(function () {
                    return t;
                  });
                }, function (t) {
                  return n.resolve(e()).then(function () {
                    throw t;
                  });
                });
              }, e;
            }();
            return B.prototype.then = k, B.all = function (e) {
              return new D(this, e).promise;
            }, B.race = function (e) {
              var n = this;
              return o(e) ? new n(function (t, o) {
                for (var r = e.length, i = 0; i < r; i++) n.resolve(e[i]).then(t, o);
              }) : new n(function (e, n) {
                return n(new TypeError("You must pass an array to race."));
              });
            }, B.resolve = _, B.reject = function (e) {
              var n = new this(x);
              return M(n, e), n;
            }, B._setScheduler = function (e) {
              a = e;
            }, B._setAsap = function (e) {
              s = e;
            }, B._asap = s, B.polyfill = function () {
              var e = void 0;
              if (void 0 !== t) e = t;else if ("undefined" != typeof self) e = self;else try {
                e = Function("return this")();
              } catch (e) {
                throw new Error("polyfill failed because global object is unavailable in this environment");
              }
              var n = e.Promise;
              if (n) {
                var o = null;
                try {
                  o = Object.prototype.toString.call(n.resolve());
                } catch (e) {}
                if ("[object Promise]" === o && !n.cast) return;
              }
              e.Promise = B;
            }, B.Promise = B, B;
          }, e.exports = o();
        }).call(this, t(25), t(6));
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 });
        var o = n.langToContent = {
          de: {
            headline: "Diese Website verwendet Cookies",
            bodyParagraphs: ["FANDOM und unsere Partner verwenden auf unserer Website Technologien wie Cookies, um Inhalte und Werbung zu personalisieren, Social-Media-Funktionen bereitzustellen und unseren Datenverkehr zu analysieren.", "Wir möchten dich besonders auf Cookies aufmerksam machen, die zu Marketingzwecken verwendet werden oder um dir personalisierte Werbung anzuzeigen. Wir verwenden diese Cookies („Werbe-Cookies“) nur dort, wo du der Verwendung von Cookies zugestimmt hast, indem du „WERBE-COOKIES AKZEPTIEREN“ auswählst. Bitte beachte, dass du nach dem Ablehnen von Cookies Werbung siehst, die für dich weniger relevant ist und bestimmte Elemente der Website möglicherweise nicht wie vorgesehen funktionieren.", "Du kannst deine Meinung jederzeit ändern und deine Auswahl in unserer Datenschutzerklärung entsprechend anpassen. Weitere Informationen zu den von uns verwendeten Cookies findest du in unserer Datenschutzerklärung. Informationen über unsere Partner, die Werbe-Cookies auf unserer Website einsetzen, findest du in der nachfolgenden Partnerliste."],
            buttonAccept: "WERBE-COOKIES AKZEPTIEREN",
            buttonReject: "WERBE-COOKIES ABLEHNEN",
            privacyLinkText: "Datenschutzerklärung von FANDOM",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Partnerliste",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          en: {
            headline: "This site uses cookies",
            bodyParagraphs: ["FANDOM and our partners use technology such as cookies on our site to personalize content and ads, provide social media features, and analyze our traffic.", 'In particular, we want to draw your attention to cookies which are used to market to you, or provide personalized ads to you. Where we use these cookies (“advertising cookies”), we do so only where you have consented to our use of such cookies by ticking "ACCEPT ADVERTISING COOKIES" below. Note that if you select reject, you may see ads that are less relevant to you and certain features of the site may not work as intended.', "You can change your mind and revisit your consent choices at any time by visiting our privacy policy. For more information about the cookies we use, please see our Privacy Policy. For information about our partners using advertising cookies on our site, please see the Partner List below."],
            buttonAccept: "ACCEPT ADVERTISING COOKIES",
            buttonReject: "REJECT ADVERTISING COOKIES",
            privacyLinkText: "FANDOM Privacy Policy",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Partner List",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          es: {
            headline: "Este sitio utiliza cookies",
            bodyParagraphs: ["FANDOM y nuestros socios utilizan tecnología como cookies en nuestro sitio para personalizar el contenido y anuncios, proporcionar funcionalidades de redes sociales y analizar nuestro tráfico. ", 'En particular, queremos llamar tu atención sobre los cookies que se utilizan para comercializar o proporcionar anuncios personalizados. Cuando utilizamos estos cookies ("cookies de publicidad"), lo hacemos solamente donde tú hayas consentido el uso de tales cookies seleccionando ""ACEPTAR COOKIES DE PUBLICIDAD"". Toma en cuenta que si seleccionas rechazar, puede que veas los anuncios que son menos relevantes y que ciertas funcionalidades del sitio no funcionen según lo previsto.', "Puedes cambiar de opinión y revisar las opciones de consentimiento en cualquier momento visitando nuestra política de privacidad. Para obtener más información acerca de los cookies que utilizamos, por favor revisa nuestra política de privacidad. Para obtener más información sobre nuestros socios utilizando las cookies de publicidad en nuestro sitio, consulta la lista de socios abajo."],
            buttonAccept: "ACEPTAR LOS COOKIES DE PUBLICIDAD",
            buttonReject: "RECHAZAR LOS COOKIES DE PUBLICIDAD",
            privacyLinkText: "Política de privacidad FANDOM",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Lista de socios",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          fr: {
            headline: "Ce site utilise des cookies.",
            bodyParagraphs: ["FANDOM et ses partenaires se servent de technologies telles que les cookies sur le site pour personnaliser le contenu et les publicités, fournir des fonctionnalités de réseau social et analyser le trafic.", 'Nous souhaitons attirer plus particulièrement votre attention sur les cookies utilisés pour vous proposer des publicités personnalisées. Nous utilisons ces cookies (“cookies publicitaires”) uniquement si vous avez consenti à leur utilisation en cochant la case "ACCEPTER LES COOKIES PUBLICITAIRES" ci-dessous. Notez que si vous sélectionnez Refuser, il se peut que des publicités moins pertinentes s\'affichent pour vous et que certaines fonctionnalités du site ne fonctionnent pas comme prévu.', "Si vous changez d'avis, vous pouvez revenir sur votre choix à tout moment en consultant notre politique de confidentialité. Pour plus d'informations sur les cookies utilisés, voir notre Politique de confidentialité. Pour plus d'informations sur nos partenaires utilisant des cookies publicitaires sur le site, voir la Liste des partenaires ci-dessous."],
            buttonAccept: "ACCEPTER LES COOKIES PUBLICITAIRES",
            buttonReject: "REFUSER LES COOKIES PUBLICITAIRES",
            privacyLinkText: "Politique de confidentialité de FANDOM",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Liste des partenaires",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          it: {
            headline: "Questo sito utilizza i cookie",
            bodyParagraphs: ["FANDOM e i nostri partner usano tecnologie come i cookie sul nostro sito per personalizzare contenuti, annunci, fornire funzioni social e analizzare il nostro traffico.", 'Vorremmo concentrare la tua attenzione in particolar modo sui cookie che sono usati a scopi commerciali o per fornire annunci personalizzati per te. Quando usiamo questi cookie ("cookie commerciali"), lo facciamo solo se hai acconsentito al loro uso selezionando "ACCETTA COOKIE COMMERCIALI" qui sotto. Considera che nel caso di rifiuto potresti vedere annunci meno pertinenti per te e certe funzioni del sito potrebbero non funzionare come previsto.', "Puoi cambiare idea e rivisitare le tue scelte di consenso in qualsiasi momento visitando la nostra informativa sulla privacy. Per ulteriori informazioni sui cookie che usiamo, si prega di consultare la nostra informativa sulla privacy. Per informazioni sui nostri partner che usano cookie per la pubblicità sul nostro sito, consulta per favore la lista dei partner qui sotto."],
            buttonAccept: "ACCETTA COOKIE COMMERCIALI",
            buttonReject: "RIFIUTA COOKIE COMMERCIALI",
            privacyLinkText: "Informativa sulla privacy di FANDOM",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Lista dei partner",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          ja: {
            headline: "cookie情報の利用について",
            bodyParagraphs: ["FANDOMおよびパートナーは当サイトでcookieなどの技術を、コンテンツや広告のユーザーに合わせたカスタマイズ、ソーシャルメディア機能の提供やトラフィックの分析に使用しています。", "この機能はアクセス動向の把握による、ユーザーの目を引く、よりカスタマイズされた広告の表示を目的とするものです。 FANDOMとパートナーがこうしたcookie（広告用cookie）を使用するのは、ユーザーが下の「広告用cookieを許可する」をクリックして、同意した場合のみになります。 なお拒否を選択した場合に、関連性の低い広告が表示される可能性や当サイトの一部の機能が正常に動作しない場合がありますのでご注意ください。 ", "この設定はプライバシー・ポリシーのページにアクセスして、後からいつでも変更可能です。 FANDOMとパートナーが使用するcookieについて詳しくは、プライバシー・ポリシーをご覧ください。 また、このサイトで広告用Cookieを使用しているFANDOMのパートナーについて詳しくは、下記のパートナー・リストをご覧ください。"],
            buttonAccept: "広告用cookieを許可",
            buttonReject: "広告用cookieを拒否",
            privacyLinkText: "FANDOMプライバシー・ポリシー",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "パートナー・リスト",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          pl: {
            headline: "Ta witryna używa plików cookie",
            bodyParagraphs: ["FANDOM i nasi partnerzy korzystają z technologii takich jak pliki cookie na naszej stronie, aby personalizować treści i reklamy, dostarczać funkcje mediów społecznościowych oraz by analizować nasze statystyki odwiedzin.", "W szczególności chcemy zwrócić uwagę na pliki cookie, które są używane do kierowania do ciebie marketingu lub zapewnienia ci spersonalizowanych reklam. W przypadku, gdy używamy plików cookies („reklamowe cookies”), robimy to wyłączinie tam gdzie uzyskaliśmy twoją zgodę na używanie tych plików cookies poprzez zaznaczenie „AKCEPTUJĘ REKLAMOWE PLIKI COOKIES” poniżej. Zwróć uwagę, że jeśli wybierzesz opcję odrzuć, możesz zobaczyć reklamy, które są mniej odpowiednie dla ciebie, a niektóre funkcje witryny mogą nie działać zgodnie z przeznaczeniem.", "Możesz zmienić zdanie i ponownie przejrzeć zgody w dowolnym momencie, odwiedzając naszą politykę prywatności. Aby uzyskać więcej informacji na temat plików cookies, z których korzystamy, zapoznaj się z naszą polityką prywatności. Aby uzyskać informacje o naszych partnerach wykorzystujących reklamowe pliki cookies na naszej stronie zobacz listę partnerów poniżej."],
            buttonAccept: "AKCEPTUJĘ REKLAMOWE PLIKI COOKIES",
            buttonReject: "ODRZUCAM REKLAMOWE PLIKI COOKIES",
            privacyLinkText: "Polityka prywatności Fandomu",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Lista partnerów",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          pt: {
            headline: "Este site utiliza cookies",
            bodyParagraphs: ["O FANDOM e seus parceiros usam tecnologia tais como cookies no nosso site para personalizar o conteúdo e os anúncios, oferecer recursos de mídia social e analisar o tráfego.", 'Em particular, queremos chamar a atenção para os cookies que são utilizados para oferecer algo a você ou para oferecer anúncios personalizados. Nós usamos esses cookies ("cookies de publicidade"), apenas se você tenha consentido o uso ao clicar ""ACEITAR COOKIES DE PUBLICIDADE"" abaixo. Observe que se você selecionar rejeitar, você pode ver anúncios menos relevantes para você e certas características do site podem não funcionar conforme o esperado. ', "Você pode mudar de ideia e revisitar as suas escolhas de consentimento a qualquer momento, visitando a nossa política de privacidade. Para obter mais informações sobre os cookies que usamos, por favor consulte a nossa Política de privacidade. Para obter mais informações sobre nossos parceiros usando cookies de publicidade no nosso site, por favor, veja abaixo a lista de parceiros."],
            buttonAccept: "ACEITAR COOKIES DE PUBLICIDADE",
            buttonReject: "REJEITAR COOKIES DE PUBLICIDADE",
            privacyLinkText: "Política de privacidade do FANDOM",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Lista de parceiros",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          ru: {
            headline: "На этом сайте используются файлы cookie",
            bodyParagraphs: ["Мы и наши партнёры используем на этом сайте технологии, такие как файлы cookies, для персонализации контента и рекламы, предоставления функций социальных сетей и анализа трафика. ", "В частности, обращаем ваше внимание на файлы cookies, которые применяются для показа рекламы, в том числе, персонализированной рекламы. Мы используем файлы cookies («рекламные файлы cookies») только там, где вы дали своё согласие на использование файлов cookies, нажав на кнопку «ПРИНЯТЬ РЕКЛАМНЫЕ COOKIES» внизу. Помните, что если отказаться от использования файлов cookies, вам могут показывать менее релевантные рекламные объявления, а некоторые функции сайта могут работать не должным образом. ", "Вы можете изменить решение о предоставлении или непредоставлении своего согласия в любое время на странице политики конфиденциальности. Для получения более подробной информации о файлах cookies ознакомьтесь с нашей политикой конфиденциальности. Для получения информации о наших партнёрах, использующих рекламные файлы cookies, ознакомьтесь со списком партнёров ниже."],
            buttonAccept: "ПРИНЯТЬ РЕКЛАМНЫЕ COOKIE",
            buttonReject: "ОТКАЗАТЬСЯ ОТ РЕКЛАМНЫХ COOKIE",
            privacyLinkText: "Политика конфиденциальности ФЭНДОМА",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "Список партнеров",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          zh: {
            headline: "本网站使用Cookie",
            bodyParagraphs: ["FANDOM以及其合作伙伴在网站上将使用Cookie等技术来定制化内容和广告，提供社交媒体功能，以及分析网站流量。", "我们尤其希望您能够注意到Cookie将用于为您提供个性化的广告。 如果您同意我们使用这些Cookie（“广告Cookie”），可以点击下面的“接收广告Cookie”按钮。 请注意，如果您选择“拒绝”，您可能会看到与您喜好不太相关的广告，并且网站的某些功能可能无法正常工作。", "您可以随时通过访问我们的隐私政策改变您的想法并重新选择是否同意这项条款。 有关我们使用Cookie的详细信息，请参阅我们的隐私政策。 关于我们的合作伙伴使用我们网站上的广告Cookie信息，请参阅下面的合作伙伴列表。"],
            buttonAccept: "接受广告Cookie",
            buttonReject: "拒绝广告Cookie",
            privacyLinkText: "FANDOM隐私政策",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "合作伙伴列表",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          "zh-tw": {
            headline: "本網站使用Cookie",
            bodyParagraphs: ["FANDOM以及其合作廠商在網站上會使用Cookie等技術來使內容和廣告個人化、提供社交媒體功能，以及分析網站流量。", "我們尤其希望您能夠注意到Cookie將用於行銷，為您提供個人化的廣告。 如果您同意我們使用這些Cookie（「廣告Cookie」），可以按下面的「接收廣告Cookie」按鈕。 請注意，如果您選擇「拒絕」，您可能會看到與您的喜好不太相關的廣告，並且網站的某些功能可能無法正常運作。", "您可以隨時透過訪問我們的隱私權方針頁面，改變您的想法並重新選擇是否同意這個選項。  有關我們使用Cookie的詳細內容，請參閱我們的隱私權方針。 關於會使用我們網站上廣告Cookie的合作廠商資訊，請參見下面的合作廠商列表。"],
            buttonAccept: "接受廣告Cookie",
            buttonReject: "拒絕廣告Cookie",
            privacyLinkText: "FANDOM隱私政策",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "合作廠商列表",
            partnerLink: "http://fandom.wikia.com/partner-list"
          },
          "zh-hk": {
            headline: "本網站使用Cookie",
            bodyParagraphs: ["FANDOM以及其合作廠商在網站上會使用Cookie等技術來使內容和廣告個人化、提供社交媒體功能，以及分析網站流量。", "我們尤其希望您能夠注意到Cookie將用於行銷，為您提供個人化的廣告。 如果您同意我們使用這些Cookie（「廣告Cookie」），可以按下面的「接收廣告Cookie」按鈕。 請注意，如果您選擇「拒絕」，您可能會看到與您的喜好不太相關的廣告，並且網站的某些功能可能無法正常運作。", "您可以隨時透過訪問我們的隱私權方針頁面，改變您的想法並重新選擇是否同意這個選項。  有關我們使用Cookie的詳細內容，請參閱我們的隱私權方針。 關於會使用我們網站上廣告Cookie的合作廠商資訊，請參見下面的合作廠商列表。"],
            buttonAccept: "接受廣告Cookie",
            buttonReject: "拒絕廣告Cookie",
            privacyLinkText: "FANDOM隱私政策",
            privacyLink: "http://www.wikia.com/Privacy_Policy",
            partnerLinkText: "合作廠商列表",
            partnerLink: "http://fandom.wikia.com/partner-list"
          }
        };
        n.default = function e(n) {
          !function (e, n) {
            if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
          }(this, e), this.content = o[n] || o.en;
        };
      }, function (e, n) {
        e.exports = function (e) {
          return e.webpackPolyfill || (e.deprecate = function () {}, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", {
            enumerable: !0,
            get: function () {
              return e.l;
            }
          }), Object.defineProperty(e, "id", {
            enumerable: !0,
            get: function () {
              return e.i;
            }
          }), e.webpackPolyfill = 1), e;
        };
      }, function (e, n, t) {
        (function (e, o) {
          var r;
          !function (i) {
            var a = "object" == typeof n && n,
                s = ("object" == typeof e && e && e.exports, "object" == typeof o && o);
            s.global !== s && s.window;
            var c = function (e) {
              this.message = e;
            };
            (c.prototype = new Error()).name = "InvalidCharacterError";
            var u = function (e) {
              throw new c(e);
            },
                l = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
                d = /[\t\n\f\r ]/g,
                p = {
              encode: function (e) {
                e = String(e), /[^\0-\xFF]/.test(e) && u("The string to be encoded contains characters outside of the Latin1 range.");
                for (var n, t, o, r, i = e.length % 3, a = "", s = -1, c = e.length - i; ++s < c;) n = e.charCodeAt(s) << 16, t = e.charCodeAt(++s) << 8, o = e.charCodeAt(++s), a += l.charAt((r = n + t + o) >> 18 & 63) + l.charAt(r >> 12 & 63) + l.charAt(r >> 6 & 63) + l.charAt(63 & r);
                return 2 == i ? (n = e.charCodeAt(s) << 8, t = e.charCodeAt(++s), a += l.charAt((r = n + t) >> 10) + l.charAt(r >> 4 & 63) + l.charAt(r << 2 & 63) + "=") : 1 == i && (r = e.charCodeAt(s), a += l.charAt(r >> 2) + l.charAt(r << 4 & 63) + "=="), a;
              },
              decode: function (e) {
                var n = (e = String(e).replace(d, "")).length;
                n % 4 == 0 && (n = (e = e.replace(/==?$/, "")).length), (n % 4 == 1 || /[^+a-zA-Z0-9/]/.test(e)) && u("Invalid character: the string to be decoded is not correctly encoded.");
                for (var t, o, r = 0, i = "", a = -1; ++a < n;) o = l.indexOf(e.charAt(a)), t = r % 4 ? 64 * t + o : o, r++ % 4 && (i += String.fromCharCode(255 & t >> (-2 * r & 6)));
                return i;
              },
              version: "0.1.0"
            };
            void 0 === (r = function () {
              return p;
            }.call(n, t, n, e)) || (e.exports = r);
          }();
        }).call(this, t(9)(e), t(6));
      }, function (e, n, t) {
        "use strict";

        var o,
            r,
            i,
            a,
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        },
            c = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }();
        Array.from || (o = function (e) {
          return "function" == typeof e;
        }, r = Math.pow(2, 53) - 1, i = function (e) {
          var n = function (e) {
            var n = Number(e);
            return isNaN(n) ? 0 : 0 !== n && isFinite(n) ? (n > 0 ? 1 : -1) * Math.floor(Math.abs(n)) : n;
          }(e);
          return Math.min(Math.max(n, 0), r);
        }, a = function (e) {
          var n = e.next();
          return !Boolean(n.done) && n;
        });
        var u = t(5).encodeConsentString,
            l = t(2).decodeConsentString,
            d = t(3).vendorVersionMap,
            p = /^[a-z]{2}$/,
            f = function () {
          function e() {
            var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null;
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.created = new Date(), this.lastUpdated = new Date(), this.version = 1, this.vendorList = null, this.vendorListVersion = null, this.cmpId = null, this.cmpVersion = null, this.consentScreen = null, this.consentLanguage = null, this.allowedPurposeIds = [], this.allowedVendorIds = [], n && Object.assign(this, l(n));
          }
          return c(e, [{
            key: "getConsentString",
            value: function () {
              var e = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
              if (!this.vendorList) throw new Error("ConsentString - A vendor list is required to encode a consent string");
              return !0 === e && (this.lastUpdated = new Date()), u({
                version: this.getVersion(),
                vendorList: this.vendorList,
                allowedPurposeIds: this.allowedPurposeIds,
                allowedVendorIds: this.allowedVendorIds,
                created: this.created,
                lastUpdated: this.lastUpdated,
                cmpId: this.cmpId,
                cmpVersion: this.cmpVersion,
                consentScreen: this.consentScreen,
                consentLanguage: this.consentLanguage,
                vendorListVersion: this.vendorListVersion
              });
            }
          }, {
            key: "getMetadataString",
            value: function () {
              return u({
                version: this.getVersion(),
                created: this.created,
                lastUpdated: this.lastUpdated,
                cmpId: this.cmpId,
                cmpVersion: this.cmpVersion,
                consentScreen: this.consentScreen,
                vendorListVersion: this.vendorListVersion
              });
            }
          }, {
            key: "getVersion",
            value: function () {
              return this.version;
            }
          }, {
            key: "getVendorListVersion",
            value: function () {
              return this.vendorListVersion;
            }
          }, {
            key: "setGlobalVendorList",
            value: function (e) {
              if ("object" !== (void 0 === e ? "undefined" : s(e))) throw new Error("ConsentString - You must provide an object when setting the global vendor list");
              if (!e.vendorListVersion || !Array.isArray(e.purposes) || !Array.isArray(e.vendors)) throw new Error("ConsentString - The provided vendor list does not respect the schema from the IAB EU’s GDPR Consent and Transparency Framework");
              this.vendorList = {
                vendorListVersion: e.vendorListVersion,
                lastUpdated: e.lastUpdated,
                purposes: e.purposes,
                features: e.features,
                vendors: e.vendors.slice(0).sort(function (e, n) {
                  return e.id < n.id ? -1 : 1;
                })
              }, this.vendorListVersion = e.vendorListVersion;
            }
          }, {
            key: "setCmpId",
            value: function (e) {
              this.cmpId = e;
            }
          }, {
            key: "getCmpId",
            value: function () {
              return this.cmpId;
            }
          }, {
            key: "setCmpVersion",
            value: function (e) {
              this.cmpVersion = e;
            }
          }, {
            key: "getCmpVersion",
            value: function () {
              return this.cmpVersion;
            }
          }, {
            key: "setConsentScreen",
            value: function (e) {
              this.consentScreen = e;
            }
          }, {
            key: "getConsentScreen",
            value: function () {
              return this.consentScreen;
            }
          }, {
            key: "setConsentLanguage",
            value: function (e) {
              if (!1 === p.test(e)) throw new Error("ConsentString - The consent language must be a two-letter ISO639-1 code (en, fr, de, etc.)");
              this.consentLanguage = e;
            }
          }, {
            key: "getConsentLanguage",
            value: function () {
              return this.consentLanguage;
            }
          }, {
            key: "setPurposesAllowed",
            value: function (e) {
              this.allowedPurposeIds = e;
            }
          }, {
            key: "getPurposesAllowed",
            value: function () {
              return this.allowedPurposeIds;
            }
          }, {
            key: "setPurposeAllowed",
            value: function (e, n) {
              var t = this.allowedPurposeIds.indexOf(e);
              !0 === n ? -1 === t && this.allowedPurposeIds.push(e) : !1 === n && -1 !== t && this.allowedPurposeIds.splice(t, 1);
            }
          }, {
            key: "isPurposeAllowed",
            value: function (e) {
              return -1 !== this.allowedPurposeIds.indexOf(e);
            }
          }, {
            key: "setVendorsAllowed",
            value: function (e) {
              this.allowedVendorIds = e;
            }
          }, {
            key: "getVendorsAllowed",
            value: function () {
              return this.allowedVendorIds;
            }
          }, {
            key: "setVendorAllowed",
            value: function (e, n) {
              var t = this.allowedVendorIds.indexOf(e);
              !0 === n ? -1 === t && this.allowedVendorIds.push(e) : !1 === n && -1 !== t && this.allowedVendorIds.splice(t, 1);
            }
          }, {
            key: "isVendorAllowed",
            value: function (e) {
              return -1 !== this.allowedVendorIds.indexOf(e);
            }
          }], [{
            key: "decodeMetadataString",
            value: function (e) {
              var n = l(e),
                  t = {};
              return d[n.version].metadataFields.forEach(function (e) {
                t[e] = n[e];
              }), t;
            }
          }]), e;
        }();
        e.exports = { ConsentString: f };
      }, function (e, n, t) {
        "use strict";

        var o,
            r,
            i,
            a,
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) {
          return typeof e;
        } : function (e) {
          return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
        },
            c = (Array.from || (o = function (e) {
          return "function" == typeof e;
        }, r = Math.pow(2, 53) - 1, i = function (e) {
          var n = function (e) {
            var n = Number(e);
            return isNaN(n) ? 0 : 0 !== n && isFinite(n) ? (n > 0 ? 1 : -1) * Math.floor(Math.abs(n)) : n;
          }(e);
          return Math.min(Math.max(n, 0), r);
        }, a = function (e) {
          var n = e.next();
          return !Boolean(n.done) && n;
        }), t(11).ConsentString),
            u = t(2).decodeConsentString,
            l = t(5).encodeConsentString;
        e.exports = {
          ConsentString: c,
          decodeConsentString: u,
          encodeConsentString: l
        };
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 });
        var o,
            r = Object.assign || function (e) {
          for (var n = 1; n < arguments.length; n++) {
            var t = arguments[n];
            for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
          }
          return e;
        },
            i = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }(),
            a = t(12),
            s = t(7),
            c = t(0),
            u = (o = c) && o.__esModule ? o : { default: o },
            l = t(1);
        var d = 141,
            p = 1,
            f = "en",
            h = function () {
          return {
            allowedPublisherPurposes: null,
            allowedVendorPurposes: null,
            allowedVendors: null,
            cookieAttributes: {
              domain: (0, l.getCookieDomain)(window.location.hostname),
              expires: 365
            },
            gdprApplies: !1,
            gdprAppliesGlobally: !1,
            hasGlobalScope: !1,
            language: f,
            vendorList: null
          };
        };
        function v(e, n) {
          var t = n - e + 1;
          return Array.from({ length: t }).map(function (n, t) {
            return t + e;
          });
        }
        function m(e) {
          var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function () {
            return !1;
          },
              t = {};
          return Array.isArray(e) && e.forEach(function (e) {
            t[Number(e)] = !!n(e);
          }), t;
        }
        var y = function () {
          function e(n) {
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.options = r(h(), n), this.vendorList = null, this.vendorConsent = null, this.cmpCommands = [this.getConsentData, this.getVendorConsents, this.getVendorList, this.ping], void 0 === window.__cmp && this.installStub(!!this.options.gdprAppliesGlobally);
          }
          return i(e, null, [{
            key: "installStub",
            value: function () {
              var n = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                  t = [];
              window.__cmp = function (e, o) {
                var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : console.log;
                "ping" === e ? r({
                  gdprAppliesGlobally: !!n,
                  cmpLoaded: !1
                }, !0) : "getQueue" === e ? r(t, !0) : t.push([e, o, r]);
              }, e.addLocatorFrame();
            }
          }, {
            key: "addLocatorFrame",
            value: function () {
              if (!window.frames.__cmpLocator) if ("loading" !== document.readyState) {
                var n = document.createElement("iframe");
                n.name = "__cmpLocator", n.style.display = "none", document.body.appendChild(n), window.addEventListener("message", function (e) {
                  var n = null;
                  try {
                    var t = "string" == typeof e.data ? JSON.parse(e.data) : e.data;
                    n = t.__cmpCall;
                  } catch (e) {}
                  n && window.__cmp(n.command, n.parameter, function (t, o) {
                    var r = { __cmpReturn: {
                        returnValue: t,
                        success: o,
                        callId: n.callId
                      } };
                    e.source.postMessage(r, "*");
                  });
                }, !1);
              } else document.addEventListener("DOMContentLoaded", function () {
                return e.addLocatorFrame();
              });
            }
          }]), i(e, [{
            key: "configure",
            value: function (e) {
              r(this.options, e);
            }
          }, {
            key: "fetchVendorList",
            value: function (e) {
              return (0, l.getJSON)("https://vendorlist.consensu.org/" + (e ? "v-" + e + "/" : "") + "vendorlist.json");
            }
          }, {
            key: "fetchPurposesList",
            value: function (e, n) {
              return (0, l.getJSON)("https://vendorlist.consensu.org/" + (n ? "v-" + n + "/" : "") + "purposes-" + e + ".json");
            }
          }, {
            key: "getCommonCmpProperties",
            value: function () {
              var e = this.options,
                  n = e.gdprApplies,
                  t = e.gdprAppliesGlobally,
                  o = e.hasGlobalScope;
              return {
                gdprApplies: !!n || !!t,
                gdprAppliesGlobally: !!t,
                hasGlobalScope: !!o
              };
            }
          }, {
            key: "getVendorConsentCookie",
            value: function () {
              return u.default.get("euconsent") || "";
            }
          }, {
            key: "setVendorConsentCookie",
            value: function (e) {
              var n = this.options.cookieAttributes;
              e ? u.default.set("euconsent", e, n) : u.default.remove("euconsent", n);
            }
          }, {
            key: "getPublisherConsentCookie",
            value: function () {
              return u.default.get("eupubconsent") || "";
            }
          }, {
            key: "setPublisherConsentCookie",
            value: function (e) {
              var n = this.options.cookieAttributes;
              e ? u.default.set("eupubconsent", e, n) : u.default.remove("eupubconsent", n);
            }
          }, {
            key: "hasUserConsent",
            value: function () {
              return !!this.getVendorConsentCookie();
            }
          }, {
            key: "createConsents",
            value: function () {
              if (this.getCommonCmpProperties().gdprApplies) {
                var e = this.options,
                    n = e.allowedVendorPurposes,
                    t = e.allowedVendors,
                    o = e.language,
                    r = e.consentScreen;
                this.vendorConsent = function (e, n) {
                  var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                  if (e && !n) return new a.ConsentString(e);
                  var o = t.allowedPurposes,
                      r = t.allowedVendors,
                      i = t.consentScreen,
                      s = t.language,
                      c = new a.ConsentString();
                  return c.setCmpId(d), c.setCmpVersion(p), c.setConsentScreen(Number(i) || 0), c.setConsentLanguage(String(s).toLowerCase() || f), c.setGlobalVendorList(n), c.setPurposesAllowed(Array.isArray(o) ? o : []), c.setVendorsAllowed(Array.isArray(r) ? r : []), c;
                }(this.getVendorConsentCookie(), this.vendorList, {
                  allowedPurposes: n,
                  allowedVendors: t,
                  language: o,
                  consentScreen: r
                }), this.setVendorConsentCookie(this.getVendorConsentCookie() || this.vendorConsent.getConsentString());
              }
            }
          }, {
            key: "isCmpCommand",
            value: function (e) {
              return -1 !== this.cmpCommands.indexOf(this[e]);
            }
          }, {
            key: "cmp",
            value: function (e, n) {
              var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : console.log;
              if (!this.isCmpCommand(e)) throw t(null, !1), new Error("command does not exist");
              this[e](n).then(function (e) {
                return t(e, !0);
              }).catch(function (e) {
                t(null, !1), console.error(e instanceof Error ? e : new Error(e));
              });
            }
          }, {
            key: "mount",
            value: function () {
              var e = this.cmp.bind(this);
              try {
                window.__cmp("getQueue", null, function (n) {
                  window.__cmp = e, n.forEach(function (n) {
                    return e.apply(void 0, function (e) {
                      if (Array.isArray(e)) {
                        for (var n = 0, t = Array(e.length); n < e.length; n++) t[n] = e[n];
                        return t;
                      }
                      return Array.from(e);
                    }(n));
                  });
                });
              } catch (n) {
                window.__cmp = e, console.error(new Error("incompatible stub, cannot run queue"));
              }
            }
          }, {
            key: "install",
            value: function () {
              var e = this,
                  n = this.options.vendorList,
                  t = this.getCommonCmpProperties().gdprApplies,
                  o = isNaN(Number(n)) ? null : Number(n);
              return this.hasUserConsent() || n && !o || !t ? (this.vendorList = n, this.createConsents(), this.mount(), s.Promise.resolve()) : this.fetchVendorList(o).then(function (n) {
                e.vendorList = n, e.createConsents(), e.mount();
              });
            }
          }, {
            key: "installStub",
            value: function () {
              return e.installStub.apply(e, arguments);
            }
          }, {
            key: "uninstall",
            value: function () {
              this.options = h(), this.setVendorConsentCookie(null), delete window.__cmp;
            }
          }, {
            key: "ping",
            value: function () {
              var e = this.getCommonCmpProperties().gdprAppliesGlobally;
              return new s.Promise(function (n) {
                return n({
                  gdprAppliesGlobally: e,
                  cmpLoaded: !0
                });
              });
            }
          }, {
            key: "getConsentData",
            value: function (e) {
              var n = this,
                  t = this.getCommonCmpProperties(),
                  o = t.gdprApplies,
                  r = t.hasGlobalScope,
                  i = !o || !e || Number(e) === this.vendorConsent.getVersion();
              return new s.Promise(function (e, t) {
                i ? e({
                  consentData: o ? n.getVendorConsentCookie() : null,
                  gdprApplies: o,
                  hasGlobalScope: r
                }) : t(new Error("consent string version mismatch"));
              });
            }
          }, {
            key: "getVendorConsents",
            value: function (e) {
              var n = this,
                  t = this.getCommonCmpProperties(),
                  o = t.gdprApplies,
                  i = t.hasGlobalScope,
                  a = [],
                  c = {
                metadata: null,
                purposeConsents: {},
                vendorConsents: {}
              };
              if (this.vendorConsent) {
                var u = this.vendorConsent.maxVendorId,
                    l = this.vendorList;
                a = Array.isArray(e) ? e : u ? v(1, u) : l.vendors.map(function (e) {
                  return e.id;
                }), c = {
                  metadata: this.vendorConsent.getMetadataString(),
                  purposeConsents: m(v(1, 24), function (e) {
                    return n.vendorConsent.isPurposeAllowed(e);
                  }),
                  vendorConsents: m(a, function (e) {
                    return n.vendorConsent.isVendorAllowed(e);
                  })
                };
              }
              return new s.Promise(function (e) {
                return e(r({
                  gdprApplies: o,
                  hasGlobalScope: i
                }, c));
              });
            }
          }, {
            key: "getVendorList",
            value: function (e) {
              return this.fetchVendorList(Number(e));
            }
          }]), e;
        }();
        n.default = y;
      }, function (e, n) {
        e.exports = function (e) {
          var n = "undefined" != typeof window && window.location;
          if (!n) throw new Error("fixUrls requires window.location");
          if (!e || "string" != typeof e) return e;
          var t = n.protocol + "//" + n.host,
              o = t + n.pathname.replace(/\/[^\/]*$/, "/");
          return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function (e, n) {
            var r,
                i = n.trim().replace(/^"(.*)"$/, function (e, n) {
              return n;
            }).replace(/^'(.*)'$/, function (e, n) {
              return n;
            });
            return (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i) ? e : (r = 0 === i.indexOf("//") ? i : 0 === i.indexOf("/") ? t + i : o + i.replace(/^\.\//, ""), "url(" + JSON.stringify(r) + ")")
            );
          });
        };
      }, function (e, n, t) {
        var o,
            r,
            i = {},
            a = (o = function () {
          return window && document && document.all && !window.atob;
        }, function () {
          return void 0 === r && (r = o.apply(this, arguments)), r;
        }),
            s = function (e) {
          var n = {};
          return function (e) {
            if ("function" == typeof e) return e();
            if (void 0 === n[e]) {
              var t = function (e) {
                return document.querySelector(e);
              }.call(this, e);
              if (window.HTMLIFrameElement && t instanceof window.HTMLIFrameElement) try {
                t = t.contentDocument.head;
              } catch (e) {
                t = null;
              }
              n[e] = t;
            }
            return n[e];
          };
        }(),
            c = null,
            u = 0,
            l = [],
            d = t(14);
        function p(e, n) {
          for (var t = 0; t < e.length; t++) {
            var o = e[t],
                r = i[o.id];
            if (r) {
              r.refs++;
              for (var a = 0; a < r.parts.length; a++) r.parts[a](o.parts[a]);
              for (; a < o.parts.length; a++) r.parts.push(g(o.parts[a], n));
            } else {
              var s = [];
              for (a = 0; a < o.parts.length; a++) s.push(g(o.parts[a], n));
              i[o.id] = {
                id: o.id,
                refs: 1,
                parts: s
              };
            }
          }
        }
        function f(e, n) {
          for (var t = [], o = {}, r = 0; r < e.length; r++) {
            var i = e[r],
                a = n.base ? i[0] + n.base : i[0],
                s = {
              css: i[1],
              media: i[2],
              sourceMap: i[3]
            };
            o[a] ? o[a].parts.push(s) : t.push(o[a] = {
              id: a,
              parts: [s]
            });
          }
          return t;
        }
        function h(e, n) {
          var t = s(e.insertInto);
          if (!t) throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
          var o = l[l.length - 1];
          if ("top" === e.insertAt) o ? o.nextSibling ? t.insertBefore(n, o.nextSibling) : t.appendChild(n) : t.insertBefore(n, t.firstChild), l.push(n);else if ("bottom" === e.insertAt) t.appendChild(n);else {
            if ("object" != typeof e.insertAt || !e.insertAt.before) throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
            var r = s(e.insertInto + " " + e.insertAt.before);
            t.insertBefore(n, r);
          }
        }
        function v(e) {
          if (null === e.parentNode) return !1;
          e.parentNode.removeChild(e);
          var n = l.indexOf(e);
          n >= 0 && l.splice(n, 1);
        }
        function m(e) {
          var n = document.createElement("style");
          return void 0 === e.attrs.type && (e.attrs.type = "text/css"), y(n, e.attrs), h(e, n), n;
        }
        function y(e, n) {
          Object.keys(n).forEach(function (t) {
            e.setAttribute(t, n[t]);
          });
        }
        function g(e, n) {
          var t, o, r, i;
          if (n.transform && e.css) {
            if (!(i = n.transform(e.css))) return function () {};
            e.css = i;
          }
          if (n.singleton) {
            var a = u++;
            t = c || (c = m(n)), o = k.bind(null, t, a, !1), r = k.bind(null, t, a, !0);
          } else e.sourceMap && "function" == typeof URL && "function" == typeof URL.createObjectURL && "function" == typeof URL.revokeObjectURL && "function" == typeof Blob && "function" == typeof btoa ? (t = function (e) {
            var n = document.createElement("link");
            return void 0 === e.attrs.type && (e.attrs.type = "text/css"), e.attrs.rel = "stylesheet", y(n, e.attrs), h(e, n), n;
          }(n), o = function (e, n, t) {
            var o = t.css,
                r = t.sourceMap,
                i = void 0 === n.convertToAbsoluteUrls && r;
            (n.convertToAbsoluteUrls || i) && (o = d(o));
            r && (o += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(r)))) + " */");
            var a = new Blob([o], { type: "text/css" }),
                s = e.href;
            e.href = URL.createObjectURL(a), s && URL.revokeObjectURL(s);
          }.bind(null, t, n), r = function () {
            v(t), t.href && URL.revokeObjectURL(t.href);
          }) : (t = m(n), o = function (e, n) {
            var t = n.css,
                o = n.media;
            o && e.setAttribute("media", o);
            if (e.styleSheet) e.styleSheet.cssText = t;else {
              for (; e.firstChild;) e.removeChild(e.firstChild);
              e.appendChild(document.createTextNode(t));
            }
          }.bind(null, t), r = function () {
            v(t);
          });
          return o(e), function (n) {
            if (n) {
              if (n.css === e.css && n.media === e.media && n.sourceMap === e.sourceMap) return;
              o(e = n);
            } else r();
          };
        }
        e.exports = function (e, n) {
          if ("undefined" != typeof DEBUG && DEBUG && "object" != typeof document) throw new Error("The style-loader cannot be used in a non-browser environment");
          (n = n || {}).attrs = "object" == typeof n.attrs ? n.attrs : {}, n.singleton || "boolean" == typeof n.singleton || (n.singleton = a()), n.insertInto || (n.insertInto = "head"), n.insertAt || (n.insertAt = "bottom");
          var t = f(e, n);
          return p(t, n), function (e) {
            for (var o = [], r = 0; r < t.length; r++) {
              var a = t[r];
              (s = i[a.id]).refs--, o.push(s);
            }
            e && p(f(e, n), n);
            for (r = 0; r < o.length; r++) {
              var s;
              if (0 === (s = o[r]).refs) {
                for (var c = 0; c < s.parts.length; c++) s.parts[c]();
                delete i[s.id];
              }
            }
          };
        };
        var b,
            w = (b = [], function (e, n) {
          return b[e] = n, b.filter(Boolean).join("\n");
        });
        function k(e, n, t, o) {
          var r = t ? "" : o.css;
          if (e.styleSheet) e.styleSheet.cssText = w(n, r);else {
            var i = document.createTextNode(r),
                a = e.childNodes;
            a[n] && e.removeChild(a[n]), a.length ? e.insertBefore(i, a[n]) : e.appendChild(i);
          }
        }
      }, function (e, n) {
        e.exports = function (e) {
          var n = [];
          return n.toString = function () {
            return this.map(function (n) {
              var t = function (e, n) {
                var t = e[1] || "",
                    o = e[3];
                if (!o) return t;
                if (n && "function" == typeof btoa) {
                  var r = (a = o, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(a)))) + " */"),
                      i = o.sources.map(function (e) {
                    return "/*# sourceURL=" + o.sourceRoot + e + " */";
                  });
                  return [t].concat(i).concat([r]).join("\n");
                }
                var a;
                return [t].join("\n");
              }(n, e);
              return n[2] ? "@media " + n[2] + "{" + t + "}" : t;
            }).join("");
          }, n.i = function (e, t) {
            "string" == typeof e && (e = [[null, e, ""]]);
            for (var o = {}, r = 0; r < this.length; r++) {
              var i = this[r][0];
              "number" == typeof i && (o[i] = !0);
            }
            for (r = 0; r < e.length; r++) {
              var a = e[r];
              "number" == typeof a[0] && o[a[0]] || (t && !a[2] ? a[2] = t : t && (a[2] = "(" + a[2] + ") and (" + t + ")"), n.push(a));
            }
          }, n;
        };
      }, function (e, n, t) {
        (n = e.exports = t(16)(!1)).push([e.i, '._2LLC6zrbk-vsnF0seit6vi {\n  overflow: hidden; }\n\n._1ouSF3xnwUjIOquxopuxSZ {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.5);\n  bottom: 0;\n  color: #002a32;\n  display: flex;\n  justify-content: center;\n  left: 0;\n  position: fixed;\n  right: 0;\n  top: 0; }\n\n._3xSNkKTZcwaNfyU27Wwdzx {\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n  font-family: Rubik, "Helvetica Neue", Helvetica, Arial, sans-serif !important;\n  padding: 10px 10px;\n  border-bottom: 10px solid #fff;\n  border-top: 10px solid #fff; }\n  @media only screen and (max-width: 767px) {\n    ._3xSNkKTZcwaNfyU27Wwdzx {\n      height: 90%;\n      margin-left: 10px;\n      margin-right: 10px;\n      max-height: 85vh;\n      width: 90%; } }\n  @media only screen and (min-width: 768px) {\n    ._3xSNkKTZcwaNfyU27Wwdzx {\n      height: 600px;\n      width: 650px;\n      max-height: 90vh;\n      overflow-y: auto; } }\n\n.WKuKJbj1CpqmshUWTV0FZ {\n  position: absolute; }\n\n._3ltdN3RKAiQgxDhpOxfyN8 {\n  height: 50px;\n  width: 150px;\n  margin: auto; }\n  @media only screen and (min-width: 768px) {\n    ._3ltdN3RKAiQgxDhpOxfyN8 {\n      margin-top: 40px;\n      width: 250px; } }\n\n._1k4zBafTzwUXN7SlETBp30 {\n  color: #002a32;\n  font-weight: bold;\n  margin-bottom: 5px;\n  text-transform: uppercase; }\n\n._2GvemR8M7YmVwhl88cUOG4 {\n  line-height: 1.43 !important;\n  margin-bottom: 20px;\n  text-align: center;\n  overflow-y: auto; }\n  @media only screen and (max-width: 767px) {\n    ._2GvemR8M7YmVwhl88cUOG4 {\n      height: 200px;\n      margin-left: auto;\n      margin-right: auto;\n      padding-left: 10px;\n      padding-right: 10px; } }\n  @media only screen and (min-width: 768px) {\n    ._2GvemR8M7YmVwhl88cUOG4 {\n      line-height: 1.57;\n      margin: 30px auto;\n      max-width: 650px;\n      padding-left: 45px;\n      padding-right: 45px; } }\n  ._2GvemR8M7YmVwhl88cUOG4 p {\n    font-size: 14px; }\n\n.C-09cRzrSguyeBx3D8aqC {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin: auto; }\n  @media only screen and (min-width: 768px) {\n    .C-09cRzrSguyeBx3D8aqC {\n      align-items: center;\n      flex-direction: row;\n      justify-content: center; } }\n\n._36mdTyonPU0bxbU70dDO4f {\n  background-color: #00acac;\n  border-radius: 3px;\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 1;\n  padding: 12px 18px;\n  text-align: center; }\n  ._36mdTyonPU0bxbU70dDO4f:hover {\n    cursor: pointer; }\n  @media only screen and (max-width: 767px) {\n    ._36mdTyonPU0bxbU70dDO4f {\n      margin-bottom: 15px; } }\n  @media only screen and (min-width: 768px) {\n    ._36mdTyonPU0bxbU70dDO4f {\n      margin-right: 20px; } }\n\n._3mGMvAUi8MtSBaB1BUvLtz {\n  border-radius: 3px;\n  border: none;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 1;\n  padding: 12px 18px;\n  text-align: center; }\n  ._3mGMvAUi8MtSBaB1BUvLtz:hover {\n    cursor: pointer; }\n\n._1DBupYLUvGJgNJxtvk7jEm {\n  display: flex;\n  justify-content: center;\n  margin-top: 10px; }\n  @media only screen and (min-width: 768px) {\n    ._1DBupYLUvGJgNJxtvk7jEm {\n      margin-top: 57px; } }\n  ._1DBupYLUvGJgNJxtvk7jEm a {\n    color: #002a32;\n    display: block;\n    font-size: 10px;\n    padding-right: 10px; }\n\n._1UK3yBGCce_C8j5tGYtguE p {\n  margin-top: 14px;\n  margin-bottom: 14px;\n  line-height: 1.57; }\n\n._1UK3yBGCce_C8j5tGYtguE p:last-of-type {\n  margin-bottom: 0; }\n', ""]), n.locals = {
          withTrackingOptInDialogShown: "_2LLC6zrbk-vsnF0seit6vi",
          overlay: "_1ouSF3xnwUjIOquxopuxSZ",
          container: "_3xSNkKTZcwaNfyU27Wwdzx",
          background: "WKuKJbj1CpqmshUWTV0FZ",
          logo: "_3ltdN3RKAiQgxDhpOxfyN8",
          usesCookiesText: "_1k4zBafTzwUXN7SlETBp30",
          content: "_2GvemR8M7YmVwhl88cUOG4",
          buttons: "C-09cRzrSguyeBx3D8aqC",
          buttonPrimary: "_36mdTyonPU0bxbU70dDO4f",
          buttonSecondary: "_3mGMvAUi8MtSBaB1BUvLtz",
          links: "_1DBupYLUvGJgNJxtvk7jEm",
          bodyParagraphsContainer: "_1UK3yBGCce_C8j5tGYtguE"
        };
      }, function (e, n, t) {
        var o = t(17);
        "string" == typeof o && (o = [[e.i, o, ""]]);
        var r = {
          sourceMap: !1,
          hmr: !1,
          transform: void 0,
          insertInto: void 0
        };
        t(15)(o, r);
        o.locals && (e.exports = o.locals);
      }, function (e, n, t) {
        "use strict";

        t.r(n), t.d(n, "h", function () {
          return a;
        }), t.d(n, "createElement", function () {
          return a;
        }), t.d(n, "cloneElement", function () {
          return u;
        }), t.d(n, "Component", function () {
          return M;
        }), t.d(n, "render", function () {
          return j;
        }), t.d(n, "rerender", function () {
          return f;
        }), t.d(n, "options", function () {
          return o;
        });
        var o = {},
            r = [],
            i = [];
        function a(e, n) {
          var t,
              a,
              s,
              c,
              u = i;
          for (c = arguments.length; c-- > 2;) r.push(arguments[c]);
          for (n && null != n.children && (r.length || r.push(n.children), delete n.children); r.length;) if ((a = r.pop()) && void 0 !== a.pop) for (c = a.length; c--;) r.push(a[c]);else "boolean" == typeof a && (a = null), (s = "function" != typeof e) && (null == a ? a = "" : "number" == typeof a ? a = String(a) : "string" != typeof a && (s = !1)), s && t ? u[u.length - 1] += a : u === i ? u = [a] : u.push(a), t = s;
          var l = new function () {}();
          return l.nodeName = e, l.children = u, l.attributes = null == n ? void 0 : n, l.key = null == n ? void 0 : n.key, void 0 !== o.vnode && o.vnode(l), l;
        }
        function s(e, n) {
          for (var t in n) e[t] = n[t];
          return e;
        }
        var c = "function" == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout;
        function u(e, n) {
          return a(e.nodeName, s(s({}, e.attributes), n), arguments.length > 2 ? [].slice.call(arguments, 2) : e.children);
        }
        var l = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,
            d = [];
        function p(e) {
          !e._dirty && (e._dirty = !0) && 1 == d.push(e) && (o.debounceRendering || c)(f);
        }
        function f() {
          var e,
              n = d;
          for (d = []; e = n.pop();) e._dirty && N(e);
        }
        function h(e, n) {
          return e.normalizedNodeName === n || e.nodeName.toLowerCase() === n.toLowerCase();
        }
        function v(e) {
          var n = s({}, e.attributes);
          n.children = e.children;
          var t = e.nodeName.defaultProps;
          if (void 0 !== t) for (var o in t) void 0 === n[o] && (n[o] = t[o]);
          return n;
        }
        function m(e) {
          var n = e.parentNode;
          n && n.removeChild(e);
        }
        function y(e, n, t, o, r) {
          if ("className" === n && (n = "class"), "key" === n) ;else if ("ref" === n) t && t(null), o && o(e);else if ("class" !== n || r) {
            if ("style" === n) {
              if (o && "string" != typeof o && "string" != typeof t || (e.style.cssText = o || ""), o && "object" == typeof o) {
                if ("string" != typeof t) for (var i in t) i in o || (e.style[i] = "");
                for (var i in o) e.style[i] = "number" == typeof o[i] && !1 === l.test(i) ? o[i] + "px" : o[i];
              }
            } else if ("dangerouslySetInnerHTML" === n) o && (e.innerHTML = o.__html || "");else if ("o" == n[0] && "n" == n[1]) {
              var a = n !== (n = n.replace(/Capture$/, ""));
              n = n.toLowerCase().substring(2), o ? t || e.addEventListener(n, g, a) : e.removeEventListener(n, g, a), (e._listeners || (e._listeners = {}))[n] = o;
            } else if ("list" !== n && "type" !== n && !r && n in e) !function (e, n, t) {
              try {
                e[n] = t;
              } catch (e) {}
            }(e, n, null == o ? "" : o), null != o && !1 !== o || e.removeAttribute(n);else {
              var s = r && n !== (n = n.replace(/^xlink:?/, ""));
              null == o || !1 === o ? s ? e.removeAttributeNS("http://www.w3.org/1999/xlink", n.toLowerCase()) : e.removeAttribute(n) : "function" != typeof o && (s ? e.setAttributeNS("http://www.w3.org/1999/xlink", n.toLowerCase(), o) : e.setAttribute(n, o));
            }
          } else e.className = o || "";
        }
        function g(e) {
          return this._listeners[e.type](o.event && o.event(e) || e);
        }
        var b = [],
            w = 0,
            k = !1,
            _ = !1;
        function C() {
          for (var e; e = b.pop();) o.afterMount && o.afterMount(e), e.componentDidMount && e.componentDidMount();
        }
        function x(e, n, t, o, r, i) {
          w++ || (k = null != r && void 0 !== r.ownerSVGElement, _ = null != e && !("__preactattr_" in e));
          var a = A(e, n, t, o, i);
          return r && a.parentNode !== r && r.appendChild(a), --w || (_ = !1, i || C()), a;
        }
        function A(e, n, t, o, r) {
          var i = e,
              a = k;
          if (null != n && "boolean" != typeof n || (n = ""), "string" == typeof n || "number" == typeof n) return e && void 0 !== e.splitText && e.parentNode && (!e._component || r) ? e.nodeValue != n && (e.nodeValue = n) : (i = document.createTextNode(n), e && (e.parentNode && e.parentNode.replaceChild(i, e), E(e, !0))), i.__preactattr_ = !0, i;
          var s,
              c,
              u = n.nodeName;
          if ("function" == typeof u) return function (e, n, t, o) {
            var r = e && e._component,
                i = r,
                a = e,
                s = r && e._componentConstructor === n.nodeName,
                c = s,
                u = v(n);
            for (; r && !c && (r = r._parentComponent);) c = r.constructor === n.nodeName;
            r && c && (!o || r._component) ? (P(r, u, 3, t, o), e = r.base) : (i && !s && (I(i), e = a = null), r = L(n.nodeName, u, t), e && !r.nextBase && (r.nextBase = e, a = null), P(r, u, 1, t, o), e = r.base, a && e !== a && (a._component = null, E(a, !1)));
            return e;
          }(e, n, t, o);
          if (k = "svg" === u || "foreignObject" !== u && k, u = String(u), (!e || !h(e, u)) && (s = u, (c = k ? document.createElementNS("http://www.w3.org/2000/svg", s) : document.createElement(s)).normalizedNodeName = s, i = c, e)) {
            for (; e.firstChild;) i.appendChild(e.firstChild);
            e.parentNode && e.parentNode.replaceChild(i, e), E(e, !0);
          }
          var l = i.firstChild,
              d = i.__preactattr_,
              p = n.children;
          if (null == d) {
            d = i.__preactattr_ = {};
            for (var f = i.attributes, g = f.length; g--;) d[f[g].name] = f[g].value;
          }
          return !_ && p && 1 === p.length && "string" == typeof p[0] && null != l && void 0 !== l.splitText && null == l.nextSibling ? l.nodeValue != p[0] && (l.nodeValue = p[0]) : (p && p.length || null != l) && function (e, n, t, o, r) {
            var i,
                a,
                s,
                c,
                u,
                l = e.childNodes,
                d = [],
                p = {},
                f = 0,
                v = 0,
                y = l.length,
                g = 0,
                b = n ? n.length : 0;
            if (0 !== y) for (var w = 0; w < y; w++) {
              var k = l[w],
                  _ = k.__preactattr_,
                  C = b && _ ? k._component ? k._component.__key : _.key : null;
              null != C ? (f++, p[C] = k) : (_ || (void 0 !== k.splitText ? !r || k.nodeValue.trim() : r)) && (d[g++] = k);
            }
            if (0 !== b) for (var w = 0; w < b; w++) {
              c = n[w], u = null;
              var C = c.key;
              if (null != C) f && void 0 !== p[C] && (u = p[C], p[C] = void 0, f--);else if (!u && v < g) for (i = v; i < g; i++) if (void 0 !== d[i] && (x = a = d[i], O = r, "string" == typeof (S = c) || "number" == typeof S ? void 0 !== x.splitText : "string" == typeof S.nodeName ? !x._componentConstructor && h(x, S.nodeName) : O || x._componentConstructor === S.nodeName)) {
                u = a, d[i] = void 0, i === g - 1 && g--, i === v && v++;
                break;
              }
              u = A(u, c, t, o), s = l[w], u && u !== e && u !== s && (null == s ? e.appendChild(u) : u === s.nextSibling ? m(s) : e.insertBefore(u, s));
            }
            var x, S, O;
            if (f) for (var w in p) void 0 !== p[w] && E(p[w], !1);
            for (; v <= g;) void 0 !== (u = d[g--]) && E(u, !1);
          }(i, p, t, o, _ || null != d.dangerouslySetInnerHTML), function (e, n, t) {
            var o;
            for (o in t) n && null != n[o] || null == t[o] || y(e, o, t[o], t[o] = void 0, k);
            for (o in n) "children" === o || "innerHTML" === o || o in t && n[o] === ("value" === o || "checked" === o ? e[o] : t[o]) || y(e, o, t[o], t[o] = n[o], k);
          }(i, n.attributes, d), k = a, i;
        }
        function E(e, n) {
          var t = e._component;
          t ? I(t) : (null != e.__preactattr_ && e.__preactattr_.ref && e.__preactattr_.ref(null), !1 !== n && null != e.__preactattr_ || m(e), S(e));
        }
        function S(e) {
          for (e = e.lastChild; e;) {
            var n = e.previousSibling;
            E(e, !0), e = n;
          }
        }
        var O = {};
        function L(e, n, t) {
          var o,
              r = O[e.name];
          if (e.prototype && e.prototype.render ? (o = new e(n, t), M.call(o, n, t)) : ((o = new M(n, t)).constructor = e, o.render = T), r) for (var i = r.length; i--;) if (r[i].constructor === e) {
            o.nextBase = r[i].nextBase, r.splice(i, 1);
            break;
          }
          return o;
        }
        function T(e, n, t) {
          return this.constructor(e, t);
        }
        function P(e, n, t, r, i) {
          e._disable || (e._disable = !0, (e.__ref = n.ref) && delete n.ref, (e.__key = n.key) && delete n.key, !e.base || i ? e.componentWillMount && e.componentWillMount() : e.componentWillReceiveProps && e.componentWillReceiveProps(n, r), r && r !== e.context && (e.prevContext || (e.prevContext = e.context), e.context = r), e.prevProps || (e.prevProps = e.props), e.props = n, e._disable = !1, 0 !== t && (1 !== t && !1 === o.syncComponentUpdates && e.base ? p(e) : N(e, 1, i)), e.__ref && e.__ref(e));
        }
        function N(e, n, t, r) {
          if (!e._disable) {
            var i,
                a,
                c,
                u = e.props,
                l = e.state,
                d = e.context,
                p = e.prevProps || u,
                f = e.prevState || l,
                h = e.prevContext || d,
                m = e.base,
                y = e.nextBase,
                g = m || y,
                k = e._component,
                _ = !1;
            if (m && (e.props = p, e.state = f, e.context = h, 2 !== n && e.shouldComponentUpdate && !1 === e.shouldComponentUpdate(u, l, d) ? _ = !0 : e.componentWillUpdate && e.componentWillUpdate(u, l, d), e.props = u, e.state = l, e.context = d), e.prevProps = e.prevState = e.prevContext = e.nextBase = null, e._dirty = !1, !_) {
              i = e.render(u, l, d), e.getChildContext && (d = s(s({}, d), e.getChildContext()));
              var A,
                  S,
                  O = i && i.nodeName;
              if ("function" == typeof O) {
                var T = v(i);
                (a = k) && a.constructor === O && T.key == a.__key ? P(a, T, 1, d, !1) : (A = a, e._component = a = L(O, T, d), a.nextBase = a.nextBase || y, a._parentComponent = e, P(a, T, 0, d, !1), N(a, 1, t, !0)), S = a.base;
              } else c = g, (A = k) && (c = e._component = null), (g || 1 === n) && (c && (c._component = null), S = x(c, i, d, t || !m, g && g.parentNode, !0));
              if (g && S !== g && a !== k) {
                var M = g.parentNode;
                M && S !== M && (M.replaceChild(S, g), A || (g._component = null, E(g, !1)));
              }
              if (A && I(A), e.base = S, S && !r) {
                for (var j = e, R = e; R = R._parentComponent;) (j = R).base = S;
                S._component = j, S._componentConstructor = j.constructor;
              }
            }
            if (!m || t ? b.unshift(e) : _ || (e.componentDidUpdate && e.componentDidUpdate(p, f, h), o.afterUpdate && o.afterUpdate(e)), null != e._renderCallbacks) for (; e._renderCallbacks.length;) e._renderCallbacks.pop().call(e);
            w || r || C();
          }
        }
        function I(e) {
          o.beforeUnmount && o.beforeUnmount(e);
          var n = e.base;
          e._disable = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;
          var t = e._component;
          t ? I(t) : n && (n.__preactattr_ && n.__preactattr_.ref && n.__preactattr_.ref(null), e.nextBase = n, m(n), function (e) {
            var n = e.constructor.name;
            (O[n] || (O[n] = [])).push(e);
          }(e), S(n)), e.__ref && e.__ref(null);
        }
        function M(e, n) {
          this._dirty = !0, this.context = n, this.props = e, this.state = this.state || {};
        }
        function j(e, n, t) {
          return x(t, e, {}, !1, n, !1);
        }
        s(M.prototype, {
          setState: function (e, n) {
            var t = this.state;
            this.prevState || (this.prevState = s({}, t)), s(t, "function" == typeof e ? e(t, this.props) : e), n && (this._renderCallbacks = this._renderCallbacks || []).push(n), p(this);
          },
          forceUpdate: function (e) {
            e && (this._renderCallbacks = this._renderCallbacks || []).push(e), N(this, 2);
          },
          render: function () {}
        });
        var R = {
          h: a,
          createElement: a,
          cloneElement: u,
          Component: M,
          render: j,
          rerender: f,
          options: o
        };
        n.default = R;
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 });
        var o,
            r = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }(),
            i = t(19),
            a = t(18),
            s = (o = a) && o.__esModule ? o : { default: o };
        function c(e, n) {
          if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
          return !n || "object" != typeof n && "function" != typeof n ? e : n;
        }
        var u = "Click",
            l = function (e) {
          function n() {
            var e, t, o;
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, n);
            for (var r = arguments.length, i = Array(r), a = 0; a < r; a++) i[a] = arguments[a];
            return t = o = c(this, (e = n.__proto__ || Object.getPrototypeOf(n)).call.apply(e, [this].concat(i))), o.accept = function () {
              o.track(u, "accept-screen-1"), o.props.optInManager.setTrackingAccepted(), o.props.onRequestAppRemove(), o.props.onAcceptTracking();
            }, o.reject = function () {
              o.track(u, "reject-screen-1"), o.props.optInManager.setTrackingRejected(), o.props.onRequestAppRemove(), o.props.onRejectTracking();
            }, c(o, t);
          }
          return function (e, n) {
            if ("function" != typeof n && null !== n) throw new TypeError("Super expression must either be null or a function, not " + typeof n);
            e.prototype = Object.create(n && n.prototype, { constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              } }), n && (Object.setPrototypeOf ? Object.setPrototypeOf(e, n) : e.__proto__ = n);
          }(n, i.Component), r(n, [{
            key: "componentDidMount",
            value: function () {
              this.track("Impression", "modal-view"), this.preventScroll(), this.checkForCookie();
            }
          }, {
            key: "componentWillUnmount",
            value: function () {
              this.enableScroll();
            }
          }, {
            key: "preventScroll",
            value: function () {
              var e = this.getScrollContainer();
              e && e.classList.add(s.default.withTrackingOptInDialogShown);
            }
          }, {
            key: "enableScroll",
            value: function () {
              var e = this.getScrollContainer();
              e && e.classList.remove(s.default.withTrackingOptInDialogShown);
            }
          }, {
            key: "getScrollContainer",
            value: function () {
              return this.props.options.preventScrollOn ? "string" == typeof this.props.options.preventScrollOn ? document.querySelector(this.props.options.preventScrollOn) : this.props.options.preventScrollOn : null;
            }
          }, {
            key: "checkForCookie",
            value: function () {
              this.props.geoManager.hasGeoCookie() || this.track("Impression", "no-cookie");
            }
          }, {
            key: "track",
            value: function (e, n) {
              this.props.tracker.track("gdpr-modal", e, n);
            }
          }, {
            key: "render",
            value: function (e, n) {
              var t = e.options,
                  o = e.content;
              n.dialog;
              return (0, i.h)("div", {
                "data-tracking-opt-in-overlay": "true",
                className: s.default.overlay,
                style: { zIndex: t.zIndex }
              }, (0, i.h)("div", { className: s.default.container }, (0, i.h)("div", { className: s.default.logo }, (0, i.h)("svg", {
                id: "wds-company-logo-fandom",
                viewBox: "0 0 164 35",
                width: "100%",
                height: "100%"
              }, (0, i.h)("g", {
                fill: "none",
                "fill-rule": "evenodd"
              }, (0, i.h)("path", {
                d: "M32.003 16.524c0 .288-.115.564-.32.768L18.3 30.712c-.226.224-.454.324-.738.324-.292 0-.55-.11-.77-.325l-.943-.886a.41.41 0 0 1-.01-.59l15.45-15.46c.262-.263.716-.078.716.29v2.46zm-17.167 10.12l-.766.685a.642.642 0 0 1-.872-.02L3.01 17.362c-.257-.25-.4-.593-.4-.95v-1.858c0-.67.816-1.007 1.298-.536l10.814 10.56c.188.187.505.57.505 1.033 0 .296-.068.715-.39 1.035zM5.73 7.395L9.236 3.93a.421.421 0 0 1 .592 0l11.736 11.603a3.158 3.158 0 0 1 0 4.5l-3.503 3.462a.423.423 0 0 1-.59 0L5.732 11.89a3.132 3.132 0 0 1-.937-2.25c0-.85.332-1.65.935-2.246zm13.89 1.982l3.662-3.62a3.232 3.232 0 0 1 2.737-.897c.722.098 1.378.47 1.893.978l3.708 3.667a.41.41 0 0 1 0 .585l-5.64 5.576a.419.419 0 0 1-.59 0l-5.77-5.704a.411.411 0 0 1 0-.585zm14.56-.687L26.014.475a.869.869 0 0 0-1.228-.002L18.307 6.94c-.5.5-1.316.5-1.82.004l-6.48-6.4A.87.87 0 0 0 8.793.542L.447 8.67C.16 8.95 0 9.33 0 9.727v7.7c0 .392.158.77.44 1.048l16.263 16.072a.87.87 0 0 0 1.22 0l16.25-16.073c.28-.278.438-.655.438-1.048V9.73c0-.39-.153-.763-.43-1.04z",
                fill: "#00D6D6"
              }), (0, i.h)("path", {
                d: "M62.852 20.51l2.58-6.716a.468.468 0 0 1 .87 0l2.58 6.717h-6.03zm5.856-12.428c-.184-.48-.65-.8-1.17-.8h-3.342c-.52 0-.986.32-1.17.8l-7.083 18.5c-.21.552.2 1.14.796 1.14h2.753c.353 0 .67-.215.796-.542l.738-1.922a.849.849 0 0 1 .795-.542h8.088a.85.85 0 0 1 .796.542l.74 1.922c.125.327.44.543.795.543h2.754a.843.843 0 0 0 .796-1.14l-7.082-18.5zm93.504-.8h-2.715a1.86 1.86 0 0 0-1.677 1.047l-5.393 11.162-5.393-11.163a1.858 1.858 0 0 0-1.677-1.047h-2.715a.889.889 0 0 0-.893.883V26.84c0 .487.4.883.892.883h2.608a.889.889 0 0 0 .893-.883v-9.686l4.945 10.072c.15.304.46.497.803.497h1.073a.893.893 0 0 0 .803-.497l4.945-10.072v9.686c0 .487.4.883.894.883h2.608a.889.889 0 0 0 .893-.883V8.166c0-.487-.4-.883-.893-.883zm-106.972 8.8h-8.63V11.49h10.918a.88.88 0 0 0 .83-.578l.888-2.464a.872.872 0 0 0-.83-1.163h-15.18c-.486 0-.88.39-.88.87v18.7c0 .48.394.87.88.87h2.492c.486 0 .88-.39.88-.87V20.29h7.743a.88.88 0 0 0 .83-.578l.89-2.464a.872.872 0 0 0-.83-1.163zm51.76 7.61h-3.615V11.315H107c3.828 0 6.41 2.517 6.41 6.188 0 3.672-2.582 6.19-6.41 6.19zm-.124-16.41h-7.128c-.486 0-.88.39-.88.872v18.698c0 .48.394.87.88.87h7.128c6.453 0 10.912-4.44 10.912-10.16v-.117c0-5.72-4.46-10.162-10.912-10.162zm-11.947.03h-2.642a.87.87 0 0 0-.876.866v12.36l-8.755-12.72a1.242 1.242 0 0 0-1.023-.535H78.32a.873.873 0 0 0-.876.867v18.706c0 .48.393.867.877.867h2.64a.872.872 0 0 0 .878-.867V14.71l8.608 12.478c.23.334.613.535 1.022.535h3.46a.872.872 0 0 0 .877-.867V8.178a.87.87 0 0 0-.876-.867zm40.71 10.3c0 3.323-2.712 6.016-6.056 6.016-3.345 0-6.056-2.693-6.056-6.015v-.22c0-3.322 2.71-6.015 6.056-6.015 3.344 0 6.055 2.693 6.055 6.015v.22zm-6.056-10.44c-5.694 0-10.31 4.576-10.31 10.22v.22c0 5.646 4.616 10.22 10.31 10.22 5.693 0 10.308-4.574 10.308-10.22v-.22c0-5.644-4.615-10.22-10.308-10.22z",
                fill: "#002A32"
              })))), (0, i.h)("div", { className: s.default.content }, (0, i.h)("div", { className: s.default.usesCookiesText }, " ", o.headline, " "), (0, i.h)("div", { className: s.default.bodyParagraphsContainer }, o.bodyParagraphs.map(function (e) {
                return (0, i.h)("p", null, e);
              }))), (0, i.h)("div", { className: s.default.buttons }, (0, i.h)("div", {
                "data-tracking-opt-in-accept": "true",
                className: s.default.buttonPrimary,
                onClick: this.accept
              }, o.buttonAccept), (0, i.h)("div", {
                "data-tracking-opt-in-reject": "true",
                className: s.default.buttonSecondary,
                onClick: this.reject
              }, o.buttonReject)), (0, i.h)("div", { className: s.default.links }, (0, i.h)("a", { href: o.privacyLink }, o.privacyLinkText), (0, i.h)("a", { href: o.partnerLink }, o.partnerLinkText))));
            }
          }]), n;
        }();
        n.default = l;
      }, function (e, n, t) {
        !function () {
          "use strict";

          function n(e, n) {
            var t,
                o,
                r,
                i,
                a = C;
            for (i = arguments.length; i-- > 2;) _.push(arguments[i]);
            for (n && null != n.children && (_.length || _.push(n.children), delete n.children); _.length;) if ((o = _.pop()) && void 0 !== o.pop) for (i = o.length; i--;) _.push(o[i]);else "boolean" == typeof o && (o = null), (r = "function" != typeof e) && (null == o ? o = "" : "number" == typeof o ? o = String(o) : "string" != typeof o && (r = !1)), r && t ? a[a.length - 1] += o : a === C ? a = [o] : a.push(o), t = r;
            var s = new function () {}();
            return s.nodeName = e, s.children = a, s.attributes = null == n ? void 0 : n, s.key = null == n ? void 0 : n.key, void 0 !== k.vnode && k.vnode(s), s;
          }
          function t(e, n) {
            for (var t in n) e[t] = n[t];
            return e;
          }
          function o(e) {
            !e.__d && (e.__d = !0) && 1 == E.push(e) && (k.debounceRendering || x)(r);
          }
          function r() {
            var e,
                n = E;
            for (E = []; e = n.pop();) e.__d && g(e);
          }
          function i(e, n) {
            return e.__n === n || e.nodeName.toLowerCase() === n.toLowerCase();
          }
          function a(e) {
            var n = t({}, e.attributes);
            n.children = e.children;
            var o = e.nodeName.defaultProps;
            if (void 0 !== o) for (var r in o) void 0 === n[r] && (n[r] = o[r]);
            return n;
          }
          function s(e) {
            var n = e.parentNode;
            n && n.removeChild(e);
          }
          function c(e, n, t, o, r) {
            if ("className" === n && (n = "class"), "key" === n) ;else if ("ref" === n) t && t(null), o && o(e);else if ("class" !== n || r) {
              if ("style" === n) {
                if (o && "string" != typeof o && "string" != typeof t || (e.style.cssText = o || ""), o && "object" == typeof o) {
                  if ("string" != typeof t) for (var i in t) i in o || (e.style[i] = "");
                  for (var i in o) e.style[i] = "number" == typeof o[i] && !1 === A.test(i) ? o[i] + "px" : o[i];
                }
              } else if ("dangerouslySetInnerHTML" === n) o && (e.innerHTML = o.__html || "");else if ("o" == n[0] && "n" == n[1]) {
                var a = n !== (n = n.replace(/Capture$/, ""));
                n = n.toLowerCase().substring(2), o ? t || e.addEventListener(n, u, a) : e.removeEventListener(n, u, a), (e.__l || (e.__l = {}))[n] = o;
              } else if ("list" !== n && "type" !== n && !r && n in e) !function (e, n, t) {
                try {
                  e[n] = t;
                } catch (e) {}
              }(e, n, null == o ? "" : o), null != o && !1 !== o || e.removeAttribute(n);else {
                var s = r && n !== (n = n.replace(/^xlink:?/, ""));
                null == o || !1 === o ? s ? e.removeAttributeNS("http://www.w3.org/1999/xlink", n.toLowerCase()) : e.removeAttribute(n) : "function" != typeof o && (s ? e.setAttributeNS("http://www.w3.org/1999/xlink", n.toLowerCase(), o) : e.setAttribute(n, o));
              }
            } else e.className = o || "";
          }
          function u(e) {
            return this.__l[e.type](k.event && k.event(e) || e);
          }
          function l() {
            for (var e; e = S.pop();) k.afterMount && k.afterMount(e), e.componentDidMount && e.componentDidMount();
          }
          function d(e, n, t, o, r, i) {
            O++ || (L = null != r && void 0 !== r.ownerSVGElement, T = null != e && !("__preactattr_" in e));
            var a = p(e, n, t, o, i);
            return r && a.parentNode !== r && r.appendChild(a), --O || (T = !1, i || l()), a;
          }
          function p(e, n, t, o, r) {
            var u = e,
                l = L;
            if (null != n && "boolean" != typeof n || (n = ""), "string" == typeof n || "number" == typeof n) return e && void 0 !== e.splitText && e.parentNode && (!e._component || r) ? e.nodeValue != n && (e.nodeValue = n) : (u = document.createTextNode(n), e && (e.parentNode && e.parentNode.replaceChild(u, e), f(e, !0))), u.__preactattr_ = !0, u;
            var d,
                h,
                m = n.nodeName;
            if ("function" == typeof m) return function (e, n, t, o) {
              var r = e && e._component,
                  i = r,
                  s = e,
                  c = r && e._componentConstructor === n.nodeName,
                  u = c,
                  l = a(n);
              for (; r && !u && (r = r.__u);) u = r.constructor === n.nodeName;
              r && u && (!o || r._component) ? (y(r, l, 3, t, o), e = r.base) : (i && !c && (b(i), e = s = null), r = v(n.nodeName, l, t), e && !r.__b && (r.__b = e, s = null), y(r, l, 1, t, o), e = r.base, s && e !== s && (s._component = null, f(s, !1)));
              return e;
            }(e, n, t, o);
            if (L = "svg" === m || "foreignObject" !== m && L, m = String(m), (!e || !i(e, m)) && (d = m, (h = L ? document.createElementNS("http://www.w3.org/2000/svg", d) : document.createElement(d)).__n = d, u = h, e)) {
              for (; e.firstChild;) u.appendChild(e.firstChild);
              e.parentNode && e.parentNode.replaceChild(u, e), f(e, !0);
            }
            var g = u.firstChild,
                w = u.__preactattr_,
                k = n.children;
            if (null == w) {
              w = u.__preactattr_ = {};
              for (var _ = u.attributes, C = _.length; C--;) w[_[C].name] = _[C].value;
            }
            return !T && k && 1 === k.length && "string" == typeof k[0] && null != g && void 0 !== g.splitText && null == g.nextSibling ? g.nodeValue != k[0] && (g.nodeValue = k[0]) : (k && k.length || null != g) && function (e, n, t, o, r) {
              var a,
                  c,
                  u,
                  l,
                  d,
                  h = e.childNodes,
                  v = [],
                  m = {},
                  y = 0,
                  g = 0,
                  b = h.length,
                  w = 0,
                  k = n ? n.length : 0;
              if (0 !== b) for (var _ = 0; _ < b; _++) {
                var C = h[_],
                    x = C.__preactattr_,
                    A = k && x ? C._component ? C._component.__k : x.key : null;
                null != A ? (y++, m[A] = C) : (x || (void 0 !== C.splitText ? !r || C.nodeValue.trim() : r)) && (v[w++] = C);
              }
              if (0 !== k) for (var _ = 0; _ < k; _++) {
                l = n[_], d = null;
                var A = l.key;
                if (null != A) y && void 0 !== m[A] && (d = m[A], m[A] = void 0, y--);else if (!d && g < w) for (a = g; a < w; a++) if (void 0 !== v[a] && (E = c = v[a], O = r, "string" == typeof (S = l) || "number" == typeof S ? void 0 !== E.splitText : "string" == typeof S.nodeName ? !E._componentConstructor && i(E, S.nodeName) : O || E._componentConstructor === S.nodeName)) {
                  d = c, v[a] = void 0, a === w - 1 && w--, a === g && g++;
                  break;
                }
                d = p(d, l, t, o), u = h[_], d && d !== e && d !== u && (null == u ? e.appendChild(d) : d === u.nextSibling ? s(u) : e.insertBefore(d, u));
              }
              var E, S, O;
              if (y) for (var _ in m) void 0 !== m[_] && f(m[_], !1);
              for (; g <= w;) void 0 !== (d = v[w--]) && f(d, !1);
            }(u, k, t, o, T || null != w.dangerouslySetInnerHTML), function (e, n, t) {
              var o;
              for (o in t) n && null != n[o] || null == t[o] || c(e, o, t[o], t[o] = void 0, L);
              for (o in n) "children" === o || "innerHTML" === o || o in t && n[o] === ("value" === o || "checked" === o ? e[o] : t[o]) || c(e, o, t[o], t[o] = n[o], L);
            }(u, n.attributes, w), L = l, u;
          }
          function f(e, n) {
            var t = e._component;
            t ? b(t) : (null != e.__preactattr_ && e.__preactattr_.ref && e.__preactattr_.ref(null), !1 !== n && null != e.__preactattr_ || s(e), h(e));
          }
          function h(e) {
            for (e = e.lastChild; e;) {
              var n = e.previousSibling;
              f(e, !0), e = n;
            }
          }
          function v(e, n, t) {
            var o,
                r = P[e.name];
            if (e.prototype && e.prototype.render ? (o = new e(n, t), w.call(o, n, t)) : ((o = new w(n, t)).constructor = e, o.render = m), r) for (var i = r.length; i--;) if (r[i].constructor === e) {
              o.__b = r[i].__b, r.splice(i, 1);
              break;
            }
            return o;
          }
          function m(e, n, t) {
            return this.constructor(e, t);
          }
          function y(e, n, t, r, i) {
            e.__x || (e.__x = !0, (e.__r = n.ref) && delete n.ref, (e.__k = n.key) && delete n.key, !e.base || i ? e.componentWillMount && e.componentWillMount() : e.componentWillReceiveProps && e.componentWillReceiveProps(n, r), r && r !== e.context && (e.__c || (e.__c = e.context), e.context = r), e.__p || (e.__p = e.props), e.props = n, e.__x = !1, 0 !== t && (1 !== t && !1 === k.syncComponentUpdates && e.base ? o(e) : g(e, 1, i)), e.__r && e.__r(e));
          }
          function g(e, n, o, r) {
            if (!e.__x) {
              var i,
                  s,
                  c,
                  u = e.props,
                  p = e.state,
                  h = e.context,
                  m = e.__p || u,
                  w = e.__s || p,
                  _ = e.__c || h,
                  C = e.base,
                  x = e.__b,
                  A = C || x,
                  E = e._component,
                  L = !1;
              if (C && (e.props = m, e.state = w, e.context = _, 2 !== n && e.shouldComponentUpdate && !1 === e.shouldComponentUpdate(u, p, h) ? L = !0 : e.componentWillUpdate && e.componentWillUpdate(u, p, h), e.props = u, e.state = p, e.context = h), e.__p = e.__s = e.__c = e.__b = null, e.__d = !1, !L) {
                i = e.render(u, p, h), e.getChildContext && (h = t(t({}, h), e.getChildContext()));
                var T,
                    P,
                    N = i && i.nodeName;
                if ("function" == typeof N) {
                  var I = a(i);
                  (s = E) && s.constructor === N && I.key == s.__k ? y(s, I, 1, h, !1) : (T = s, e._component = s = v(N, I, h), s.__b = s.__b || x, s.__u = e, y(s, I, 0, h, !1), g(s, 1, o, !0)), P = s.base;
                } else c = A, (T = E) && (c = e._component = null), (A || 1 === n) && (c && (c._component = null), P = d(c, i, h, o || !C, A && A.parentNode, !0));
                if (A && P !== A && s !== E) {
                  var M = A.parentNode;
                  M && P !== M && (M.replaceChild(P, A), T || (A._component = null, f(A, !1)));
                }
                if (T && b(T), e.base = P, P && !r) {
                  for (var j = e, R = e; R = R.__u;) (j = R).base = P;
                  P._component = j, P._componentConstructor = j.constructor;
                }
              }
              if (!C || o ? S.unshift(e) : L || (e.componentDidUpdate && e.componentDidUpdate(m, w, _), k.afterUpdate && k.afterUpdate(e)), null != e.__h) for (; e.__h.length;) e.__h.pop().call(e);
              O || r || l();
            }
          }
          function b(e) {
            k.beforeUnmount && k.beforeUnmount(e);
            var n = e.base;
            e.__x = !0, e.componentWillUnmount && e.componentWillUnmount(), e.base = null;
            var t = e._component;
            t ? b(t) : n && (n.__preactattr_ && n.__preactattr_.ref && n.__preactattr_.ref(null), e.__b = n, s(n), function (e) {
              var n = e.constructor.name;
              (P[n] || (P[n] = [])).push(e);
            }(e), h(n)), e.__r && e.__r(null);
          }
          function w(e, n) {
            this.__d = !0, this.context = n, this.props = e, this.state = this.state || {};
          }
          var k = {},
              _ = [],
              C = [],
              x = "function" == typeof Promise ? Promise.resolve().then.bind(Promise.resolve()) : setTimeout,
              A = /acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,
              E = [],
              S = [],
              O = 0,
              L = !1,
              T = !1,
              P = {};
          t(w.prototype, {
            setState: function (e, n) {
              var r = this.state;
              this.__s || (this.__s = t({}, r)), t(r, "function" == typeof e ? e(r, this.props) : e), n && (this.__h = this.__h || []).push(n), o(this);
            },
            forceUpdate: function (e) {
              e && (this.__h = this.__h || []).push(e), g(this, 2);
            },
            render: function () {}
          });
          var N = {
            h: n,
            createElement: n,
            cloneElement: function (e, o) {
              return n(e.nodeName, t(t({}, e.attributes), o), arguments.length > 2 ? [].slice.call(arguments, 2) : e.children);
            },
            Component: w,
            render: function (e, n, t) {
              return d(t, e, {}, !1, n, !1);
            },
            rerender: r,
            options: k
          };
          e.exports = N;
        }();
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 });
        var o,
            r = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }(),
            i = t(21),
            a = t(20),
            s = (o = a) && o.__esModule ? o : { default: o },
            c = t(1);
        var u = function () {
          function e(n, t, o, r, a, s, c) {
            var u = this;
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.removeApp = function () {
              u.root && ((0, i.render)(null, u.root, u.root.lastChild), u.root.parentNode.removeChild(u.root), u.root = null);
            }, this.onAcceptTracking = function () {
              u.consentManagementProvider.configure({
                gdprApplies: u.geoRequiresTrackingConsent(),
                allowedVendors: u.options.enabledVendors,
                allowedVendorPurposes: u.options.enabledVendorPurposes
              }), u.consentManagementProvider.install(), u.options.onAcceptTracking();
            }, this.onRejectTracking = function () {
              u.consentManagementProvider.configure({
                gdprApplies: u.geoRequiresTrackingConsent(),
                allowedVendors: [],
                allowedVendorPurposes: []
              }), u.consentManagementProvider.install(), u.options.onRejectTracking();
            }, this.tracker = n, this.optInManager = t, this.geoManager = o, this.contentManager = r, this.consentManagementProvider = a, this.options = s, this.location = c, this.isReset = !1;
          }
          return r(e, [{
            key: "hasUserConsented",
            value: function () {
              return !this.isOnWhiteListedPage() && (!this.geoRequiresTrackingConsent() || !!this.optInManager.hasAcceptedTracking() || !this.optInManager.hasRejectedTracking() && !!this.geoManager.hasGeoCookie() && void 0);
            }
          }, {
            key: "isOnWhiteListedPage",
            value: function () {
              if (this.isReset) return !1;
              var e = this.location,
                  n = e.host,
                  t = e.pathname,
                  o = this.contentManager.content,
                  r = o.privacyLink,
                  i = o.partnerLink,
                  a = (0, c.parseUrl)(r),
                  s = (0, c.parseUrl)(i);
              return a.hostname === n && t === a.pathname || s.hostname === n && t === s.pathname;
            }
          }, {
            key: "geoRequiresTrackingConsent",
            value: function () {
              return this.geoManager.needsTrackingPrompt();
            }
          }, {
            key: "reset",
            value: function () {
              this.isReset = !0, this.clear(), this.consentManagementProvider.installStub(), this.render();
            }
          }, {
            key: "clear",
            value: function () {
              this.optInManager.clear(), this.consentManagementProvider.uninstall();
            }
          }, {
            key: "render",
            value: function () {
              this.root || (this.root = document.createElement("div"), document.body.appendChild(this.root));
              var e = {
                zIndex: this.options.zIndex,
                preventScrollOn: this.options.preventScrollOn
              };
              switch (this.hasUserConsented()) {
                case !0:
                  this.onAcceptTracking();
                  break;
                case !1:
                  this.onRejectTracking();
                  break;
                default:
                  (0, i.render)((0, i.h)(s.default, {
                    onRequestAppRemove: this.removeApp,
                    onAcceptTracking: this.onAcceptTracking,
                    onRejectTracking: this.onRejectTracking,
                    tracker: this.tracker,
                    optInManager: this.optInManager,
                    geoManager: this.geoManager,
                    options: e,
                    content: this.contentManager.content
                  }), this.root, this.root.lastChild);
              }
            }
          }]), e;
        }();
        n.default = u;
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 }), n.COUNTRY_COOKIE_NAME = void 0;
        var o,
            r = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }(),
            i = t(0),
            a = (o = i) && o.__esModule ? o : { default: o };
        var s = n.COUNTRY_COOKIE_NAME = "Geo",
            c = "no-cookie",
            u = ["ai", "aw", "ax", "at", "be", "bg", "bm", "vg", "bq", "ky", "hr", "cw", "cy", "cz", "dk", "ee", "fk", "fo", "fi", "fr", "gf", "pf", "tf", "de", "gi", "gr", "gl", "gp", "hu", "is", "ie", "im", "it", "re", "lv", "li", "lt", "lu", "mq", "mt", "yt", "ms", "nl", "nc", "no", "pn", "pl", "pt", "ro", "bl", "sh", "mf", "pm", "bq", "sx", "sk", "si", "es", "se", "ch", "tc", "gb", "uk", "wf"];
        var l = function () {
          function e(n, t) {
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.countriesRequiringPrompt = (t || u).map(function (e) {
              return e.toLowerCase();
            }), this.country = (n || function () {
              var e = a.default.get(s);
              if (e) try {
                return JSON.parse(e).country;
              } catch (n) {
                console.error("error parsing geo cookie", e);
              } else console.warn("no geo cookie found");
              return !1;
            }() || c).toLowerCase();
          }
          return r(e, [{
            key: "needsTrackingPrompt",
            value: function () {
              return -1 !== this.countriesRequiringPrompt.indexOf(this.country);
            }
          }, {
            key: "getDetectedGeo",
            value: function () {
              return this.country;
            }
          }, {
            key: "hasGeoCookie",
            value: function () {
              return this.country !== c;
            }
          }]), e;
        }();
        n.default = l;
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 });
        var o,
            r = Object.assign || function (e) {
          for (var n = 1; n < arguments.length; n++) {
            var t = arguments[n];
            for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
          }
          return e;
        },
            i = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }(),
            a = t(0),
            s = (o = a) && o.__esModule ? o : { default: o };
        function c(e, n, t) {
          return n in e ? Object.defineProperty(e, n, {
            value: t,
            enumerable: !0,
            configurable: !0,
            writable: !0
          }) : e[n] = t, e;
        }
        var u = "wikia_beacon_id",
            l = {
          LANGUAGE_CODE: "lang_code",
          DETECTED_GEO: "detected_geo",
          CATEGORY: "ga_category",
          ACTION: "ga_action",
          LABEL: "ga_label",
          BEACON: "beacon"
        };
        var d = function () {
          function e(n, t, o, r) {
            var i;
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.enable = r, this.defaultParams = (c(i = {}, l.LANGUAGE_CODE, n), c(i, l.DETECTED_GEO, t), i);
            var a,
                d = (a = o, s.default.get(a || u));
            d && (this.defaultParams[l.BEACON] = d);
          }
          return i(e, [{
            key: "track",
            value: function (e, n, t) {
              var o,
                  i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : function () {};
              if (this.enable) {
                var a = document.head || document.getElementsByTagName("head")[0] || document.documentElement,
                    s = r({}, this.defaultParams, (c(o = {}, l.CATEGORY, e), c(o, l.ACTION, n), c(o, l.LABEL, t), o)),
                    u = [];
                for (var d in s) u.push(encodeURIComponent(d) + "=" + encodeURIComponent(s[d]));
                var p = document.createElement("script");
                p.src = "https://beacon.wikia-services.com/__track/special/gdpr_events?" + u.join("&"), "async" in p && (p.async = !0), p.onload = p.onreadystatechange = function (e) {
                  (e || !p.readyState || /loaded|complete/.test(p.readyState)) && (p.onload = p.onreadystatechange = null, a && p.parentNode && a.removeChild(p), p = void 0, i());
                }, a.insertBefore(p, a.firstChild), setTimeout(function () {
                  p && p.onload(!0);
                }, 3e3);
              }
            }
          }]), e;
        }();
        n.default = d;
      }, function (e, n) {
        var t,
            o,
            r = e.exports = {};
        function i() {
          throw new Error("setTimeout has not been defined");
        }
        function a() {
          throw new Error("clearTimeout has not been defined");
        }
        function s(e) {
          if (t === setTimeout) return setTimeout(e, 0);
          if ((t === i || !t) && setTimeout) return t = setTimeout, setTimeout(e, 0);
          try {
            return t(e, 0);
          } catch (n) {
            try {
              return t.call(null, e, 0);
            } catch (n) {
              return t.call(this, e, 0);
            }
          }
        }
        !function () {
          try {
            t = "function" == typeof setTimeout ? setTimeout : i;
          } catch (e) {
            t = i;
          }
          try {
            o = "function" == typeof clearTimeout ? clearTimeout : a;
          } catch (e) {
            o = a;
          }
        }();
        var c,
            u = [],
            l = !1,
            d = -1;
        function p() {
          l && c && (l = !1, c.length ? u = c.concat(u) : d = -1, u.length && f());
        }
        function f() {
          if (!l) {
            var e = s(p);
            l = !0;
            for (var n = u.length; n;) {
              for (c = u, u = []; ++d < n;) c && c[d].run();
              d = -1, n = u.length;
            }
            c = null, l = !1, function (e) {
              if (o === clearTimeout) return clearTimeout(e);
              if ((o === a || !o) && clearTimeout) return o = clearTimeout, clearTimeout(e);
              try {
                o(e);
              } catch (n) {
                try {
                  return o.call(null, e);
                } catch (n) {
                  return o.call(this, e);
                }
              }
            }(e);
          }
        }
        function h(e, n) {
          this.fun = e, this.array = n;
        }
        function v() {}
        r.nextTick = function (e) {
          var n = new Array(arguments.length - 1);
          if (arguments.length > 1) for (var t = 1; t < arguments.length; t++) n[t - 1] = arguments[t];
          u.push(new h(e, n)), 1 !== u.length || l || s(f);
        }, h.prototype.run = function () {
          this.fun.apply(null, this.array);
        }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = v, r.addListener = v, r.once = v, r.off = v, r.removeListener = v, r.removeAllListeners = v, r.emit = v, r.prependListener = v, r.prependOnceListener = v, r.listeners = function (e) {
          return [];
        }, r.binding = function (e) {
          throw new Error("process.binding is not supported");
        }, r.cwd = function () {
          return "/";
        }, r.chdir = function (e) {
          throw new Error("process.chdir is not supported");
        }, r.umask = function () {
          return 0;
        };
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 }), n.VERSION_CURRENT_ID = n.VERSION_COOKIE_NAME = n.STATUS = n.DEFAULT_COOKIE_NAME = n.DEFAULT_QUERY_PARAM_NAME = void 0;
        var o,
            r = function () {
          function e(e, n) {
            for (var t = 0; t < n.length; t++) {
              var o = n[t];
              o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o);
            }
          }
          return function (n, t, o) {
            return t && e(n.prototype, t), o && e(n, o), n;
          };
        }(),
            i = t(0),
            a = (o = i) && o.__esModule ? o : { default: o },
            s = t(1);
        var c = 18250,
            u = 31,
            l = n.DEFAULT_QUERY_PARAM_NAME = "tracking-opt-in-status",
            d = n.DEFAULT_COOKIE_NAME = "tracking-opt-in-status",
            p = n.STATUS = {
          ACCEPTED: "accepted",
          REJECTED: "rejected"
        },
            f = n.VERSION_COOKIE_NAME = "tracking-opt-in-version",
            h = n.VERSION_CURRENT_ID = 2,
            v = function () {
          function e(n, t, o, r, i) {
            !function (e, n) {
              if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.cookieName = t || d, this.acceptExpiration = o || c, this.rejectExpiration = r || u, this.domain = (0, s.getCookieDomain)(n || window.location.hostname), this.queryParam = i || l;
          }
          return r(e, [{
            key: "checkCookieVersion",
            value: function () {
              var e = a.default.get(f);
              (!e || parseInt(e, 10) < h) && this.clear();
            }
          }, {
            key: "getValue",
            value: function () {
              return a.default.get(this.cookieName);
            }
          }, {
            key: "hasAcceptedTracking",
            value: function () {
              return this.getValue() === p.ACCEPTED;
            }
          }, {
            key: "hasRejectedTracking",
            value: function () {
              return this.getValue() === p.REJECTED;
            }
          }, {
            key: "setCookies",
            value: function (e, n) {
              var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
              this.domain && (t.domain = this.domain), a.default.set(e, n, t), a.default.set(f, h, t);
            }
          }, {
            key: "setTrackingAccepted",
            value: function () {
              this.setCookies(this.cookieName, p.ACCEPTED, { expires: this.acceptExpiration });
            }
          }, {
            key: "setForcedStatusFromQueryParams",
            value: function (e) {
              -1 !== e.indexOf(this.queryParam + "=true") ? this.setTrackingAccepted() : -1 !== e.indexOf(this.queryParam + "=false") && this.setTrackingRejected();
            }
          }, {
            key: "setTrackingRejected",
            value: function () {
              this.setCookies(this.cookieName, p.REJECTED, { expires: this.rejectExpiration });
            }
          }, {
            key: "clear",
            value: function () {
              var e = this.domain ? { domain: this.domain } : {};
              a.default.remove(this.cookieName, e);
            }
          }]), e;
        }();
        n.default = v;
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 }), n.DEFAULT_BROWSER_LANG = n.DEFAULT_LANG = void 0;
        var o = t(8);
        n.DEFAULT_LANG = "en";
        var r = n.DEFAULT_BROWSER_LANG = "en-us";
        n.default = function e(n) {
          !function (e, n) {
            if (!(e instanceof n)) throw new TypeError("Cannot call a class as a function");
          }(this, e), this.browserLang = (n || (window.navigator && window.navigator.language ? window.navigator.language : r)).toLowerCase(), this.lang = function (e) {
            return void 0 !== o.langToContent[e] ? e : e.substring(0, 2);
          }(this.browserLang);
        };
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 });
        var o = Object.assign || function (e) {
          for (var n = 1; n < arguments.length; n++) {
            var t = arguments[n];
            for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
          }
          return e;
        };
        n.default = function (e) {
          var n = o({}, p, e),
              t = n.zIndex,
              d = n.onAcceptTracking,
              f = n.onRejectTracking,
              h = n.preventScrollOn,
              v = n.enabledVendorPurposes,
              m = n.enabledVendors,
              y = function (e, n) {
            var t = {};
            for (var o in e) n.indexOf(o) >= 0 || Object.prototype.hasOwnProperty.call(e, o) && (t[o] = e[o]);
            return t;
          }(n, ["zIndex", "onAcceptTracking", "onRejectTracking", "preventScrollOn", "enabledVendorPurposes", "enabledVendors"]),
              g = new r.default(y.language),
              b = new c.default(y.country, y.countriesRequiringPrompt),
              w = new a.default(g.lang, b.getDetectedGeo(), y.beaconCookieName, y.track),
              k = new l.default({ language: g.lang }),
              _ = new i.default(window.location.hostname, y.cookieName, y.cookieExpiration, y.cookieRejectExpiration, y.queryParamName),
              C = new s.default(g.lang);
          _.setForcedStatusFromQueryParams(window.location.search), _.checkCookieVersion();
          var x = new u.default(w, _, b, C, k, {
            preventScrollOn: h,
            zIndex: t,
            enabledVendorPurposes: v,
            enabledVendors: m,
            onAcceptTracking: d,
            onRejectTracking: f
          }, window.location);
          return x.render(), x;
        };
        var r = d(t(27)),
            i = d(t(26)),
            a = d(t(24)),
            s = d(t(8)),
            c = d(t(23)),
            u = d(t(22)),
            l = d(t(13));
        function d(e) {
          return e && e.__esModule ? e : { default: e };
        }
        var p = {
          beaconCookieName: null,
          cookieName: null,
          cookieExpiration: null,
          cookieRejectExpiration: null,
          country: null,
          countriesRequiringPrompt: null,
          enabledVendorPurposes: [1, 2, 3, 4, 5],
          enabledVendors: [50, 264, 66, 32, 315, 77, 85, 298, 71, 126, 120, 78, 98, 10, 278, 97, 95, 228, 79, 101, 468, 373, 69, 385, 177, 76, 11, 36, 261, 68, 165, 197, 522, 345, 52, 21, 28],
          language: null,
          queryParamName: null,
          preventScrollOn: "body",
          track: !0,
          zIndex: 1e3,
          onAcceptTracking: function () {
            console.log("user opted in to tracking");
          },
          onRejectTracking: function () {
            console.log("user opted out of tracking");
          }
        };
      }, function (e, n, t) {
        "use strict";

        Object.defineProperty(n, "__esModule", { value: !0 }), n.default = function (e) {
          return e, (0, i.default)(e);
        };
        var o,
            r = t(28),
            i = (o = r) && o.__esModule ? o : { default: o };
      }]);
    });
  })($__require("3"));
});
$__System.registerDynamic("4", ["2"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require("2");
});
$__System.register('5', [], function (_export) {
	'use strict';


	_export('setArticleRailSpacing', setArticleRailSpacing);

	_export('setVideoRailSpacing', setVideoRailSpacing);

	function setArticleRailSpacing() {
		var elem = document.querySelector('.article-rail');

		if (elem) {
			var entryMeta = elem.parentElement.querySelector('.entry-meta');
			if (entryMeta && !elem.classList.contains('featured-article-rail') && !window.upstream.isMobileScreenSize) {
				var targetY = entryMeta.getBoundingClientRect().top;
				var currentY = elem.getBoundingClientRect().top;
				elem.style.marginTop = targetY - currentY - 18 + 'px';
			}
			elem.classList.add('visible');
		}
	}

	function setVideoRailSpacing() {
		var elem = document.querySelector('.video-rail');

		if (elem) {
			var videoContent = document.querySelector('.video-content');
			if (videoContent && !window.upstream.isMobileScreenSize) {
				var targetY = videoContent.getBoundingClientRect().top;
				var currentY = elem.getBoundingClientRect().top;
				elem.style.marginTop = targetY - currentY - 35 + 'px';
			}
			elem.classList.add('visible');
		}
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('6', ['7', '8', '9'], function (_export) {
	var GATracker, _createClass, _classCallCheck, WDSGlobalNavigationSearch;

	return {
		setters: [function (_3) {
			GATracker = _3['default'];
		}, function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}],
		execute: function () {
			'use strict';

			WDSGlobalNavigationSearch = (function () {
				function WDSGlobalNavigationSearch(elem) {
					_classCallCheck(this, WDSGlobalNavigationSearch);

					this.elem = elem;
					this.activeClass = 'wds-search-is-active';
					this.placeholderActiveAttr = 'placeholder-active';
					this.placeholderInactiveAttr = 'placeholder-inactive';

					this.searchIcon = elem.querySelector('.wds-global-navigation__search-label-icon');
					this.searchCloseButton = elem.querySelector('.wds-global-navigation__search-close');
					this.searchSubmitButton = elem.querySelector('.wds-global-navigation__search-submit');
					this.searchBar = elem.querySelector('.wds-global-navigation__search-input');
					this.searchLabel = elem.querySelector('.wds-global-navigation__search-label');
				}

				_createClass(WDSGlobalNavigationSearch, [{
					key: 'init',
					value: function init() {
						this.gaTracker = new GATracker();

						this.setupClickSearch();
						this.setupChangeSearchState();
						this.setupCloseSearch();

						if (this.searchBar === document.activeElement) {
							this.activateSearch();
						}

						if (this.searchBar.value.length === 0) {
							this.searchSubmitButton.disabled = true;
						} else {
							this.activateSearch();
							this.searchSubmitButton.disabled = false;
						}
					}
				}, {
					key: 'activateSearch',
					value: function activateSearch() {
						if (!this.elem.classList.contains(this.activeClass)) {
							this.elem.classList.add(this.activeClass);
							this.searchSubmitButton.disabled = true;
							this.searchBar.placeholder = this.searchBar.getAttribute(this.placeholderActiveAttr);
							this.searchBar.focus();
						}
					}
				}, {
					key: 'setupClickSearch',
					value: function setupClickSearch() {
						var _this = this;

						this.searchLabel.addEventListener('click', function (event) {
							event.preventDefault();
							_this.gaTracker.track({
								label: 'global-navigation.search',
								nonInteraction: false
							});
							_this.activateSearch();
						}, true);
					}
				}, {
					key: 'deactivateSearch',
					value: function deactivateSearch() {
						this.searchSubmitButton.disabled = true;
						this.elem.classList.remove(this.activeClass);
						this.searchBar.placeholder = this.searchBar.getAttribute(this.placeholderInactiveAttr);
						this.searchBar.value = '';
					}

				}, {
					key: 'setupChangeSearchState',
					value: function setupChangeSearchState() {
						var _this2 = this;

						this.searchBar.addEventListener('keyup', function () {
							var textLength = _this2.searchBar.value.length;

							if (textLength > 0 && _this2.searchSubmitButton.disabled) {
								_this2.searchSubmitButton.disabled = false;
							} else if (textLength === 0) {
								_this2.searchSubmitButton.disabled = true;
							}
						});

						this.searchBar.addEventListener('keydown', function (e) {
							var keynum = undefined;

							if (window.event) {
								keynum = e.keyCode;
							} else if (e.which) {
								keynum = e.which;
							}

							if (keynum === 27) {
								_this2.searchBar.blur();
								_this2.deactivateSearch();
							}
						});
					}
				}, {
					key: 'setupCloseSearch',
					value: function setupCloseSearch() {
						var _this3 = this;

						this.searchCloseButton.addEventListener('click', function () {
							_this3.deactivateSearch();
						});
					}
				}]);

				return WDSGlobalNavigationSearch;
			})();

			_export('default', WDSGlobalNavigationSearch);
		}
	};
});
(function() {
var define = $__System.amdDefine;
!function(a, b) {
  "use strict";
  "function" == typeof define && define.amd ? define("a", [], b) : "object" == typeof exports ? module.exports = b() : a.Headroom = b();
}(this, function() {
  "use strict";
  function a(a) {
    this.callback = a, this.ticking = !1;
  }
  function b(a) {
    return a && "undefined" != typeof window && (a === window || a.nodeType);
  }
  function c(a) {
    if (arguments.length <= 0)
      throw new Error("Missing arguments in extend function");
    var d,
        e,
        f = a || {};
    for (e = 1; e < arguments.length; e++) {
      var g = arguments[e] || {};
      for (d in g)
        "object" != typeof f[d] || b(f[d]) ? f[d] = f[d] || g[d] : f[d] = c(f[d], g[d]);
    }
    return f;
  }
  function d(a) {
    return a === Object(a) ? a : {
      down: a,
      up: a
    };
  }
  function e(a, b) {
    b = c(b, e.options), this.lastKnownScrollY = 0, this.elem = a, this.tolerance = d(b.tolerance), this.classes = b.classes, this.offset = b.offset, this.scroller = b.scroller, this.initialised = !1, this.onPin = b.onPin, this.onUnpin = b.onUnpin, this.onTop = b.onTop, this.onNotTop = b.onNotTop, this.onBottom = b.onBottom, this.onNotBottom = b.onNotBottom;
  }
  var f = {
    bind: !!function() {}.bind,
    classList: "classList" in document.documentElement,
    rAF: !!(window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame)
  };
  return window.requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame, a.prototype = {
    constructor: a,
    update: function() {
      this.callback && this.callback(), this.ticking = !1;
    },
    requestTick: function() {
      this.ticking || (requestAnimationFrame(this.rafCallback || (this.rafCallback = this.update.bind(this))), this.ticking = !0);
    },
    handleEvent: function() {
      this.requestTick();
    }
  }, e.prototype = {
    constructor: e,
    init: function() {
      return e.cutsTheMustard ? (this.debouncer = new a(this.update.bind(this)), this.elem.classList.add(this.classes.initial), setTimeout(this.attachEvent.bind(this), 100), this) : void 0;
    },
    destroy: function() {
      var a = this.classes;
      this.initialised = !1, this.elem.classList.remove(a.unpinned, a.pinned, a.top, a.notTop, a.initial), this.scroller.removeEventListener("scroll", this.debouncer, !1);
    },
    attachEvent: function() {
      this.initialised || (this.lastKnownScrollY = this.getScrollY(), this.initialised = !0, this.scroller.addEventListener("scroll", this.debouncer, !1), this.debouncer.handleEvent());
    },
    unpin: function() {
      var a = this.elem.classList,
          b = this.classes;
      !a.contains(b.pinned) && a.contains(b.unpinned) || (a.add(b.unpinned), a.remove(b.pinned), this.onUnpin && this.onUnpin.call(this));
    },
    pin: function() {
      var a = this.elem.classList,
          b = this.classes;
      a.contains(b.unpinned) && (a.remove(b.unpinned), a.add(b.pinned), this.onPin && this.onPin.call(this));
    },
    top: function() {
      var a = this.elem.classList,
          b = this.classes;
      a.contains(b.top) || (a.add(b.top), a.remove(b.notTop), this.onTop && this.onTop.call(this));
    },
    notTop: function() {
      var a = this.elem.classList,
          b = this.classes;
      a.contains(b.notTop) || (a.add(b.notTop), a.remove(b.top), this.onNotTop && this.onNotTop.call(this));
    },
    bottom: function() {
      var a = this.elem.classList,
          b = this.classes;
      a.contains(b.bottom) || (a.add(b.bottom), a.remove(b.notBottom), this.onBottom && this.onBottom.call(this));
    },
    notBottom: function() {
      var a = this.elem.classList,
          b = this.classes;
      a.contains(b.notBottom) || (a.add(b.notBottom), a.remove(b.bottom), this.onNotBottom && this.onNotBottom.call(this));
    },
    getScrollY: function() {
      return void 0 !== this.scroller.pageYOffset ? this.scroller.pageYOffset : void 0 !== this.scroller.scrollTop ? this.scroller.scrollTop : (document.documentElement || document.body.parentNode || document.body).scrollTop;
    },
    getViewportHeight: function() {
      return window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
    },
    getElementPhysicalHeight: function(a) {
      return Math.max(a.offsetHeight, a.clientHeight);
    },
    getScrollerPhysicalHeight: function() {
      return this.scroller === window || this.scroller === document.body ? this.getViewportHeight() : this.getElementPhysicalHeight(this.scroller);
    },
    getDocumentHeight: function() {
      var a = document.body,
          b = document.documentElement;
      return Math.max(a.scrollHeight, b.scrollHeight, a.offsetHeight, b.offsetHeight, a.clientHeight, b.clientHeight);
    },
    getElementHeight: function(a) {
      return Math.max(a.scrollHeight, a.offsetHeight, a.clientHeight);
    },
    getScrollerHeight: function() {
      return this.scroller === window || this.scroller === document.body ? this.getDocumentHeight() : this.getElementHeight(this.scroller);
    },
    isOutOfBounds: function(a) {
      var b = 0 > a,
          c = a + this.getScrollerPhysicalHeight() > this.getScrollerHeight();
      return b || c;
    },
    toleranceExceeded: function(a, b) {
      return Math.abs(a - this.lastKnownScrollY) >= this.tolerance[b];
    },
    shouldUnpin: function(a, b) {
      var c = a > this.lastKnownScrollY,
          d = a >= this.offset;
      return c && d && b;
    },
    shouldPin: function(a, b) {
      var c = a < this.lastKnownScrollY,
          d = a <= this.offset;
      return c && b || d;
    },
    update: function() {
      var a = this.getScrollY(),
          b = a > this.lastKnownScrollY ? "down" : "up",
          c = this.toleranceExceeded(a, b);
      this.isOutOfBounds(a) || (a <= this.offset ? this.top() : this.notTop(), a + this.getViewportHeight() >= this.getScrollerHeight() ? this.bottom() : this.notBottom(), this.shouldUnpin(a, c) ? this.unpin() : this.shouldPin(a, c) && this.pin(), this.lastKnownScrollY = a);
    }
  }, e.options = {
    tolerance: {
      up: 0,
      down: 0
    },
    offset: 0,
    scroller: window,
    classes: {
      pinned: "headroom--pinned",
      unpinned: "headroom--unpinned",
      top: "headroom--top",
      notTop: "headroom--not-top",
      bottom: "headroom--bottom",
      notBottom: "headroom--not-bottom",
      initial: "headroom"
    }
  }, e.cutsTheMustard = "undefined" != typeof f && f.rAF && f.bind && f.classList, e;
});

})();
$__System.register('b', ['8', '9', 'c', 'a'], function (_export) {
	var _createClass, _classCallCheck, utils, Headroom, WDSGlobalNavigationHeadroom;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			utils = _c;
		}, function (_a) {
			Headroom = _a['default'];
		}],
		execute: function () {
			'use strict';

			WDSGlobalNavigationHeadroom = (function () {
				function WDSGlobalNavigationHeadroom(elem, navInstance) {
					_classCallCheck(this, WDSGlobalNavigationHeadroom);

					this.elem = elem;
					this.navInstance = navInstance;
					this.headroomObj = null;

					this.topLeaderboardID = 'gpt-top-leaderboard';
					this.bigAdClassname = 'bfaa-template';
					this.pinnedClass = 'headroom--pinned';
					this.unPinnedClass = 'headroom--unpinned';
					this.bigAdPinned = 'bfaa-pinned';
					this.headroomOverride = 'headroom-override';

					this.elemHeight = this.elem.offsetHeight;
					this.adHeight = this.elem.offsetTop;
				}

				_createClass(WDSGlobalNavigationHeadroom, [{
					key: 'init',
					value: function init() {
						var _this = this;

						if (window.upstream.pageType === 'RFA') {
							this.elem.classList.add(this.headroomOverride);
						}

						var headroomConfig = {
							offset: this.adHeight + this.elemHeight,

							onPin: function onPin() {
								_this.elem.style.top = _this.elemHeight;
							},

							onUnpin: function onUnpin() {
								if (_this.elem.classList.contains(_this.navInstance.wdsDropdownIsOpen) || _this.elem.classList.contains(_this.navInstance.search.activeClass)) {
									_this.elem.classList.add(_this.pinnedClass);
									_this.elem.classList.remove(_this.unPinnedClass);
								} else {
									_this.elem.style.top = 0;
								}
							}
						};

						this.headroomObj = new Headroom(this.elem, headroomConfig);
						this.headroomObj.init();

						this.handleTopAds();
					}
				}, {
					key: 'handleTopAds',
					value: function handleTopAds() {
						var topLeaderboard = document.getElementById(this.topLeaderboardID);
						if (topLeaderboard) {
							this.setupMutationObserver(topLeaderboard);
						}
					}

				}, {
					key: 'setupMutationObserver',
					value: function setupMutationObserver(topLeaderboard) {
						var _this2 = this;

						var mutationObserver = new MutationObserver(function (mutations) {
							mutations.forEach(function (mutation) {
								if (mutation.type === 'attributes' && mutation.attributeName === 'class' && mutation.target.classList.contains(_this2.bigAdClassname)) {
									_this2.bigAdOnPage = document.querySelector('.' + _this2.bigAdClassname);

									_this2.bigAdOnPage.querySelector('iframe').addEventListener('load', function () {
										_this2.adHeight = _this2.bigAdOnPage.offsetHeight;
										_this2.headroomObj.offset = _this2.adHeight + _this2.elemHeight;

										_this2.elem.classList.add(_this2.bigAdPinned);

										_this2.setupBigAd(_this2.bigAdPinned);
										mutationObserver.disconnect();
									});
								}
							});
						});

						mutationObserver.observe(topLeaderboard, { attributes: true });
					}

				}, {
					key: 'setupBigAd',
					value: function setupBigAd(toggleClass) {
						var _this3 = this;

						var calculateAdPosition = function calculateAdPosition() {
							var height = _this3.bigAdOnPage.offsetHeight,
							    position = document.body.scrollTop || document.documentElement.scrollTop;

							if (position <= height) {
								_this3.elem.classList.add(toggleClass);
							} else {
								_this3.elem.classList.remove(toggleClass);
							}
						};

						window.addEventListener('scroll', utils.throttle(function () {
							return calculateAdPosition();
						}, 100));
					}
				}]);

				return WDSGlobalNavigationHeadroom;
			})();

			_export('default', WDSGlobalNavigationHeadroom);
		}
	};
});
$__System.register('d', ['6', '8', '9', 'e', 'c', 'b'], function (_export) {
	var WDSGlobalNavigationSearch, _createClass, _classCallCheck, riot, utils, WDSGlobalNavigationHeadroom, WDSGlobalNavigation;

	return {
		setters: [function (_3) {
			WDSGlobalNavigationSearch = _3['default'];
		}, function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_e) {
			riot = _e['default'];
		}, function (_c) {
			utils = _c;
		}, function (_b) {
			WDSGlobalNavigationHeadroom = _b['default'];
		}],
		execute: function () {
			'use strict';

			WDSGlobalNavigation = (function () {
				function WDSGlobalNavigation() {
					_classCallCheck(this, WDSGlobalNavigation);

					this.globalNav = document.querySelector('.wds-global-navigation');

					this.wdsIsActive = 'wds-is-active';
					this.wdsDropdownIsOpen = 'wds-dropdown-is-open';
					this.wdsDropdownToggle = 'wds-dropdown__toggle';

					this.wdsDropdown = 'wds-dropdown';

					this.wikisMenuClassname = 'wds-global-navigation__wikis-menu';
					this.accountMenuClassname = 'wds-global-navigation__account-menu';
					this.userMenuClassname = 'wds-global-navigation__user-menu';

					this.wikisMenu = this.globalNav.querySelector('.' + this.wikisMenuClassname);

					this.accountMenu = this.globalNav.querySelector('.' + this.accountMenuClassname + ', ' + '.' + this.userMenuClassname);
				}

				_createClass(WDSGlobalNavigation, [{
					key: 'init',
					value: function init() {
						this.appendRedirects();

						this.search = new WDSGlobalNavigationSearch(this.globalNav);
						this.search.init();

						this.globalNav.classList.add('loaded');

						this.headroom = new WDSGlobalNavigationHeadroom(this.globalNav, this);
						this.headroom.init();
					}

				}, {
					key: 'appendRedirects',
					value: function appendRedirects() {
						var links = this.accountMenu.querySelectorAll('ul a');
						var i = 0;

						while (i < links.length) {
							var paramName = links[i].getAttribute('data-param-name'),
							    href = links[i].href;

							if (paramName) {
								var redirectStartString = href.indexOf('?') > -1 ? '&' : '?';
								var queryParam = paramName + '=' + encodeURIComponent(WDSGlobalNavigation.getCurrentUrl());
								var updateHref = href + redirectStartString + queryParam;
								links[i].setAttribute('href', updateHref);
							}

							i++;
						}

						var elements = this.accountMenu.querySelectorAll('[name="redirect"]');
						[].forEach.call(elements, function (input) {
							input.setAttribute('value', WDSGlobalNavigation.getCurrentUrl());
						});
					}
				}], [{
					key: 'getCurrentUrl',
					value: function getCurrentUrl() {
						var windowStartString = window.location.href.indexOf('?') > -1 ? '&' : '?';
						var cachebust = windowStartString + utils.getTimeCachebuster();
						return window.location.href + cachebust;
					}
				}]);

				return WDSGlobalNavigation;
			})();

			_export('default', WDSGlobalNavigation);
		}
	};
});
$__System.register('f', ['10'], function (_export) {
	var _getIterator, navigation;

	function closeMenu() {
		navigation.parentNode.classList.remove('has-active-menu');
		navigation.classList.remove('is-menu-active');
		var _iteratorNormalCompletion = true;
		var _didIteratorError = false;
		var _iteratorError = undefined;

		try {
			for (var _iterator = _getIterator(navigation.querySelectorAll('[data-panel]')), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
				var panel = _step.value;

				panel.style.display = 'none';
			}
		} catch (err) {
			_didIteratorError = true;
			_iteratorError = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion && _iterator['return']) {
					_iterator['return']();
				}
			} finally {
				if (_didIteratorError) {
					throw _iteratorError;
				}
			}
		}

		document.body.classList.remove('no-scroll');
	}

	function openMenu() {
		navigation.parentNode.classList.add('has-active-menu');
		navigation.classList.add('is-menu-active');
		navigation.querySelector('[data-panel="0"]').style.display = 'block';
		document.body.classList.add('no-scroll');
	}

	function swapMenu(id) {
		var _iteratorNormalCompletion2 = true;
		var _didIteratorError2 = false;
		var _iteratorError2 = undefined;

		try {
			for (var _iterator2 = _getIterator(navigation.querySelectorAll('[data-panel]')), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
				var panel = _step2.value;

				panel.style.display = 'none';
			}
		} catch (err) {
			_didIteratorError2 = true;
			_iteratorError2 = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion2 && _iterator2['return']) {
					_iterator2['return']();
				}
			} finally {
				if (_didIteratorError2) {
					throw _iteratorError2;
				}
			}
		}

		navigation.querySelector('[data-panel="' + id + '"]').style.display = 'block';
	}

	function openSearch() {
		navigation.classList.add('is-search-active');
		var searchPanel = navigation.querySelector('.global-navigation-mobile__search-panel');
		searchPanel.style.position = 'fixed';
		navigation.querySelector('.global-navigation-mobile__search-input').focus();
		searchPanel.style.position = 'absolute';
	}

	function closeSearch() {
		navigation.classList.remove('is-search-active');
	}

	function init() {
		navigation = document.querySelector('.global-navigation-mobile');

		navigation.querySelector('.global-navigation-mobile__icon.is-menu').addEventListener('click', function (e) {
			e.preventDefault();

			if (navigation.classList.contains('is-menu-active')) {
				closeMenu();
			} else {
				closeSearch();
				openMenu();
			}
		});

		var _iteratorNormalCompletion3 = true;
		var _didIteratorError3 = false;
		var _iteratorError3 = undefined;

		try {
			for (var _iterator3 = _getIterator(navigation.querySelectorAll('.global-navigation-mobile__menu-link[data-activate-panel]')), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
				var link = _step3.value;

				link.addEventListener('click', function handler(e) {
					e.preventDefault();
					swapMenu(this.getAttribute('data-activate-panel'));
				});
			}
		} catch (err) {
			_didIteratorError3 = true;
			_iteratorError3 = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion3 && _iterator3['return']) {
					_iterator3['return']();
				}
			} finally {
				if (_didIteratorError3) {
					throw _iteratorError3;
				}
			}
		}

		navigation.querySelector('.global-navigation-mobile__icon.is-search').addEventListener('click', function (e) {
			e.preventDefault();

			if (navigation.classList.contains('is-search-active')) {
				closeSearch();
			} else {
				closeMenu();
				openSearch();
			}
		});

		var url = window.location.href;
		var redirectsLinks = navigation.querySelectorAll('a[data-param-name="redirect"]');
		var _iteratorNormalCompletion4 = true;
		var _didIteratorError4 = false;
		var _iteratorError4 = undefined;

		try {
			for (var _iterator4 = _getIterator(redirectsLinks), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
				var a = _step4.value;

				a.href += '?redirect=' + encodeURIComponent(url);
			}

		} catch (err) {
			_didIteratorError4 = true;
			_iteratorError4 = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion4 && _iterator4['return']) {
					_iterator4['return']();
				}
			} finally {
				if (_didIteratorError4) {
					throw _iteratorError4;
				}
			}
		}

		var redirectsInput = navigation.querySelectorAll('input[name="redirect"]');
		var _iteratorNormalCompletion5 = true;
		var _didIteratorError5 = false;
		var _iteratorError5 = undefined;

		try {
			for (var _iterator5 = _getIterator(redirectsInput), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
				var input = _step5.value;

				input.setAttribute('value', url);
			}
		} catch (err) {
			_didIteratorError5 = true;
			_iteratorError5 = err;
		} finally {
			try {
				if (!_iteratorNormalCompletion5 && _iterator5['return']) {
					_iterator5['return']();
				}
			} finally {
				if (_didIteratorError5) {
					throw _iteratorError5;
				}
			}
		}
	}

	return {
		setters: [function (_) {
			_getIterator = _['default'];
		}],
		execute: function () {
			'use strict';

			navigation = undefined;

			_export('default', {
				init: init
			});
		}
	};
});
$__System.register('11', ['12', 'c', 'e', 'd', 'f'], function (_export) {
	var _Promise, utils, riot, WDSGlobalNavigation, globalNavigationMobile;

	function init() {
		var navPlaceholder = document.querySelector('.wds-global-navigation-wrapper.is-placeholder');
		if (navPlaceholder) {
			displayMenu(navPlaceholder).then(initElements)['catch'](function (message) {
				if (message) {
					console.log('Unable to display nav user menu: ' + message);
				}
			});
		} else {
			initElements();
		}
	}

	function initElements() {
		var GlobalNav = new WDSGlobalNavigation();
		GlobalNav.init();

		globalNavigationMobile.init();

		var hubs = document.querySelectorAll('.wds-global-navigation__links-and-search > .wds-global-navigation__link');
		[].forEach.call(hubs, function (hubLink) {
			var getPath = function getPath(link) {
				return link.toString().replace(/^(https?:)?\/\/[^\/]+\//, '/').replace(/\?.*/, '');
			};
			if (getPath(hubLink.href) === getPath(window.location)) {
				hubLink.classList.add('wds-is-active');
			}
		});

		var trackableElements = document.querySelectorAll('.wds-global-navigation-wrapper [data-tracking]');
		[].forEach.call(trackableElements, function (trackable) {
			riot.mount(trackable, 'trackable');
		});
	}

	function displayMenu(navPlaceholder) {
		return new _Promise(function (resolve, reject) {
			fetchMenu().then(function (markup) {
				navPlaceholder.outerHTML = markup;
				resolve();
			})['catch'](reject);
		});
	}

	function fetchMenu() {
		return new _Promise(function (resolve, reject) {
			var siteUrl = window.upstream.siteUrl;
			var lang = window.upstream.contentLanguage || utils.getLanguage();
			utils.ajax({
				url: siteUrl + '/api/nav_user_menu/?uselang=' + encodeURIComponent(lang),
				json: true,
				withCredentials: true,
				success: function success(response) {
					if (response.success) {
						resolve(response.markup);
					} else {
						reject(response.message);
					}
				},
				error: function error() {
					reject('A server error occurred');
				}
			});
		});
	}

	return {
		setters: [function (_) {
			_Promise = _['default'];
		}, function (_c) {
			utils = _c;
		}, function (_e) {
			riot = _e['default'];
		}, function (_d) {
			WDSGlobalNavigation = _d['default'];
		}, function (_f) {
			globalNavigationMobile = _f['default'];
		}],
		execute: function () {
			'use strict';

			_export('default', {
				init: init
			});
		}
	};
});
$__System.register('13', ['8', '9', '10'], function (_export) {
	var _createClass, _classCallCheck, _getIterator, Prefetcher;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			_getIterator = _3['default'];
		}],
		execute: function () {
			'use strict';

			Prefetcher = (function () {
				function Prefetcher() {
					_classCallCheck(this, Prefetcher);
				}

				_createClass(Prefetcher, null, [{
					key: 'prefetchResource',

					value: function prefetchResource(url) {
						var type = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];

						var link = document.createElement('link');
						link.href = url;
						link.rel = 'prefetch';
						if (type) {
							link.as = type;
						}
						document.head.appendChild(link);
					}

				}, {
					key: 'prefetchOnHover',
					value: function prefetchOnHover(selector) {
						var links = document.querySelectorAll(selector);

						var _iteratorNormalCompletion = true;
						var _didIteratorError = false;
						var _iteratorError = undefined;

						try {
							for (var _iterator = _getIterator(links), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
								var link = _step.value;

								if (link.href) {
									link.addEventListener('mouseenter', Prefetcher.prefetchHoverHandler);
								}
							}
						} catch (err) {
							_didIteratorError = true;
							_iteratorError = err;
						} finally {
							try {
								if (!_iteratorNormalCompletion && _iterator['return']) {
									_iterator['return']();
								}
							} finally {
								if (_didIteratorError) {
									throw _iteratorError;
								}
							}
						}
					}

				}, {
					key: 'prefetchHoverHandler',
					value: function prefetchHoverHandler() {
						this.removeEventListener('mouseenter', Prefetcher.prefetchHoverHandler);
						Prefetcher.prefetchResource(this.href);
					}

				}, {
					key: 'prefetchLinks',
					value: function prefetchLinks(selector) {
						var links = document.querySelectorAll(selector);

						var _iteratorNormalCompletion2 = true;
						var _didIteratorError2 = false;
						var _iteratorError2 = undefined;

						try {
							for (var _iterator2 = _getIterator(links), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
								var link = _step2.value;

								if (link.href) {
									Prefetcher.prefetchResource(link.href);
								}
							}
						} catch (err) {
							_didIteratorError2 = true;
							_iteratorError2 = err;
						} finally {
							try {
								if (!_iteratorNormalCompletion2 && _iterator2['return']) {
									_iterator2['return']();
								}
							} finally {
								if (_didIteratorError2) {
									throw _iteratorError2;
								}
							}
						}
					}
				}]);

				return Prefetcher;
			})();

			_export('default', Prefetcher);
		}
	};
});
$__System.register('14', ['8', '9', '15', '16', '17', '18'], function (_export) {
	var _createClass, _classCallCheck, Context, SlotTweaker, StringBuilder, TemplateService, AdSlot;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			Context = _3['default'];
		}, function (_4) {
			SlotTweaker = _4['default'];
		}, function (_5) {
			StringBuilder = _5['default'];
		}, function (_6) {
			TemplateService = _6['default'];
		}],
		execute: function () {
			'use strict';

			AdSlot = (function () {

				function AdSlot(ad) {
					_classCallCheck(this, AdSlot);

					var segments = ad.id.split('-');

					if (segments.length < 3) {
						throw new Error('Invalid GPT id passed to parseId (' + ad.id + ').');
					}

					this.id = ad.id;
					this.location = segments[1];
					this.screenSize = segments[3] ? segments[3] : 'both';
					this.type = segments[2];
					this.config = Context.get('slots.' + this.location + '-' + this.type);
					this.enabled = !this.config.disabled;
				}

				_createClass(AdSlot, [{
					key: 'getId',
					value: function getId() {
						return this.id;
					}
				}, {
					key: 'getAdUnit',
					value: function getAdUnit() {
						if (!this.adUnit) {
							this.adUnit = StringBuilder.build(Context.get('adUnitId'), {
								slotName: this.getSlotName()
							});
						}

						return this.adUnit;
					}
				}, {
					key: 'getSlotName',
					value: function getSlotName() {
						return this.config.slotName;
					}
				}, {
					key: 'getSizes',
					value: function getSizes() {
						return this.config.sizes;
					}
				}, {
					key: 'getTargeting',
					value: function getTargeting() {
						return this.config.targeting;
					}
				}, {
					key: 'getDefaultSizes',
					value: function getDefaultSizes() {
						return this.config.defaultSizes;
					}
				}, {
					key: 'shouldLoad',
					value: function shouldLoad() {
						var isMobile = Context.get('state.isMobile'),
						    shouldLoad = this.screenSize === 'both',
						    shouldLoadDesktop = !isMobile && this.screenSize === 'desktop',
						    shouldLoadMobile = isMobile && this.screenSize === 'mobile';

						return shouldLoad || shouldLoadDesktop || shouldLoadMobile;
					}
				}, {
					key: 'isAboveTheFold',
					value: function isAboveTheFold() {
						return !!this.config.aboveTheFold;
					}
				}, {
					key: 'isEnabled',
					value: function isEnabled() {
						return this.enabled;
					}
				}, {
					key: 'enable',
					value: function enable() {
						this.enabled = true;
					}
				}, {
					key: 'disable',
					value: function disable() {
						this.enabled = false;
					}
				}, {
					key: 'success',
					value: function success() {
						SlotTweaker.show(this);

						if (this.config.defaultTemplate) {
							TemplateService.init(this.config.defaultTemplate, this);
						}
					}
				}, {
					key: 'collapse',
					value: function collapse() {
						SlotTweaker.hide(this);
					}
				}]);

				return AdSlot;
			})();

			_export('default', AdSlot);
		}
	};
});
$__System.register('19', ['8', '9', '1a', '1b'], function (_export) {
	var _createClass, _classCallCheck, getTopOffset, ScrollListener, FloatingAd;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_a) {
			getTopOffset = _a.getTopOffset;
		}, function (_b) {
			ScrollListener = _b['default'];
		}],
		execute: function () {
			'use strict';

			FloatingAd = (function () {
				function FloatingAd(adSlot) {
					_classCallCheck(this, FloatingAd);

					this.adSlot = adSlot;
				}

				_createClass(FloatingAd, [{
					key: 'init',
					value: function init() {
						var slotNode = document.getElementById(this.adSlot.getId());

						var container = undefined,
						    containerOffset = undefined,
						    end = undefined,
						    slotHeight = undefined,
						    space = undefined,
						    start = 0;

						if (!slotNode || !slotNode.classList.contains('floating')) {
							return;
						}

						ScrollListener.addCallback(function () {
							var scrollPosition = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;

							container = slotNode.parentNode;
							containerOffset = getTopOffset(container);
							slotHeight = slotNode.offsetHeight;
							end = containerOffset + container.offsetHeight - slotHeight;

							start = containerOffset;
							if (slotNode.previousElementSibling) {
								start = getTopOffset(slotNode.previousElementSibling) + slotNode.previousElementSibling.offsetHeight;
							}

							space = end - start;
							if (space <= slotHeight) {
								slotNode.classList.add('pinned-top');
								slotNode.classList.remove('pinned-bottom');
								return;
							}

							if (scrollPosition <= start) {
								slotNode.classList.add('pinned-top');
								slotNode.classList.remove('pinned-bottom');
							} else if (scrollPosition >= end) {
								slotNode.classList.add('pinned-bottom');
								slotNode.classList.remove('pinned-top');
							} else {
								slotNode.classList.remove('pinned-top');
								slotNode.classList.remove('pinned-bottom');
							}
						});
					}
				}]);

				return FloatingAd;
			})();

			_export('default', FloatingAd);
		}
	};
});
$__System.register('1c', [], function (_export) {
	'use strict';

	_export('makeLazyQueue', makeLazyQueue);

	function makeLazyQueue(queue, callback) {
		if (typeof callback !== 'function') {
			throw new Error('LazyQueue used with callback not being a function');
		} else if (queue instanceof Array) {
			queue.start = function () {
				while (queue.length > 0) {
					callback(queue.shift());
				}
				queue.push = function (item) {
					callback(item);
				};
			};
		} else {
			throw new Error('LazyQueue requires an array as the first parameter');
		}
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('1d', ['15', '1e'], function (_export) {
	var Context, _Object$keys;

	function setupGptTargeting() {
		var tag = window.googletag.pubads(),
		    targeting = Context.get('targeting');

		_Object$keys(targeting).forEach(function (key) {
			tag.setTargeting(key, targeting[key]);
		});

		Context.onChange('targeting', function (trigger, value) {
			var segments = trigger.split('.'),
			    key = segments[segments.length - 1];

			tag.setTargeting(key, value);
		});
	}

	return {
		setters: [function (_) {
			Context = _['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}],
		execute: function () {
			'use strict';

			_export('setupGptTargeting', setupGptTargeting);
		}
	};
});
$__System.register('1f', ['8', '9', '20'], function (_export) {
	var _createClass, _classCallCheck, logger, logGroup, SlotListener;

	function getIframe(adSlot) {
		return document.getElementById(adSlot.getId()).querySelector('div[id*="_container_"] iframe');
	}

	function getAdType(event, adSlot) {
		var iframe = getIframe(adSlot);

		var isIframeAccessible = false;

		if (event.isEmpty) {
			return 'collapse';
		}

		try {
			isIframeAccessible = !!iframe.contentWindow.document.querySelector;
		} catch (e) {
			logger(logGroup, 'getAdType', 'iframe is not accessible');
		}

		if (isIframeAccessible && iframe.contentWindow.AdEngine_adType) {
			return iframe.contentWindow.AdEngine_adType;
		}

		return 'success';
	}

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			logger = _3.logger;
		}],
		execute: function () {
			'use strict';

			logGroup = 'slot-listener';

			SlotListener = (function () {
				function SlotListener() {
					_classCallCheck(this, SlotListener);
				}

				_createClass(SlotListener, null, [{
					key: 'onRenderEnded',
					value: function onRenderEnded(event, adSlot) {
						var adType = getAdType(event, adSlot);

						logger(logGroup, 'onRenderEnded', adSlot.getId(), adType);

						switch (adType) {
							case 'collapse':
								adSlot.collapse();
								break;
							default:
								adSlot.success();
								break;
						}
					}
				}]);

				return SlotListener;
			})();

			_export('default', SlotListener);
		}
	};
});
$__System.register('21', ['8', '9', '20', '22', '1e', '1c', '1d', '1f'], function (_export) {
	var _createClass, _classCallCheck, logger, SlotService, _Object$keys, makeLazyQueue, setupGptTargeting, SlotListener, logGroup, slotsQueue, atfEnded, definedSlots, initialized, Gpt;

	function finishAtf() {
		atfEnded = true;
		if (window.ads.runtime.disableBtf) {
			SlotService.forEach(function (adSlot) {
				if (!adSlot.isAboveTheFold()) {
					SlotService.disable(adSlot.getSlotName());
				}
			});
		}
		slotsQueue.start();
	}

	function configure() {
		var tag = window.googletag.pubads();

		tag.enableSingleRequest();
		tag.disableInitialLoad();
		tag.addEventListener('slotRenderEnded', function (event) {
			var id = event.slot.getSlotElementId(),
			    slot = SlotService.get(id);

			if (!atfEnded && slot.isAboveTheFold()) {
				finishAtf();
			}

			setTimeout(function () {
				SlotListener.onRenderEnded(event, slot);
			}, 0);
		});
		window.googletag.enableServices();
	}

	function shouldPush(adSlot) {
		if (!atfEnded && !adSlot.isAboveTheFold()) {
			slotsQueue.push(adSlot);
			logger(logGroup, adSlot.getId(), 'BTF slot pushed to queue');
			return false;
		}

		if (atfEnded && !adSlot.isEnabled()) {
			logger(logGroup, adSlot.getId(), 'BTF slot blocked');
			return false;
		}

		return true;
	}

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			logger = _3.logger;
		}, function (_4) {
			SlotService = _4['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}, function (_c) {
			makeLazyQueue = _c.makeLazyQueue;
		}, function (_d) {
			setupGptTargeting = _d.setupGptTargeting;
		}, function (_f) {
			SlotListener = _f['default'];
		}],
		execute: function () {
			'use strict';

			logGroup = 'gpt-provider';
			slotsQueue = [];
			atfEnded = false;
			definedSlots = [];
			initialized = false;

			Gpt = (function () {
				function Gpt() {
					var _this = this;

					_classCallCheck(this, Gpt);

					window.googletag = window.googletag || {};
					window.googletag.cmd = window.googletag.cmd || [];

					window.googletag.cmd.push(function () {
						_this.init();
					});
				}

				_createClass(Gpt, [{
					key: 'init',
					value: function init() {
						var _this2 = this;

						if (initialized) {
							return;
						}

						setupGptTargeting();
						configure();
						makeLazyQueue(slotsQueue, function (adSlot) {
							_this2.fillIn(adSlot);
						});
						initialized = true;
					}
				}, {
					key: 'fillIn',
					value: function fillIn(adSlot) {
						var _this3 = this;

						if (!shouldPush(adSlot)) {
							return;
						}

						window.googletag.cmd.push(function () {
							var sizeMapping = window.googletag.sizeMapping(),
							    targeting = adSlot.getTargeting();

							var gptSlot = null;

							adSlot.getSizes().forEach(function (item) {
								sizeMapping.addSize(item.viewportSize, item.sizes);
							});

							gptSlot = window.googletag.defineSlot(adSlot.getAdUnit(), adSlot.getDefaultSizes(), adSlot.getId()).addService(window.googletag.pubads()).setCollapseEmptyDiv(true).defineSizeMapping(sizeMapping.build()).setTargeting('pos', adSlot.getSlotName()).setTargeting('src', 'gpt');

							_Object$keys(targeting).forEach(function (key) {
								var value = targeting[key];

								if (typeof value === 'function') {
									value = value();
								}

								gptSlot.setTargeting(key, value);
							});

							window.googletag.display(adSlot.getId());
							definedSlots.push(gptSlot);

							if (atfEnded) {
								_this3.flush();
							}

							logger(logGroup, adSlot.getId(), 'slot added');
						});
					}
				}, {
					key: 'flush',
					value: function flush() {
						window.googletag.cmd.push(function () {
							if (definedSlots.length) {
								window.googletag.pubads().refresh(definedSlots);
								definedSlots = [];
							}
						});
					}
				}]);

				return Gpt;
			})();

			_export('default', Gpt);
		}
	};
});
$__System.register('18', ['8', '9', '20'], function (_export) {
	var _createClass, _classCallCheck, logger, logGroup, templates, TemplateService;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			logger = _3.logger;
		}],
		execute: function () {
			'use strict';

			logGroup = 'template-service';
			templates = {};

			TemplateService = (function () {
				function TemplateService() {
					_classCallCheck(this, TemplateService);
				}

				_createClass(TemplateService, null, [{
					key: 'register',
					value: function register(name, template) {
						templates[name] = template;
					}
				}, {
					key: 'init',
					value: function init(name, slot) {
						var params = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

						logger(logGroup, 'Load template', name, slot, params);
						if (!templates[name]) {
							throw new Error('Template ' + name + ' does not exist.');
						}

						return new templates[name](slot).init(params);
					}
				}]);

				return TemplateService;
			})();

			_export('default', TemplateService);
		}
	};
});
$__System.register('23', ['8', '9', '14', '15', '16', '18', '19', '21', '22', '24', '1c', '1b'], function (_export) {
	var _createClass, _classCallCheck, AdSlot, Context, SlotTweaker, TemplateService, FloatingAd, GptProvider, SlotService, MessageBus, makeLazyQueue, ScrollListener, AdEngine;

	function fillInUsingProvider(ad, provider) {
		var adSlot = new AdSlot(ad);

		if (adSlot.shouldLoad()) {
			SlotService.add(adSlot);
			provider.fillIn(adSlot);
		}
	}

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			AdSlot = _3['default'];
		}, function (_4) {
			Context = _4['default'];
		}, function (_9) {
			SlotTweaker = _9['default'];
		}, function (_10) {
			TemplateService = _10['default'];
		}, function (_5) {
			FloatingAd = _5['default'];
		}, function (_6) {
			GptProvider = _6['default'];
		}, function (_8) {
			SlotService = _8['default'];
		}, function (_7) {
			MessageBus = _7['default'];
		}, function (_c) {
			makeLazyQueue = _c.makeLazyQueue;
		}, function (_b) {
			ScrollListener = _b['default'];
		}],
		execute: function () {
			'use strict';

			AdEngine = (function () {
				function AdEngine() {
					_classCallCheck(this, AdEngine);

					this.adStack = Context.get('state.adStack');

					window.ads = window.ads || {};
					window.ads.runtime = window.ads.runtime || {};

					TemplateService.register('floating-ad', FloatingAd);
				}

				_createClass(AdEngine, [{
					key: 'init',
					value: function init() {
						var _this = this;

						var provider = new GptProvider();

						makeLazyQueue(this.adStack, function (ad) {
							fillInUsingProvider(ad, provider);

							if (_this.adStack.length === 0) {
								provider.flush();
							}
						});
						MessageBus.init();
						SlotTweaker.registerMessageListener();
						this.adStack.start();

						ScrollListener.init();

						if (Context.get('events.pushOnScroll')) {
							Context.get('events.pushOnScroll.ids').forEach(function (id) {
								ScrollListener.addSlot(_this.adStack, id, Context.get('events.pushOnScroll.threshold'));
							});
						}
					}
				}]);

				return AdEngine;
			})();

			_export('default', AdEngine);
		}
	};
});
$__System.register('25', ['8', '9', 'c'], function (_export) {
	var _createClass, _classCallCheck, utils, AdSkin;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			utils = _c;
		}],
		execute: function () {
			'use strict';

			AdSkin = (function () {

				function AdSkin(params, scrollRefElement) {
					_classCallCheck(this, AdSkin);

					this.params = params;
					this.skinElem = document.getElementById('ad-skin');
					this.skinStyle = this.skinElem.style;
					this.scrollRefElem = scrollRefElement;
				}


				_createClass(AdSkin, [{
					key: 'init',
					value: function init() {
						var _this = this;

						document.body.classList.add('skin-ad');

						if (this.params.backgroundColor) {
							var bgColorMatch = this.params.backgroundColor.match(/(#)?(.+)/);
							this.skinStyle.backgroundColor = '#' + bgColorMatch[2];
						}

						if (this.params.skinImage) {
							this.skinStyle.backgroundImage = 'url("' + this.params.skinImage + '")';
						}

						if (this.params.destUrl) {
							this.skinStyle.cursor = 'pointer';
							this.skinElem.addEventListener('click', function (e) {
								return _this.clickThrough(e);
							});
						}

						if (this.params.pixels) {
							this.params.pixels.forEach(function (pixelUrl) {
								if (pixelUrl) {
									var pixelElement = document.createElement('img');
									pixelElement.src = pixelUrl;
									pixelElement.width = 1;
									pixelElement.height = 1;
									_this.skinElem.appendChild(pixelElement);
								}
							});
						}

						this.adjustPosition();
						window.addEventListener('scroll', function () {
							return _this.adjustPosition();
						});
					}

				}, {
					key: 'clickThrough',
					value: function clickThrough() {
						window.open(this.params.destUrl);
					}

				}, {
					key: 'adjustPosition',
					value: function adjustPosition() {
						if (this.scrollRefElem.getBoundingClientRect().bottom < 0) {
							this.skinElem.classList.add('fixed');
						} else {
							this.skinElem.classList.remove('fixed');
						}
					}
				}]);

				return AdSkin;
			})();

			_export('default', AdSkin);
		}
	};
});
$__System.register('26', ['8', '9', '16', '22', '27', '28', '29', '2a'], function (_export) {
	var _createClass, _classCallCheck, SlotTweaker, SlotService, ResolvedState, ToggleAnimation, UniversalAdPackage, VideoSettings, BigFancyAdAbove;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_5) {
			SlotTweaker = _5['default'];
		}, function (_4) {
			SlotService = _4['default'];
		}, function (_3) {
			ResolvedState = _3['default'];
		}, function (_6) {
			ToggleAnimation = _6['default'];
		}, function (_7) {
			UniversalAdPackage = _7['default'];
		}, function (_a) {
			VideoSettings = _a['default'];
		}],
		execute: function () {
			'use strict';

			BigFancyAdAbove = (function () {

				function BigFancyAdAbove(params) {
					_classCallCheck(this, BigFancyAdAbove);

					this.adSlot = SlotService.getBySlotName('TOP_LEADERBOARD');
					this.container = document.getElementById(this.adSlot.getId());
					this.params = params;
					this.videoSettings = null;
				}


				_createClass(BigFancyAdAbove, [{
					key: 'init',
					value: function init() {
						if (!this.container) {
							return;
						}

						UniversalAdPackage.init(this.params.uap);

						this.videoSettings = new VideoSettings(this.params);

						this.container.style.backgroundColor = this.getBackgroundColor();
						this.container.classList.add('bfaa-template');
						ResolvedState.setImage(this.videoSettings);
						SlotTweaker.makeResponsive(this.adSlot, this.params.aspectRatio);
						SlotTweaker.onReady(this.adSlot, this.adIsReady.bind(this));
					}
				}, {
					key: 'getBackgroundColor',
					value: function getBackgroundColor() {
						return this.params.backgroundColor ? '#' + this.params.backgroundColor.replace('#', '') : '000';
					}
				}, {
					key: 'adIsReady',
					value: function adIsReady(iframe) {
						var _this = this;

						document.body.style.paddingTop = iframe.parentElement.style.paddingBottom;

						if (UniversalAdPackage.isVideoEnabled(this.params)) {
							UniversalAdPackage.loadVideoAd(this.videoSettings).then(function (video) {
								if (!_this.params.splitLayoutVideoPosition) {
									video.addEventListener('wikiaAdStarted', function () {
										_this.recalculatePaddingTop(_this.params.videoAspectRatio);
									});

									video.addEventListener('wikiaAdCompleted', function () {
										_this.recalculatePaddingTop(_this.params.aspectRatio);
									});
								}

								return video;
							});
						}
					}
				}, {
					key: 'recalculatePaddingTop',
					value: function recalculatePaddingTop(finalAspectRatio) {
						var _this2 = this;

						document.body.style.paddingTop = 100 / finalAspectRatio + '%';

						this.container.style.height = this.container.offsetHeight + 'px';
						this.container.style.height = this.container.offsetWidth / finalAspectRatio + 'px';

						setTimeout(function () {
							_this2.container.style.height = '';
						}, ToggleAnimation.duration);
					}
				}]);

				return BigFancyAdAbove;
			})();

			_export('default', BigFancyAdAbove);
		}
	};
});
$__System.register('2b', ['15', '20', '2c', '2d'], function (_export) {
	'use strict';

	var Context, logger, QueryString, buildVastUrl, logGroup;

	function getOverriddenVast() {
		if (QueryString.get('porvata_override_vast') === '1') {
			var vastXML = window.localStorage.getItem('porvata_vast');
			logger(logGroup, 'Overridden VAST', vastXML);

			return vastXML;
		}

		return null;
	}

	function createRequest(params) {
		var adsRequest = new window.google.ima.AdsRequest(),
		    overriddenVast = getOverriddenVast();

		if (params.vastResponse || overriddenVast) {
			adsRequest.adsResponse = overriddenVast || params.vastResponse;
		}

		adsRequest.adTagUrl = params.vastUrl || buildVastUrl(params.width / params.height, params.vastTargeting);
		adsRequest.linearAdSlotWidth = params.width;
		adsRequest.linearAdSlotHeight = params.height;

		return adsRequest;
	}

	function getRenderingSettings() {
		var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

		var adsRenderingSettings = new window.google.ima.AdsRenderingSettings(),
		    maximumRecommendedBitrate = 68000; 

		if (!Context.get('state.isMobile')) {
			adsRenderingSettings.bitrate = maximumRecommendedBitrate;
		}

		adsRenderingSettings.loadVideoTimeout = params.loadVideoTimeout || 15000;
		adsRenderingSettings.enablePreloading = true;
		adsRenderingSettings.uiElements = [];

		return adsRenderingSettings;
	}

	return {
		setters: [function (_) {
			Context = _['default'];
		}, function (_2) {
			logger = _2.logger;
		}, function (_c) {
			QueryString = _c['default'];
		}, function (_d) {
			buildVastUrl = _d.build;
		}],
		execute: function () {
			logGroup = 'google-ima-setup';

			_export('default', {
				createRequest: createRequest,
				getRenderingSettings: getRenderingSettings
			});
		}
	};
});
$__System.register("2e", [], function (_export) {
	"use strict";

	var eventMapping, listeners, moatapi;

	function initMoatTracking(a, f, c) {
		if (!1 === f.hasOwnProperty("partnerCode")) return !1;var g = document.createElement("script");c = c || a && ("undefined" !== typeof a.O ? a.O.parentNode : document.body) || document.body;listeners = [];moatapi = { adsManager: a, ids: f, imaSDK: !0, events: [] };eventMapping = { complete: "AdVideoComplete", firstquartile: "AdVideoFirstQuartile", impression: "AdImpression", loaded: "AdLoaded", midpoint: "AdVideoMidpoint", pause: "AdPaused", skip: "AdSkipped", start: "AdVideoStart", thirdquartile: "AdVideoThirdQuartile", volumeChange: "AdVolumeChange" };if (google && google.ima && a) {
			var d = "_moatApi" + Math.floor(1E8 * Math.random()),
			    h;for (h in google.ima.AdEvent.Type) {
				var l = function l(b) {
					if (moatapi.sendEvent) {
						for (b = listeners.length - 1; 0 <= b; b--) a.removeEventListener(listeners[b].type, listeners[b].func);moatapi.sendEvent(moatapi.events);
					} else moatapi.events.push({ type: eventMapping[b.type] || b.type, adVolume: a.getVolume() });
				};a.addEventListener(google.ima.AdEvent.Type[h], l);listeners.push({ type: google.ima.AdEvent.Type[h], func: l });
			}
		}var d = "undefined" !== typeof d ? d : "",
		    e,
		    k;try {
			e = c.ownerDocument, k = e.defaultView || e.parentWindow;
		} catch (m) {
			e = document, k = window;
		}k[d] = moatapi;g.type = "text/javascript";c && c.appendChild(g);g.src = "https://z.moatads.com/" + f.partnerCode + "/moatvideo.js#" + d;
	}return {
		setters: [],
		execute: function () {
			eventMapping = {};
			listeners = [];
			moatapi = {};
			;

			_export("default", initMoatTracking);
		}
	};
});
$__System.register('2f', ['8', '9', '20', '2e'], function (_export) {
	var _createClass, _classCallCheck, logger, initMoatTracking, logGroup, partnerCode, MoatVideoTracker;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			logger = _3.logger;
		}, function (_e) {
			initMoatTracking = _e['default'];
		}],
		execute: function () {
			'use strict';

			logGroup = 'moat-video-tracker';
			partnerCode = 'wikiaimajsint377461931603';

			MoatVideoTracker = (function () {
				function MoatVideoTracker() {
					_classCallCheck(this, MoatVideoTracker);
				}

				_createClass(MoatVideoTracker, null, [{
					key: 'init',
					value: function init(adsManager, container, viewMode, slicer1, slicer2) {
						var ids = {
							partnerCode: partnerCode,
							viewMode: viewMode,
							slicer1: slicer1,
							slicer2: slicer2
						};

						try {
							initMoatTracking(adsManager, ids, container);
							logger(logGroup, 'MOAT video tracking initialized');
						} catch (error) {
							logger(logGroup, 'MOAT video tracking initalization error', error);
						}
					}
				}]);

				return MoatVideoTracker;
			})();

			_export('default', MoatVideoTracker);
		}
	};
});
$__System.register('30', ['8', '9', '2b', '2f'], function (_export) {
	var _createClass, _classCallCheck, GoogleImaSetup, MoatVideoTracker, GoogleImaPlayer, GoogleImaFactory;

	function getVideoElement() {
		var videoElement = document.createElement('video');

		videoElement.setAttribute('preload', 'none');

		return videoElement;
	}

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_b) {
			GoogleImaSetup = _b['default'];
		}, function (_f) {
			MoatVideoTracker = _f['default'];
		}],
		execute: function () {
			'use strict';

			GoogleImaPlayer = (function () {
				function GoogleImaPlayer(adDisplayContainer, adsLoader, params) {
					_classCallCheck(this, GoogleImaPlayer);

					this.isAdsManagerLoaded = false;
					this.status = '';
					this.adDisplayContainer = adDisplayContainer;
					this.adsLoader = adsLoader;
					this.adsManager = null;
					this.params = params;
					this.mobileVideoAd = params.container.querySelector('video');
					this.eventListeners = {};
				}

				_createClass(GoogleImaPlayer, [{
					key: 'setAdsManager',
					value: function setAdsManager(adsManager) {
						this.adsManager = adsManager;
						this.isAdsManagerLoaded = true;
					}
				}, {
					key: 'addEventListener',
					value: function addEventListener(eventName, callback) {
						var _this = this;

						if (eventName.indexOf('wikia') !== -1) {
							this.eventListeners[eventName] = this.eventListeners[eventName] || [];
							this.eventListeners[eventName].push(callback);
							return;
						}

						if (this.isAdsManagerLoaded) {
							this.adsManager.addEventListener(eventName, callback);
						} else {
							this.adsLoader.addEventListener('adsManagerLoaded', function () {
								_this.adsManager.addEventListener(eventName, callback);
							});
						}
					}
				}, {
					key: 'setAutoPlay',
					value: function setAutoPlay(value) {
						if (this.mobileVideoAd) {
							this.mobileVideoAd.autoplay = value;
							this.mobileVideoAd.muted = value;
						}
					}
				}, {
					key: 'playVideo',
					value: function playVideo(width, height) {
						var _this2 = this;

						var callback = function callback() {
							_this2.adDisplayContainer.initialize();
							_this2.adsManager.init(Math.round(width), Math.round(height), window.google.ima.ViewMode.NORMAL);
							_this2.adsManager.start();
							_this2.adsLoader.removeEventListener('adsManagerLoaded', callback);
						};

						if (this.isAdsManagerLoaded) {
							callback();
						} else {
							this.setAutoPlay(true);
							this.adsLoader.addEventListener('adsManagerLoaded', callback, false);
						}
					}
				}, {
					key: 'reload',
					value: function reload() {
						this.adsManager.destroy();
						this.adsLoader.contentComplete();
						this.adsLoader.requestAds(GoogleImaSetup.createRequest(this.params));
					}
				}, {
					key: 'resize',
					value: function resize(width, height) {
						if (this.adsManager) {
							this.adsManager.resize(Math.round(width), Math.round(height), window.google.ima.ViewMode.NORMAL);
						}
					}
				}, {
					key: 'dispatchEvent',
					value: function dispatchEvent(eventName) {
						if (this.eventListeners[eventName] && this.eventListeners[eventName].length > 0) {
							this.eventListeners[eventName].forEach(function (callback) {
								callback({});
							});
						}
					}
				}, {
					key: 'setStatus',
					value: function setStatus(newStatus) {
						var _this3 = this;

						return function () {
							_this3.status = newStatus;
						};
					}
				}, {
					key: 'getStatus',
					value: function getStatus() {
						return this.status;
					}
				}, {
					key: 'getAdsManager',
					value: function getAdsManager() {
						return this.adsManager;
					}
				}]);

				return GoogleImaPlayer;
			})();

			GoogleImaFactory = (function () {
				function GoogleImaFactory() {
					_classCallCheck(this, GoogleImaFactory);
				}

				_createClass(GoogleImaFactory, null, [{
					key: 'create',
					value: function create(adDisplayContainer, adsLoader, params) {
						var player = new GoogleImaPlayer(adDisplayContainer, adsLoader, params),
						    videoElement = getVideoElement();

						adsLoader.addEventListener('adsManagerLoaded', function (adsManagerLoadedEvent) {
							var renderingSettings = GoogleImaSetup.getRenderingSettings(params),
							    adsManager = adsManagerLoadedEvent.getAdsManager(videoElement, renderingSettings);
							player.setAdsManager(adsManager);

							if (params.moatTracking) {
								MoatVideoTracker.init(adsManager, params.container, window.google.ima.ViewMode.NORMAL);
							}
						}, false);
						adsLoader.requestAds(GoogleImaSetup.createRequest(params));
						if (params.autoPlay) {
							player.setAutoPlay(true);
						}

						player.addEventListener('resume', player.setStatus('playing'));
						player.addEventListener('start', player.setStatus('playing'));
						player.addEventListener('pause', player.setStatus('paused'));

						return player;
					}
				}]);

				return GoogleImaFactory;
			})();

			_export('default', GoogleImaFactory);
		}
	};
});
$__System.register('31', ['12'], function (_export) {
	var _Promise;

	return {
		setters: [function (_) {
			_Promise = _['default'];
		}],
		execute: function () {
			'use strict';

			_export('default', {
				createScript: function createScript(src) {
					var type = arguments.length <= 1 || arguments[1] === undefined ? 'text/javascript' : arguments[1];
					var isAsync = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];
					var node = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];

					var script = document.createElement('script');

					node = node || document.body.lastChild;
					script.async = isAsync;
					script.type = type;
					script.src = src;
					node.parentNode.insertBefore(script, node);

					return script;
				},

				loadScript: function loadScript(src) {
					var type = arguments.length <= 1 || arguments[1] === undefined ? 'text/javascript' : arguments[1];

					var _this = this;

					var isAsync = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];
					var node = arguments.length <= 3 || arguments[3] === undefined ? null : arguments[3];

					return new _Promise(function (resolve, reject) {
						var script = _this.createScript(src, type, isAsync, node);

						script.onload = resolve;
						script.onerror = reject;
					});
				}
			});
		}
	};
});
$__System.register('32', ['12', '30', '31'], function (_export) {
	var _Promise, GoogleImaPlayerFactory, ScriptLoader, imaLibraryUrl;

	function load() {
		if (window.google && window.google.ima) {
			return new _Promise(function (resolve) {
				resolve();
			});
		}

		return ScriptLoader.loadScript(imaLibraryUrl);
	}

	function getPlayer(params) {
		var adDisplayContainer = new window.google.ima.AdDisplayContainer(params.container),
		    iframe = params.container.querySelector('div > iframe');

		if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
			iframe.contentWindow.location.href = iframe.src;
		}

		var adsLoader = new window.google.ima.AdsLoader(adDisplayContainer);

		return GoogleImaPlayerFactory.create(adDisplayContainer, adsLoader, params);
	}

	return {
		setters: [function (_) {
			_Promise = _['default'];
		}, function (_2) {
			GoogleImaPlayerFactory = _2['default'];
		}, function (_3) {
			ScriptLoader = _3['default'];
		}],
		execute: function () {

			'use strict';

			imaLibraryUrl = 'http://community.wikia.com/__am/1490274398/groups/-/ima_js';

			_export('default', {
				load: load,
				getPlayer: getPlayer
			});
		}
	};
});
$__System.register('33', ['1b', '1a'], function (_export) {
	'use strict';

	var ScrollListener, isInViewport;

	function updateInViewport(listener) {
		var newInViewport = isInViewport(listener.element);

		if (newInViewport !== listener.inViewport) {
			listener.callback(newInViewport);
			listener.inViewport = newInViewport;
		}
	}

	function addListener(element, callback) {
		var params = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

		var listener = {
			element: element,
			callback: callback,
			offsetTop: params.offsetTop || 0,
			offsetBottom: params.offsetBottom || 0,
			inViewport: false
		},
		    updateCallback = function updateCallback() {
			updateInViewport(listener);
		};

		listener.id = ScrollListener.addCallback(updateCallback);
		updateCallback();

		return listener.id;
	}

	function removeListener(listenerId) {
		ScrollListener.removeCallback(listenerId);
	}

	return {
		setters: [function (_b) {
			ScrollListener = _b['default'];
		}, function (_a) {
			isInViewport = _a.isInViewport;
		}],
		execute: function () {
			_export('default', {
				addListener: addListener,
				removeListener: removeListener
			});
		}
	};
});
$__System.register('34', ['8', '9', '32', '33'], function (_export) {
	var _createClass, _classCallCheck, GoogleIma, ViewportObserver, PorvataPlayer, Porvata;

	function prepareVideoAdContainer(params) {
		var videoAdContainer = params.container.querySelector('div');

		videoAdContainer.classList.add('video-player', 'hide');

		return videoAdContainer;
	}

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			GoogleIma = _3['default'];
		}, function (_4) {
			ViewportObserver = _4['default'];
		}],
		execute: function () {
			'use strict';

			PorvataPlayer = (function () {
				function PorvataPlayer(ima, params) {
					_classCallCheck(this, PorvataPlayer);

					this.ima = ima;
					this.container = prepareVideoAdContainer(params);
					this.mobileVideoAd = params.container.querySelector('video');
					this.params = params;

					this.width = params.width;
					this.height = params.height;
				}

				_createClass(PorvataPlayer, [{
					key: 'addEventListener',
					value: function addEventListener(eventName, callback) {
						this.ima.addEventListener(eventName, callback);
					}
				}, {
					key: 'getRemainingTime',
					value: function getRemainingTime() {
						return this.ima.getAdsManager().getRemainingTime();
					}
				}, {
					key: 'isMuted',
					value: function isMuted() {
						return this.ima.getAdsManager().getVolume() === 0;
					}
				}, {
					key: 'isMobilePlayerMuted',
					value: function isMobilePlayerMuted() {
						var mobileVideoAd = this.container.querySelector('video');
						return mobileVideoAd && mobileVideoAd.autoplay && mobileVideoAd.muted;
					}
				}, {
					key: 'isPaused',
					value: function isPaused() {
						return this.ima.getStatus() === 'paused';
					}
				}, {
					key: 'isPlaying',
					value: function isPlaying() {
						return this.ima.getStatus() === 'playing';
					}
				}, {
					key: 'pause',
					value: function pause() {
						this.ima.getAdsManager().pause();
					}
				}, {
					key: 'play',
					value: function play(newWidth, newHeight) {
						if (newWidth !== undefined && newHeight !== undefined) {
							this.width = newWidth;
							this.height = newHeight;
						}
						if (!this.width || !this.height) {
							this.width = this.params.container.offsetWidth;
							this.height = this.params.container.offsetHeight;
						}

						this.ima.playVideo(this.width, this.height);
					}
				}, {
					key: 'reload',
					value: function reload() {
						this.ima.reload();
					}
				}, {
					key: 'resize',
					value: function resize(newWidth, newHeight) {
						this.width = newWidth;
						this.height = newHeight;

						this.ima.resize(this.width, this.height);
					}
				}, {
					key: 'resume',
					value: function resume() {
						this.ima.getAdsManager().resume();
					}
				}, {
					key: 'setVolume',
					value: function setVolume(volume) {
						this.updateVideoDOMElement(volume);
						this.ima.getAdsManager().setVolume(volume);

						this.ima.dispatchEvent('wikiaVolumeChange');
					}
				}, {
					key: 'updateVideoDOMElement',
					value: function updateVideoDOMElement(volume) {
						if (this.mobileVideoAd) {
							this.mobileVideoAd.muted = volume === 0;
						}
					}
				}, {
					key: 'mute',
					value: function mute() {
						this.setVolume(0);
					}
				}, {
					key: 'unmute',
					value: function unmute() {
						this.setVolume(0.75);
					}
				}, {
					key: 'volumeToggle',
					value: function volumeToggle() {
						if (this.isMuted()) {
							this.unmute();
						} else {
							this.mute();
						}
					}
				}, {
					key: 'stop',
					value: function stop() {
						this.ima.getAdsManager().stop();
					}
				}]);

				return PorvataPlayer;
			})();

			_export('PorvataPlayer', PorvataPlayer);

			Porvata = (function () {
				function Porvata() {
					_classCallCheck(this, Porvata);
				}

				_createClass(Porvata, null, [{
					key: 'addOnViewportChangeListener',

					value: function addOnViewportChangeListener(params, listener) {
						return ViewportObserver.addListener(params.container, listener, {
							offsetTop: params.viewportOffsetTop || 0,
							offsetBottom: params.viewportOffsetBottom || 0
						});
					}
				}, {
					key: 'inject',
					value: function inject(params) {
						var isFirstPlay = true,
						    autoPaused = false,
						    autoPlayed = false,
						    viewportListenerId = null;

						function muteFirstPlay(video) {
							video.addEventListener('loaded', function () {
								if (isFirstPlay) {
									video.mute();
								}
							});
						}

						params.vastTargeting = params.vastTargeting || {
							src: params.src,
							pos: params.slotName,
							passback: 'porvata'
						};

						return GoogleIma.load().then(function () {
							return GoogleIma.getPlayer(params);
						}).then(function (ima) {
							return new PorvataPlayer(ima, params);
						}).then(function (video) {
							function inViewportCallback(isVisible) {
								if (isVisible && !autoPlayed && params.autoPlay) {
									video.play();
									autoPlayed = true;
								} else if (isVisible && autoPaused) {
										video.resume();
									} else if (!isVisible && video.isPlaying()) {
											video.pause();
											autoPaused = true;
										}
							}

							video.addEventListener('adCanPlay', function () {
								video.ima.dispatchEvent('wikiaAdStarted');
							});
							video.addEventListener('allAdsCompleted', function () {
								video.ima.dispatchEvent('wikiaAdCompleted');
								video.ima.setAutoPlay(false);
								if (viewportListenerId) {
									ViewportObserver.removeListener(viewportListenerId);
									viewportListenerId = null;
								}
								isFirstPlay = false;
							});
							video.addEventListener('start', function () {
								video.ima.dispatchEvent('wikiaAdPlay');
								if (!viewportListenerId) {
									viewportListenerId = Porvata.addOnViewportChangeListener(params, inViewportCallback);
								}
							});
							video.addEventListener('resume', function () {
								video.ima.dispatchEvent('wikiaAdPlay');
								autoPaused = false;
							});
							video.addEventListener('pause', function () {
								video.ima.dispatchEvent('wikiaAdPause');
							});

							if (params.autoPlay) {
								muteFirstPlay(video);
							}

							if (params.onReady) {
								params.onReady(video);
							}

							viewportListenerId = Porvata.addOnViewportChangeListener(params, inViewportCallback);

							return video;
						});
					}
				}]);

				return Porvata;
			})();

			_export('default', Porvata);
		}
	};
});
$__System.register('35', [], function (_export) {
	'use strict';

	function add(video) {
		var closeButton = document.createElement('div');

		closeButton.classList.add('close-ad');
		closeButton.addEventListener('click', function (event) {
			video.stop();
			event.preventDefault();
		});

		video.container.appendChild(closeButton);
	}

	return {
		setters: [],
		execute: function () {
			_export('default', {
				add: add
			});
		}
	};
});
$__System.register('36', [], function (_export) {
	'use strict';

	function add(video) {
		var overlay = document.createElement('div');

		overlay.classList.add('pause-overlay');
		overlay.addEventListener('click', function () {
			if (video.isPaused()) {
				video.resume();
			} else {
				video.pause();
			}
		});

		video.container.appendChild(overlay);
	}

	return {
		setters: [],
		execute: function () {
			_export('default', {
				add: add
			});
		}
	};
});
$__System.register('37', [], function (_export) {
	'use strict';

	var replayOverlayClass;

	function add(video, params) {
		var overlay = document.createElement('div');

		if (params.splitLayoutVideoPosition === 'right') {
			overlay.style.right = 0;
		}

		overlay.classList.add(replayOverlayClass);
		overlay.addEventListener('click', function () {
			return video.play();
		});

		if (!params.autoPlay) {
			showOverlay(overlay, params);
		}

		video.addEventListener('wikiaAdCompleted', function () {
			showOverlay(overlay, params);
		});

		video.container.parentElement.insertBefore(overlay, video.container);
	}

	function showOverlay(overlay, params) {
		overlay.style.width = overlay.style.width || getOverlayWidth(params);
		overlay.style.display = 'block';
	}
	function getOverlayWidth(params) {
		var adWidth = params.container.offsetWidth,
		    videoWidth = params.hideWhenPlaying.offsetWidth;

		return 100 * videoWidth / adWidth + '%';
	}

	return {
		setters: [],
		execute: function () {
			replayOverlayClass = 'replay-overlay';

			_export('default', {
				add: add
			});
		}
	};
});
$__System.register('24', ['20'], function (_export) {
	'use strict';

	var logger, callbacks, logGroup;

	function isAdEngineMessage(message) {
		try {
			return !!JSON.parse(message.data).AdEngine;
		} catch (e) {
			return false;
		}
	}

	function messageMatch(match, message) {
		var matching = true;

		if (match.keys) {
			(function () {
				var data = JSON.parse(message.data).AdEngine;
				match.keys.forEach(function (key) {
					matching = matching && data[key];
				});
			})();
		}

		return matching;
	}

	function onMessage(message) {
		var i = 0,
		    callback = undefined;

		if (isAdEngineMessage(message)) {
			logger(logGroup, 'Message received', message);

			for (i = 0; i < callbacks.length; i += 1) {
				callback = callbacks[i];
				if (messageMatch(callback.match, message)) {
					logger(logGroup, 'Matching message', message, callback);

					callback.fn(JSON.parse(message.data).AdEngine);

					if (!callback.match.infinite) {
						callbacks.splice(i, 1);
					}
					return;
				}
			}
		}
	}

	return {
		setters: [function (_) {
			logger = _.logger;
		}],
		execute: function () {
			callbacks = [];
			logGroup = 'message-bus';

			_export('default', {
				init: function init() {
					logger(logGroup, 'Register message listener');
					window.addEventListener('message', onMessage);
				},

				register: function register(match, callback) {
					callbacks.push({
						match: match,
						fn: callback
					});
				}
			});
		}
	};
});
$__System.register('16', ['20', '22', '24'], function (_export) {
	'use strict';

	var logger, SlotService, MessageBus, logGroup;
	return {
		setters: [function (_3) {
			logger = _3.logger;
		}, function (_2) {
			SlotService = _2['default'];
		}, function (_) {
			MessageBus = _['default'];
		}],
		execute: function () {
			logGroup = 'slot-tweaker';

			_export('default', {
				forceRepaint: function forceRepaint(domElement) {
					return domElement.offsetWidth;
				},

				getContainer: function getContainer(adSlot) {
					var container = document.getElementById(adSlot.getId());

					if (!container) {
						logger(logGroup, 'cannot find container', adSlot.getId());
					}

					return container;
				},

				hide: function hide(adSlot) {
					var container = this.getContainer(adSlot);

					if (container) {
						logger(logGroup, 'hide', adSlot.getId());
						container.classList.add('hide');
					}
				},

				show: function show(adSlot) {
					var container = this.getContainer(adSlot);

					if (container) {
						logger(logGroup, 'show', adSlot.getId());
						container.classList.remove('hide');
					}
				},

				collapse: function collapse(adSlot) {
					var container = this.getContainer(adSlot);

					container.style.maxHeight = container.scrollHeight + 'px';
					this.forceRepaint(container);
					container.classList.add('slot-animation');
					container.style.maxHeight = '0';
				},

				expand: function expand(adSlot) {
					var container = this.getContainer(adSlot);

					container.style.maxHeight = container.offsetHeight + 'px';
					container.classList.remove('hide');
					container.classList.add('slot-animation');
					container.style.maxHeight = container.scrollHeight + 'px';
				},

				makeResponsive: function makeResponsive(adSlot) {
					var aspectRatio = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];

					var slotContainer = this.getContainer(adSlot);

					slotContainer.classList.add('slot-responsive');

					this.onReady(adSlot, function (iframe) {
						var container = iframe.parentElement;
						if (!aspectRatio) {
							var height = iframe.contentWindow.document.body.scrollHeight,
							    width = iframe.contentWindow.document.body.scrollWidth;

							aspectRatio = width / height;
						}

						logger(logGroup, 'make responsive', adSlot.getId());
						container.style.paddingBottom = 100 / aspectRatio + '%';
					});
				},

				onReady: function onReady(adSlot, callback) {
					var container = this.getContainer(adSlot),
					    iframe = container.querySelector('div[id*="_container_"] iframe');

					if (!iframe) {
						return;
					}

					if (iframe.contentWindow.document.readyState === 'complete') {
						callback(iframe);
					} else {
						iframe.addEventListener('load', function () {
							callback(iframe);
						});
					}
				},

				registerMessageListener: function registerMessageListener() {
					var _this = this;

					MessageBus.register({
						keys: ['action', 'slotName'],
						infinite: true
					}, function (data) {
						if (!data.slotName) {
							logger(logGroup, 'Missing slot name');
							return;
						}

						var adSlot = SlotService.getBySlotName(data.slotName);

						switch (data.action) {
							case 'expand':
								_this.expand(adSlot);
								break;
							case 'collapse':
								_this.collapse(adSlot);
								break;
							case 'hide':
								_this.hide(adSlot);
								break;
							case 'show':
								_this.show(adSlot);
								break;
							case 'make-responsive':
								_this.makeResponsive(adSlot, data.aspectRatio);
								break;
							default:
								logger(logGroup, 'Unknown action', data.action);
						}
					});
				}
			});
		}
	};
});
$__System.register('38', ['16'], function (_export) {
	'use strict';

	var SlotTweaker;

	function add(video) {
		var progressBar = document.createElement('div'),
		    currentTime = document.createElement('div');

		progressBar.classList.add('progress-bar');
		currentTime.classList.add('current-time');

		progressBar.appendChild(currentTime);

		progressBar.pause = function () {
			currentTime.style.width = currentTime.offsetWidth / progressBar.offsetWidth * 100 + '%';
		};
		progressBar.reset = function () {
			currentTime.style.transitionDuration = '';
			currentTime.style.width = '0';
		};
		progressBar.start = function () {
			var remainingTime = video.getRemainingTime();

			if (remainingTime) {
				currentTime.style.transitionDuration = remainingTime + 's';
				SlotTweaker.forceRepaint(currentTime);
				currentTime.style.width = '100%';
			} else {
				currentTime.style.width = '0';
			}
		};

		video.addEventListener('wikiaAdPlay', progressBar.start);
		video.addEventListener('wikiaAdCompleted', progressBar.reset);
		video.addEventListener('wikiaAdPause', progressBar.pause);

		video.container.appendChild(progressBar);
	}

	return {
		setters: [function (_) {
			SlotTweaker = _['default'];
		}],
		execute: function () {
			_export('default', {
				add: add
			});
		}
	};
});
$__System.register('39', [], function (_export) {
	'use strict';

	function add(video) {
		video.addEventListener('wikiaAdStarted', function () {
			video.container.classList.remove('hide');
		});

		video.addEventListener('wikiaAdCompleted', function () {
			video.container.classList.add('hide');
		});
	}

	return {
		setters: [],
		execute: function () {
			_export('default', {
				add: add
			});
		}
	};
});
$__System.register('28', [], function (_export) {
	'use strict';

	var duration, onAnimationClassName;

	function resizeContainer(container, finalAspectRatio) {
		container.style.height = container.offsetHeight + 'px';
		container.style.height = container.offsetWidth / finalAspectRatio + 'px';

		setTimeout(function () {
			container.style.height = '';
		}, duration);
	}

	function toggle(elementToShow, elementToHide) {
		elementToHide.classList.add('hide');
		elementToShow.classList.remove('hide');
	}

	function hideVideo(video, params) {
		resizeContainer(params.container, params.aspectRatio);
		setTimeout(function () {
			toggle(params.image, video.container);
			params.container.classList.remove(onAnimationClassName);
		}, duration);
	}

	function showVideo(video, params) {
		params.container.classList.add(onAnimationClassName);
		resizeContainer(params.container, params.videoAspectRatio);
		toggle(video.container, params.image);
	}

	function add(video, params) {
		video.addEventListener('wikiaAdStarted', function () {
			showVideo(video, params);
		});

		video.addEventListener('wikiaAdCompleted', function () {
			hideVideo(video, params);
		});
	}

	return {
		setters: [],
		execute: function () {
			duration = 400;
			onAnimationClassName = 'on-animation';

			_export('default', {
				add: add,
				duration: duration
			});
		}
	};
});
$__System.register('3a', [], function (_export) {
	'use strict';

	function createVolumeControl() {
		var volume = document.createElement('div'),
		    speaker = document.createElement('a');

		speaker.className = 'speaker';
		speaker.appendChild(document.createElement('span'));
		volume.className = 'volume-button hidden';

		volume.appendChild(speaker);
		volume.speaker = speaker;

		return volume;
	}

	function updateCurrentState(video, volumeControl) {
		if (video.isMuted() || video.isMobilePlayerMuted()) {
			volumeControl.speaker.classList.add('mute');
		} else {
			volumeControl.speaker.classList.remove('mute');
		}
	}

	function add(video) {
		var volumeControl = createVolumeControl();

		video.addEventListener('wikiaVolumeChange', function () {
			updateCurrentState(video, volumeControl);
		});

		video.addEventListener('wikiaAdStarted', function () {
			updateCurrentState(video, volumeControl);
			volumeControl.classList.remove('hidden');
		});

		volumeControl.addEventListener('click', function (e) {
			video.volumeToggle();
			e.preventDefault();
		});

		video.container.appendChild(volumeControl);
	}

	return {
		setters: [],
		execute: function () {
			_export('default', {
				add: add
			});
		}
	};
});
$__System.register('3b', ['28', '35', '36', '37', '38', '39', '3a'], function (_export) {
	'use strict';

	var ToggleAnimation, CloseButton, PauseOverlay, ReplayOverlay, ProgressBar, ToggleVideo, VolumeControl, mapping;

	function setup(video, uiElements, params) {
		uiElements.forEach(function (element) {
			if (mapping[element]) {
				mapping[element].add(video, params);
			}
		});
	}

	return {
		setters: [function (_6) {
			ToggleAnimation = _6['default'];
		}, function (_) {
			CloseButton = _['default'];
		}, function (_2) {
			PauseOverlay = _2['default'];
		}, function (_3) {
			ReplayOverlay = _3['default'];
		}, function (_4) {
			ProgressBar = _4['default'];
		}, function (_5) {
			ToggleVideo = _5['default'];
		}, function (_a) {
			VolumeControl = _a['default'];
		}],
		execute: function () {
			mapping = {
				closeButton: CloseButton,
				pauseOverlay: PauseOverlay,
				replayOverlay: ReplayOverlay,
				progressBar: ProgressBar,
				volumeControl: VolumeControl,
				toggleVideo: ToggleVideo,
				toggleVideoWithAnimation: ToggleAnimation
			};

			_export('default', {
				setup: setup
			});
		}
	};
});
$__System.register('3c', [], function (_export) {
	'use strict';

	var autoPlayLayout, defaultLayout, splitLayout, clickToPlaySplitLayout;

	function selectTemplate(videoSettings) {
		var template = defaultLayout;

		if (!videoSettings.isAutoPlay() && videoSettings.isSplitLayout()) {
			template = clickToPlaySplitLayout;
		} else if (videoSettings.isSplitLayout()) {
			template = splitLayout;
		} else if (videoSettings.isAutoPlay()) {
			template = autoPlayLayout;
		}

		return template;
	}

	return {
		setters: [],
		execute: function () {
			autoPlayLayout = ['progressBar', 'pauseOverlay', 'volumeControl', 'toggleVideoWithAnimation'];
			defaultLayout = ['progressBar', 'pauseOverlay', 'volumeControl', 'closeButton', 'toggleVideoWithAnimation'];
			splitLayout = ['progressBar', 'pauseOverlay', 'volumeControl', 'toggleVideo', 'replayOverlay'];
			clickToPlaySplitLayout = ['progressBar', 'pauseOverlay', 'volumeControl', 'toggleVideo', 'replayOverlay', 'closeButton'];

			_export('default', {
				autoPlayLayout: autoPlayLayout,
				defaultLayout: defaultLayout,
				splitLayout: splitLayout,
				selectTemplate: selectTemplate
			});
		}
	};
});
$__System.register('29', ['22', '34', '1e', '3d', '3b', '3c', 'c'], function (_export) {
	var SlotService, Porvata, _Object$keys, Context, VideoInterface, UITemplate, throttle;

	function getVideoSize(slot, params, videoSettings) {
		var width = videoSettings.isSplitLayout() ? params.videoPlaceholderElement.offsetWidth : slot.clientWidth,
		    height = width / params.videoAspectRatio;

		return {
			width: width,
			height: height
		};
	}

	function adjustVideoAdContainer(params) {
		if (params.splitLayoutVideoPosition) {
			var videoAdContainer = params.container.querySelector('.video-player');

			videoAdContainer.classList.add('video-player-' + params.splitLayoutVideoPosition);
		}
	}

	function loadPorvata(videoSettings, slotContainer, imageContainer) {
		var params = videoSettings.getParams(),
		    template = UITemplate.selectTemplate(videoSettings);

		params.container = slotContainer;

		params.autoPlay = videoSettings.isAutoPlay();

		return Porvata.inject(params).then(function (video) {
			video.container.style.position = 'relative';
			VideoInterface.setup(video, template, {
				autoPlay: videoSettings.isAutoPlay(),
				image: imageContainer,
				container: slotContainer,
				aspectRatio: params.aspectRatio,
				videoAspectRatio: params.videoAspectRatio,
				hideWhenPlaying: params.videoPlaceholderElement || params.image,
				splitLayoutVideoPosition: params.splitLayoutVideoPosition
			});

			video.addEventListener('allAdsCompleted', function () {
				video.reload();
			});

			adjustVideoAdContainer(params);

			return video;
		});
	}

	function loadVideoAd(videoSettings) {
		var params = videoSettings.getParams(),
		    adSlot = SlotService.getBySlotName(params.slotName),
		    slotContainer = document.getElementById(adSlot.getId()),
		    imageContainer = slotContainer.querySelector('div:last-of-type'),
		    size = getVideoSize(slotContainer, params, videoSettings);

		params.width = size.width;
		params.height = size.height;
		params.vastTargeting = {
			src: params.src,
			pos: params.slotName,
			passback: 'vuap',
			uap: adSlot.getTargeting().uap
		};

		document.body.classList.add('vuap-loaded');

		return loadPorvata(videoSettings, slotContainer, imageContainer).then(function (video) {
			function playVideo() {
				var size = getVideoSize(slotContainer, params, videoSettings);

				video.play(size.width, size.height);
			}

			window.addEventListener('resize', throttle(function () {
				var size = getVideoSize(slotContainer, params, videoSettings);

				video.resize(size.width, size.height);
			}, 250));

			if (params.videoTriggerElement) {
				params.videoTriggerElement.addEventListener('click', playVideo);
			} else if (params.videoTriggers) {
				params.videoTriggers.forEach(function (trigger) {
					trigger.addEventListener('click', playVideo);
				});
			}

			return video;
		});
	}

	return {
		setters: [function (_2) {
			SlotService = _2['default'];
		}, function (_) {
			Porvata = _['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}, function (_d) {
			Context = _d['default'];
		}, function (_b) {
			VideoInterface = _b['default'];
		}, function (_c) {
			UITemplate = _c['default'];
		}, function (_c2) {
			throttle = _c2.throttle;
		}],
		execute: function () {
			'use strict';

			_export('default', {
				init: function init(uapId) {
					_Object$keys(Context.get('slots')).forEach(function (slotId) {
						Context.set('slots.' + slotId + '.targeting.uap', uapId);
					});

					SlotService.enable('BOTTOM_LEADERBOARD');
					SlotService.enable('INCONTENT_BOXAD');
				},

				isVideoEnabled: function isVideoEnabled(params) {
					return !!params.videoAspectRatio && (params.videoTriggerElement || params.videoTriggers);
				},

				loadVideoAd: loadVideoAd
			});
		}
	};
});
$__System.register('3e', ['15', '3f'], function (_export) {
	'use strict';

	var Context, LocalCache, cacheKey, cacheTtl, now;

	function readUapId() {
		return Context.get('slots.top-leaderboard.targeting.uap');
	}

	function createCacheKey() {
		return cacheKey + '_' + readUapId();
	}

	function findRecordInCache() {
		return LocalCache.get(createCacheKey());
	}

	function wasDefaultStateSeen() {
		var record = findRecordInCache();

		return !!record && now.getTime() !== record.lastSeenDate;
	}

	function updateInformationAboutSeenDefaultStateAd() {
		LocalCache.set(createCacheKey(), {
			adId: readUapId(),
			lastSeenDate: now.getTime()
		}, cacheTtl);
	}

	return {
		setters: [function (_) {
			Context = _['default'];
		}, function (_f) {
			LocalCache = _f['default'];
		}],
		execute: function () {
			cacheKey = 'adEngine_resolvedStateCounter';
			cacheTtl = 24 * 3600;
			now = new Date();

			_export('default', {
				updateInformationAboutSeenDefaultStateAd: updateInformationAboutSeenDefaultStateAd,
				wasDefaultStateSeen: wasDefaultStateSeen
			});
		}
	};
});
$__System.register('27', ['2c', '3e'], function (_export) {
	'use strict';

	var QueryString, ResolvedStateSwitch;

	function getQueryParam() {
		return QueryString.get('resolved_state', null);
	}

	function isForcedByURLParam() {
		return [true, 'true', '1'].indexOf(getQueryParam()) > -1;
	}

	function isBlockedByURLParam() {
		return [false, 'blocked', 'false', '0'].indexOf(getQueryParam()) > -1;
	}

	function setResolvedState(params) {
		params.aspectRatio = params.resolvedStateAspectRatio;
		params.image1.element.src = params.image1.resolvedStateSrc;

		if (params.image2 && params.image2.resolvedStateSrc) {
			params.image2.element.src = params.image2.resolvedStateSrc;
		}
	}

	function templateSupportsResolvedState(params) {
		return !!(params.image1 && params.image1.resolvedStateSrc);
	}

	function setDefaultState(params) {
		params.image1.element.src = params.image1.defaultStateSrc;

		if (params.image2 && params.image2.defaultStateSrc) {
			params.image2.element.src = params.image2.defaultStateSrc;
		}
	}

	function isResolvedState(params) {
		var result = false;

		if (templateSupportsResolvedState(params)) {
			var showResolvedState = !isBlockedByURLParam();
			var defaultStateSeen = true;

			if (showResolvedState) {
				defaultStateSeen = ResolvedStateSwitch.wasDefaultStateSeen() || isForcedByURLParam();
			}

			result = showResolvedState && defaultStateSeen;
		}

		return result;
	}

	return {
		setters: [function (_c) {
			QueryString = _c['default'];
		}, function (_e) {
			ResolvedStateSwitch = _e['default'];
		}],
		execute: function () {
			_export('default', {
				setImage: function setImage(videoSettings) {
					var params = videoSettings.getParams();

					if (templateSupportsResolvedState(params)) {
						if (videoSettings.isResolvedState()) {
							setResolvedState(params);
						} else {
							setDefaultState(params);
							ResolvedStateSwitch.updateInformationAboutSeenDefaultStateAd();
						}
					}
				},
				isResolvedState: isResolvedState
			});
		}
	};
});
$__System.register('2a', ['8', '9', '27'], function (_export) {
	var _createClass, _classCallCheck, ResolvedState, VideoSettings;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			ResolvedState = _3['default'];
		}],
		execute: function () {
			'use strict';

			VideoSettings = (function () {
				function VideoSettings(params) {
					_classCallCheck(this, VideoSettings);

					this.params = params;

					Object.defineProperty(this, 'resolvedState', {
						value: ResolvedState.isResolvedState(this.params),
						writable: false
					});

					Object.defineProperty(this, 'autoPlay', {
						value: this.detectAutoPlay(),
						writable: false
					});

					Object.defineProperty(this, 'splitLayout', {
						value: Boolean(params.splitLayoutVideoPosition),
						writable: false
					});
				}

				_createClass(VideoSettings, [{
					key: 'detectAutoPlay',
					value: function detectAutoPlay() {
						var defaultStateAutoPlay = this.params.autoPlay && !this.resolvedState,
						    resolvedStateAutoPlay = this.params.resolvedStateAutoPlay && this.resolvedState;
						return Boolean(defaultStateAutoPlay || resolvedStateAutoPlay);
					}
				}, {
					key: 'getParams',
					value: function getParams() {
						return this.params;
					}
				}, {
					key: 'isAutoPlay',
					value: function isAutoPlay() {
						return this.autoPlay;
					}
				}, {
					key: 'isResolvedState',
					value: function isResolvedState() {
						return this.resolvedState;
					}
				}, {
					key: 'isSplitLayout',
					value: function isSplitLayout() {
						return this.splitLayout;
					}
				}]);

				return VideoSettings;
			})();

			_export('default', VideoSettings);
		}
	};
});
$__System.register('40', ['8', '9', '16', '22', '27', '29', '2a'], function (_export) {
	var _createClass, _classCallCheck, SlotTweaker, SlotService, ResolvedState, UniversalAdPackage, VideoSettings, BigFancyAdBelow;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_5) {
			SlotTweaker = _5['default'];
		}, function (_4) {
			SlotService = _4['default'];
		}, function (_3) {
			ResolvedState = _3['default'];
		}, function (_6) {
			UniversalAdPackage = _6['default'];
		}, function (_a) {
			VideoSettings = _a['default'];
		}],
		execute: function () {
			'use strict';

			BigFancyAdBelow = (function () {

				function BigFancyAdBelow(params) {
					_classCallCheck(this, BigFancyAdBelow);

					this.adSlot = SlotService.getBySlotName('BOTTOM_LEADERBOARD');
					this.container = document.getElementById(this.adSlot.getId());
					this.params = params;
					this.videoSettings = null;
				}


				_createClass(BigFancyAdBelow, [{
					key: 'init',
					value: function init() {
						var _this = this;

						if (!this.container) {
							return;
						}

						this.container.classList.add('bfab-template');
						this.videoSettings = new VideoSettings(this.params);
						ResolvedState.setImage(this.videoSettings);
						SlotTweaker.makeResponsive(this.adSlot, this.params.aspectRatio);
						SlotTweaker.onReady(this.adSlot, function () {
							return _this.adIsReady();
						});
					}
				}, {
					key: 'adIsReady',
					value: function adIsReady() {
						if (UniversalAdPackage.isVideoEnabled(this.params)) {
							UniversalAdPackage.loadVideoAd(this.videoSettings);
						}
					}
				}]);

				return BigFancyAdBelow;
			})();

			_export('default', BigFancyAdBelow);
		}
	};
});
$__System.register("22", ["8", "9", "1e"], function (_export) {
	var _createClass, _classCallCheck, _Object$keys, slotNameMapping, slots, slotStates, SlotService;

	function setState(slotName, state) {
		var slot = SlotService.getBySlotName(slotName);
		slotStates[slotName] = state;

		if (slot) {
			if (state) {
				slot.enable();
			} else {
				slot.disable();
			}
		}
	}

	return {
		setters: [function (_) {
			_createClass = _["default"];
		}, function (_2) {
			_classCallCheck = _2["default"];
		}, function (_e) {
			_Object$keys = _e["default"];
		}],
		execute: function () {
			"use strict";

			slotNameMapping = {};
			slots = {};
			slotStates = {};

			SlotService = (function () {
				function SlotService() {
					_classCallCheck(this, SlotService);
				}

				_createClass(SlotService, null, [{
					key: "add",
					value: function add(adSlot) {
						var slotName = adSlot.getSlotName();

						slots[adSlot.getId()] = adSlot;
						slotNameMapping[slotName] = adSlot.getId();

						if (slotStates[slotName] === false) {
							adSlot.disable();
						}
						if (slotStates[slotName] === true) {
							adSlot.enable();
						}
					}
				}, {
					key: "get",
					value: function get(id) {
						return slots[id];
					}
				}, {
					key: "getBySlotName",
					value: function getBySlotName(slotName) {
						var id = slotNameMapping[slotName];

						return this.get(id);
					}
				}, {
					key: "forEach",
					value: function forEach(callback) {
						_Object$keys(slots).forEach(function (id) {
							callback(slots[id]);
						});
					}
				}, {
					key: "enable",
					value: function enable(slotName) {
						setState(slotName, true);
					}
				}, {
					key: "disable",
					value: function disable(slotName) {
						setState(slotName, false);
					}
				}]);

				return SlotService;
			})();

			_export("default", SlotService);
		}
	};
});
$__System.register('17', ['8', '9', '15'], function (_export) {
	var _createClass, _classCallCheck, Context, _default;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			Context = _3['default'];
		}],
		execute: function () {
			'use strict';

			_default = (function () {
				function _default() {
					_classCallCheck(this, _default);
				}

				_createClass(_default, null, [{
					key: 'build',
					value: function build(string) {
						var parameters = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

						var matches = string.match(/{(.+?)}/g);

						if (matches) {
							matches.forEach(function (match) {
								var key = match.replace('{', '').replace('}', ''),
								    value = Context.get(key);

								if (parameters[key]) {
									string = string.replace(match, parameters[key]);
								} else if (value !== undefined) {
									string = string.replace(match, value);
								}
							});
						}

						return string;
					}
				}]);

				return _default;
			})();

			_export('default', _default);
		}
	};
});
$__System.register('2d', ['15', '17', '22', '41', '1e'], function (_export) {
	var Context, StringBuilder, SlotService, _Object$assign, _Object$keys, baseUrl, correlator;

	function getCustomParameters(slotLevelParams) {
		var slot = SlotService.getBySlotName(slotLevelParams.pos);
		var slotTargeting = slot ? slot.config.targeting : {};
		var wsiParam = slotTargeting.wsi ? { wsi: slotTargeting.wsi } : {};
		var params = _Object$assign({}, Context.get('targeting'), slotLevelParams, wsiParam);

		return encodeURIComponent(_Object$keys(params).filter(function (key) {
			return params[key];
		}).map(function (key) {
			return key + '=' + params[key];
		}).join('&'));
	}

	function buildAdUnitId(slotParams) {
		return StringBuilder.build(Context.get('vast.adUnitId'), { pos: slotParams.pos, src: slotParams.src });
	}

	function isNumeric(n) {
		return !isNaN(parseFloat(n)) && isFinite(n);
	}

	function build(aspectRatio) {
		var slotParams = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

		var params = ['output=vast', 'env=vp', 'gdfp_req=1', 'impl=s', 'unviewed_position_start=1', 'iu=' + buildAdUnitId(slotParams), 'sz=' + (aspectRatio > 1 || !isNumeric(aspectRatio) ? '640x480' : '320x480'), 'url=' + window.location.href, 'correlator=' + correlator, 'cust_params=' + getCustomParameters(slotParams)];

		return baseUrl + params.join('&');
	}

	return {
		setters: [function (_2) {
			Context = _2['default'];
		}, function (_4) {
			StringBuilder = _4['default'];
		}, function (_3) {
			SlotService = _3['default'];
		}, function (_) {
			_Object$assign = _['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}],
		execute: function () {
			'use strict';

			_export('build', build);

			baseUrl = 'https://pubads.g.doubleclick.net/gampad/ads?';
			correlator = Math.round(Math.random() * 10000000000);
		}
	};
});
$__System.registerDynamic('42', ['43', '44', '45', '46'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var classof = $__require('43'),
      ITERATOR = $__require('44')('iterator'),
      Iterators = $__require('45');
  module.exports = $__require('46').isIterable = function (it) {
    var O = Object(it);
    return O[ITERATOR] !== undefined || '@@iterator' in O || Iterators.hasOwnProperty(classof(O));
  };
});
$__System.registerDynamic('47', ['48', '49', '42'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('48');
  $__require('49');
  module.exports = $__require('42');
});
$__System.registerDynamic("4a", ["47"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("47"), __esModule: true };
});
$__System.registerDynamic("4b", ["10", "4a"], true, function ($__require, exports, module) {
  "use strict";

  var global = this || self,
      GLOBAL = global;
  var _getIterator = $__require("10")["default"];
  var _isIterable = $__require("4a")["default"];
  exports["default"] = function () {
    function sliceIterator(arr, i) {
      var _arr = [];
      var _n = true;
      var _d = false;
      var _e = undefined;
      try {
        for (var _i = _getIterator(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {
          _arr.push(_s.value);
          if (i && _arr.length === i) break;
        }
      } catch (err) {
        _d = true;
        _e = err;
      } finally {
        try {
          if (!_n && _i["return"]) _i["return"]();
        } finally {
          if (_d) throw _e;
        }
      }
      return _arr;
    }
    return function (arr, i) {
      if (Array.isArray(arr)) {
        return arr;
      } else if (_isIterable(Object(arr))) {
        return sliceIterator(arr, i);
      } else {
        throw new TypeError("Invalid attempt to destructure non-iterable instance");
      }
    };
  }();
  exports.__esModule = true;
});
$__System.register('2c', ['8', '9', '4b'], function (_export) {
	var _createClass, _classCallCheck, _slicedToArray, QueryString, __useDefault;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_b) {
			_slicedToArray = _b['default'];
		}],
		execute: function () {
			'use strict';

			QueryString = (function () {
				function QueryString() {
					_classCallCheck(this, QueryString);
				}

				_createClass(QueryString, null, [{
					key: 'get',
					value: function get(key) {
						var queryParameters = {},
						    queryString = window.location.search.substr(1).split('&');

						if (queryString === '') {
							return null;
						}

						queryString.forEach(function (pair) {
							var _pair$split = pair.split('=');

							var _pair$split2 = _slicedToArray(_pair$split, 2);

							var id = _pair$split2[0];
							var value = _pair$split2[1];

							if (value) {
								queryParameters[id] = decodeURIComponent(value.replace(/\+/g, ' '));
							}
						});

						return queryParameters[key];
					}
				}]);

				return QueryString;
			})();

			__useDefault = true;

			_export('__useDefault', __useDefault);

			_export('default', QueryString);
		}
	};
});
$__System.register('20', ['2c'], function (_export) {
	'use strict';

	var QueryString, debugGroup, groups;

	_export('logger', logger);

	function logger(logGroup) {
		if (debugGroup === '') {
			return;
		}

		if (debugGroup === '1' || groups.indexOf(logGroup) !== -1) {
			for (var _len = arguments.length, logValues = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
				logValues[_key - 1] = arguments[_key];
			}

			window.console.info(logGroup, logValues);
		}
	}

	return {
		setters: [function (_c) {
			QueryString = _c['default'];
		}],
		execute: function () {
			debugGroup = QueryString.get('adengine_debug') || '';
			groups = debugGroup.split(',');

			if (debugGroup !== '') {
				window.console.info('AdEngine debug mode - groups:', debugGroup === '1' ? 'all' : groups);
			}
		}
	};
});
$__System.register('4c', ['8', '9', '20', '2d'], function (_export) {
	var _createClass, _classCallCheck, logger, buildVastUrl, logGroup, playerUrl, Playwire;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			logger = _3.logger;
		}, function (_d) {
			buildVastUrl = _d.build;
		}],
		execute: function () {
			'use strict';

			logGroup = 'playwire';
			playerUrl = '//cdn.playwire.com/bolt/js/zeus/embed.js';

			Playwire = (function () {
				function Playwire() {
					_classCallCheck(this, Playwire);
				}

				_createClass(Playwire, null, [{
					key: 'getConfigUrl',
					value: function getConfigUrl(publisherId, videoId) {
						return '//config.playwire.com/' + publisherId + '/videos/v2/' + videoId + '/zeus.json';
					}
				}, {
					key: 'inject',
					value: function inject(params) {
						var configUrl = params.configUrl,
						    container = params.container,
						    height = params.height,
						    playerId = 'playwire_' + Math.floor((1 + Math.random()) * 0x10000),
						    script = document.createElement('script'),
						    slotName = params.slotName,
						    width = params.width,
						    win = container.ownerDocument.defaultView || container.ownerDocument.parentWindow;

						var vastUrl = params.vastUrl;

						if (!vastUrl) {
							vastUrl = buildVastUrl(width / height, {
								passback: 'playwire',
								pos: slotName,
								src: 'gpt'
							});
						}

						win.onReady = function () {
							params.onReady(win.Bolt, playerId);
						};

						script.setAttribute('data-id', playerId);
						script.setAttribute('data-config', configUrl);
						script.setAttribute('data-ad-tag', vastUrl);

						if (params.onReady) {
							script.setAttribute('data-onready', 'onReady');
						}

						script.setAttribute('type', 'text/javascript');
						script.src = playerUrl;

						container.appendChild(script);
						logger(logGroup, 'Inject player', params);
					}
				}]);

				return Playwire;
			})();

			_export('default', Playwire);
		}
	};
});
$__System.register('4d', ['8', '9', '4c'], function (_export) {
	var _createClass, _classCallCheck, Player, Playwire;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			Player = _c['default'];
		}],
		execute: function () {
			'use strict';

			Playwire = (function () {
				function Playwire() {
					_classCallCheck(this, Playwire);
				}

				_createClass(Playwire, [{
					key: 'init',
					value: function init(params) {
						if (!params.configUrl) {
							params.configUrl = Player.getConfigUrl(params.publisherId, params.videoId);
						}

						if (params.container) {
							Player.inject(params);
						}
					}
				}]);

				return Playwire;
			})();

			_export('default', Playwire);
		}
	};
});
$__System.register('15', ['41'], function (_export) {
	var _Object$assign, context, onChangeCallbacks, __useDefault;

	function runCallbacks(trigger, key, newValue) {
		if (!onChangeCallbacks[trigger]) {
			return;
		}

		onChangeCallbacks[trigger].forEach(function (callback) {
			callback(key, newValue);
		});
	}

	function triggerOnChange(key, segments, newValue) {
		var trigger = '';
		segments.forEach(function (seg) {
			trigger += (trigger === '' ? '' : '.') + seg;
			runCallbacks(trigger, key, newValue);
		});
	}

	function segment(key, newValue) {
		var segments = key.split('.'),
		    segmentsCount = segments.length;
		var seg = context,
		    lastKey = null;

		for (var i = 0; i < segmentsCount; i += 1) {
			lastKey = segments[i];
			if (i < segmentsCount - 1) {
				seg[lastKey] = seg[lastKey] || {};
				seg = seg[lastKey];
			}
		}

		if (newValue !== undefined) {
			seg[lastKey] = newValue;
			triggerOnChange(key, segments, newValue);
		}

		return seg[lastKey];
	}

	return {
		setters: [function (_) {
			_Object$assign = _['default'];
		}],
		execute: function () {
			'use strict';

			context = {
				adUnitId: '',
				events: {},
				slots: {},
				state: {
					adStack: [],
					isMobile: false
				},
				targeting: {},
				vast: {
					size: [640, 480],
					adUnitId: ''
				}
			};
			onChangeCallbacks = {};
			__useDefault = true;

			_export('__useDefault', __useDefault);

			_export('default', {
				extend: function extend(newContext) {
					_Object$assign(context, newContext);
				},

				set: function set(key, value) {
					segment(key, value);
				},

				get: function get(key) {
					return segment(key);
				},

				onChange: function onChange(key, callback) {
					onChangeCallbacks[key] = onChangeCallbacks[key] || [];
					onChangeCallbacks[key].push(callback);
				}
			});
		}
	};
});
$__System.register('3d', ['15'], function (_export) {
	'use strict';

	var ContextService;
	return {
		setters: [function (_) {
			ContextService = _['default'];
		}],
		execute: function () {

			ContextService.extend({
				adUnitId: '/5441/wka.fandom/_{custom.namespace}/{custom.upperCaseNamespace}_{slotName}',
				events: {
					pushOnScroll: {
						ids: ['gpt-incontent-boxad-desktop', 'gpt-incontent-boxad-mobile', 'gpt-bottom-leaderboard', 'gpt-bottom-leaderboard-desktop', 'gpt-bottom-leaderboard-mobile'],
						threshold: 100
					}
				},
				slots: {
					'top-leaderboard': {
						slotName: 'TOP_LEADERBOARD',
						slotShortcut: 'l',
						aboveTheFold: true,
						sizes: [{
							viewportSize: [1440, 350],
							sizes: [[728, 90], [970, 250], [1024, 416], [1440, 585]]
						}, {
							viewportSize: [1024, 300],
							sizes: [[728, 90], [970, 250], [1024, 416]]
						}, {
							viewportSize: [970, 200],
							sizes: [[728, 90], [970, 250]]
						}, {
							viewportSize: [728, 200],
							sizes: [[728, 90]]
						}, {
							viewportSize: [320, 200],
							sizes: [[320, 50], [320, 480], [2, 2]]
						}, {
							viewportSize: [0, 0],
							sizes: [[320, 50]]
						}],
						defaultSizes: [[728, 90], [970, 250], [1024, 416], [1440, 585]],
						targeting: {
							loc: 'top',
							uap: 'none'
						}
					},
					'bottom-leaderboard': {
						disabled: true,
						slotName: 'BOTTOM_LEADERBOARD',
						slotShortcut: 'b',
						sizes: [{
							viewportSize: [728, 100],
							sizes: [[728, 90]]
						}, {
							viewportSize: [320, 200],
							sizes: [[320, 480], [2, 2]]
						}],
						defaultSizes: [],
						targeting: {
							loc: 'footer',
							uap: 'none'
						}
					},
					'top-boxad': {
						slotName: 'TOP_BOXAD',
						slotShortcut: 'm',
						aboveTheFold: true,
						sizes: [{
							viewportSize: [0, 0],
							sizes: [[300, 250]]
						}, {
							viewportSize: [768, 200],
							sizes: [[300, 250], [300, 600], [300, 1050]]
						}],
						defaultSizes: [[300, 250], [300, 600], [300, 1050]],
						targeting: {
							loc: function loc() {
								return ContextService.get('state.isMobile') ? 'middle' : 'top';
							},
							uap: 'none'
						}
					},
					'incontent-boxad': {
						disabled: true,
						slotName: 'INCONTENT_BOXAD',
						slotShortcut: 'f',
						sizes: [{
							viewportSize: [0, 0],
							sizes: [[300, 250]]
						}, {
							viewportSize: [768, 200],
							sizes: [[300, 250], [300, 600]]
						}],
						defaultSizes: [[300, 250], [300, 600]],
						defaultTemplate: 'floating-ad',
						targeting: {
							loc: function loc() {
								return ContextService.get('state.isMobile') ? 'footer' : 'hivi';
							},
							uap: 'none'
						}
					},
					'bottom-boxad': {
						slotName: 'BOTTOM_BOXAD',
						sizes: [{
							viewportSize: [0, 0],
							sizes: [[300, 250]]
						}, {
							viewportSize: [768, 200],
							sizes: [[300, 250], [300, 600], [300, 1050]]
						}],
						defaultSizes: [[300, 250], [300, 1050], [300, 600]],
						targeting: {
							loc: 'footer',
							uap: 'none'
						}
					},
					'top-skin': {
						slotName: 'INVISIBLE_SKIN',
						aboveTheFold: true,
						sizes: [{
							viewportSize: [1064, 0],
							sizes: [[1000, 1000]]
						}, {
							viewportSize: [0, 0],
							sizes: []
						}],
						defaultSizes: [[1000, 1000]],
						targeting: {
							loc: 'top',
							uap: 'none'
						}
					}
				},
				vast: {
					adUnitId: '/5441/wka.fandom/_fandom//{custom.namespace}/{src}/{pos}'
				}
			});

			_export('default', ContextService);
		}
	};
});
$__System.register("1a", [], function (_export) {
	"use strict";

	_export("getTopOffset", getTopOffset);

	_export("isInViewport", isInViewport);

	function getTopOffset(element) {
		var elementWindow = element.ownerDocument.defaultView;

		var topPos = 0;

		do {
			topPos += element.offsetTop;
			element = element.offsetParent;
		} while (element !== null);

		if (elementWindow && elementWindow.frameElement) {
			topPos += getTopOffset(elementWindow.frameElement);
		}

		return topPos;
	}

	function isInViewport(element) {
		var topOffset = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];
		var bottomOffset = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];

		var elementHeight = element.offsetHeight,
		    elementTop = getTopOffset(element),
		    elementBottom = elementTop + elementHeight,
		    scrollPosition = window.scrollY,
		    viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0),
		    viewportTop = topOffset + scrollPosition,
		    viewportBottom = bottomOffset + scrollPosition + viewportHeight;

		return elementTop >= viewportTop - elementHeight / 2 && elementBottom <= viewportBottom + elementHeight / 2;
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register("4e", [], function (_export) {
	"use strict";

	_export("throttle", throttle);

	function throttle(callback, wait) {
		var context = undefined,
		    previous = 0,
		    result = undefined,
		    timeout = undefined;

		return function () {
			for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
				args[_key] = arguments[_key];
			}

			var now = Date.now(),
			    remaining = wait - (now - previous);

			context = this;

			if (timeout) {
				clearTimeout(timeout);
				timeout = null;
			}

			if (remaining <= 0 || remaining > wait) {
				previous = now;
				result = callback.apply(context, args);
				if (!timeout) {
					context = args = null;
				}
			} else {
				timeout = window.setTimeout(function () {
					result = callback.apply(context, args);
				}, wait);
			}
			return result;
		};
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('1b', ['8', '9', '1e', '1a', '4e'], function (_export) {
	var _createClass, _classCallCheck, _Object$keys, getTopOffset, throttle, callbacks, ScrollListener;

	function getUniqueId() {
		return ((1 + Math.random()) * 0x1000000).toString(16).substring(1);
	}

	function pushSlot(adStack, node) {
		adStack.push({
			id: node.id
		});
	}

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}, function (_a) {
			getTopOffset = _a.getTopOffset;
		}, function (_e2) {
			throttle = _e2.throttle;
		}],
		execute: function () {
			'use strict';

			callbacks = {};

			ScrollListener = (function () {
				function ScrollListener() {
					_classCallCheck(this, ScrollListener);
				}

				_createClass(ScrollListener, null, [{
					key: 'init',
					value: function init() {
						document.addEventListener('scroll', throttle(function (event) {
							_Object$keys(callbacks).forEach(function (id) {
								if (typeof callbacks[id] === 'function') {
									callbacks[id](event, id);
								}
							});
						}, 100));
					}
				}, {
					key: 'addSlot',
					value: function addSlot(adStack, id) {
						var threshold = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];

						var node = document.getElementById(id);

						if (!node) {
							return;
						}

						ScrollListener.addCallback(function (event, callbackId) {
							var scrollPosition = window.scrollY || window.pageYOffset || document.documentElement.scrollTop,
							    slotPosition = getTopOffset(node),
							    viewPortHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);

							if (scrollPosition + viewPortHeight > slotPosition - threshold) {
								ScrollListener.removeCallback(callbackId);
								pushSlot(adStack, node);
							}
						});
					}
				}, {
					key: 'addCallback',
					value: function addCallback(callback) {
						var id = getUniqueId();
						callbacks[id] = callback;

						return id;
					}
				}, {
					key: 'removeCallback',
					value: function removeCallback(id) {
						delete callbacks[id];
					}
				}]);

				return ScrollListener;
			})();

			_export('default', ScrollListener);
		}
	};
});
$__System.register('4f', ['8', '9', '1a', '3d', '1b'], function (_export) {
	var _createClass, _classCallCheck, getTopOffset, Context, ScrollListener, adsInRail, biggestAdSize, rail, railWrapper, availableSpace, FloatingRail;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_a) {
			getTopOffset = _a.getTopOffset;
		}, function (_d) {
			Context = _d['default'];
		}, function (_b) {
			ScrollListener = _b['default'];
		}],
		execute: function () {
			'use strict';

			adsInRail = 2;
			biggestAdSize = 600;
			rail = document.getElementsByClassName('side-rail')[0];
			railWrapper = document.getElementsByClassName('side-rail-wrapper')[0];
			availableSpace = null;

			FloatingRail = (function () {
				function FloatingRail() {
					_classCallCheck(this, FloatingRail);
				}

				_createClass(FloatingRail, [{
					key: 'init',

					value: function init(params) {
						var offset = params.offset || 0;

						if (!railWrapper || !FloatingRail.isEnabled() || FloatingRail.getAvailableSpace() === 0) {
							return;
						}

						var floatingSpace = Math.min(offset, FloatingRail.getAvailableSpace());

						ScrollListener.addCallback(function () {
							var start = getTopOffset(rail),
							    end = start + floatingSpace,
							    scrollPosition = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;

							if (scrollPosition <= start) {
								railWrapper.style.paddingTop = '';
								railWrapper.classList.add('static');
								railWrapper.classList.remove('fixed');
							} else if (scrollPosition >= end) {
								railWrapper.style.paddingTop = floatingSpace + 'px';
								railWrapper.classList.remove('static');
								railWrapper.classList.remove('fixed');
							} else {
								railWrapper.style.paddingTop = '';
								railWrapper.classList.remove('static');
								railWrapper.classList.add('fixed');
							}
						});
					}
				}], [{
					key: 'isEnabled',
					value: function isEnabled() {
						return Context.get('state.isMobile') === false && Context.get('custom.namespace') === 'article';
					}
				}, {
					key: 'getAvailableSpace',
					value: function getAvailableSpace() {
						if (availableSpace === null) {
							var childrenHeight = railWrapper.lastElementChild.offsetTop + railWrapper.lastElementChild.offsetHeight,
							    space = railWrapper.offsetHeight;

							availableSpace = Math.max(0, space - childrenHeight - adsInRail * biggestAdSize);
						}

						return availableSpace;
					}
				}]);

				return FloatingRail;
			})();

			_export('default', FloatingRail);
		}
	};
});
$__System.register('50', [], function (_export) {
	'use strict';

	_export('getBucket', getBucket);

	function getBucket(number, bucketSize) {
		return parseInt(number / bucketSize, 10) * bucketSize;
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('51', ['50', '1e', '3d', '4f'], function (_export) {
	var getBucket, _Object$keys, Context, FloatingRail, getPageTypeShortcut, setupTargeting;

	return {
		setters: [function (_) {
			getBucket = _.getBucket;
		}, function (_e) {
			_Object$keys = _e['default'];
		}, function (_d) {
			Context = _d['default'];
		}, function (_f) {
			FloatingRail = _f['default'];
		}],
		execute: function () {
			'use strict';

			getPageTypeShortcut = function getPageTypeShortcut(adsPageType) {
				switch (adsPageType) {
					case 'article':
						return 'a';
					case 'home':
						return 'h';
					case 'hub':
						return 'v';
					default:
						return 'x';
				}
			};

			setupTargeting = function setupTargeting(data) {
				var isMobileScreenSize = Context.get('state.isMobile');
				var slots = Context.get('slots');
				var srcParam = '1';

				if (data.adsPageType === 'home') {
					Context.set('targeting.vertical', 'home');
				} else if (data.adsPageType === 'hub') {
					Context.set('targeting.hub', data.verticals[0]);
				} else if (data.verticals && data.verticals.length) {
					Context.set('targeting.vertical', data.verticals);
				}

				if (data.id) {
					Context.set('targeting.post_id', data.id.toString());
					Context.set('targeting.page_url', window.location.toString());
				} else {
					Context.set('targeting.post_id', '-1');
				}

				if (data.topics && data.topics.length) {
					Context.set('targeting.topic', data.topics);
				}

				if (data.tags && data.tags.length) {
					Context.set('targeting.tags', data.tags);
				}

				if (data.categories && data.categories.length) {
					Context.set('targeting.categories', data.categories);
				}

				if (window.Krux && Krux.segments && Krux.user) {
					Context.set('targeting.ksg', Krux.segments);
					Context.set('targeting.kuid', Krux.user);
				}

				if (FloatingRail.isEnabled()) {
					var availableRightRailSpace = getBucket(FloatingRail.getAvailableSpace(), 100);
					Context.set('targeting.rrspace', availableRightRailSpace.toString());
				}

				var pageTypeParam = getPageTypeShortcut(data.adsPageType);
				var skinParam = isMobileScreenSize ? 'd' : 'f';

				_Object$keys(slots).forEach(function (slotName) {
					var slot = slots[slotName];
					var slotParam = slot.slotShortcut || 'x';

					slot.targeting.wsi = skinParam + slotParam + pageTypeParam + srcParam;
				});

				Context.set('targeting.wsi', skinParam + 'x' + pageTypeParam + srcParam);
				Context.set('targeting.lang', 'en');
				Context.set('targeting.host', window.location.hostname);
				Context.set('targeting.skin', 'fandom_' + (isMobileScreenSize === true ? 'mobile' : 'desktop'));
			};

			_export('setupTargeting', setupTargeting);
		}
	};
});
$__System.register('52', ['23', '25', '26', '40', '51', '3d', '4f', '4d'], function (_export) {
	'use strict';

	var AdEngine, AdSkin, BigFancyAdAbove, BigFancyAdBelow, setupTargeting, Context, FloatingRail, Playwire;

	function setupContext() {
		var namespaces = {
			article: 'article',
			home: 'home',
			hub: 'vertical',
			other: 'other',
			video: 'video'
		},
		    namespace = namespaces[window.upstream.pageType];

		Context.set('state.adStack', window.upstream.ads.adStack);
		Context.set('state.isMobile', window.upstream.isMobileScreenSize);

		if (namespace) {
			Context.set('custom.namespace', namespace);
			Context.set('custom.upperCaseNamespace', namespace.toUpperCase());
		}

		addAdvertLabelToGPTAds();
	}

	function addAdvertLabelToGPTAds() {
		if (googletag.pubads) {
			var _ret = (function () {
				var adText = document.querySelector('[data-win-advertisement-text]');
				if (!adText) {
					return {
						v: undefined
					};
				}

				var translatedText = adText.getAttribute('data-win-advertisement-text');

				googletag.pubads().addEventListener('slotRenderEnded', function (event) {
					var fullAdId = event.slot.D;

					var indexOfLastSlash = fullAdId.lastIndexOf('/');
					var adId = fullAdId.substring(indexOfLastSlash + 1);

					var adDiv = document.querySelector('[id*=' + adId + ']');
					adDiv.setAttribute('data-win-advertisement-text', translatedText);
				});
			})();

			if (typeof _ret === 'object') return _ret.v;
		}
	}

	return {
		setters: [function (_) {
			AdEngine = _['default'];
		}, function (_2) {
			AdSkin = _2['default'];
		}, function (_3) {
			BigFancyAdAbove = _3['default'];
		}, function (_4) {
			BigFancyAdBelow = _4['default'];
		}, function (_5) {
			setupTargeting = _5.setupTargeting;
		}, function (_d) {
			Context = _d['default'];
		}, function (_f) {
			FloatingRail = _f['default'];
		}, function (_d2) {
			Playwire = _d2['default'];
		}],
		execute: function () {
			_export('default', {
				init: function init(pageLevelData) {
					setupContext();
					setupTargeting(pageLevelData);

					new AdEngine().init();

					window.loadCustomAd = function (params) {
						switch (params && params.type) {
							case 'skin':
								new AdSkin(params, document.querySelector('.hero-block')).init();
								break;
							case 'bfaa':
								new BigFancyAdAbove(params).init();
								break;
							case 'bfab':
								new BigFancyAdBelow(params).init();
								break;
							case 'playwire':
								new Playwire().init(params);
								break;
							case 'floatingRail':
								new FloatingRail().init(params);
								break;
						}
					};
				}
			});
		}
	};
});
$__System.register('3f', ['8', '9', 'c'], function (_export) {
	var _createClass, _classCallCheck, utils, _canUseStorage, LocalCache;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			utils = _c;
		}],
		execute: function () {

			'use strict';

			_canUseStorage = undefined;

			LocalCache = (function () {
				function LocalCache() {
					_classCallCheck(this, LocalCache);
				}

				_createClass(LocalCache, null, [{
					key: 'canUseStorage',

					value: function canUseStorage() {
						if (typeof _canUseStorage === 'undefined') {
							_canUseStorage = false;
							if (window.localStorage) {
								try {
									window.localStorage.setItem('test', '1');
									window.localStorage.removeItem('test');
									_canUseStorage = true;
								} catch (e) {
									try {
										LocalCache.createPolyfill();
										_canUseStorage = true;
									} catch (e) {
										utils.logger('Local Storage polyfill error: ', e);
									}
								}
							}
						}

						return _canUseStorage;
					}

				}, {
					key: 'createPolyfill',
					value: function createPolyfill() {
						utils.logger('Local Storage polyfill being created');
						Storage.prototype._data = {};

						Storage.prototype.setItem = function (id, val) {
							this._data[id] = String(val);
						};

						Storage.prototype.getItem = function (id) {
							return this._data.hasOwnProperty(id) ? this._data[id] : null;
						};

						Storage.prototype.removeItem = function (id) {
							delete this._data[id];
						};

						Storage.prototype.clear = function () {
							this._data = {};
						};
					}

				}, {
					key: 'get',
					value: function get(key) {
						if (!LocalCache.canUseStorage()) {
							return false;
						}

						var cacheItem = window.localStorage.getItem(key);

						if (cacheItem) {
							cacheItem = JSON.parse(cacheItem);

							if (LocalCache.isExpired(cacheItem)) {
								LocalCache['delete'](key);
								return false;
							}

							return cacheItem._data;
						}

						return false;
					}

				}, {
					key: 'set',
					value: function set(key, value) {
						var expires = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];

						if (!LocalCache.canUseStorage() || !LocalCache.isStorable(value)) {
							return false;
						}

						var cacheItem = { '_data': value };

						expires = parseInt(expires);
						if (!isNaN(expires)) {
							cacheItem._expires = expires * 1000 + Date.now();
						}

						try {
							window.localStorage.setItem(key, JSON.stringify(cacheItem));
						} catch (e) {
							return false;
						}

						return true;
					}

				}, {
					key: 'delete',
					value: function _delete(key) {
						if (!LocalCache.canUseStorage()) {
							return;
						}

						window.localStorage.removeItem(key);
					}

				}, {
					key: 'isStorable',
					value: function isStorable(value) {
						if (
						typeof value === 'function' ||
						typeof value === 'number' && isNaN(value) ||
						typeof value === 'undefined') {
							return false;
						}

						return true;
					}

				}, {
					key: 'isExpired',
					value: function isExpired(cacheItem) {
						return cacheItem._expires && Date.now() >= parseInt(cacheItem._expires);
					}
				}]);

				return LocalCache;
			})();

			_export('default', LocalCache);
		}
	};
});
$__System.register('53', ['8', '9', '10', '12', '1e', 'c', '3f'], function (_export) {
	var _createClass, _classCallCheck, _getIterator, _Promise, _Object$keys, utils, LocalCache, defaultAvatarSrc, UserProfile;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_4) {
			_getIterator = _4['default'];
		}, function (_3) {
			_Promise = _3['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}, function (_c) {
			utils = _c;
		}, function (_f) {
			LocalCache = _f['default'];
		}],
		execute: function () {
			'use strict';

			defaultAvatarSrc = window.upstream.siteUrl + '/wp-content/themes/upstream/dist/svg/default-user-avatar.svg';

			UserProfile = (function () {
				function UserProfile() {
					_classCallCheck(this, UserProfile);
				}

				_createClass(UserProfile, null, [{
					key: 'getUserData',

					value: function getUserData(userIds, callback) {
						if (!Array.isArray(userIds)) {
							userIds = [userIds];
						}

						var cachedUserData = {},
						    userData = undefined;

						userIds.forEach(function (id) {
							userData = LocalCache.get('userData_' + id);
							if (userData) {
								cachedUserData[id] = userData;
								userIds.splice(userIds.indexOf(id), 1);
							}
						});

						if (_Object$keys(cachedUserData).length > 0) {
							callback(cachedUserData);

							if (userIds.length === 0) {
								return;
							}
						}

						UserProfile.getUserDataFromApi(userIds).then(function (userData) {
							callback(userData);
						})['catch'](function (message) {
							utils.logger(message);
						});
					}

				}, {
					key: 'getUserDataFromApi',
					value: function getUserDataFromApi(userIds) {
						return new _Promise(function (resolve, reject) {
							utils.ajax({
								url: 'https://services.wikia.com/profile/bulk',
								json: true,
								data: {
									id: userIds
								},
								success: function success(response) {
									if (response.users) {
										var userData = UserProfile.formatUserData(response.users);
										UserProfile.cacheUserData(userData);
										resolve(userData);
									} else {
										reject('User data returned in unexpected format');
									}
								},
								error: function error() {
									reject('An error occurred while requesting user data');
								}
							});
						});
					}

				}, {
					key: 'cacheUserData',
					value: function cacheUserData(userData) {
						for (var userId in userData) {
							LocalCache.set('userData_' + userId, userData[userId], 3600);
						}
					}

				}, {
					key: 'showUserData',
					value: function showUserData(elements) {
						if (elements.length === 0) {
							return;
						}

						var userIds = [],
						    userId = undefined;

						var _iteratorNormalCompletion = true;
						var _didIteratorError = false;
						var _iteratorError = undefined;

						try {
							for (var _iterator = _getIterator(elements), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
								var element = _step.value;

								userId = element.getAttribute('data-user-id');
								if (userId) {
									userIds.push(userId);
								}
							}
						} catch (err) {
							_didIteratorError = true;
							_iteratorError = err;
						} finally {
							try {
								if (!_iteratorNormalCompletion && _iterator['return']) {
									_iterator['return']();
								}
							} finally {
								if (_didIteratorError) {
									throw _iteratorError;
								}
							}
						}

						if (userIds.length > 0) {
							userIds = utils.deduplicateArray(userIds);
							UserProfile.getUserData(userIds, function (userData) {
								UserProfile.populateUserData(elements, userData);
							});
						}
					}

				}, {
					key: 'populateUserData',
					value: function populateUserData(elements, userData) {
						var _iteratorNormalCompletion2 = true;
						var _didIteratorError2 = false;
						var _iteratorError2 = undefined;

						try {
							for (var _iterator2 = _getIterator(elements), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
								var element = _step2.value;

								var userId = element.getAttribute('data-user-id');

								if (!userData[userId]) {
									utils.logger('No user data exists for ID: ' + userId);
									continue;
								}

								var avatarElement = element.querySelector('img[data-avatar]');
								if (avatarElement) {
									if (userData[userId].media.avatar) {
										avatarElement.src = UserProfile.getScaledAvatar(userData[userId].media.avatar, avatarElement.width);
									} else {
										avatarElement.src = defaultAvatarSrc;
									}
								}

								var nameElement = element.querySelector('[data-name]');
								if (nameElement) {
									nameElement.innerHTML = userData[userId].name ? userData[userId].name : userData[userId].userName;
								}

								var bioElement = element.querySelector('[data-bio]');
								if (bioElement && userData[userId].bio) {
									bioElement.innerHTML = userData[userId].bio;
								}

								var profileLinks = element.querySelectorAll('[data-profile-link]');
								var _iteratorNormalCompletion3 = true;
								var _didIteratorError3 = false;
								var _iteratorError3 = undefined;

								try {
									for (var _iterator3 = _getIterator(profileLinks), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
										var profileLink = _step3.value;

										profileLink.setAttribute('href', 'https://www.fandom.com/u/' + userData[userId].userName);
									}
								} catch (err) {
									_didIteratorError3 = true;
									_iteratorError3 = err;
								} finally {
									try {
										if (!_iteratorNormalCompletion3 && _iterator3['return']) {
											_iterator3['return']();
										}
									} finally {
										if (_didIteratorError3) {
											throw _iteratorError3;
										}
									}
								}

								var facebookLink = element.querySelector('[data-facebook-link]');
								if (facebookLink) {
									var facebookData = UserProfile.getSocialNetwork(userData[userId], 'facebook');
									if (facebookData && facebookData.url) {
										facebookLink.setAttribute('href', facebookData.url);
										facebookLink.style.display = 'inline-block';
									}
								}

								var twitterLink = element.querySelector('[data-twitter-link]');
								if (twitterLink) {
									var twitterData = UserProfile.getSocialNetwork(userData[userId], 'twitter');
									if (twitterData && twitterData.url) {
										twitterLink.setAttribute('href', 'http://twitter.com/' + twitterData.url);
										twitterLink.style.display = 'inline-block';
									}
								}

								element.style.visibility = 'visible';
							}
						} catch (err) {
							_didIteratorError2 = true;
							_iteratorError2 = err;
						} finally {
							try {
								if (!_iteratorNormalCompletion2 && _iterator2['return']) {
									_iterator2['return']();
								}
							} finally {
								if (_didIteratorError2) {
									throw _iteratorError2;
								}
							}
						}
					}

				}, {
					key: 'getSocialNetwork',
					value: function getSocialNetwork(userData, socialNetwork) {
						return userData.socialNetworks.find(function (element) {
							return element.network === socialNetwork;
						});
					}

				}, {
					key: 'formatUserData',
					value: function formatUserData(userData) {
						var formatted = {};

						userData.forEach(function (data) {
							formatted[data.userId] = data;
						});

						return formatted;
					}

				}, {
					key: 'getScaledAvatar',
					value: function getScaledAvatar(url, width) {
						if (!width) {
							width = 60;
						}
						var regex = /^(https?:\/\/static\.wikia\.nocookie\.net\/[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12})/;
						var regexExec = regex.exec(url);
						if (regexExec !== null) {
							url = regexExec[1] + '/scale-to-width-down/' + width;
						}
						return url;
					}
				}]);

				return UserProfile;
			})();

			_export('default', UserProfile);
		}
	};
});
$__System.register('54', [], function (_export) {
	'use strict';


	_export('moveRightRailIfMobile', moveRightRailIfMobile);

	function moveRightRailIfMobile() {
		if (window.upstream.isMobileScreenSize) {
			var topCommunity = document.querySelector('body.search-results .top-community');

			if (topCommunity) {
				var otherCommunitiesSelector = '.other-communities-link',
				    fragment = document.createDocumentFragment(),
				    posts = document.querySelectorAll('.post'),
				    index = posts.length > 5 ? 4 : posts.length - 1;

				fragment.appendChild(topCommunity);
				fragment.appendChild(document.querySelector(otherCommunitiesSelector));

				posts[index].insertAdjacentHTML('afterEnd', fragment.querySelector(otherCommunitiesSelector).outerHTML);
				posts[index].insertAdjacentHTML('afterEnd', fragment.querySelector('.top-community').outerHTML);
			}
		}
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('55', ['12'], function (_export) {
	var _Promise;

	function callKrux(id) {
		return new _Promise(function (resolve) {
			if (id) {
				window.Krux('admEvent', id, {});
				setTimeout(resolve, 300);
			} else {
				resolve();
			}
		});
	}

	function getKruxImpressionId(elem) {
		return elem.dataset.kruxImpressionId;
	}

	function getKruxEventId(elem) {
		return elem.dataset.kruxEventId;
	}

	function trackKruxImpression() {
		var impressionElements = document.querySelectorAll('[data-krux-impression-id]');
		var forEach = Array.prototype.forEach;

		forEach.call(impressionElements, function (elem) {
			var impressionId = elem.dataset.kruxImpressionId;
			callKrux(impressionId);
		});
	}

	function initKrux() {
		if (!window.Krux) {
			window.Krux = function (event, id) {
				console.log('krux called in dev mode: ' + event + ' / ' + id);
			};
		}
		trackKruxImpression();
	}

	return {
		setters: [function (_) {
			_Promise = _['default'];
		}],
		execute: function () {
			'use strict';

			_export('callKrux', callKrux);

			_export('getKruxImpressionId', getKruxImpressionId);

			_export('getKruxEventId', getKruxEventId);

			_export('default', initKrux);
		}
	};
});
$__System.register('56', ['c'], function (_export) {
	'use strict';
	var logger;

	_export('default', initLiftigniter);

	function initLiftigniter() {
		if (!window.$p) {
			window.$p = function (event, options) {
				logger('liftigniter called in dev mode: ' + event, options);
			};
		}
		$p("init", "l9ehhrb6mtv75bp2");
		$p("send", "pageview");
	}

	return {
		setters: [function (_c) {
			logger = _c.logger;
		}],
		execute: function () {}
	};
});
$__System.registerDynamic('57', ['58', '59'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var toObject = $__require('58');
  $__require('59')('keys', function ($keys) {
    return function keys(it) {
      return $keys(toObject(it));
    };
  });
});
$__System.registerDynamic('5a', ['57', '46'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('57');
  module.exports = $__require('46').Object.keys;
});
$__System.registerDynamic("1e", ["5a"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("5a"), __esModule: true };
});
$__System.register('5b', [], function (_export) {
	'use strict';


	_export('setCookie', setCookie);

	_export('readCookie', readCookie);

	function setCookie(name, value, days) {
		var expires = '';
		if (days) {
			var date = new Date();
			date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
			expires = '; expires=' + date.toGMTString();
		}
		document.cookie = name + '=' + value + expires + '; path=/';
	}

	function readCookie(name) {
		var allCookies = document.cookie.split(';'),
		    i = allCookies.length - 1,
		    cookie = undefined;
		while (i >= 0) {
			cookie = allCookies[i].split('=');
			if (cookie[0].trim() === name) {
				return cookie[1];
			}
			i--;
		}
		return null;
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('5c', ['41', '1e', '5b', 'c'], function (_export) {
	var _Object$assign, _Object$keys, readCookie, loadScript, log, baseUrl, beacon;

	function getConfig() {
		return {
			s: 'upstream',
			lc: 'en',
			x: window.upstream.wikiBridge.database,
			c: window.upstream.wikiBridge.wikiId,
			beacon: beacon || '',
			cb: Math.floor(Math.random() * 99999),
			url: window.location.href,
			r: document.referrer
		};
	}

	function isPageView(category) {
		return category.toLowerCase() === 'view';
	}

	function createRequestURL(category, params) {
		var parts = [],
		    targetRoute = isPageView(category) ? 'view' : 'special/trackingevent';

		_Object$keys(params).forEach(function (key) {
			var value = params[key];

			if (value !== null) {
				var paramStr = encodeURIComponent(key) + '=' + encodeURIComponent(value);

				parts.push(paramStr);
			}
		});

		return '' + baseUrl + targetRoute + '?' + parts.join('&');
	}


	function initialize() {
		trackPageView({
			a: window.upstream.post.id || '',
			page: window.upstream.post.title || ''
		});
	}


	function trackPageView(context) {
		track(_Object$assign({}, {
			ga_category: 'view'
		}, context));
	}


	function track(params) {
		if (!window.upstream.wikiBridge) {
			log('Wiki bridge not setup, ignoring internal tracking call');
			return;
		}

		var config = _Object$assign({}, params, getConfig()),
		    url = createRequestURL(config.ga_category, config);

		if (window.upstream.env === 'production') {
			loadScript(url, 'undefined', function () {});
		} else {
			log('Internal tracking called in dev mode: ', url);
		}
	}

	return {
		setters: [function (_) {
			_Object$assign = _['default'];
		}, function (_e) {
			_Object$keys = _e['default'];
		}, function (_b) {
			readCookie = _b.readCookie;
		}, function (_c) {
			loadScript = _c.loadScript;
			log = _c.logger;
		}],
		execute: function () {
			'use strict';

			_export('initialize', initialize);

			_export('trackPageView', trackPageView);

			_export('track', track);

			baseUrl = 'https://beacon.wikia-services.com/__track/';
			beacon = readCookie('wikia_beacon_id');
		}
	};
});
$__System.register('7', ['8', '9', '41', 'c'], function (_export) {
	var _createClass, _classCallCheck, _Object$assign, logger, instance, GATracker;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_3) {
			_Object$assign = _3['default'];
		}, function (_c) {
			logger = _c.logger;
		}],
		execute: function () {
			'use strict';

			instance = null;

			GATracker = (function () {


				function GATracker(isAnonymous) {
					_classCallCheck(this, GATracker);

					if (instance === null) {
						instance = this;
					}

					this.fandomAccount = {
						'production': {
							'id': 'UA-71552437-1',
							'name': 'fandomProd'
						},
						'development': {
							'id': 'UA-71552437-2',
							'name': 'fandomDev'
						}
					};

					this.wikiAccountSampled = {
						'production': {
							'id': 'UA-32129070-1',
							'name': 'wikiSampledProd'
						},
						'development': {
							'id': 'UA-32129070-2',
							'name': 'wikiSampledDev'
						}
					};

					this.wikiAccountUnsampled = {
						'production': {
							'id': 'UA-32132943-1',
							'name': 'wikiUnsampledProd'
						},
						'development': {
							'id': 'UA-32132943-2',
							'name': 'wikiUnsampledDev'
						}
					};

					this.isStoriesPage = ['corporate', 'explore'].indexOf(window.upstream.pageType) === -1;
					this.activeTrackers = [];
					this.environment = window.upstream.env === 'production' ? 'production' : 'development';

					return instance;
				}


				_createClass(GATracker, [{
					key: 'init',
					value: function init(isAnonymous) {
						var _this = this;

						ga(function () {
							if (_this.isStoriesPage) {
								_this.activeTrackers.push(_this.fandomAccount[_this.environment]);
								_this.activeTrackers.push(_this.wikiAccountUnsampled[_this.environment]);
							}

							_this.createTrackers();
							_this.setTrackerHostname();
							_this.setTrackerLocation();
							if (isAnonymous) {
								_this.setTrackerAnonymous();
							}

							if (_this.isStoriesPage) {
								_this.setDimensions(_this.activeTrackers);
							}

							_this.sendPageview();
						});
					}
				}, {
					key: 'createTrackers',
					value: function createTrackers() {
						this.activeTrackers.forEach(function (tracker) {
							ga('create', tracker.id, 'auto', tracker.name);
						});

						ga('create', this.wikiAccountSampled[this.environment].id, 'auto', this.wikiAccountSampled[this.environment].name, {
							sampleRate: 100
						});
					}
				}, {
					key: 'setTrackerAnonymous',
					value: function setTrackerAnonymous() {
						this.activeTrackers.forEach(function (tracker) {
							ga(tracker.name + '.set', 'anonymizeIp', true);
						});
					}
				}, {
					key: 'setTrackerHostname',
					value: function setTrackerHostname() {
						this.activeTrackers.forEach(function (tracker) {
							ga(tracker.name + '.set', 'hostname', 'wikia.com');
						});
					}
				}, {
					key: 'setTrackerLocation',
					value: function setTrackerLocation() {
						if (window.location.pathname === '/fandom') {
							this.activeTrackers.forEach(function (tracker) {
								ga(tracker.name + '.set', 'location', 'https://www.fandom.com/');
							});
						}
					}
				}, {
					key: 'sendPageview',
					value: function sendPageview() {
						this.activeTrackers.forEach(function (tracker) {
							ga(tracker.name + '.send', 'pageview');
						});
					}

				}, {
					key: 'setDimensions',
					value: function setDimensions() {
						var dimensions = [];

						dimensions[1] = window.upstream.pageType || '';
						dimensions[2] = window.upstream.post.verticals.join(',') || '';
						dimensions[3] = window.upstream.post.topics.concat(window.upstream.post.events).join(',') || '';
						dimensions[4] = window.upstream.post.author || '';
						dimensions[5] = window.upstream.post.authorType || '';
						if (window.upstream.post.publishDate) {
							dimensions[6] = window.upstream.post.publishDate.split(' ')[0];
						} else {
							dimensions[6] = '';
						}
						dimensions[7] = window.upstream.post.id || '';
						dimensions[8] = window.upstream.contentLanguage || '';


						this.activeTrackers.forEach(function (tracker) {
							dimensions.forEach(function (value, idx) {
								if (value !== null && typeof value !== 'undefined') {
									value = value.toString();
								}
								ga(tracker.name + '.set', 'dimension' + idx, value);
							});
						});
					}
				}, {
					key: 'isValidGaEventObj',
					value: function isValidGaEventObj(obj) {
						return typeof obj.category === 'string' && typeof obj.label === 'string' && typeof obj.action === 'string' && (typeof obj.value !== 'undefined' ? typeof obj.value === 'number' : true);
					}
				}, {
					key: 'track',
					value: function track(params) {
						params = _Object$assign({}, {
							action: 'click',
							category: window.upstream.pageType
						}, params);

						if (typeof params.nonInteraction === 'undefined') {
							throw new Error('Missing `nonInteraction` field for tracked event');
						}

						if (this.isValidGaEventObj(params)) {
							return ga(this.fandomAccount[this.environment].name + '.send', 'event', params.category, params.action, params.label, params.value, {
								nonInteraction: params.nonInteraction,
								hitCallback: function hitCallback() {
									logger('ga tracking sent', params);
								}
							});
						}

						throw new Error('Invalid params for tracking call. Make sure string values are specified for category, label and action\n\t\t\t If a value is specified, it must a number type');
					}
				}]);

				return GATracker;
			})();

			_export('default', GATracker);
		}
	};
});
$__System.register('5d', ['7'], function (_export) {

	'use strict';

	var GATracker, GaTrackingMixin;
	return {
		setters: [function (_) {
			GATracker = _['default'];
		}],
		execute: function () {
			GaTrackingMixin = {
				init: function init() {
					var _this = this;

					var trackingEvent = this.opts.trackingEvent || 'click';
					var dataTracking = this.root.getAttribute('data-tracking');
					var dataLabel = dataTracking && JSON.parse(dataTracking).label;

					this.root.addEventListener(trackingEvent, function () {
						var trackingParams = {
							category: _this.opts.trackingCategory || window.upstream.pageType,
							label: dataLabel || _this.opts.trackingLabel,
							action: trackingEvent
						};

						trackingParams.nonInteraction = trackingParams.action !== 'click';

						var value = _this.root.getAttribute('tracking-value');
						if (value && typeof parseInt(value) === 'number') {
							trackingParams.value = parseInt(value);
						}

						var gaTracker = new GATracker();
						gaTracker.track(trackingParams);
					});
				}
			};

			_export('GaTrackingMixin', GaTrackingMixin);
		}
	};
});
$__System.register('5e', ['e', '5d'], function (_export) {
	'use strict';

	var riot, GaTrackingMixin;
	return {
		setters: [function (_e) {
			riot = _e['default'];
		}, function (_d) {
			GaTrackingMixin = _d.GaTrackingMixin;
		}],
		execute: function () {

			riot.tag('trackable', '<yield></yield>', function () {
				this.mixin(GaTrackingMixin);
			});
		}
	};
});
$__System.register('5f', ['7', '55', '56', 'e', '5c', '5e'], function (_export) {
	'use strict';

	var GATracker, initKrux, initLiftigniter, riot, initializeInternal;

	function loadAnonymousUserScripts() {
		var head = document.querySelector('head');
		var body = document.querySelector('body');


		if (window.upstream.shouldLoadParsely) {
			var script = document.createElement('script');
			script.setAttribute('id', 'parsely-script');
			script.setAttribute('src', '//d1z2jf7jlzjs58.cloudfront.net/p.js');
			body.appendChild(script);
		}
	}

	function loadOptInScripts() {
		var head = document.querySelector('head');
		var body = document.querySelector('body');

		var script = document.createElement('script');
		script.setAttribute('class', 'kxct');
		script.setAttribute('data-id', 'KPSUiAKl');
		script.setAttribute('data-timing', 'async');
		script.setAttribute('data-version', '1.9');
		script.innerHTML = 'window.Krux||((Krux=function(){Krux.q.push(arguments)}).q=[]);' + '(function(){' + '  var k=document.createElement("script");k.type="text/javascript";k.async=true;' + '  var m,src=(m=location.href.match(/\\bkxsrc=([^&]+)/))&&decodeURIComponent(m[1]);' + '  k.src = /^https?:\\/\\/([a-z0-9_\\-\\.]+\\.)?krxd\\.net(:\\d{1,5})?\\//i.test(src) ? src : src === "disable" ? "" :' + '  (location.protocol==="https:"?"https:":"http:")+"//cdn.krxd.net/controltag?confid=KPSUiAKl";' + '  var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(k,s);' + '}());';
		head.appendChild(script);

		script = document.createElement('script');
		script.innerHTML = 'window.Krux || ((Krux = function() {' + 'Krux.q.push(arguments);' + '}).q = []);' + '(function() {' + '  function retrieve(n) {' + '    var m, k = "kx" + n;' + '    if (window.localStorage) {' + '      return window.localStorage[k] || "";' + '    } else if (navigator.cookieEnabled) {' + '      m = document.cookie.match(k + "=([^;]*)");' + '      return (m && unescape(m[1])) || "";' + '    } else {' + '      return "";' + '    }' + '  }' + '  Krux.user = retrieve("user");' + '  Krux.segments = retrieve("segs") && retrieve("segs").split(",") || [];' + '})();';
		head.appendChild(script);

		initKrux();

		if (window.upstream.env === 'production') {
			var _script = document.createElement('script');
			_script.innerHTML = '(function(w,d,s,p,v,e,r) {w["$igniter_var"]=v;w[v]=w[v]||function(){(w[v].q=w[v].q||[]).push(' + 'arguments)};w[v].l=1*new Date();e=d.createElement(s),r=d.getElementsByTagName(s)[0];e.async=1;' + 'e.src=p+"?ts="+(+new Date()/3600000|0);' + 'r.parentNode.insertBefore(e,r)})(window,document,"script","//cdn.petametrics.com/l9ehhrb6mtv75bp2.js","$p");';
			_script.onload = initLiftigniter;
			head.appendChild(_script);
		}

		script = document.createElement('script');
		script.innerHTML = 'var _comscore = _comscore || [];' + '_comscore.push({ c1: "2", c2: "' + window.upstream.comscorePartnerId + '",' + 'options: { url_append: "comscorekw=' + window.upstream.comscoreKeyword + '" }' + '});' + '(function() {' + 'var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;' + 's.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";' + 'el.parentNode.insertBefore(s, el);' + '})();';
		head.appendChild(script);

		script = document.createElement('script');
		script.innerHTML = 'var _qevents = _qevents || [];' + '(function() {' + '  var elem = document.createElement("script");' + '  elem.src = (document.location.protocol == "https:" ? "https://secure" : "http://edge") + ".quantserve.com/quant.js";' + '  elem.async = true;' + '  elem.type = "text/javascript";' + '  var scpt = document.getElementsByTagName("script")[0];' + '  scpt.parentNode.insertBefore(elem, scpt);' + '})();' + '_qevents.push({' + '  qacct:"p-8bG6eLqkH6Avk"' + '});';
		head.appendChild(script);
	}

	function bindTrackableElements() {
		riot.mount('[data-trackable]', 'trackable');

		riot.mount('.article-container a:not([class*=btn])', 'trackable', {
			trackingLabel: 'article.link'
		});


		riot.mount('.entry-meta .fb-share-btn', 'trackable', {
			trackingLabel: 'social.facebook.byline'
		});

		riot.mount('.entry-meta .tweet-btn', 'trackable', {
			trackingLabel: 'social.twitter.byline'
		});

		riot.mount('.entry-meta .reddit-btn', 'trackable', {
			trackingLabel: 'social.reddit.byline'
		});


		riot.mount('.floating-social .fb-share-btn', 'trackable', {
			trackingLabel: 'social.facebook.floating'
		});

		riot.mount('.floating-social .tweet-btn', 'trackable', {
			trackingLabel: 'social.twitter.floating'
		});

		riot.mount('.floating-social .reddit-btn', 'trackable', {
			trackingLabel: 'social.reddit.floating'
		});
	}

	function startTracking(isAnonymous) {
		loadAnonymousUserScripts();
		ga(function () {
			var gaTracker = new GATracker(isAnonymous);
			bindTrackableElements();
		});

		if (!isAnonymous) {
			loadOptInScripts();
		}
	}

	function init(isAnonymous) {
		startTracking(isAnonymous);

		initializeInternal();
	}

	return {
		setters: [function (_3) {
			GATracker = _3['default'];
		}, function (_) {
			initKrux = _['default'];
		}, function (_2) {
			initLiftigniter = _2['default'];
		}, function (_e) {
			riot = _e['default'];
		}, function (_c) {
			initializeInternal = _c.initialize;
		}, function (_e2) {}],
		execute: function () {
			_export('default', {
				init: init
			});
		}
	};
});
$__System.registerDynamic('58', ['60'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var defined = $__require('60');
  module.exports = function (it) {
    return Object(defined(it));
  };
});
$__System.registerDynamic('61', ['62', '58', '63', '64'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $ = $__require('62'),
      toObject = $__require('58'),
      IObject = $__require('63');
  module.exports = $__require('64')(function () {
    var a = Object.assign,
        A = {},
        B = {},
        S = Symbol(),
        K = 'abcdefghijklmnopqrst';
    A[S] = 7;
    K.split('').forEach(function (k) {
      B[k] = k;
    });
    return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;
  }) ? function assign(target, source) {
    var T = toObject(target),
        $$ = arguments,
        $$len = $$.length,
        index = 1,
        getKeys = $.getKeys,
        getSymbols = $.getSymbols,
        isEnum = $.isEnum;
    while ($$len > index) {
      var S = IObject($$[index++]),
          keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S),
          length = keys.length,
          j = 0,
          key;
      while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];
    }
    return T;
  } : Object.assign;
});
$__System.registerDynamic('65', ['66', '61'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $export = $__require('66');
  $export($export.S + $export.F, 'Object', { assign: $__require('61') });
});
$__System.registerDynamic('67', ['65', '46'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('65');
  module.exports = $__require('46').Object.assign;
});
$__System.registerDynamic("41", ["67"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("67"), __esModule: true };
});
$__System.registerDynamic('68', ['69'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;

    var Utils = $__require('69');


    var internals = {
        delimiter: '&',
        arrayPrefixGenerators: {
            brackets: function (prefix, key) {

                return prefix + '[]';
            },
            indices: function (prefix, key) {

                return prefix + '[' + key + ']';
            },
            repeat: function (prefix, key) {

                return prefix;
            }
        },
        strictNullHandling: false,
        skipNulls: false,
        encode: true
    };

    internals.stringify = function (obj, prefix, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort) {

        if (typeof filter === 'function') {
            obj = filter(prefix, obj);
        } else if (Utils.isBuffer(obj)) {
            obj = obj.toString();
        } else if (obj instanceof Date) {
            obj = obj.toISOString();
        } else if (obj === null) {
            if (strictNullHandling) {
                return encode ? Utils.encode(prefix) : prefix;
            }

            obj = '';
        }

        if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean') {

            if (encode) {
                return [Utils.encode(prefix) + '=' + Utils.encode(obj)];
            }
            return [prefix + '=' + obj];
        }

        var values = [];

        if (typeof obj === 'undefined') {
            return values;
        }

        var objKeys;
        if (Array.isArray(filter)) {
            objKeys = filter;
        } else {
            var keys = Object.keys(obj);
            objKeys = sort ? keys.sort(sort) : keys;
        }

        for (var i = 0, il = objKeys.length; i < il; ++i) {
            var key = objKeys[i];

            if (skipNulls && obj[key] === null) {

                continue;
            }

            if (Array.isArray(obj)) {
                values = values.concat(internals.stringify(obj[key], generateArrayPrefix(prefix, key), generateArrayPrefix, strictNullHandling, skipNulls, encode, filter));
            } else {
                values = values.concat(internals.stringify(obj[key], prefix + '[' + key + ']', generateArrayPrefix, strictNullHandling, skipNulls, encode, filter));
            }
        }

        return values;
    };

    module.exports = function (obj, options) {

        options = options || {};
        var delimiter = typeof options.delimiter === 'undefined' ? internals.delimiter : options.delimiter;
        var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;
        var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : internals.skipNulls;
        var encode = typeof options.encode === 'boolean' ? options.encode : internals.encode;
        var sort = typeof options.sort === 'function' ? options.sort : null;
        var objKeys;
        var filter;
        if (typeof options.filter === 'function') {
            filter = options.filter;
            obj = filter('', obj);
        } else if (Array.isArray(options.filter)) {
            objKeys = filter = options.filter;
        }

        var keys = [];

        if (typeof obj !== 'object' || obj === null) {

            return '';
        }

        var arrayFormat;
        if (options.arrayFormat in internals.arrayPrefixGenerators) {
            arrayFormat = options.arrayFormat;
        } else if ('indices' in options) {
            arrayFormat = options.indices ? 'indices' : 'repeat';
        } else {
            arrayFormat = 'indices';
        }

        var generateArrayPrefix = internals.arrayPrefixGenerators[arrayFormat];

        if (!objKeys) {
            objKeys = Object.keys(obj);
        }

        if (sort) {
            objKeys.sort(sort);
        }

        for (var i = 0, il = objKeys.length; i < il; ++i) {
            var key = objKeys[i];

            if (skipNulls && obj[key] === null) {

                continue;
            }

            keys = keys.concat(internals.stringify(obj[key], key, generateArrayPrefix, strictNullHandling, skipNulls, encode, filter, sort));
        }

        return keys.join(delimiter);
    };
});
$__System.registerDynamic('69', [], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;



    var internals = {};
    internals.hexTable = new Array(256);
    for (var h = 0; h < 256; ++h) {
        internals.hexTable[h] = '%' + ((h < 16 ? '0' : '') + h.toString(16)).toUpperCase();
    }

    exports.arrayToObject = function (source, options) {

        var obj = options.plainObjects ? Object.create(null) : {};
        for (var i = 0, il = source.length; i < il; ++i) {
            if (typeof source[i] !== 'undefined') {

                obj[i] = source[i];
            }
        }

        return obj;
    };

    exports.merge = function (target, source, options) {

        if (!source) {
            return target;
        }

        if (typeof source !== 'object') {
            if (Array.isArray(target)) {
                target.push(source);
            } else if (typeof target === 'object') {
                target[source] = true;
            } else {
                target = [target, source];
            }

            return target;
        }

        if (typeof target !== 'object') {
            target = [target].concat(source);
            return target;
        }

        if (Array.isArray(target) && !Array.isArray(source)) {

            target = exports.arrayToObject(target, options);
        }

        var keys = Object.keys(source);
        for (var k = 0, kl = keys.length; k < kl; ++k) {
            var key = keys[k];
            var value = source[key];

            if (!Object.prototype.hasOwnProperty.call(target, key)) {
                target[key] = value;
            } else {
                target[key] = exports.merge(target[key], value, options);
            }
        }

        return target;
    };

    exports.decode = function (str) {

        try {
            return decodeURIComponent(str.replace(/\+/g, ' '));
        } catch (e) {
            return str;
        }
    };

    exports.encode = function (str) {

        if (str.length === 0) {
            return str;
        }

        if (typeof str !== 'string') {
            str = '' + str;
        }

        var out = '';
        for (var i = 0, il = str.length; i < il; ++i) {
            var c = str.charCodeAt(i);

            if (c === 0x2D || 
            c === 0x2E || 
            c === 0x5F || 
            c === 0x7E || 
            c >= 0x30 && c <= 0x39 || 
            c >= 0x41 && c <= 0x5A || 
            c >= 0x61 && c <= 0x7A) {

                out += str[i];
                continue;
            }

            if (c < 0x80) {
                out += internals.hexTable[c];
                continue;
            }

            if (c < 0x800) {
                out += internals.hexTable[0xC0 | c >> 6] + internals.hexTable[0x80 | c & 0x3F];
                continue;
            }

            if (c < 0xD800 || c >= 0xE000) {
                out += internals.hexTable[0xE0 | c >> 12] + internals.hexTable[0x80 | c >> 6 & 0x3F] + internals.hexTable[0x80 | c & 0x3F];
                continue;
            }

            ++i;
            c = 0x10000 + ((c & 0x3FF) << 10 | str.charCodeAt(i) & 0x3FF);
            out += internals.hexTable[0xF0 | c >> 18] + internals.hexTable[0x80 | c >> 12 & 0x3F] + internals.hexTable[0x80 | c >> 6 & 0x3F] + internals.hexTable[0x80 | c & 0x3F];
        }

        return out;
    };

    exports.compact = function (obj, refs) {

        if (typeof obj !== 'object' || obj === null) {

            return obj;
        }

        refs = refs || [];
        var lookup = refs.indexOf(obj);
        if (lookup !== -1) {
            return refs[lookup];
        }

        refs.push(obj);

        if (Array.isArray(obj)) {
            var compacted = [];

            for (var i = 0, il = obj.length; i < il; ++i) {
                if (typeof obj[i] !== 'undefined') {
                    compacted.push(obj[i]);
                }
            }

            return compacted;
        }

        var keys = Object.keys(obj);
        for (i = 0, il = keys.length; i < il; ++i) {
            var key = keys[i];
            obj[key] = exports.compact(obj[key], refs);
        }

        return obj;
    };

    exports.isRegExp = function (obj) {

        return Object.prototype.toString.call(obj) === '[object RegExp]';
    };

    exports.isBuffer = function (obj) {

        if (obj === null || typeof obj === 'undefined') {

            return false;
        }

        return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));
    };
});
$__System.registerDynamic('6a', ['69'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;

    var Utils = $__require('69');


    var internals = {
        delimiter: '&',
        depth: 5,
        arrayLimit: 20,
        parameterLimit: 1000,
        strictNullHandling: false,
        plainObjects: false,
        allowPrototypes: false,
        allowDots: false
    };

    internals.parseValues = function (str, options) {

        var obj = {};
        var parts = str.split(options.delimiter, options.parameterLimit === Infinity ? undefined : options.parameterLimit);

        for (var i = 0, il = parts.length; i < il; ++i) {
            var part = parts[i];
            var pos = part.indexOf(']=') === -1 ? part.indexOf('=') : part.indexOf(']=') + 1;

            var key, val;
            if (pos === -1) {
                key = Utils.decode(part);
                val = options.strictNullHandling ? null : '';
            } else {
                key = Utils.decode(part.slice(0, pos));
                val = Utils.decode(part.slice(pos + 1));
            }
            if (Object.prototype.hasOwnProperty.call(obj, key)) {
                obj[key] = [].concat(obj[key]).concat(val);
            } else {
                obj[key] = val;
            }
        }

        return obj;
    };

    internals.parseObject = function (chain, val, options) {

        if (!chain.length) {
            return val;
        }

        var root = chain.shift();

        var obj;
        if (root === '[]') {
            obj = [];
            obj = obj.concat(internals.parseObject(chain, val, options));
        } else {
            obj = options.plainObjects ? Object.create(null) : {};
            var cleanRoot = root[0] === '[' && root[root.length - 1] === ']' ? root.slice(1, root.length - 1) : root;
            var index = parseInt(cleanRoot, 10);
            var indexString = '' + index;
            if (!isNaN(index) && root !== cleanRoot && indexString === cleanRoot && index >= 0 && options.parseArrays && index <= options.arrayLimit) {

                obj = [];
                obj[index] = internals.parseObject(chain, val, options);
            } else {
                obj[cleanRoot] = internals.parseObject(chain, val, options);
            }
        }

        return obj;
    };

    internals.parseKeys = function (key, val, options) {

        if (!key) {
            return;
        }


        if (options.allowDots) {
            key = key.replace(/\.([^\.\[]+)/g, '[$1]');
        }


        var parent = /^([^\[\]]*)/;
        var child = /(\[[^\[\]]*\])/g;


        var segment = parent.exec(key);


        var keys = [];
        if (segment[1]) {
            if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1])) {

                if (!options.allowPrototypes) {
                    return;
                }
            }

            keys.push(segment[1]);
        }


        var i = 0;
        while ((segment = child.exec(key)) !== null && i < options.depth) {

            ++i;
            if (!options.plainObjects && Object.prototype.hasOwnProperty(segment[1].replace(/\[|\]/g, ''))) {

                if (!options.allowPrototypes) {
                    continue;
                }
            }
            keys.push(segment[1]);
        }


        if (segment) {
            keys.push('[' + key.slice(segment.index) + ']');
        }

        return internals.parseObject(keys, val, options);
    };

    module.exports = function (str, options) {

        options = options || {};
        options.delimiter = typeof options.delimiter === 'string' || Utils.isRegExp(options.delimiter) ? options.delimiter : internals.delimiter;
        options.depth = typeof options.depth === 'number' ? options.depth : internals.depth;
        options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : internals.arrayLimit;
        options.parseArrays = options.parseArrays !== false;
        options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : internals.allowDots;
        options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : internals.plainObjects;
        options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : internals.allowPrototypes;
        options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : internals.parameterLimit;
        options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : internals.strictNullHandling;

        if (str === '' || str === null || typeof str === 'undefined') {

            return options.plainObjects ? Object.create(null) : {};
        }

        var tempObj = typeof str === 'string' ? internals.parseValues(str, options) : str;
        var obj = options.plainObjects ? Object.create(null) : {};


        var keys = Object.keys(tempObj);
        for (var i = 0, il = keys.length; i < il; ++i) {
            var key = keys[i];
            var newObj = internals.parseKeys(key, tempObj[key], options);
            obj = Utils.merge(obj, newObj, options);
        }

        return Utils.compact(obj);
    };
});
$__System.registerDynamic('6b', ['68', '6a'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;

    var Stringify = $__require('68');
    var Parse = $__require('6a');


    var internals = {};

    module.exports = {
        stringify: Stringify,
        parse: Parse
    };
});
$__System.registerDynamic("6c", ["6b"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require("6b");
});
$__System.register('6d', ['8', '9', '41', '70', '6f', '6e', '6c'], function (_export) {
	var _createClass, _classCallCheck, _Object$assign, _inherits, _get, Shareable, qs, TwitterShareable;

	return {
		setters: [function (_2) {
			_createClass = _2['default'];
		}, function (_3) {
			_classCallCheck = _3['default'];
		}, function (_4) {
			_Object$assign = _4['default'];
		}, function (_) {
			_inherits = _['default'];
		}, function (_f) {
			_get = _f['default'];
		}, function (_e) {
			Shareable = _e['default'];
		}, function (_c) {
			qs = _c;
		}],
		execute: function () {
			'use strict';

			TwitterShareable = (function (_Shareable) {
				_inherits(TwitterShareable, _Shareable);

				function TwitterShareable(opts) {
					_classCallCheck(this, TwitterShareable);

					_get(Object.getPrototypeOf(TwitterShareable.prototype), 'constructor', this).call(this);

					opts = _Object$assign({
						text: '',
						url: this.getShareableUrl(),
						hashtags: 'fandom',
						via: 'getfandom',
						related: '',
						inReplyTo: ''
					}, opts);

					this.tweetText = opts.text;
					this.url = opts.url;
					this.hashtags = opts.hashtags;
					this.via = opts.via;
					this.related = opts.related;
					this.inReplyTo = opts.inReplyTo;
				}

				_createClass(TwitterShareable, [{
					key: 'createWebIntentUrl',
					value: function createWebIntentUrl() {
						var query = {
							text: this.tweetText,
							url: this.url
						};

						if (this.hashtags.length) {
							query.hashtags = this.hashtags;
						}

						if (this.via.length) {
							query.via = this.via;
						}

						if (this.related.length) {
							query.related = this.related;
						}

						if (this.inReplyTo) {
							query['in-reply-to'] = this.inReplyTo;
						}

						return 'https://twitter.com/intent/tweet?' + qs.stringify(query);
					}
				}, {
					key: 'mountElement',
					value: function mountElement(elem) {
						if (elem.nodeName !== 'A') {
							throw new TypeError('Only <a> HTML elements may be mounted onto Twitter shareable instances');
						}
						elem.href = this.createWebIntentUrl();
					}
				}]);

				return TwitterShareable;
			})(Shareable);

			_export('default', TwitterShareable);
		}
	};
});
$__System.register('71', ['e', '6d'], function (_export) {
	'use strict';

	var riot, TwitterShareable;
	return {
		setters: [function (_e) {
			riot = _e['default'];
		}, function (_d) {
			TwitterShareable = _d['default'];
		}],
		execute: function () {

			riot.tag('tweet-button', '<yield></yield>', function (opts) {
				var _this = this;

				this.on('mount', function () {
					var tweetBtn = new TwitterShareable(opts);
					tweetBtn.mountElement(_this.root);
				});
			});
		}
	};
});
$__System.register('72', ['9', '70', '6f', '6e'], function (_export) {
	var _classCallCheck, _inherits, _get, Shareable, FacebookShareable;

	return {
		setters: [function (_2) {
			_classCallCheck = _2['default'];
		}, function (_) {
			_inherits = _['default'];
		}, function (_f) {
			_get = _f['default'];
		}, function (_e) {
			Shareable = _e['default'];
		}],
		execute: function () {
			'use strict';

			FacebookShareable = (function (_Shareable) {
				_inherits(FacebookShareable, _Shareable);

				function FacebookShareable(opts) {
					_classCallCheck(this, FacebookShareable);

					_get(Object.getPrototypeOf(FacebookShareable.prototype), 'constructor', this).call(this);
					this.url = opts.url || this.getShareableUrl();
				}

				return FacebookShareable;
			})(Shareable);

			_export('default', FacebookShareable);
		}
	};
});
$__System.register('73', ['72', 'e'], function (_export) {
	'use strict';

	var FacebookShareable, riot;
	return {
		setters: [function (_) {
			FacebookShareable = _['default'];
		}, function (_e) {
			riot = _e['default'];
		}],
		execute: function () {

			riot.tag('fb-share-button', '<yield></yield>', function (opts) {
				var _this = this;

				this.on('mount', function () {
					var facebookBtn = new FacebookShareable(opts);

					_this.root.addEventListener('click', function (event) {
						event.preventDefault();

						window.FB.ui({
							method: 'share',
							href: facebookBtn.url
						});
					});
				});
			});
		}
	};
});
$__System.registerDynamic('74', [], true, function ($__require, exports, module) {
  "format cjs";

  var global = this || self,
      GLOBAL = global;
  ;(function (window, undefined) {
    'use strict';

    var riot = { version: 'v2.6.7', settings: {} },


    __uid = 0,

    __virtualDom = [],

    __tagImpl = {},


    GLOBAL_MIXIN = '__global_mixin',


    RIOT_PREFIX = 'riot-',
        RIOT_TAG = RIOT_PREFIX + 'tag',
        RIOT_TAG_IS = 'data-is',


    T_STRING = 'string',
        T_OBJECT = 'object',
        T_UNDEF = 'undefined',
        T_FUNCTION = 'function',
        XLINK_NS = 'http://www.w3.org/1999/xlink',
        XLINK_REGEX = /^xlink:(\w+)/,

    SPECIAL_TAGS_REGEX = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,
        RESERVED_WORDS_BLACKLIST = /^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|parent|opts|trigger|o(?:n|ff|ne))$/,

    SVG_TAGS_LIST = ['altGlyph', 'animate', 'animateColor', 'circle', 'clipPath', 'defs', 'ellipse', 'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feFlood', 'feGaussianBlur', 'feImage', 'feMerge', 'feMorphology', 'feOffset', 'feSpecularLighting', 'feTile', 'feTurbulence', 'filter', 'font', 'foreignObject', 'g', 'glyph', 'glyphRef', 'image', 'line', 'linearGradient', 'marker', 'mask', 'missing-glyph', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'switch', 'symbol', 'text', 'textPath', 'tref', 'tspan', 'use'],


    IE_VERSION = (window && window.document || {}).documentMode | 0,


    FIREFOX = window && !!window.InstallTrigger;
    riot.observable = function (el) {


      el = el || {};

      var callbacks = {},
          slice = Array.prototype.slice;


      function onEachEvent(e, fn) {
        var es = e.split(' '),
            l = es.length,
            i = 0;
        for (; i < l; i++) {
          var name = es[i];
          if (name) fn(name, i);
        }
      }


      Object.defineProperties(el, {
        on: {
          value: function (events, fn) {
            if (typeof fn != 'function') return el;

            onEachEvent(events, function (name, pos) {
              (callbacks[name] = callbacks[name] || []).push(fn);
              fn.typed = pos > 0;
            });

            return el;
          },
          enumerable: false,
          writable: false,
          configurable: false
        },

        off: {
          value: function (events, fn) {
            if (events == '*' && !fn) callbacks = {};else {
              onEachEvent(events, function (name, pos) {
                if (fn) {
                  var arr = callbacks[name];
                  for (var i = 0, cb; cb = arr && arr[i]; ++i) {
                    if (cb == fn) arr.splice(i--, 1);
                  }
                } else delete callbacks[name];
              });
            }
            return el;
          },
          enumerable: false,
          writable: false,
          configurable: false
        },

        one: {
          value: function (events, fn) {
            function on() {
              el.off(events, on);
              fn.apply(el, arguments);
            }
            return el.on(events, on);
          },
          enumerable: false,
          writable: false,
          configurable: false
        },

        trigger: {
          value: function (events) {

            var arglen = arguments.length - 1,
                args = new Array(arglen),
                fns;

            for (var i = 0; i < arglen; i++) {
              args[i] = arguments[i + 1]; 
            }

            onEachEvent(events, function (name, pos) {

              fns = slice.call(callbacks[name] || [], 0);

              for (var i = 0, fn; fn = fns[i]; ++i) {
                if (fn.busy) continue;
                fn.busy = 1;
                fn.apply(el, fn.typed ? [name].concat(args) : args);
                if (fns[i] !== fn) {
                  i--;
                }
                fn.busy = 0;
              }

              if (callbacks['*'] && name != '*') el.trigger.apply(el, ['*', name].concat(args));
            });

            return el;
          },
          enumerable: false,
          writable: false,
          configurable: false
        }
      });

      return el;
    }
    ;(function (riot) {


      var RE_ORIGIN = /^.+?\/\/+[^\/]+/,
          EVENT_LISTENER = 'EventListener',
          REMOVE_EVENT_LISTENER = 'remove' + EVENT_LISTENER,
          ADD_EVENT_LISTENER = 'add' + EVENT_LISTENER,
          HAS_ATTRIBUTE = 'hasAttribute',
          REPLACE = 'replace',
          POPSTATE = 'popstate',
          HASHCHANGE = 'hashchange',
          TRIGGER = 'trigger',
          MAX_EMIT_STACK_LEVEL = 3,
          win = typeof window != 'undefined' && window,
          doc = typeof document != 'undefined' && document,
          hist = win && history,
          loc = win && (hist.location || win.location),
      prot = Router.prototype,
      clickEvent = doc && doc.ontouchstart ? 'touchstart' : 'click',
          started = false,
          central = riot.observable(),
          routeFound = false,
          debouncedEmit,
          base,
          current,
          parser,
          secondParser,
          emitStack = [],
          emitStackLevel = 0;

      function DEFAULT_PARSER(path) {
        return path.split(/[/?#]/);
      }

      function DEFAULT_SECOND_PARSER(path, filter) {
        var re = new RegExp('^' + filter[REPLACE](/\*/g, '([^/?#]+?)')[REPLACE](/\.\./, '.*') + '$'),
            args = path.match(re);

        if (args) return args.slice(1);
      }

      function debounce(fn, delay) {
        var t;
        return function () {
          clearTimeout(t);
          t = setTimeout(fn, delay);
        };
      }

      function start(autoExec) {
        debouncedEmit = debounce(emit, 1);
        win[ADD_EVENT_LISTENER](POPSTATE, debouncedEmit);
        win[ADD_EVENT_LISTENER](HASHCHANGE, debouncedEmit);
        doc[ADD_EVENT_LISTENER](clickEvent, click);
        if (autoExec) emit(true);
      }

      function Router() {
        this.$ = [];
        riot.observable(this); 
        central.on('stop', this.s.bind(this));
        central.on('emit', this.e.bind(this));
      }

      function normalize(path) {
        return path[REPLACE](/^\/|\/$/, '');
      }

      function isString(str) {
        return typeof str == 'string';
      }

      function getPathFromRoot(href) {
        return (href || loc.href)[REPLACE](RE_ORIGIN, '');
      }

      function getPathFromBase(href) {
        return base[0] == '#' ? (href || loc.href || '').split(base)[1] || '' : (loc ? getPathFromRoot(href) : href || '')[REPLACE](base, '');
      }

      function emit(force) {
        var isRoot = emitStackLevel == 0,
            first;
        if (MAX_EMIT_STACK_LEVEL <= emitStackLevel) return;

        emitStackLevel++;
        emitStack.push(function () {
          var path = getPathFromBase();
          if (force || path != current) {
            central[TRIGGER]('emit', path);
            current = path;
          }
        });
        if (isRoot) {
          while (first = emitStack.shift()) first(); 
          emitStackLevel = 0;
        }
      }

      function click(e) {
        if (e.which != 1 
        || e.metaKey || e.ctrlKey || e.shiftKey 
        || e.defaultPrevented 
        ) return;

        var el = e.target;
        while (el && el.nodeName != 'A') el = el.parentNode;

        if (!el || el.nodeName != 'A' 
        || el[HAS_ATTRIBUTE]('download') 
        || !el[HAS_ATTRIBUTE]('href') 
        || el.target && el.target != '_self' 
        || el.href.indexOf(loc.href.match(RE_ORIGIN)[0]) == -1 
        ) return;

        if (el.href != loc.href && (el.href.split('#')[0] == loc.href.split('#')[0] 
        || base[0] != '#' && getPathFromRoot(el.href).indexOf(base) !== 0 
        || base[0] == '#' && el.href.split(base)[0] != loc.href.split(base)[0] 
        || !go(getPathFromBase(el.href), el.title || doc.title) 
        )) return;

        e.preventDefault();
      }

      function go(path, title, shouldReplace) {
        if (!hist) return central[TRIGGER]('emit', getPathFromBase(path));

        path = base + normalize(path);
        title = title || doc.title;
        shouldReplace ? hist.replaceState(null, title, path) : hist.pushState(null, title, path);
        doc.title = title;
        routeFound = false;
        emit();
        return routeFound;
      }

      prot.m = function (first, second, third) {
        if (isString(first) && (!second || isString(second))) go(first, second, third || false);else if (second) this.r(first, second);else this.r('@', first);
      };

      prot.s = function () {
        this.off('*');
        this.$ = [];
      };

      prot.e = function (path) {
        this.$.concat('@').some(function (filter) {
          var args = (filter == '@' ? parser : secondParser)(normalize(path), normalize(filter));
          if (typeof args != 'undefined') {
            this[TRIGGER].apply(null, [filter].concat(args));
            return routeFound = true; 
          }
        }, this);
      };

      prot.r = function (filter, action) {
        if (filter != '@') {
          filter = '/' + normalize(filter);
          this.$.push(filter);
        }
        this.on(filter, action);
      };

      var mainRouter = new Router();
      var route = mainRouter.m.bind(mainRouter);

      route.create = function () {
        var newSubRouter = new Router();
        var router = newSubRouter.m.bind(newSubRouter);
        router.stop = newSubRouter.s.bind(newSubRouter);
        return router;
      };

      route.base = function (arg) {
        base = arg || '#';
        current = getPathFromBase(); 
      };

      route.exec = function () {
        emit(true);
      };

      route.parser = function (fn, fn2) {
        if (!fn && !fn2) {
          parser = DEFAULT_PARSER;
          secondParser = DEFAULT_SECOND_PARSER;
        }
        if (fn) parser = fn;
        if (fn2) secondParser = fn2;
      };

      route.query = function () {
        var q = {};
        var href = loc.href || current;
        href[REPLACE](/[?&](.+?)=([^&]*)/g, function (_, k, v) {
          q[k] = v;
        });
        return q;
      };

      route.stop = function () {
        if (started) {
          if (win) {
            win[REMOVE_EVENT_LISTENER](POPSTATE, debouncedEmit);
            win[REMOVE_EVENT_LISTENER](HASHCHANGE, debouncedEmit);
            doc[REMOVE_EVENT_LISTENER](clickEvent, click);
          }
          central[TRIGGER]('stop');
          started = false;
        }
      };

      route.start = function (autoExec) {
        if (!started) {
          if (win) {
            if (document.readyState == 'complete') start(autoExec);
            else win[ADD_EVENT_LISTENER]('load', function () {
                setTimeout(function () {
                  start(autoExec);
                }, 1);
              });
          }
          started = true;
        }
      };

      route.base();
      route.parser();

      riot.route = route;
    })(riot);


    var brackets = function (UNDEF) {

      var REGLOB = 'g',
          R_MLCOMMS = /\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,
          R_STRINGS = /"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,
          S_QBLOCKS = R_STRINGS.source + '|' + /(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source + '|' + /\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,
          UNSUPPORTED = RegExp('[\\' + 'x00-\\x1F<>a-zA-Z0-9\'",;\\\\]'),
          NEED_ESCAPE = /(?=[[\]()*+?.^$|])/g,
          FINDBRACES = {
        '(': RegExp('([()])|' + S_QBLOCKS, REGLOB),
        '[': RegExp('([[\\]])|' + S_QBLOCKS, REGLOB),
        '{': RegExp('([{}])|' + S_QBLOCKS, REGLOB)
      },
          DEFAULT = '{ }';

      var _pairs = ['{', '}', '{', '}', /{[^}]*}/, /\\([{}])/g, /\\({)|{/g, RegExp('\\\\(})|([[({])|(})|' + S_QBLOCKS, REGLOB), DEFAULT, /^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/, /(^|[^\\]){=[\S\s]*?}/];

      var cachedBrackets = UNDEF,
          _regex,
          _cache = [],
          _settings;

      function _loopback(re) {
        return re;
      }

      function _rewrite(re, bp) {
        if (!bp) bp = _cache;
        return new RegExp(re.source.replace(/{/g, bp[2]).replace(/}/g, bp[3]), re.global ? REGLOB : '');
      }

      function _create(pair) {
        if (pair === DEFAULT) return _pairs;

        var arr = pair.split(' ');

        if (arr.length !== 2 || UNSUPPORTED.test(pair)) {
          throw new Error('Unsupported brackets "' + pair + '"');
        }
        arr = arr.concat(pair.replace(NEED_ESCAPE, '\\').split(' '));

        arr[4] = _rewrite(arr[1].length > 1 ? /{[\S\s]*?}/ : _pairs[4], arr);
        arr[5] = _rewrite(pair.length > 3 ? /\\({|})/g : _pairs[5], arr);
        arr[6] = _rewrite(_pairs[6], arr);
        arr[7] = RegExp('\\\\(' + arr[3] + ')|([[({])|(' + arr[3] + ')|' + S_QBLOCKS, REGLOB);
        arr[8] = pair;
        return arr;
      }

      function _brackets(reOrIdx) {
        return reOrIdx instanceof RegExp ? _regex(reOrIdx) : _cache[reOrIdx];
      }

      _brackets.split = function split(str, tmpl, _bp) {
        if (!_bp) _bp = _cache;

        var parts = [],
            match,
            isexpr,
            start,
            pos,
            re = _bp[6];

        isexpr = start = re.lastIndex = 0;

        while (match = re.exec(str)) {

          pos = match.index;

          if (isexpr) {

            if (match[2]) {
              re.lastIndex = skipBraces(str, match[2], re.lastIndex);
              continue;
            }
            if (!match[3]) {
              continue;
            }
          }

          if (!match[1]) {
            unescapeStr(str.slice(start, pos));
            start = re.lastIndex;
            re = _bp[6 + (isexpr ^= 1)];
            re.lastIndex = start;
          }
        }

        if (str && start < str.length) {
          unescapeStr(str.slice(start));
        }

        return parts;

        function unescapeStr(s) {
          if (tmpl || isexpr) {
            parts.push(s && s.replace(_bp[5], '$1'));
          } else {
            parts.push(s);
          }
        }

        function skipBraces(s, ch, ix) {
          var match,
              recch = FINDBRACES[ch];

          recch.lastIndex = ix;
          ix = 1;
          while (match = recch.exec(s)) {
            if (match[1] && !(match[1] === ch ? ++ix : --ix)) break;
          }
          return ix ? s.length : recch.lastIndex;
        }
      };

      _brackets.hasExpr = function hasExpr(str) {
        return _cache[4].test(str);
      };

      _brackets.loopKeys = function loopKeys(expr) {
        var m = expr.match(_cache[9]);

        return m ? { key: m[1], pos: m[2], val: _cache[0] + m[3].trim() + _cache[1] } : { val: expr.trim() };
      };

      _brackets.array = function array(pair) {
        return pair ? _create(pair) : _cache;
      };

      function _reset(pair) {
        if ((pair || (pair = DEFAULT)) !== _cache[8]) {
          _cache = _create(pair);
          _regex = pair === DEFAULT ? _loopback : _rewrite;
          _cache[9] = _regex(_pairs[9]);
        }
        cachedBrackets = pair;
      }

      function _setSettings(o) {
        var b;

        o = o || {};
        b = o.brackets;
        Object.defineProperty(o, 'brackets', {
          set: _reset,
          get: function () {
            return cachedBrackets;
          },
          enumerable: true
        });
        _settings = o;
        _reset(b);
      }

      Object.defineProperty(_brackets, 'settings', {
        set: _setSettings,
        get: function () {
          return _settings;
        }
      });

      _brackets.settings = typeof riot !== 'undefined' && riot.settings || {};
      _brackets.set = _reset;

      _brackets.R_STRINGS = R_STRINGS;
      _brackets.R_MLCOMMS = R_MLCOMMS;
      _brackets.S_QBLOCKS = S_QBLOCKS;

      return _brackets;
    }();


    var tmpl = function () {

      var _cache = {};

      function _tmpl(str, data) {
        if (!str) return str;

        return (_cache[str] || (_cache[str] = _create(str))).call(data, _logErr);
      }

      _tmpl.haveRaw = brackets.hasRaw;

      _tmpl.hasExpr = brackets.hasExpr;

      _tmpl.loopKeys = brackets.loopKeys;

      _tmpl.clearCache = function () {
        _cache = {};
      };

      _tmpl.errorHandler = null;

      function _logErr(err, ctx) {

        if (_tmpl.errorHandler) {

          err.riotData = {
            tagName: ctx && ctx.root && ctx.root.tagName,
            _riot_id: ctx && ctx._riot_id 
          };
          _tmpl.errorHandler(err);
        }
      }

      function _create(str) {
        var expr = _getTmpl(str);

        if (expr.slice(0, 11) !== 'try{return ') expr = 'return ' + expr;

        return new Function('E', expr + ';'); 
      }

      var CH_IDEXPR = String.fromCharCode(0x2057),
          RE_CSNAME = /^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,
          RE_QBLOCK = RegExp(brackets.S_QBLOCKS, 'g'),
          RE_DQUOTE = /\u2057/g,
          RE_QBMARK = /\u2057(\d+)~/g;

      function _getTmpl(str) {
        var qstr = [],
            expr,
            parts = brackets.split(str.replace(RE_DQUOTE, '"'), 1);

        if (parts.length > 2 || parts[0]) {
          var i,
              j,
              list = [];

          for (i = j = 0; i < parts.length; ++i) {

            expr = parts[i];

            if (expr && (expr = i & 1 ? _parseExpr(expr, 1, qstr) : '"' + expr.replace(/\\/g, '\\\\').replace(/\r\n?|\n/g, '\\n').replace(/"/g, '\\"') + '"')) list[j++] = expr;
          }

          expr = j < 2 ? list[0] : '[' + list.join(',') + '].join("")';
        } else {

          expr = _parseExpr(parts[1], 0, qstr);
        }

        if (qstr[0]) {
          expr = expr.replace(RE_QBMARK, function (_, pos) {
            return qstr[pos].replace(/\r/g, '\\r').replace(/\n/g, '\\n');
          });
        }
        return expr;
      }

      var RE_BREND = {
        '(': /[()]/g,
        '[': /[[\]]/g,
        '{': /[{}]/g
      };

      function _parseExpr(expr, asText, qstr) {

        expr = expr.replace(RE_QBLOCK, function (s, div) {
          return s.length > 2 && !div ? CH_IDEXPR + (qstr.push(s) - 1) + '~' : s;
        }).replace(/\s+/g, ' ').trim().replace(/\ ?([[\({},?\.:])\ ?/g, '$1');

        if (expr) {
          var list = [],
              cnt = 0,
              match;

          while (expr && (match = expr.match(RE_CSNAME)) && !match.index) {
            var key,
                jsb,
                re = /,|([[{(])|$/g;

            expr = RegExp.rightContext;
            key = match[2] ? qstr[match[2]].slice(1, -1).trim().replace(/\s+/g, ' ') : match[1];

            while (jsb = (match = re.exec(expr))[1]) skipBraces(jsb, re);

            jsb = expr.slice(0, match.index);
            expr = RegExp.rightContext;

            list[cnt++] = _wrapExpr(jsb, 1, key);
          }

          expr = !cnt ? _wrapExpr(expr, asText) : cnt > 1 ? '[' + list.join(',') + '].join(" ").trim()' : list[0];
        }
        return expr;

        function skipBraces(ch, re) {
          var mm,
              lv = 1,
              ir = RE_BREND[ch];

          ir.lastIndex = re.lastIndex;
          while (mm = ir.exec(expr)) {
            if (mm[0] === ch) ++lv;else if (! --lv) break;
          }
          re.lastIndex = lv ? expr.length : ir.lastIndex;
        }
      }

      var 
      JS_CONTEXT = '"in this?this:' + (typeof window !== 'object' ? 'global' : 'window') + ').',
          JS_VARNAME = /[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,
          JS_NOPROPS = /^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;

      function _wrapExpr(expr, asText, key) {
        var tb;

        expr = expr.replace(JS_VARNAME, function (match, p, mvar, pos, s) {
          if (mvar) {
            pos = tb ? 0 : pos + match.length;

            if (mvar !== 'this' && mvar !== 'global' && mvar !== 'window') {
              match = p + '("' + mvar + JS_CONTEXT + mvar;
              if (pos) tb = (s = s[pos]) === '.' || s === '(' || s === '[';
            } else if (pos) {
              tb = !JS_NOPROPS.test(s.slice(pos));
            }
          }
          return match;
        });

        if (tb) {
          expr = 'try{return ' + expr + '}catch(e){E(e,this)}';
        }

        if (key) {

          expr = (tb ? 'function(){' + expr + '}.call(this)' : '(' + expr + ')') + '?"' + key + '":""';
        } else if (asText) {

          expr = 'function(v){' + (tb ? expr.replace('return ', 'v=') : 'v=(' + expr + ')') + ';return v||v===0?v:""}.call(this)';
        }

        return expr;
      }

      _tmpl.version = brackets.version = 'v2.4.2';

      return _tmpl;
    }();

    var mkdom = function _mkdom() {
      var reHasYield = /<yield\b/i,
          reYieldAll = /<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/ig,
          reYieldSrc = /<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/ig,
          reYieldDest = /<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/ig;
      var rootEls = { tr: 'tbody', th: 'tr', td: 'tr', col: 'colgroup' },
          tblTags = IE_VERSION && IE_VERSION < 10 ? SPECIAL_TAGS_REGEX : /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;

      function _mkdom(templ, html, checkSvg) {
        var match = templ && templ.match(/^\s*<([-\w]+)/),
            tagName = match && match[1].toLowerCase(),
            el = mkEl('div', checkSvg && isSVGTag(tagName));

        templ = replaceYield(templ, html);

        if (tblTags.test(tagName)) el = specialTags(el, templ, tagName);else setInnerHTML(el, templ);

        el.stub = true;

        return el;
      }

      function specialTags(el, templ, tagName) {
        var select = tagName[0] === 'o',
            parent = select ? 'select>' : 'table>';

        el.innerHTML = '<' + parent + templ.trim() + '</' + parent;
        parent = el.firstChild;

        if (select) {
          parent.selectedIndex = -1; 
        } else {
          var tname = rootEls[tagName];
          if (tname && parent.childElementCount === 1) parent = $(tname, parent);
        }
        return parent;
      }

      function replaceYield(templ, html) {
        if (!reHasYield.test(templ)) return templ;

        var src = {};

        html = html && html.replace(reYieldSrc, function (_, ref, text) {
          src[ref] = src[ref] || text; 
          return '';
        }).trim();

        return templ.replace(reYieldDest, function (_, ref, def) {
          return src[ref] || def || '';
        }).replace(reYieldAll, function (_, def) {
          return html || def || '';
        });
      }

      return _mkdom;
    }();

    function mkitem(expr, key, val) {
      var item = {};
      item[expr.key] = key;
      if (expr.pos) item[expr.pos] = val;
      return item;
    }

    function unmountRedundant(items, tags) {

      var i = tags.length,
          j = items.length,
          t;

      while (i > j) {
        t = tags[--i];
        tags.splice(i, 1);
        t.unmount();
      }
    }

    function moveNestedTags(child, i) {
      Object.keys(child.tags).forEach(function (tagName) {
        var tag = child.tags[tagName];
        if (isArray(tag)) each(tag, function (t) {
          moveChildTag(t, tagName, i);
        });else moveChildTag(tag, tagName, i);
      });
    }

    function addVirtual(tag, src, target) {
      var el = tag._root,
          sib;
      tag._virts = [];
      while (el) {
        sib = el.nextSibling;
        if (target) src.insertBefore(el, target._root);else src.appendChild(el);

        tag._virts.push(el); 
        el = sib;
      }
    }

    function moveVirtual(tag, src, target, len) {
      var el = tag._root,
          sib,
          i = 0;
      for (; i < len; i++) {
        sib = el.nextSibling;
        src.insertBefore(el, target._root);
        el = sib;
      }
    }

    function insertTag(isVirtual, prevTag, newTag, root, tags, virtualFn, dom) {
      if (isInStub(prevTag.root)) return;
      if (isVirtual) virtualFn(prevTag, root, newTag, dom.childNodes.length);else root.insertBefore(prevTag.root, newTag.root); 
    }

    function _each(dom, parent, expr) {

      remAttr(dom, 'each');

      var mustReorder = typeof getAttr(dom, 'no-reorder') !== T_STRING || remAttr(dom, 'no-reorder'),
          tagName = getTagName(dom),
          impl = __tagImpl[tagName] || { tmpl: getOuterHTML(dom) },
          useRoot = SPECIAL_TAGS_REGEX.test(tagName),
          root = dom.parentNode,
          ref = document.createTextNode(''),
          child = getTag(dom),
          isOption = tagName.toLowerCase() === 'option',
      tags = [],
          oldItems = [],
          hasKeys,
          isVirtual = dom.tagName == 'VIRTUAL';

      expr = tmpl.loopKeys(expr);

      root.insertBefore(ref, dom);

      parent.one('before-mount', function () {

        dom.parentNode.removeChild(dom);
        if (root.stub) root = parent.root;
      }).on('update', function () {
        var items = tmpl(expr.val, parent),

        frag = document.createDocumentFragment();

        if (!isArray(items)) {
          hasKeys = items || false;
          items = hasKeys ? Object.keys(items).map(function (key) {
            return mkitem(expr, key, items[key]);
          }) : [];
        }

        var i = 0,
            itemsLength = items.length;

        for (; i < itemsLength; i++) {
          var item = items[i],
              _mustReorder = mustReorder && typeof item == T_OBJECT && !hasKeys,
              oldPos = oldItems.indexOf(item),
              pos = ~oldPos && _mustReorder ? oldPos : i,

          tag = tags[pos];

          item = !hasKeys && expr.key ? mkitem(expr, item, i) : item;

          if (!_mustReorder && !tag 
          || _mustReorder && !~oldPos || !tag 
          ) {

              tag = new Tag(impl, {
                parent: parent,
                isLoop: true,
                hasImpl: !!__tagImpl[tagName],
                root: useRoot ? root : dom.cloneNode(),
                item: item
              }, dom.innerHTML);

              tag.mount();

              if (isVirtual) tag._root = tag.root.firstChild; 
              if (i == tags.length || !tags[i]) {
                if (isVirtual) addVirtual(tag, frag);else frag.appendChild(tag.root);
              }
              else {
                  insertTag(isVirtual, tag, tags[i], root, tags, addVirtual, dom);
                  oldItems.splice(i, 0, item);
                }

              tags.splice(i, 0, tag);
              pos = i; 
            } else tag.update(item, true);

          if (pos !== i && _mustReorder && tags[i] 
          ) {
              if (contains(items, oldItems[i])) insertTag(isVirtual, tag, tags[i], root, tags, moveVirtual, dom);

              if (expr.pos) tag[expr.pos] = i;
              tags.splice(i, 0, tags.splice(pos, 1)[0]);
              oldItems.splice(i, 0, oldItems.splice(pos, 1)[0]);
              if (!child && tag.tags) moveNestedTags(tag, i);
            }

          tag._item = item;
          defineProperty(tag, '_parent', parent);
        }

        unmountRedundant(items, tags);

        root.insertBefore(frag, ref);
        if (isOption) {

          if (FIREFOX && !root.multiple) {
            for (var n = 0; n < root.length; n++) {
              if (root[n].__riot1374) {
                root.selectedIndex = n; 
                delete root[n].__riot1374;
                break;
              }
            }
          }
        }

        if (child) parent.tags[tagName] = tags;

        oldItems = items.slice();
      });
    }
    var styleManager = function (_riot) {

      if (!window) return { 
        add: function () {},
        inject: function () {}
      };

      var styleNode = function () {
        var newNode = mkEl('style');
        setAttr(newNode, 'type', 'text/css');

        var userNode = $('style[type=riot]');
        if (userNode) {
          if (userNode.id) newNode.id = userNode.id;
          userNode.parentNode.replaceChild(newNode, userNode);
        } else document.getElementsByTagName('head')[0].appendChild(newNode);

        return newNode;
      }();

      var cssTextProp = styleNode.styleSheet,
          stylesToInject = '';

      Object.defineProperty(_riot, 'styleNode', {
        value: styleNode,
        writable: true
      });

      return {
        add: function (css) {
          stylesToInject += css;
        },
        inject: function () {
          if (stylesToInject) {
            if (cssTextProp) cssTextProp.cssText += stylesToInject;else styleNode.innerHTML += stylesToInject;
            stylesToInject = '';
          }
        }
      };
    }(riot);

    function parseNamedElements(root, tag, childTags, forceParsingNamed) {

      walk(root, function (dom) {
        if (dom.nodeType == 1) {
          dom.isLoop = dom.isLoop || dom.parentNode && dom.parentNode.isLoop || getAttr(dom, 'each') ? 1 : 0;

          if (childTags) {
            var child = getTag(dom);

            if (child && !dom.isLoop) childTags.push(initChildTag(child, { root: dom, parent: tag }, dom.innerHTML, tag));
          }

          if (!dom.isLoop || forceParsingNamed) setNamed(dom, tag, []);
        }
      });
    }

    function parseExpressions(root, tag, expressions) {

      function addExpr(dom, val, extra) {
        if (tmpl.hasExpr(val)) {
          expressions.push(extend({ dom: dom, expr: val }, extra));
        }
      }

      walk(root, function (dom) {
        var type = dom.nodeType,
            attr;

        if (type == 3 && dom.parentNode.tagName != 'STYLE') addExpr(dom, dom.nodeValue);
        if (type != 1) return;


        attr = getAttr(dom, 'each');

        if (attr) {
          _each(dom, tag, attr);return false;
        }

        each(dom.attributes, function (attr) {
          var name = attr.name,
              bool = name.split('__')[1];

          addExpr(dom, attr.value, { attr: bool || name, bool: bool });
          if (bool) {
            remAttr(dom, name);return false;
          }
        });

        if (getTag(dom)) return false;
      });
    }
    function Tag(impl, conf, innerHTML) {

      var self = riot.observable(this),
          opts = inherit(conf.opts) || {},
          parent = conf.parent,
          isLoop = conf.isLoop,
          hasImpl = conf.hasImpl,
          item = cleanUpData(conf.item),
          expressions = [],
          childTags = [],
          root = conf.root,
          tagName = root.tagName.toLowerCase(),
          attr = {},
          propsInSyncWithParent = [],
          dom;

      if (impl.name && root._tag) root._tag.unmount(true);

      this.isMounted = false;
      root.isLoop = isLoop;

      root._tag = this;

      defineProperty(this, '_riot_id', ++__uid); 

      extend(this, { parent: parent, root: root, opts: opts }, item);
      defineProperty(this, 'tags', {});

      each(root.attributes, function (el) {
        var val = el.value;
        if (tmpl.hasExpr(val)) attr[el.name] = val;
      });

      dom = mkdom(impl.tmpl, innerHTML, isLoop);

      function updateOpts() {
        var ctx = hasImpl && isLoop ? self : parent || self;

        each(root.attributes, function (el) {
          var val = el.value;
          opts[toCamel(el.name)] = tmpl.hasExpr(val) ? tmpl(val, ctx) : val;
        });
        each(Object.keys(attr), function (name) {
          opts[toCamel(name)] = tmpl(attr[name], ctx);
        });
      }

      function normalizeData(data) {
        for (var key in item) {
          if (typeof self[key] !== T_UNDEF && isWritable(self, key)) self[key] = data[key];
        }
      }

      function inheritFrom(target) {
        each(Object.keys(target), function (k) {
          var mustSync = !RESERVED_WORDS_BLACKLIST.test(k) && contains(propsInSyncWithParent, k);

          if (typeof self[k] === T_UNDEF || mustSync) {
            if (!mustSync) propsInSyncWithParent.push(k);
            self[k] = target[k];
          }
        });
      }

      defineProperty(this, 'update', function (data, isInherited) {

        data = cleanUpData(data);
        if (isLoop) {
          inheritFrom(self.parent);
        }
        if (data && isObject(item)) {
          normalizeData(data);
          item = data;
        }
        extend(self, data);
        updateOpts();
        self.trigger('update', data);
        update(expressions, self);

        if (isInherited && self.parent)
          self.parent.one('updated', function () {
            self.trigger('updated');
          });else rAF(function () {
          self.trigger('updated');
        });

        return this;
      });

      defineProperty(this, 'mixin', function () {
        each(arguments, function (mix) {
          var instance,
              props = [],
              obj;

          mix = typeof mix === T_STRING ? riot.mixin(mix) : mix;

          if (isFunction(mix)) {
            instance = new mix();
          } else instance = mix;

          var proto = Object.getPrototypeOf(instance);

          do props = props.concat(Object.getOwnPropertyNames(obj || instance)); while (obj = Object.getPrototypeOf(obj || instance));

          each(props, function (key) {
            if (key != 'init') {
              var descriptor = Object.getOwnPropertyDescriptor(instance, key) || Object.getOwnPropertyDescriptor(proto, key);
              var hasGetterSetter = descriptor && (descriptor.get || descriptor.set);

              if (!self.hasOwnProperty(key) && hasGetterSetter) {
                Object.defineProperty(self, key, descriptor);
              } else {
                self[key] = isFunction(instance[key]) ? instance[key].bind(self) : instance[key];
              }
            }
          });

          if (instance.init) instance.init.bind(self)();
        });
        return this;
      });

      defineProperty(this, 'mount', function () {

        updateOpts();

        var globalMixin = riot.mixin(GLOBAL_MIXIN);

        if (globalMixin) for (var i in globalMixin) if (globalMixin.hasOwnProperty(i)) self.mixin(globalMixin[i]);

        if (self._parent && self._parent.root.isLoop) {
          inheritFrom(self._parent);
        }

        if (impl.fn) impl.fn.call(self, opts);

        parseExpressions(dom, self, expressions);

        toggle(true);

        if (impl.attrs) walkAttributes(impl.attrs, function (k, v) {
          setAttr(root, k, v);
        });
        if (impl.attrs || hasImpl) parseExpressions(self.root, self, expressions);

        if (!self.parent || isLoop) self.update(item);

        self.trigger('before-mount');

        if (isLoop && !hasImpl) {
          root = dom.firstChild;
        } else {
          while (dom.firstChild) root.appendChild(dom.firstChild);
          if (root.stub) root = parent.root;
        }

        defineProperty(self, 'root', root);

        if (isLoop) parseNamedElements(self.root, self.parent, null, true);

        if (!self.parent || self.parent.isMounted) {
          self.isMounted = true;
          self.trigger('mount');
        }
        else self.parent.one('mount', function () {
            if (!isInStub(self.root)) {
              self.parent.isMounted = self.isMounted = true;
              self.trigger('mount');
            }
          });
      });

      defineProperty(this, 'unmount', function (keepRootTag) {
        var el = root,
            p = el.parentNode,
            ptag,
            tagIndex = __virtualDom.indexOf(self);

        self.trigger('before-unmount');

        if (~tagIndex) __virtualDom.splice(tagIndex, 1);

        if (p) {

          if (parent) {
            ptag = getImmediateCustomParentTag(parent);
            if (isArray(ptag.tags[tagName])) each(ptag.tags[tagName], function (tag, i) {
              if (tag._riot_id == self._riot_id) ptag.tags[tagName].splice(i, 1);
            });else
              ptag.tags[tagName] = undefined;
          } else while (el.firstChild) el.removeChild(el.firstChild);

          if (!keepRootTag) p.removeChild(el);else {
            remAttr(p, RIOT_TAG_IS);
            remAttr(p, RIOT_TAG); 
          }
        }

        if (this._virts) {
          each(this._virts, function (v) {
            if (v.parentNode) v.parentNode.removeChild(v);
          });
        }

        self.trigger('unmount');
        toggle();
        self.off('*');
        self.isMounted = false;
        delete root._tag;
      });

      function onChildUpdate(data) {
        self.update(data, true);
      }

      function toggle(isMount) {

        each(childTags, function (child) {
          child[isMount ? 'mount' : 'unmount']();
        });

        if (!parent) return;
        var evt = isMount ? 'on' : 'off';

        if (isLoop) parent[evt]('unmount', self.unmount);else {
          parent[evt]('update', onChildUpdate)[evt]('unmount', self.unmount);
        }
      }

      parseNamedElements(dom, this, childTags);
    }
    function setEventHandler(name, handler, dom, tag) {

      dom[name] = function (e) {

        var ptag = tag._parent,
            item = tag._item,
            el;

        if (!item) while (ptag && !item) {
          item = ptag._item;
          ptag = ptag._parent;
        }

        e = e || window.event;

        if (isWritable(e, 'currentTarget')) e.currentTarget = dom;
        if (isWritable(e, 'target')) e.target = e.srcElement;
        if (isWritable(e, 'which')) e.which = e.charCode || e.keyCode;

        e.item = item;

        if (handler.call(tag, e) !== true && !/radio|check/.test(dom.type)) {
          if (e.preventDefault) e.preventDefault();
          e.returnValue = false;
        }

        if (!e.preventUpdate) {
          el = item ? getImmediateCustomParentTag(ptag) : tag;
          el.update();
        }
      };
    }

    function insertTo(root, node, before) {
      if (!root) return;
      root.insertBefore(before, node);
      root.removeChild(node);
    }

    function update(expressions, tag) {

      each(expressions, function (expr, i) {

        var dom = expr.dom,
            attrName = expr.attr,
            value = tmpl(expr.expr, tag),
            parent = expr.parent || expr.dom.parentNode;

        if (expr.bool) {
          value = !!value;
        } else if (value == null) {
          value = '';
        }

        if (expr.value === value) {
          return;
        }
        expr.value = value;

        if (!attrName) {
          value += '';
          if (parent) {
            expr.parent = parent;
            if (parent.tagName === 'TEXTAREA') {
              parent.value = value; 
              if (!IE_VERSION) dom.nodeValue = value; 
            } 
            else dom.nodeValue = value;
          }
          return;
        }

        if (attrName === 'value') {
          if (dom.value !== value) {
            dom.value = value;
            setAttr(dom, attrName, value);
          }
          return;
        } else {
          remAttr(dom, attrName);
        }

        if (isFunction(value)) {
          setEventHandler(attrName, value, dom, tag);

        } else if (attrName == 'if') {
          var stub = expr.stub,
              add = function () {
            insertTo(stub.parentNode, stub, dom);
          },
              remove = function () {
            insertTo(dom.parentNode, dom, stub);
          };

          if (value) {
            if (stub) {
              add();
              dom.inStub = false;
              if (!isInStub(dom)) {
                walk(dom, function (el) {
                  if (el._tag && !el._tag.isMounted) el._tag.isMounted = !!el._tag.trigger('mount');
                });
              }
            }
          } else {
            stub = expr.stub = stub || document.createTextNode('');
            if (dom.parentNode) remove();
            else (tag.parent || tag).one('updated', remove);

            dom.inStub = true;
          }
        } else if (attrName === 'show') {
          dom.style.display = value ? '' : 'none';
        } else if (attrName === 'hide') {
          dom.style.display = value ? 'none' : '';
        } else if (expr.bool) {
          dom[attrName] = value;
          if (value) setAttr(dom, attrName, attrName);
          if (FIREFOX && attrName === 'selected' && dom.tagName === 'OPTION') {
            dom.__riot1374 = value; 
          }
        } else if (value === 0 || value && typeof value !== T_OBJECT) {
          if (startsWith(attrName, RIOT_PREFIX) && attrName != RIOT_TAG) {
            attrName = attrName.slice(RIOT_PREFIX.length);
          }
          setAttr(dom, attrName, value);
        }
      });
    }
    function each(els, fn) {
      var len = els ? els.length : 0;

      for (var i = 0, el; i < len; i++) {
        el = els[i];
        if (el != null && fn(el, i) === false) i--;
      }
      return els;
    }

    function isFunction(v) {
      return typeof v === T_FUNCTION || false; 
    }

    function getOuterHTML(el) {
      if (el.outerHTML) return el.outerHTML;
      else {
          var container = mkEl('div');
          container.appendChild(el.cloneNode(true));
          return container.innerHTML;
        }
    }

    function setInnerHTML(container, html) {
      if (typeof container.innerHTML != T_UNDEF) container.innerHTML = html;
      else {
          var doc = new DOMParser().parseFromString(html, 'application/xml');
          container.appendChild(container.ownerDocument.importNode(doc.documentElement, true));
        }
    }

    function isSVGTag(name) {
      return ~SVG_TAGS_LIST.indexOf(name);
    }

    function isObject(v) {
      return v && typeof v === T_OBJECT; 
    }

    function remAttr(dom, name) {
      dom.removeAttribute(name);
    }

    function toCamel(string) {
      return string.replace(/-(\w)/g, function (_, c) {
        return c.toUpperCase();
      });
    }

    function getAttr(dom, name) {
      return dom.getAttribute(name);
    }

    function setAttr(dom, name, val) {
      var xlink = XLINK_REGEX.exec(name);
      if (xlink && xlink[1]) dom.setAttributeNS(XLINK_NS, xlink[1], val);else dom.setAttribute(name, val);
    }

    function getTag(dom) {
      return dom.tagName && __tagImpl[getAttr(dom, RIOT_TAG_IS) || getAttr(dom, RIOT_TAG) || dom.tagName.toLowerCase()];
    }
    function addChildTag(tag, tagName, parent) {
      var cachedTag = parent.tags[tagName];

      if (cachedTag) {
        if (!isArray(cachedTag))
          if (cachedTag !== tag) parent.tags[tagName] = [cachedTag];
        if (!contains(parent.tags[tagName], tag)) parent.tags[tagName].push(tag);
      } else {
        parent.tags[tagName] = tag;
      }
    }

    function moveChildTag(tag, tagName, newPos) {
      var parent = tag.parent,
          tags;
      if (!parent) return;

      tags = parent.tags[tagName];

      if (isArray(tags)) tags.splice(newPos, 0, tags.splice(tags.indexOf(tag), 1)[0]);else addChildTag(tag, tagName, parent);
    }

    function initChildTag(child, opts, innerHTML, parent) {
      var tag = new Tag(child, opts, innerHTML),
          tagName = getTagName(opts.root),
          ptag = getImmediateCustomParentTag(parent);
      tag.parent = ptag;
      tag._parent = parent;

      addChildTag(tag, tagName, ptag);
      if (ptag !== parent) addChildTag(tag, tagName, parent);
      opts.root.innerHTML = '';

      return tag;
    }

    function getImmediateCustomParentTag(tag) {
      var ptag = tag;
      while (!getTag(ptag.root)) {
        if (!ptag.parent) break;
        ptag = ptag.parent;
      }
      return ptag;
    }

    function defineProperty(el, key, value, options) {
      Object.defineProperty(el, key, extend({
        value: value,
        enumerable: false,
        writable: false,
        configurable: true
      }, options));
      return el;
    }

    function getTagName(dom) {
      var child = getTag(dom),
          namedTag = getAttr(dom, 'name'),
          tagName = namedTag && !tmpl.hasExpr(namedTag) ? namedTag : child ? child.name : dom.tagName.toLowerCase();

      return tagName;
    }

    function extend(src) {
      var obj,
          args = arguments;
      for (var i = 1; i < args.length; ++i) {
        if (obj = args[i]) {
          for (var key in obj) {
            if (isWritable(src, key)) src[key] = obj[key];
          }
        }
      }
      return src;
    }

    function contains(arr, item) {
      return ~arr.indexOf(item);
    }

    function isArray(a) {
      return Array.isArray(a) || a instanceof Array;
    }

    function isWritable(obj, key) {
      var props = Object.getOwnPropertyDescriptor(obj, key);
      return typeof obj[key] === T_UNDEF || props && props.writable;
    }

    function cleanUpData(data) {
      if (!(data instanceof Tag) && !(data && typeof data.trigger == T_FUNCTION)) return data;

      var o = {};
      for (var key in data) {
        if (!RESERVED_WORDS_BLACKLIST.test(key)) o[key] = data[key];
      }
      return o;
    }

    function walk(dom, fn) {
      if (dom) {
        if (fn(dom) === false) return;else {
          dom = dom.firstChild;

          while (dom) {
            walk(dom, fn);
            dom = dom.nextSibling;
          }
        }
      }
    }

    function walkAttributes(html, fn) {
      var m,
          re = /([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;

      while (m = re.exec(html)) {
        fn(m[1].toLowerCase(), m[2] || m[3] || m[4]);
      }
    }

    function isInStub(dom) {
      while (dom) {
        if (dom.inStub) return true;
        dom = dom.parentNode;
      }
      return false;
    }

    function mkEl(name, isSvg) {
      return isSvg ? document.createElementNS('http://www.w3.org/2000/svg', 'svg') : document.createElement(name);
    }

    function $$(selector, ctx) {
      return (ctx || document).querySelectorAll(selector);
    }

    function $(selector, ctx) {
      return (ctx || document).querySelector(selector);
    }

    function inherit(parent) {
      return Object.create(parent || null);
    }

    function getNamedKey(dom) {
      return getAttr(dom, 'id') || getAttr(dom, 'name');
    }

    function setNamed(dom, parent, keys) {
      var key = getNamedKey(dom),
          isArr,

      add = function (value) {
        if (contains(keys, key)) return;
        isArr = isArray(value);
        if (!value)
          parent[key] = dom;
        else if (!isArr || isArr && !contains(value, dom)) {
            if (isArr) value.push(dom);else parent[key] = [value, dom];
          }
      };

      if (!key) return;

      if (tmpl.hasExpr(key))
        parent.one('mount', function () {
          key = getNamedKey(dom);
          add(parent[key]);
        });else add(parent[key]);
    }

    function startsWith(src, str) {
      return src.slice(0, str.length) === str;
    }

    var rAF = function (w) {
      var raf = w.requestAnimationFrame || w.mozRequestAnimationFrame || w.webkitRequestAnimationFrame;

      if (!raf || /iP(ad|hone|od).*OS 6/.test(w.navigator.userAgent)) {
        var lastTime = 0;

        raf = function (cb) {
          var nowtime = Date.now(),
              timeout = Math.max(16 - (nowtime - lastTime), 0);
          setTimeout(function () {
            cb(lastTime = nowtime + timeout);
          }, timeout);
        };
      }
      return raf;
    }(window || {});

    function mountTo(root, tagName, opts) {
      var tag = __tagImpl[tagName],

      innerHTML = root._innerHTML = root._innerHTML || root.innerHTML;

      root.innerHTML = '';

      if (tag && root) tag = new Tag(tag, { root: root, opts: opts }, innerHTML);

      if (tag && tag.mount) {
        tag.mount();
        if (!contains(__virtualDom, tag)) __virtualDom.push(tag);
      }

      return tag;
    }

    riot.util = { brackets: brackets, tmpl: tmpl };

    riot.mixin = function () {
      var mixins = {},
          globals = mixins[GLOBAL_MIXIN] = {},
          _id = 0;

      return function (name, mixin, g) {
        if (isObject(name)) {
          riot.mixin('__unnamed_' + _id++, name, true);
          return;
        }

        var store = g ? globals : mixins;

        if (!mixin) {
          if (typeof store[name] === T_UNDEF) {
            throw new Error('Unregistered mixin: ' + name);
          }
          return store[name];
        }
        if (isFunction(mixin)) {
          extend(mixin.prototype, store[name] || {});
          store[name] = mixin;
        } else {
          store[name] = extend(store[name] || {}, mixin);
        }
      };
    }();

    riot.tag = function (name, html, css, attrs, fn) {
      if (isFunction(attrs)) {
        fn = attrs;
        if (/^[\w\-]+\s?=/.test(css)) {
          attrs = css;
          css = '';
        } else attrs = '';
      }
      if (css) {
        if (isFunction(css)) fn = css;else styleManager.add(css);
      }
      name = name.toLowerCase();
      __tagImpl[name] = { name: name, tmpl: html, attrs: attrs, fn: fn };
      return name;
    };

    riot.tag2 = function (name, html, css, attrs, fn) {
      if (css) styleManager.add(css);
      __tagImpl[name] = { name: name, tmpl: html, attrs: attrs, fn: fn };
      return name;
    };

    riot.mount = function (selector, tagName, opts) {

      var els,
          allTags,
          tags = [];


      function addRiotTags(arr) {
        var list = '';
        each(arr, function (e) {
          if (!/[^-\w]/.test(e)) {
            e = e.trim().toLowerCase();
            list += ',[' + RIOT_TAG_IS + '="' + e + '"],[' + RIOT_TAG + '="' + e + '"]';
          }
        });
        return list;
      }

      function selectAllTags() {
        var keys = Object.keys(__tagImpl);
        return keys + addRiotTags(keys);
      }

      function pushTags(root) {
        if (root.tagName) {
          var riotTag = getAttr(root, RIOT_TAG_IS) || getAttr(root, RIOT_TAG);

          if (tagName && riotTag !== tagName) {
            riotTag = tagName;
            setAttr(root, RIOT_TAG_IS, tagName);
            setAttr(root, RIOT_TAG, tagName); 
          }
          var tag = mountTo(root, riotTag || root.tagName.toLowerCase(), opts);

          if (tag) tags.push(tag);
        } else if (root.length) {
          each(root, pushTags); 
        }
      }


      styleManager.inject();

      if (isObject(tagName)) {
        opts = tagName;
        tagName = 0;
      }

      if (typeof selector === T_STRING) {
        if (selector === '*')
          selector = allTags = selectAllTags();else
          selector += addRiotTags(selector.split(/, */));

        els = selector ? $$(selector) : [];
      } else
        els = selector;

      if (tagName === '*') {
        tagName = allTags || selectAllTags();
        if (els.tagName) els = $$(tagName, els);else {
          var nodeList = [];
          each(els, function (_el) {
            nodeList.push($$(tagName, _el));
          });
          els = nodeList;
        }
        tagName = 0;
      }

      pushTags(els);

      return tags;
    };

    riot.update = function () {
      return each(__virtualDom, function (tag) {
        tag.update();
      });
    };

    riot.vdom = __virtualDom;

    riot.Tag = Tag;
    if (typeof exports === T_OBJECT) module.exports = riot;else if (typeof undefined === T_FUNCTION && typeof define.amd !== T_UNDEF) define(function () {
      return riot;
    });else window.riot = riot;
  })(typeof window != 'undefined' ? window : void 0);
});
$__System.registerDynamic("e", ["74"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require("74");
});
$__System.register('75', ['8', '9', '70', '6f', '6e'], function (_export) {
	var _createClass, _classCallCheck, _inherits, _get, Shareable, RedditShareable;

	return {
		setters: [function (_2) {
			_createClass = _2['default'];
		}, function (_3) {
			_classCallCheck = _3['default'];
		}, function (_) {
			_inherits = _['default'];
		}, function (_f) {
			_get = _f['default'];
		}, function (_e) {
			Shareable = _e['default'];
		}],
		execute: function () {
			'use strict';

			RedditShareable = (function (_Shareable) {
				_inherits(RedditShareable, _Shareable);

				function RedditShareable(opts) {
					_classCallCheck(this, RedditShareable);

					_get(Object.getPrototypeOf(RedditShareable.prototype), 'constructor', this).call(this);
					this.url = opts.url || this.getShareableUrl();
				}

				_createClass(RedditShareable, [{
					key: 'createRedditShareUrl',
					value: function createRedditShareUrl() {
						return '//www.reddit.com/submit?url=' + encodeURIComponent(this.url);
					}
				}, {
					key: 'mountElement',
					value: function mountElement(elem) {
						if (elem.nodeName !== 'A') {
							throw new TypeError('Only <a> HTML elements may be mounted onto Reddit shareable instances');
						}

						elem.href = this.createRedditShareUrl();
					}
				}]);

				return RedditShareable;
			})(Shareable);

			_export('default', RedditShareable);
		}
	};
});
$__System.register('76', ['75', 'e'], function (_export) {
	'use strict';

	var RedditShareable, riot;
	return {
		setters: [function (_) {
			RedditShareable = _['default'];
		}, function (_e) {
			riot = _e['default'];
		}],
		execute: function () {

			riot.tag('reddit-button', '<yield></yield>', function (opts) {
				var _this = this;

				this.on('mount', function () {
					var redditBtn = new RedditShareable(opts);
					redditBtn.mountElement(_this.root);
				});
			});
		}
	};
});
$__System.registerDynamic('59', ['66', '46', '64'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var $export = $__require('66'),
        core = $__require('46'),
        fails = $__require('64');
    module.exports = function (KEY, exec) {
        var fn = (core.Object || {})[KEY] || Object[KEY],
            exp = {};
        exp[KEY] = exec(fn);
        $export($export.S + $export.F * fails(function () {
            fn(1);
        }), 'Object', exp);
    };
});
$__System.registerDynamic('77', ['78', '59'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var toIObject = $__require('78');
  $__require('59')('getOwnPropertyDescriptor', function ($getOwnPropertyDescriptor) {
    return function getOwnPropertyDescriptor(it, key) {
      return $getOwnPropertyDescriptor(toIObject(it), key);
    };
  });
});
$__System.registerDynamic('79', ['62', '77'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $ = $__require('62');
  $__require('77');
  module.exports = function getOwnPropertyDescriptor(it, key) {
    return $.getDesc(it, key);
  };
});
$__System.registerDynamic("7a", ["79"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("79"), __esModule: true };
});
$__System.registerDynamic("6f", ["7a"], true, function ($__require, exports, module) {
  "use strict";

  var global = this || self,
      GLOBAL = global;
  var _Object$getOwnPropertyDescriptor = $__require("7a")["default"];
  exports["default"] = function get(_x, _x2, _x3) {
    var _again = true;
    _function: while (_again) {
      var object = _x,
          property = _x2,
          receiver = _x3;
      _again = false;
      if (object === null) object = Function.prototype;
      var desc = _Object$getOwnPropertyDescriptor(object, property);
      if (desc === undefined) {
        var parent = Object.getPrototypeOf(object);
        if (parent === null) {
          return undefined;
        } else {
          _x = parent;
          _x2 = property;
          _x3 = receiver;
          _again = true;
          desc = parent = undefined;
          continue _function;
        }
      } else if ("value" in desc) {
        return desc.value;
      } else {
        var getter = desc.get;
        if (getter === undefined) {
          return undefined;
        }
        return getter.call(receiver);
      }
    }
  };
  exports.__esModule = true;
});
$__System.registerDynamic('7b', ['62'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $ = $__require('62');
  module.exports = function create(P, D) {
    return $.create(P, D);
  };
});
$__System.registerDynamic("7c", ["7b"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("7b"), __esModule: true };
});
$__System.registerDynamic('7d', ['66', '7e'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $export = $__require('66');
  $export($export.S, 'Object', { setPrototypeOf: $__require('7e').set });
});
$__System.registerDynamic('7f', ['7d', '46'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('7d');
  module.exports = $__require('46').Object.setPrototypeOf;
});
$__System.registerDynamic("80", ["7f"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("7f"), __esModule: true };
});
$__System.registerDynamic("70", ["7c", "80"], true, function ($__require, exports, module) {
  "use strict";

  var global = this || self,
      GLOBAL = global;
  var _Object$create = $__require("7c")["default"];
  var _Object$setPrototypeOf = $__require("80")["default"];
  exports["default"] = function (subClass, superClass) {
    if (typeof superClass !== "function" && superClass !== null) {
      throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
    }
    subClass.prototype = _Object$create(superClass && superClass.prototype, { constructor: {
        value: subClass,
        enumerable: false,
        writable: true,
        configurable: true
      } });
    if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
  };
  exports.__esModule = true;
});
$__System.registerDynamic('81', ['82', '83', '46'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var anObject = $__require('82'),
      get = $__require('83');
  module.exports = $__require('46').getIterator = function (it) {
    var iterFn = get(it);
    if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');
    return anObject(iterFn.call(it));
  };
});
$__System.registerDynamic('84', ['48', '49', '81'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('48');
  $__require('49');
  module.exports = $__require('81');
});
$__System.registerDynamic("10", ["84"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("84"), __esModule: true };
});
$__System.register('6e', ['8', '9'], function (_export) {
	var _createClass, _classCallCheck, Shareable;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}],
		execute: function () {
			'use strict';

			Shareable = (function () {
				function Shareable() {
					_classCallCheck(this, Shareable);
				}

				_createClass(Shareable, [{
					key: 'getShareableUrl',
					value: function getShareableUrl() {
						return window.location.href;
					}
				}]);

				return Shareable;
			})();

			_export('default', Shareable);
		}
	};
});
$__System.register('85', ['8', '9', '10', '70', '6f', '6e'], function (_export) {
	var _createClass, _classCallCheck, _getIterator, _inherits, _get, Shareable, LinkedinButton;

	return {
		setters: [function (_2) {
			_createClass = _2['default'];
		}, function (_3) {
			_classCallCheck = _3['default'];
		}, function (_4) {
			_getIterator = _4['default'];
		}, function (_) {
			_inherits = _['default'];
		}, function (_f) {
			_get = _f['default'];
		}, function (_e) {
			Shareable = _e['default'];
		}],
		execute: function () {
			'use strict';

			LinkedinButton = (function (_Shareable) {
				_inherits(LinkedinButton, _Shareable);

				function LinkedinButton() {
					var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

					_classCallCheck(this, LinkedinButton);

					_get(Object.getPrototypeOf(LinkedinButton.prototype), 'constructor', this).call(this);
					this.url = opts.url || this.getShareableUrl();
				}

				_createClass(LinkedinButton, [{
					key: 'createLinkedinShareURL',
					value: function createLinkedinShareURL() {
						return '//www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(this.url);
					}
				}], [{
					key: 'initLinks',
					value: function initLinks() {
						var buttons = document.querySelectorAll('.ln-share-bt');

						var _iteratorNormalCompletion = true;
						var _didIteratorError = false;
						var _iteratorError = undefined;

						try {
							for (var _iterator = _getIterator(buttons), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
								var button = _step.value;

								var linkedInButton = new LinkedinButton();
								button.href = linkedInButton.createLinkedinShareURL();
								button.target = '_blank';
							}
						} catch (err) {
							_didIteratorError = true;
							_iteratorError = err;
						} finally {
							try {
								if (!_iteratorNormalCompletion && _iterator['return']) {
									_iterator['return']();
								}
							} finally {
								if (_didIteratorError) {
									throw _iteratorError;
								}
							}
						}
					}
				}]);

				return LinkedinButton;
			})(Shareable);

			_export('default', LinkedinButton);
		}
	};
});
$__System.register('86', ['8', '9', 'c'], function (_export) {
	var _createClass, _classCallCheck, utils, ClickableUnit;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			utils = _c;
		}],
		execute: function () {
			'use strict';

			ClickableUnit = (function () {
				function ClickableUnit() {
					_classCallCheck(this, ClickableUnit);

					this.units = [];
					this.links = [];

					this.getClickableUnits();
				}


				_createClass(ClickableUnit, [{
					key: 'getClickableUnits',
					value: function getClickableUnits() {
						this.units = Array.prototype.slice.call(document.querySelectorAll('.clickable-unit'));
						this.links = Array.prototype.slice.call(document.querySelectorAll('.clickable-unit-links'));
					}

				}, {
					key: 'addAllUnitEvents',
					value: function addAllUnitEvents() {
						if (!this.units.length) {
							return;
						}

						this.units.forEach(function (node) {
							return ClickableUnit.addUnitEvent(node);
						});
						this.links.forEach(function (node) {
							return ClickableUnit.addLinkEvent(node);
						});
					}
				}], [{
					key: 'addUnitEvent',
					value: function addUnitEvent(node) {
						if (!node) {
							return;
						}
						node.addEventListener('mouseenter', function (e) {
							return ClickableUnit.enableLink(e.target);
						}, false);
						node.addEventListener('mouseleave', function (e) {
							return ClickableUnit.disableLink(e.target);
						}, false);
						node.addEventListener('click', function (e) {
							return ClickableUnit.clickLink(e);
						}, false);
					}
				}, {
					key: 'addLinkEvent',
					value: function addLinkEvent(node) {
						node.addEventListener('mouseenter', function (e) {
							return ClickableUnit.disableParentLink(e);
						}, false);
						node.addEventListener('mouseleave', function (e) {
							return ClickableUnit.enableParentLink(e);
						}, false);
					}

				}, {
					key: 'enableLink',
					value: function enableLink(element) {
						element.classList.add('hover');
					}

				}, {
					key: 'disableLink',
					value: function disableLink(element) {
						element.classList.remove('hover');
					}

				}, {
					key: 'clickLink',
					value: function clickLink(event) {
						if (event.target.nodeName === 'A' || event.target.nodeName === 'IMG' && event.target.parentNode.nodeName === 'A') {
							return;
						}

						var unit = utils.closestElement(event.target, '.clickable-unit');

						if (!unit) {
							return;
						}

						var link = unit.querySelector('.clickable-anchor');

						if (link) {
							window.location.href = link.getAttribute('href');
						}
					}

				}, {
					key: 'enableParentLink',
					value: function enableParentLink(event) {
						utils.closestElement(event.target, '.clickable-unit').classList.add('hover');
					}

				}, {
					key: 'disableParentLink',
					value: function disableParentLink(event) {
						utils.closestElement(event.target, '.clickable-unit').classList.remove('hover');
					}
				}]);

				return ClickableUnit;
			})();

			_export('default', ClickableUnit);
		}
	};
});
$__System.register('87', ['8', '9', 'c'], function (_export) {
	var _createClass, _classCallCheck, utils, ClickablePseudoUnit;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			utils = _c;
		}],
		execute: function () {

			'use strict';

			ClickablePseudoUnit = (function () {
				function ClickablePseudoUnit() {
					_classCallCheck(this, ClickablePseudoUnit);
				}

				_createClass(ClickablePseudoUnit, null, [{
					key: 'addEvents',

					value: function addEvents(unitSelector, clickableElements) {
						if (!clickableElements.length) {
							return;
						}

						[].forEach.call(clickableElements, function (element) {
							return ClickablePseudoUnit.addUnitEvents(unitSelector, element);
						});
					}

				}, {
					key: 'addUnitEvents',
					value: function addUnitEvents(unitSelector, element) {
						var unit = utils.closestElement(element, unitSelector);

						if (!unit) {
							return;
						}

						element.addEventListener('mouseenter', function () {
							return ClickablePseudoUnit.enableLink(unit);
						}, false);
						element.addEventListener('mouseleave', function () {
							return ClickablePseudoUnit.disableLink(unit);
						}, false);
						element.addEventListener('click', function (e) {
							return ClickablePseudoUnit.clickLink(e, unitSelector);
						}, false);
					}

				}, {
					key: 'enableLink',
					value: function enableLink(element) {
						element.classList.add('hover');
					}

				}, {
					key: 'disableLink',
					value: function disableLink(element) {
						element.classList.remove('hover');
					}

				}, {
					key: 'clickLink',
					value: function clickLink(event, unitSelector) {
						if (event.target.nodeName === 'A' || event.target.nodeName === 'IMG' && event.target.parentNode.nodeName === 'A') {
							return;
						}

						var unit = utils.closestElement(event.target, unitSelector);

						if (!unit) {
							return;
						}

						var link = unit.querySelector('.clickable-anchor');

						if (link) {
							window.location.href = link.getAttribute('href');
						}
					}
				}]);

				return ClickablePseudoUnit;
			})();

			_export('default', ClickablePseudoUnit);
		}
	};
});
$__System.register('88', ['8', '9', 'c'], function (_export) {
	var _createClass, _classCallCheck, utils, ImageLoader;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			utils = _c;
		}],
		execute: function () {
			'use strict';

			ImageLoader = (function () {
				function ImageLoader() {
					var _this = this;

					_classCallCheck(this, ImageLoader);

					this.elements = this.getImageElements();
					this.scrollHandler = utils.throttle(function () {
						return _this.checkImagesShouldLoad();
					}, 200);
				}

				_createClass(ImageLoader, [{
					key: 'init',
					value: function init() {
						this.checkImagesShouldLoad();
						window.addEventListener('scroll', this.scrollHandler);
						window.addEventListener('resize', this.scrollHandler);
					}

				}, {
					key: 'getImageElements',
					value: function getImageElements() {
						var selectors = 'img[data-src], [data-src-bg]';
						if (window.innerWidth >= 840) {
							selectors += ', img[data-src-large], [data-src-large-bg]';
						}
						return document.querySelectorAll(selectors);
					}

				}, {
					key: 'checkImagesShouldLoad',
					value: function checkImagesShouldLoad() {
						var resetElements = false;
						for (var i = 0; i < this.elements.length; i++) {
							if (this.elements[i].getBoundingClientRect().top - 500 < window.innerHeight) {
								this.loadImage(this.elements[i]);
								resetElements = true;
							}
						}

						if (resetElements) {
							this.elements = this.getImageElements();
							if (this.elements.length < 1) {
								window.removeEventListener('scroll', this.scrollHandler);
								window.removeEventListener('resize', this.scrollHandler);
							}
						}
					}

				}, {
					key: 'loadImage',
					value: function loadImage(elem) {
						if (elem.hasAttribute('data-src')) {
							elem.setAttribute('src', elem.getAttribute('data-src'));
							elem.removeAttribute('data-src');
						} else if (elem.hasAttribute('data-src-large')) {
							(function () {
								var image = new Image();
								image.src = elem.getAttribute('data-src-large');
								image.addEventListener('load', function () {
									elem.setAttribute('src', image.src);
									elem.removeAttribute('data-src-large');
								});
							})();
						} else if (elem.hasAttribute('data-src-bg')) {
							elem.style.backgroundImage = 'url(' + elem.getAttribute('data-src-bg') + ')';
							elem.removeAttribute('data-src-bg');
						} else if (elem.hasAttribute('data-src-large-bg')) {
							(function () {
								var image = new Image();
								image.src = elem.getAttribute('data-src-large-bg');
								image.addEventListener('load', function () {
									elem.style.backgroundImage = 'url(' + image.src + ')';
									elem.removeAttribute('data-src-large-bg');
								});
							})();
						}
					}
				}]);

				return ImageLoader;
			})();

			_export('default', ImageLoader);
		}
	};
});
$__System.registerDynamic('89', ['62'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $ = $__require('62');
  module.exports = function defineProperty(it, key, desc) {
    return $.setDesc(it, key, desc);
  };
});
$__System.registerDynamic("8a", ["89"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("89"), __esModule: true };
});
$__System.registerDynamic("8", ["8a"], true, function ($__require, exports, module) {
  "use strict";

  var global = this || self,
      GLOBAL = global;
  var _Object$defineProperty = $__require("8a")["default"];
  exports["default"] = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        _Object$defineProperty(target, descriptor.key, descriptor);
      }
    }
    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();
  exports.__esModule = true;
});
$__System.registerDynamic("9", [], true, function ($__require, exports, module) {
  "use strict";

  var global = this || self,
      GLOBAL = global;
  exports["default"] = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  exports.__esModule = true;
});
$__System.registerDynamic("8b", [], true, function ($__require, exports, module) {
  "format cjs";

  var global = this || self,
      GLOBAL = global;
});
$__System.registerDynamic('8c', ['8d', '60'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var toInteger = $__require('8d'),
      defined = $__require('60');
  module.exports = function (TO_STRING) {
    return function (that, pos) {
      var s = String(defined(that)),
          i = toInteger(pos),
          l = s.length,
          a,
          b;
      if (i < 0 || i >= l) return TO_STRING ? '' : undefined;
      a = s.charCodeAt(i);
      return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff ? TO_STRING ? s.charAt(i) : a : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;
    };
  };
});
$__System.registerDynamic('49', ['8c', '8e'], true, function ($__require, exports, module) {
  'use strict';

  var global = this || self,
      GLOBAL = global;
  var $at = $__require('8c')(true);
  $__require('8e')(String, 'String', function (iterated) {
    this._t = String(iterated);
    this._i = 0;
  }, function () {
    var O = this._t,
        index = this._i,
        point;
    if (index >= O.length) return {
      value: undefined,
      done: true
    };
    point = $at(O, index);
    this._i += point.length;
    return {
      value: point,
      done: false
    };
  });
});
$__System.registerDynamic("8f", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function () {};
});
$__System.registerDynamic("90", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (done, value) {
    return { value: value, done: !!done };
  };
});
$__System.registerDynamic('63', ['91'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var cof = $__require('91');
  module.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {
    return cof(it) == 'String' ? it.split('') : Object(it);
  };
});
$__System.registerDynamic("60", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (it) {
    if (it == undefined) throw TypeError("Can't call method on  " + it);
    return it;
  };
});
$__System.registerDynamic('78', ['63', '60'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var IObject = $__require('63'),
      defined = $__require('60');
  module.exports = function (it) {
    return IObject(defined(it));
  };
});
$__System.registerDynamic('92', ['62', '93', '94', '95', '44'], true, function ($__require, exports, module) {
  'use strict';

  var global = this || self,
      GLOBAL = global;
  var $ = $__require('62'),
      descriptor = $__require('93'),
      setToStringTag = $__require('94'),
      IteratorPrototype = {};
  $__require('95')(IteratorPrototype, $__require('44')('iterator'), function () {
    return this;
  });
  module.exports = function (Constructor, NAME, next) {
    Constructor.prototype = $.create(IteratorPrototype, { next: descriptor(1, next) });
    setToStringTag(Constructor, NAME + ' Iterator');
  };
});
$__System.registerDynamic('8e', ['96', '66', '97', '95', '98', '45', '92', '94', '62', '44'], true, function ($__require, exports, module) {
  'use strict';

  var global = this || self,
      GLOBAL = global;
  var LIBRARY = $__require('96'),
      $export = $__require('66'),
      redefine = $__require('97'),
      hide = $__require('95'),
      has = $__require('98'),
      Iterators = $__require('45'),
      $iterCreate = $__require('92'),
      setToStringTag = $__require('94'),
      getProto = $__require('62').getProto,
      ITERATOR = $__require('44')('iterator'),
      BUGGY = !([].keys && 'next' in [].keys()),
      FF_ITERATOR = '@@iterator',
      KEYS = 'keys',
      VALUES = 'values';
  var returnThis = function () {
    return this;
  };
  module.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {
    $iterCreate(Constructor, NAME, next);
    var getMethod = function (kind) {
      if (!BUGGY && kind in proto) return proto[kind];
      switch (kind) {
        case KEYS:
          return function keys() {
            return new Constructor(this, kind);
          };
        case VALUES:
          return function values() {
            return new Constructor(this, kind);
          };
      }
      return function entries() {
        return new Constructor(this, kind);
      };
    };
    var TAG = NAME + ' Iterator',
        DEF_VALUES = DEFAULT == VALUES,
        VALUES_BUG = false,
        proto = Base.prototype,
        $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT],
        $default = $native || getMethod(DEFAULT),
        methods,
        key;
    if ($native) {
      var IteratorPrototype = getProto($default.call(new Base()));
      setToStringTag(IteratorPrototype, TAG, true);
      if (!LIBRARY && has(proto, FF_ITERATOR)) hide(IteratorPrototype, ITERATOR, returnThis);
      if (DEF_VALUES && $native.name !== VALUES) {
        VALUES_BUG = true;
        $default = function values() {
          return $native.call(this);
        };
      }
    }
    if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {
      hide(proto, ITERATOR, $default);
    }
    Iterators[NAME] = $default;
    Iterators[TAG] = returnThis;
    if (DEFAULT) {
      methods = {
        values: DEF_VALUES ? $default : getMethod(VALUES),
        keys: IS_SET ? $default : getMethod(KEYS),
        entries: !DEF_VALUES ? $default : getMethod('entries')
      };
      if (FORCED) for (key in methods) {
        if (!(key in proto)) redefine(proto, key, methods[key]);
      } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);
    }
    return methods;
  };
});
$__System.registerDynamic('99', ['8f', '90', '45', '78', '8e'], true, function ($__require, exports, module) {
  'use strict';

  var global = this || self,
      GLOBAL = global;
  var addToUnscopables = $__require('8f'),
      step = $__require('90'),
      Iterators = $__require('45'),
      toIObject = $__require('78');
  module.exports = $__require('8e')(Array, 'Array', function (iterated, kind) {
    this._t = toIObject(iterated);
    this._i = 0;
    this._k = kind;
  }, function () {
    var O = this._t,
        kind = this._k,
        index = this._i++;
    if (!O || index >= O.length) {
      this._t = undefined;
      return step(1);
    }
    if (kind == 'keys') return step(0, index);
    if (kind == 'values') return step(0, O[index]);
    return step(0, [index, O[index]]);
  }, 'values');
  Iterators.Arguments = Iterators.Array;
  addToUnscopables('keys');
  addToUnscopables('values');
  addToUnscopables('entries');
});
$__System.registerDynamic('48', ['99', '45'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('99');
  var Iterators = $__require('45');
  Iterators.NodeList = Iterators.HTMLCollection = Iterators.Array;
});
$__System.registerDynamic("96", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = true;
});
$__System.registerDynamic('66', ['9a', '46', '9b'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var global = $__require('9a'),
      core = $__require('46'),
      ctx = $__require('9b'),
      PROTOTYPE = 'prototype';
  var $export = function (type, name, source) {
    var IS_FORCED = type & $export.F,
        IS_GLOBAL = type & $export.G,
        IS_STATIC = type & $export.S,
        IS_PROTO = type & $export.P,
        IS_BIND = type & $export.B,
        IS_WRAP = type & $export.W,
        exports = IS_GLOBAL ? core : core[name] || (core[name] = {}),
        target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE],
        key,
        own,
        out;
    if (IS_GLOBAL) source = name;
    for (key in source) {
      own = !IS_FORCED && target && key in target;
      if (own && key in exports) continue;
      out = own ? target[key] : source[key];
      exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key] : IS_BIND && own ? ctx(out, global) : IS_WRAP && target[key] == out ? function (C) {
        var F = function (param) {
          return this instanceof C ? new C(param) : C(param);
        };
        F[PROTOTYPE] = C[PROTOTYPE];
        return F;
      }(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
      if (IS_PROTO) (exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;
    }
  };
  $export.F = 1;
  $export.G = 2;
  $export.S = 4;
  $export.P = 8;
  $export.B = 16;
  $export.W = 32;
  module.exports = $export;
});
$__System.registerDynamic("9c", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (it, Constructor, name) {
    if (!(it instanceof Constructor)) throw TypeError(name + ": use the 'new' operator!");
    return it;
  };
});
$__System.registerDynamic('9d', ['82'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var anObject = $__require('82');
  module.exports = function (iterator, fn, value, entries) {
    try {
      return entries ? fn(anObject(value)[0], value[1]) : fn(value);
    } catch (e) {
      var ret = iterator['return'];
      if (ret !== undefined) anObject(ret.call(iterator));
      throw e;
    }
  };
});
$__System.registerDynamic('9e', ['45', '44'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var Iterators = $__require('45'),
        ITERATOR = $__require('44')('iterator'),
        ArrayProto = Array.prototype;
    module.exports = function (it) {
        return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);
    };
});
$__System.registerDynamic("8d", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var ceil = Math.ceil,
      floor = Math.floor;
  module.exports = function (it) {
    return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);
  };
});
$__System.registerDynamic('9f', ['8d'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var toInteger = $__require('8d'),
      min = Math.min;
  module.exports = function (it) {
    return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0;
  };
});
$__System.registerDynamic('43', ['91', '44'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var cof = $__require('91'),
        TAG = $__require('44')('toStringTag'),
        ARG = cof(function () {
        return arguments;
    }()) == 'Arguments';
    module.exports = function (it) {
        var O, T, B;
        return it === undefined ? 'Undefined' : it === null ? 'Null' : typeof (T = (O = Object(it))[TAG]) == 'string' ? T : ARG ? cof(O) : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;
    };
});
$__System.registerDynamic("45", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = {};
});
$__System.registerDynamic('83', ['43', '44', '45', '46'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var classof = $__require('43'),
        ITERATOR = $__require('44')('iterator'),
        Iterators = $__require('45');
    module.exports = $__require('46').getIteratorMethod = function (it) {
        if (it != undefined) return it[ITERATOR] || it['@@iterator'] || Iterators[classof(it)];
    };
});
$__System.registerDynamic('a0', ['9b', '9d', '9e', '82', '9f', '83'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var ctx = $__require('9b'),
      call = $__require('9d'),
      isArrayIter = $__require('9e'),
      anObject = $__require('82'),
      toLength = $__require('9f'),
      getIterFn = $__require('83');
  module.exports = function (iterable, entries, fn, that) {
    var iterFn = getIterFn(iterable),
        f = ctx(fn, that, entries ? 2 : 1),
        index = 0,
        length,
        step,
        iterator;
    if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');
    if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {
      entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);
    } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {
      call(iterator, f, step.value, entries);
    }
  };
});
$__System.registerDynamic('7e', ['62', 'a1', '82', '9b'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var getDesc = $__require('62').getDesc,
      isObject = $__require('a1'),
      anObject = $__require('82');
  var check = function (O, proto) {
    anObject(O);
    if (!isObject(proto) && proto !== null) throw TypeError(proto + ": can't set as prototype!");
  };
  module.exports = {
    set: Object.setPrototypeOf || ('__proto__' in {} ? function (test, buggy, set) {
      try {
        set = $__require('9b')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);
        set(test, []);
        buggy = !(test instanceof Array);
      } catch (e) {
        buggy = true;
      }
      return function setPrototypeOf(O, proto) {
        check(O, proto);
        if (buggy) O.__proto__ = proto;else set(O, proto);
        return O;
      };
    }({}, false) : undefined),
    check: check
  };
});
$__System.registerDynamic("a2", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = Object.is || function is(x, y) {
    return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;
  };
});
$__System.registerDynamic('82', ['a1'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var isObject = $__require('a1');
  module.exports = function (it) {
    if (!isObject(it)) throw TypeError(it + ' is not an object!');
    return it;
  };
});
$__System.registerDynamic('a3', ['82', 'a4', '44'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var anObject = $__require('82'),
        aFunction = $__require('a4'),
        SPECIES = $__require('44')('species');
    module.exports = function (O, D) {
        var C = anObject(O).constructor,
            S;
        return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);
    };
});
$__System.registerDynamic('a4', [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (it) {
    if (typeof it != 'function') throw TypeError(it + ' is not a function!');
    return it;
  };
});
$__System.registerDynamic('9b', ['a4'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var aFunction = $__require('a4');
  module.exports = function (fn, that, length) {
    aFunction(fn);
    if (that === undefined) return fn;
    switch (length) {
      case 1:
        return function (a) {
          return fn.call(that, a);
        };
      case 2:
        return function (a, b) {
          return fn.call(that, a, b);
        };
      case 3:
        return function (a, b, c) {
          return fn.call(that, a, b, c);
        };
    }
    return function () {
      return fn.apply(that, arguments);
    };
  };
});
$__System.registerDynamic("a5", [], true, function ($__require, exports, module) {
                  var global = this || self,
                      GLOBAL = global;
                  module.exports = function (fn, args, that) {
                                    var un = that === undefined;
                                    switch (args.length) {
                                                      case 0:
                                                                        return un ? fn() : fn.call(that);
                                                      case 1:
                                                                        return un ? fn(args[0]) : fn.call(that, args[0]);
                                                      case 2:
                                                                        return un ? fn(args[0], args[1]) : fn.call(that, args[0], args[1]);
                                                      case 3:
                                                                        return un ? fn(args[0], args[1], args[2]) : fn.call(that, args[0], args[1], args[2]);
                                                      case 4:
                                                                        return un ? fn(args[0], args[1], args[2], args[3]) : fn.call(that, args[0], args[1], args[2], args[3]);
                                    }return fn.apply(that, args);
                  };
});
$__System.registerDynamic('a6', ['9a'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require('9a').document && document.documentElement;
});
$__System.registerDynamic('a1', [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (it) {
    return typeof it === 'object' ? it !== null : typeof it === 'function';
  };
});
$__System.registerDynamic('a7', ['a1', '9a'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var isObject = $__require('a1'),
        document = $__require('9a').document,
        is = isObject(document) && isObject(document.createElement);
    module.exports = function (it) {
        return is ? document.createElement(it) : {};
    };
});
$__System.registerDynamic('a8', ['9b', 'a5', 'a6', 'a7', '9a', '91', '3'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  (function (process) {
    var ctx = $__require('9b'),
        invoke = $__require('a5'),
        html = $__require('a6'),
        cel = $__require('a7'),
        global = $__require('9a'),
        process = global.process,
        setTask = global.setImmediate,
        clearTask = global.clearImmediate,
        MessageChannel = global.MessageChannel,
        counter = 0,
        queue = {},
        ONREADYSTATECHANGE = 'onreadystatechange',
        defer,
        channel,
        port;
    var run = function () {
      var id = +this;
      if (queue.hasOwnProperty(id)) {
        var fn = queue[id];
        delete queue[id];
        fn();
      }
    };
    var listner = function (event) {
      run.call(event.data);
    };
    if (!setTask || !clearTask) {
      setTask = function setImmediate(fn) {
        var args = [],
            i = 1;
        while (arguments.length > i) args.push(arguments[i++]);
        queue[++counter] = function () {
          invoke(typeof fn == 'function' ? fn : Function(fn), args);
        };
        defer(counter);
        return counter;
      };
      clearTask = function clearImmediate(id) {
        delete queue[id];
      };
      if ($__require('91')(process) == 'process') {
        defer = function (id) {
          process.nextTick(ctx(run, id, 1));
        };
      } else if (MessageChannel) {
        channel = new MessageChannel();
        port = channel.port2;
        channel.port1.onmessage = listner;
        defer = ctx(port.postMessage, port, 1);
      } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {
        defer = function (id) {
          global.postMessage(id + '', '*');
        };
        global.addEventListener('message', listner, false);
      } else if (ONREADYSTATECHANGE in cel('script')) {
        defer = function (id) {
          html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {
            html.removeChild(this);
            run.call(id);
          };
        };
      } else {
        defer = function (id) {
          setTimeout(ctx(run, id, 1), 0);
        };
      }
    }
    module.exports = {
      set: setTask,
      clear: clearTask
    };
  })($__require('3'));
});
$__System.registerDynamic("91", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var toString = {}.toString;

  module.exports = function (it) {
    return toString.call(it).slice(8, -1);
  };
});
$__System.registerDynamic('a9', ['9a', 'a8', '91', '3'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  (function (process) {
    var global = $__require('9a'),
        macrotask = $__require('a8').set,
        Observer = global.MutationObserver || global.WebKitMutationObserver,
        process = global.process,
        Promise = global.Promise,
        isNode = $__require('91')(process) == 'process',
        head,
        last,
        notify;
    var flush = function () {
      var parent, domain, fn;
      if (isNode && (parent = process.domain)) {
        process.domain = null;
        parent.exit();
      }
      while (head) {
        domain = head.domain;
        fn = head.fn;
        if (domain) domain.enter();
        fn();
        if (domain) domain.exit();
        head = head.next;
      }
      last = undefined;
      if (parent) parent.enter();
    };
    if (isNode) {
      notify = function () {
        process.nextTick(flush);
      };
    } else if (Observer) {
      var toggle = 1,
          node = document.createTextNode('');
      new Observer(flush).observe(node, { characterData: true });
      notify = function () {
        node.data = toggle = -toggle;
      };
    } else if (Promise && Promise.resolve) {
      notify = function () {
        Promise.resolve().then(flush);
      };
    } else {
      notify = function () {
        macrotask.call(global, flush);
      };
    }
    module.exports = function asap(fn) {
      var task = {
        fn: fn,
        next: undefined,
        domain: isNode && process.domain
      };
      if (last) last.next = task;
      if (!head) {
        head = task;
        notify();
      }
      last = task;
    };
  })($__require('3'));
});
$__System.registerDynamic("93", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (bitmap, value) {
    return {
      enumerable: !(bitmap & 1),
      configurable: !(bitmap & 2),
      writable: !(bitmap & 4),
      value: value
    };
  };
});
$__System.registerDynamic('95', ['62', '93', 'aa'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $ = $__require('62'),
      createDesc = $__require('93');
  module.exports = $__require('aa') ? function (object, key, value) {
    return $.setDesc(object, key, createDesc(1, value));
  } : function (object, key, value) {
    object[key] = value;
    return object;
  };
});
$__System.registerDynamic('97', ['95'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require('95');
});
$__System.registerDynamic('ab', ['97'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var redefine = $__require('97');
  module.exports = function (target, src) {
    for (var key in src) redefine(target, key, src[key]);
    return target;
  };
});
$__System.registerDynamic("98", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var hasOwnProperty = {}.hasOwnProperty;
  module.exports = function (it, key) {
    return hasOwnProperty.call(it, key);
  };
});
$__System.registerDynamic('94', ['62', '98', '44'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var def = $__require('62').setDesc,
      has = $__require('98'),
      TAG = $__require('44')('toStringTag');
  module.exports = function (it, tag, stat) {
    if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, {
      configurable: true,
      value: tag
    });
  };
});
$__System.registerDynamic("62", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var $Object = Object;
  module.exports = {
    create: $Object.create,
    getProto: $Object.getPrototypeOf,
    isEnum: {}.propertyIsEnumerable,
    getDesc: $Object.getOwnPropertyDescriptor,
    setDesc: $Object.defineProperty,
    setDescs: $Object.defineProperties,
    getKeys: $Object.keys,
    getNames: $Object.getOwnPropertyNames,
    getSymbols: $Object.getOwnPropertySymbols,
    each: [].forEach
  };
});
$__System.registerDynamic("64", [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = function (exec) {
    try {
      return !!exec();
    } catch (e) {
      return true;
    }
  };
});
$__System.registerDynamic('aa', ['64'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = !$__require('64')(function () {
    return Object.defineProperty({}, 'a', { get: function () {
        return 7;
      } }).a != 7;
  });
});
$__System.registerDynamic('ac', ['46', '62', 'aa', '44'], true, function ($__require, exports, module) {
  'use strict';

  var global = this || self,
      GLOBAL = global;
  var core = $__require('46'),
      $ = $__require('62'),
      DESCRIPTORS = $__require('aa'),
      SPECIES = $__require('44')('species');
  module.exports = function (KEY) {
    var C = core[KEY];
    if (DESCRIPTORS && C && !C[SPECIES]) $.setDesc(C, SPECIES, {
      configurable: true,
      get: function () {
        return this;
      }
    });
  };
});
$__System.registerDynamic('ad', ['9a'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var global = $__require('9a'),
        SHARED = '__core-js_shared__',
        store = global[SHARED] || (global[SHARED] = {});
    module.exports = function (key) {
        return store[key] || (store[key] = {});
    };
});
$__System.registerDynamic('ae', [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var id = 0,
      px = Math.random();
  module.exports = function (key) {
    return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));
  };
});
$__System.registerDynamic('9a', [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var global = module.exports = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();
  if (typeof __g == 'number') __g = global; 
});
$__System.registerDynamic('44', ['ad', 'ae', '9a'], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var store = $__require('ad')('wks'),
        uid = $__require('ae'),
        Symbol = $__require('9a').Symbol;
    module.exports = function (name) {
        return store[name] || (store[name] = Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));
    };
});
$__System.registerDynamic('af', ['44'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var ITERATOR = $__require('44')('iterator'),
      SAFE_CLOSING = false;
  try {
    var riter = [7][ITERATOR]();
    riter['return'] = function () {
      SAFE_CLOSING = true;
    };
    Array.from(riter, function () {
      throw 2;
    });
  } catch (e) {}
  module.exports = function (exec, skipClosing) {
    if (!skipClosing && !SAFE_CLOSING) return false;
    var safe = false;
    try {
      var arr = [7],
          iter = arr[ITERATOR]();
      iter.next = function () {
        return { done: safe = true };
      };
      arr[ITERATOR] = function () {
        return iter;
      };
      exec(arr);
    } catch (e) {}
    return safe;
  };
});
$__System.registerDynamic('b0', [], true, function ($__require, exports, module) {
    var global = this || self,
        GLOBAL = global;
    var process = module.exports = {};


    var cachedSetTimeout;
    var cachedClearTimeout;

    function defaultSetTimout() {
        throw new Error('setTimeout has not been defined');
    }
    function defaultClearTimeout() {
        throw new Error('clearTimeout has not been defined');
    }
    (function () {
        try {
            if (typeof setTimeout === 'function') {
                cachedSetTimeout = setTimeout;
            } else {
                cachedSetTimeout = defaultSetTimout;
            }
        } catch (e) {
            cachedSetTimeout = defaultSetTimout;
        }
        try {
            if (typeof clearTimeout === 'function') {
                cachedClearTimeout = clearTimeout;
            } else {
                cachedClearTimeout = defaultClearTimeout;
            }
        } catch (e) {
            cachedClearTimeout = defaultClearTimeout;
        }
    })();
    function runTimeout(fun) {
        if (cachedSetTimeout === setTimeout) {
            return setTimeout(fun, 0);
        }
        if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
            cachedSetTimeout = setTimeout;
            return setTimeout(fun, 0);
        }
        try {
            return cachedSetTimeout(fun, 0);
        } catch (e) {
            try {
                return cachedSetTimeout.call(null, fun, 0);
            } catch (e) {
                return cachedSetTimeout.call(this, fun, 0);
            }
        }
    }
    function runClearTimeout(marker) {
        if (cachedClearTimeout === clearTimeout) {
            return clearTimeout(marker);
        }
        if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
            cachedClearTimeout = clearTimeout;
            return clearTimeout(marker);
        }
        try {
            return cachedClearTimeout(marker);
        } catch (e) {
            try {
                return cachedClearTimeout.call(null, marker);
            } catch (e) {
                return cachedClearTimeout.call(this, marker);
            }
        }
    }
    var queue = [];
    var draining = false;
    var currentQueue;
    var queueIndex = -1;

    function cleanUpNextTick() {
        if (!draining || !currentQueue) {
            return;
        }
        draining = false;
        if (currentQueue.length) {
            queue = currentQueue.concat(queue);
        } else {
            queueIndex = -1;
        }
        if (queue.length) {
            drainQueue();
        }
    }

    function drainQueue() {
        if (draining) {
            return;
        }
        var timeout = runTimeout(cleanUpNextTick);
        draining = true;

        var len = queue.length;
        while (len) {
            currentQueue = queue;
            queue = [];
            while (++queueIndex < len) {
                if (currentQueue) {
                    currentQueue[queueIndex].run();
                }
            }
            queueIndex = -1;
            len = queue.length;
        }
        currentQueue = null;
        draining = false;
        runClearTimeout(timeout);
    }

    process.nextTick = function (fun) {
        var args = new Array(arguments.length - 1);
        if (arguments.length > 1) {
            for (var i = 1; i < arguments.length; i++) {
                args[i - 1] = arguments[i];
            }
        }
        queue.push(new Item(fun, args));
        if (queue.length === 1 && !draining) {
            runTimeout(drainQueue);
        }
    };

    function Item(fun, array) {
        this.fun = fun;
        this.array = array;
    }
    Item.prototype.run = function () {
        this.fun.apply(null, this.array);
    };
    process.title = 'browser';
    process.browser = true;
    process.env = {};
    process.argv = [];
    process.version = ''; 
    process.versions = {};

    function noop() {}

    process.on = noop;
    process.addListener = noop;
    process.once = noop;
    process.off = noop;
    process.removeListener = noop;
    process.removeAllListeners = noop;
    process.emit = noop;

    process.binding = function (name) {
        throw new Error('process.binding is not supported');
    };

    process.cwd = function () {
        return '/';
    };
    process.chdir = function (dir) {
        throw new Error('process.chdir is not supported');
    };
    process.umask = function () {
        return 0;
    };
});
$__System.registerDynamic("b1", ["b0"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require("b0");
});
$__System.registerDynamic('b2', ['b1'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__System._nodeRequire ? process : $__require('b1');
});
$__System.registerDynamic("3", ["b2"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = $__require("b2");
});
$__System.registerDynamic('b3', ['62', '96', '9a', '9b', '43', '66', 'a1', '82', 'a4', '9c', 'a0', '7e', 'a2', '44', 'a3', 'a9', 'aa', 'ab', '94', 'ac', '46', 'af', '3'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  (function (process) {
    'use strict';

    var $ = $__require('62'),
        LIBRARY = $__require('96'),
        global = $__require('9a'),
        ctx = $__require('9b'),
        classof = $__require('43'),
        $export = $__require('66'),
        isObject = $__require('a1'),
        anObject = $__require('82'),
        aFunction = $__require('a4'),
        strictNew = $__require('9c'),
        forOf = $__require('a0'),
        setProto = $__require('7e').set,
        same = $__require('a2'),
        SPECIES = $__require('44')('species'),
        speciesConstructor = $__require('a3'),
        asap = $__require('a9'),
        PROMISE = 'Promise',
        process = global.process,
        isNode = classof(process) == 'process',
        P = global[PROMISE],
        empty = function () {},
        Wrapper;
    var testResolve = function (sub) {
      var test = new P(empty),
          promise;
      if (sub) test.constructor = function (exec) {
        exec(empty, empty);
      };
      (promise = P.resolve(test))['catch'](empty);
      return promise === test;
    };
    var USE_NATIVE = function () {
      var works = false;
      function P2(x) {
        var self = new P(x);
        setProto(self, P2.prototype);
        return self;
      }
      try {
        works = P && P.resolve && testResolve();
        setProto(P2, P);
        P2.prototype = $.create(P.prototype, { constructor: { value: P2 } });
        if (!(P2.resolve(5).then(function () {}) instanceof P2)) {
          works = false;
        }
        if (works && $__require('aa')) {
          var thenableThenGotten = false;
          P.resolve($.setDesc({}, 'then', { get: function () {
              thenableThenGotten = true;
            } }));
          works = thenableThenGotten;
        }
      } catch (e) {
        works = false;
      }
      return works;
    }();
    var sameConstructor = function (a, b) {
      if (LIBRARY && a === P && b === Wrapper) return true;
      return same(a, b);
    };
    var getConstructor = function (C) {
      var S = anObject(C)[SPECIES];
      return S != undefined ? S : C;
    };
    var isThenable = function (it) {
      var then;
      return isObject(it) && typeof (then = it.then) == 'function' ? then : false;
    };
    var PromiseCapability = function (C) {
      var resolve, reject;
      this.promise = new C(function ($$resolve, $$reject) {
        if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');
        resolve = $$resolve;
        reject = $$reject;
      });
      this.resolve = aFunction(resolve), this.reject = aFunction(reject);
    };
    var perform = function (exec) {
      try {
        exec();
      } catch (e) {
        return { error: e };
      }
    };
    var notify = function (record, isReject) {
      if (record.n) return;
      record.n = true;
      var chain = record.c;
      asap(function () {
        var value = record.v,
            ok = record.s == 1,
            i = 0;
        var run = function (reaction) {
          var handler = ok ? reaction.ok : reaction.fail,
              resolve = reaction.resolve,
              reject = reaction.reject,
              result,
              then;
          try {
            if (handler) {
              if (!ok) record.h = true;
              result = handler === true ? value : handler(value);
              if (result === reaction.promise) {
                reject(TypeError('Promise-chain cycle'));
              } else if (then = isThenable(result)) {
                then.call(result, resolve, reject);
              } else resolve(result);
            } else reject(value);
          } catch (e) {
            reject(e);
          }
        };
        while (chain.length > i) run(chain[i++]);
        chain.length = 0;
        record.n = false;
        if (isReject) setTimeout(function () {
          var promise = record.p,
              handler,
              console;
          if (isUnhandled(promise)) {
            if (isNode) {
              process.emit('unhandledRejection', value, promise);
            } else if (handler = global.onunhandledrejection) {
              handler({
                promise: promise,
                reason: value
              });
            } else if ((console = global.console) && console.error) {
              console.error('Unhandled promise rejection', value);
            }
          }
          record.a = undefined;
        }, 1);
      });
    };
    var isUnhandled = function (promise) {
      var record = promise._d,
          chain = record.a || record.c,
          i = 0,
          reaction;
      if (record.h) return false;
      while (chain.length > i) {
        reaction = chain[i++];
        if (reaction.fail || !isUnhandled(reaction.promise)) return false;
      }
      return true;
    };
    var $reject = function (value) {
      var record = this;
      if (record.d) return;
      record.d = true;
      record = record.r || record;
      record.v = value;
      record.s = 2;
      record.a = record.c.slice();
      notify(record, true);
    };
    var $resolve = function (value) {
      var record = this,
          then;
      if (record.d) return;
      record.d = true;
      record = record.r || record;
      try {
        if (record.p === value) throw TypeError("Promise can't be resolved itself");
        if (then = isThenable(value)) {
          asap(function () {
            var wrapper = {
              r: record,
              d: false
            };
            try {
              then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));
            } catch (e) {
              $reject.call(wrapper, e);
            }
          });
        } else {
          record.v = value;
          record.s = 1;
          notify(record, false);
        }
      } catch (e) {
        $reject.call({
          r: record,
          d: false
        }, e);
      }
    };
    if (!USE_NATIVE) {
      P = function Promise(executor) {
        aFunction(executor);
        var record = this._d = {
          p: strictNew(this, P, PROMISE),
          c: [],
          a: undefined,
          s: 0,
          d: false,
          v: undefined,
          h: false,
          n: false
        };
        try {
          executor(ctx($resolve, record, 1), ctx($reject, record, 1));
        } catch (err) {
          $reject.call(record, err);
        }
      };
      $__require('ab')(P.prototype, {
        then: function then(onFulfilled, onRejected) {
          var reaction = new PromiseCapability(speciesConstructor(this, P)),
              promise = reaction.promise,
              record = this._d;
          reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;
          reaction.fail = typeof onRejected == 'function' && onRejected;
          record.c.push(reaction);
          if (record.a) record.a.push(reaction);
          if (record.s) notify(record, false);
          return promise;
        },
        'catch': function (onRejected) {
          return this.then(undefined, onRejected);
        }
      });
    }
    $export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: P });
    $__require('94')(P, PROMISE);
    $__require('ac')(PROMISE);
    Wrapper = $__require('46')[PROMISE];
    $export($export.S + $export.F * !USE_NATIVE, PROMISE, { reject: function reject(r) {
        var capability = new PromiseCapability(this),
            $$reject = capability.reject;
        $$reject(r);
        return capability.promise;
      } });
    $export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, { resolve: function resolve(x) {
        if (x instanceof P && sameConstructor(x.constructor, this)) return x;
        var capability = new PromiseCapability(this),
            $$resolve = capability.resolve;
        $$resolve(x);
        return capability.promise;
      } });
    $export($export.S + $export.F * !(USE_NATIVE && $__require('af')(function (iter) {
      P.all(iter)['catch'](function () {});
    })), PROMISE, {
      all: function all(iterable) {
        var C = getConstructor(this),
            capability = new PromiseCapability(C),
            resolve = capability.resolve,
            reject = capability.reject,
            values = [];
        var abrupt = perform(function () {
          forOf(iterable, false, values.push, values);
          var remaining = values.length,
              results = Array(remaining);
          if (remaining) $.each.call(values, function (promise, index) {
            var alreadyCalled = false;
            C.resolve(promise).then(function (value) {
              if (alreadyCalled) return;
              alreadyCalled = true;
              results[index] = value;
              --remaining || resolve(results);
            }, reject);
          });else resolve(results);
        });
        if (abrupt) reject(abrupt.error);
        return capability.promise;
      },
      race: function race(iterable) {
        var C = getConstructor(this),
            capability = new PromiseCapability(C),
            reject = capability.reject;
        var abrupt = perform(function () {
          forOf(iterable, false, function (promise) {
            C.resolve(promise).then(capability.resolve, reject);
          });
        });
        if (abrupt) reject(abrupt.error);
        return capability.promise;
      }
    });
  })($__require('3'));
});
$__System.registerDynamic('46', [], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  var core = module.exports = { version: '1.2.6' };
  if (typeof __e == 'number') __e = core; 
});
$__System.registerDynamic('b4', ['8b', '49', '48', 'b3', '46'], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  $__require('8b');
  $__require('49');
  $__require('48');
  $__require('b3');
  module.exports = $__require('46').Promise;
});
$__System.registerDynamic("12", ["b4"], true, function ($__require, exports, module) {
  var global = this || self,
      GLOBAL = global;
  module.exports = { "default": $__require("b4"), __esModule: true };
});
$__System.register('b5', [], function (_export) {
	'use strict';



	_export('rgb2hex', rgb2hex);

	_export('getQueryStringParams', getQueryStringParams);

	function rgb2hex(rgb) {
		rgb = rgb.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
		function hex(x) {
			return ('0' + parseInt(x).toString(16)).slice(-2);
		}
		if (rgb === null || rgb.length < 4) {
			throw 'invalid value passed to rgb2hex';
		}
		return '#' + hex(rgb[1]) + hex(rgb[2]) + hex(rgb[3]);
	}

	function getQueryStringParams(queryString) {
		queryString = queryString || document.location.search;

		var paramsArr = queryString.replace(/(^\?)/, '').split('&');
		var ret = {};

		paramsArr.forEach(function (query) {
			query = query.split('=');
			ret[query[0]] = query[1];
		});

		return ret;
	}

	return {
		setters: [],
		execute: function () {}
	};
});
$__System.register('c', ['12', 'b5'], function (_export) {
	var _Promise, getQueryStringParams;

	function matches(elem, selector) {
		var matches = (elem.document || elem.ownerDocument).querySelectorAll(selector);
		var i = matches.length;

		while (--i >= 0 && matches.item(i) !== elem);
		return i > -1;
	}


	function closestElement(_x3, _x4) {
		var _again = true;

		_function: while (_again) {
			var elem = _x3,
			    selector = _x4;
			_again = false;

			if (!elem.parentElement) {
				return null;
			}

			if (matches(elem, selector)) {
				return elem;
			}

			_x3 = elem.parentElement;
			_x4 = selector;
			_again = true;
			continue _function;
		}
	}


	function isElementVisible(elem, amount) {
		var boundingRect = elem.getBoundingClientRect(),
		    bottom = boundingRect.bottom;

		if (elem.offsetParent === null || bottom === 0) {
			return false;
		}

		if (amount && amount >= 0 && amount <= 1) {
			bottom = bottom - boundingRect.height * (1 - amount);
		}

		return boundingRect.top >= 0 && bottom <= window.innerHeight;
	}


	function ajax(options) {
		var xhr = new XMLHttpRequest(),
		    queryString = '',
		    resolveFunc = undefined,
		    rejectFunc = undefined;

		var promise = new _Promise(function (resolve, reject) {
			resolveFunc = resolve;
			rejectFunc = reject;
		});

		if (!options.method) {
			options.method = 'GET';
		}

		if (options.data) {
			queryString = toQueryString(options.data);

			if (options.method.toLowerCase() === 'get') {
				if (options.url.substr(-1) !== '/') {
					options.url += '/';
				}

				options.url += '?' + queryString;
			}
		}

		xhr.onload = function () {
			if (xhr.status === 200) {
				var response = options.json ? JSON.parse(xhr.responseText) : xhr.responseText;
				resolveFunc();
				options.success(response);
			} else {
				rejectFunc();
				if (typeof options.error === 'function') {
					options.error(xhr.responseText);
				}
			}
		};

		xhr.open(options.method, options.url);
		xhr.withCredentials = !!options.withCredentials;

		if (options.method.toLowerCase() === 'post') {
			xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
			xhr.send(queryString);
		} else {
			xhr.send();
		}

		return promise;
	}

	function toQueryString(obj, useBrackets) {
		var parts = [];

		var _loop = function (i) {
			if (obj.hasOwnProperty(i)) {
				if (Array.isArray(obj[i])) {
					obj[i].forEach(function (value) {
						parts.push(encodeURIComponent(i) + (useBrackets ? '[]' : '') + '=' + encodeURIComponent(value));
					});
				} else {
					parts.push(encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]));
				}
			}
		};

		for (var i in obj) {
			_loop(i);
		}

		return parts.join('&');
	}


	function loadScript(filePath, typeCheck, callback) {
		var head = document.getElementsByTagName('head')[0],
		    script = undefined;

		if (typeCheck !== 'undefined') {
			callback();
			return;
		}

		script = document.createElement('script');
		script.onload = callback;
		script.src = filePath;
		head.insertBefore(script, head.lastChild);
	}


	function debounce(func, wait) {
		var immediate = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];

		var timeout;
		return function () {
			var context = this,
			    args = arguments,
			    later = function later() {
				timeout = null;
				if (!immediate) {
					func.apply(context, args);
				}
			};

			var callNow = immediate && !timeout;
			clearTimeout(timeout);
			timeout = setTimeout(later, wait);
			if (callNow) {
				func.apply(context, args);
			}
		};
	}


	function throttle(func, wait) {
		var timeout = undefined,
		    context = undefined,
		    args = undefined,
		    result = undefined;
		var previous = 0;

		var throttled = function throttled() {
			var now = Date.now();
			var remaining = wait - (now - previous);
			context = this;
			args = arguments;

			if (timeout) {
				clearTimeout(timeout);
				timeout = null;
			}

			if (remaining <= 0 || remaining > wait) {
				previous = now;
				result = func.apply(context, args);
				if (!timeout) {
					context = args = null;
				}
			} else {
				timeout = window.setTimeout(function () {
					result = func.apply(context, args);
				}, wait);
			}
			return result;
		};

		return throttled;
	}


	function validateEmail(email) {
		var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		return re.test(email);
	}


	function getPrefixedClassName(element, prefix) {
		for (var i = 0; i < element.classList.length; ++i) {
			if (element.classList.item(i).indexOf(prefix) === 0) {
				return element.classList.item(i);
			}
		}
	}


	function logger() {
		var params = getQueryStringParams();
		if (params.logger && window.console && console.log) {
			console.log.apply(console, arguments);
		}
	}


	function isWikiaCom() {
		return window.location && window.location.hostname.indexOf('www.wikia.com') !== -1;
	}


	function getRootPath() {
		return isWikiaCom() ? '/fandom/' : '/';
	}


	function getTranslation(key) {
		return window.upstream.translations && window.upstream.translations[key] ? window.upstream.translations[key] : key;
	}


	function getTimeCachebuster() {
		var name = arguments.length <= 0 || arguments[0] === undefined ? 'cb' : arguments[0];

		return name + '=' + Date.now();
	}


	function removeCurrentQueryParam(paramName) {
		if (!window.history || !window.history.replaceState) {
			console.log('Browser doesn"t support History API');
			return;
		}

		var url = removeQueryParam(window.location.href, paramName);
		window.history.replaceState(null, null, url);
	}


	function removeQueryParam(url, paramName) {
		if (url.includes(paramName + '=')) {
			var regex = new RegExp('&' + paramName + '(\\=[^&]*)?(?=&|$)|\\?' + paramName + '(\\=[^&]*)?(&|$)');

			var replace = url.includes('?' + paramName + '=') && url.includes('&') ? '?' : '';
			url = url.replace(regex, replace);
		}

		return url;
	}


	function getLanguage() {
		return document.documentElement.lang;
	}


	function deduplicateArray(arr) {
		return arr.filter(function (elem, index, self) {
			return index == self.indexOf(elem);
		});
	}

	return {
		setters: [function (_) {
			_Promise = _['default'];
		}, function (_b5) {
			getQueryStringParams = _b5.getQueryStringParams;
		}],
		execute: function () {
			'use strict';


			_export('closestElement', closestElement);

			_export('isElementVisible', isElementVisible);

			_export('ajax', ajax);

			_export('loadScript', loadScript);

			_export('debounce', debounce);

			_export('throttle', throttle);

			_export('validateEmail', validateEmail);

			_export('getPrefixedClassName', getPrefixedClassName);

			_export('logger', logger);

			_export('isWikiaCom', isWikiaCom);

			_export('getRootPath', getRootPath);

			_export('getTranslation', getTranslation);

			_export('getTimeCachebuster', getTimeCachebuster);

			_export('removeCurrentQueryParam', removeCurrentQueryParam);

			_export('removeQueryParam', removeQueryParam);

			_export('getLanguage', getLanguage);

			_export('deduplicateArray', deduplicateArray);
		}
	};
});
$__System.register('b6', ['8', '9', 'c'], function (_export) {
	var _createClass, _classCallCheck, throttle, TrackScroll;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_c) {
			throttle = _c.throttle;
		}],
		execute: function () {
			'use strict';

			TrackScroll = (function () {

				function TrackScroll(prefix, tracker) {
					_classCallCheck(this, TrackScroll);

					this.body = document.body;
					this.html = document.documentElement;
					this.trackingPrefix = prefix;
					this.footer = document.querySelector('.wds-global-footer');
					this.newsletterSignup = document.querySelector('.fandom-newsletter-signup');
					this.tracker = tracker;

					this.scroll = {
						'25': false,
						'50': false,
						'75': false,
						'100': false
					};

					this.footerHeight = this.footer ? this.footer.offsetHeight : 0;
					this.newsletterSignupHeight = this.newsletterSignup ? this.newsletterSignup.offsetHeight : 0;
				}

				_createClass(TrackScroll, [{
					key: 'init',
					value: function init() {
						var _this = this;

						window.addEventListener('scroll', throttle(function () {
							return _this.checkScrollProgress();
						}, 250));
					}
				}, {
					key: 'checkScrollProgress',
					value: function checkScrollProgress() {
						this.percentScroll = (this.html.scrollTop || this.body.scrollTop) / ((this.html.scrollHeight || this.body.scrollHeight) - this.html.clientHeight - this.footerHeight - this.newsletterSignupHeight) * 100;

						if (this.percentScroll > 25 && this.percentScroll < 50) {
							if (!this.scroll['25']) {
								this.tracker.track({
									label: this.trackingPrefix + '.25%',
									action: 'scroll',
									nonInteraction: false
								});
								this.scroll['25'] = true;
							}
						} else if (this.percentScroll > 50 && this.percentScroll < 75) {
							if (!this.scroll['50']) {
								this.tracker.track({
									label: this.trackingPrefix + '.50%',
									action: 'scroll',
									nonInteraction: false
								});
								this.scroll['50'] = true;
							}
						} else if (this.percentScroll > 75 && this.percentScroll < 100) {
							if (!this.scroll['75']) {
								this.tracker.track({
									label: this.trackingPrefix + '.75%',
									action: 'scroll',
									nonInteraction: false
								});
								this.scroll['75'] = true;
							}

						} else if (this.percentScroll >= 100) {
								if (!this.scroll['100']) {
									this.tracker.track({
										label: this.trackingPrefix + '.100%',
										action: 'scroll',
										nonInteraction: false
									});
									this.scroll['100'] = true;
								}
							}
					}
				}]);

				return TrackScroll;
			})();

			_export('default', TrackScroll);
		}
	};
});
$__System.register('b7', [], function (_export) {
	'use strict';

	return {
		setters: [],
		execute: function () {
			_export('default', {
				'completely-unreliable-guide-newt-scamander': {
					trackingPrefix: 'rfa.harrypotter',
					videos: [{
						id: 'magizoologist-video',
						trackingSuffix: 'magizoologist',
						played: false
					}, {
						id: 'fantastic-beasts-trailer',
						trackingSuffix: 'footer',
						played: false
					}]
				},
				'exploring-war-torn-world-rogue-one': {
					trackingPrefix: 'rfa.rogueon',
					videos: [{
						id: 'video-star-wars-new-hope',
						trackingSuffix: 'opening',
						played: false
					}, {
						id: 'video-death-star',
						trackingSuffix: 'deathstar',
						played: false
					}]
				},
				'nintendos-console-history-led-switch': {
					trackingPrefix: 'rfa.nintendo-switch',
					videos: []
				},
				'40-years-star-wars-lore': {
					trackingPrefix: 'rfa.star-wars-40-years',
					videos: []
				},
				'mind-blowing-moments-transformers-history': {
					trackingPrefix: 'rfa.transformers'
				},
				'scary-things-make-feel-afraid-love': {
					trackingPrefix: 'rfa.amazon-lore',
					videos: [{
						id: 'video-scary-things',
						trackingSuffix: 'scary-things',
						played: false
					}, {
						id: 'video-lore-connection',
						trackingSuffix: 'lore-connection',
						played: false
					}]
				},
				'legacy-luke-skywalker': {
					trackingPrefix: 'rfa.luke-skywalker',
					videos: []
				},
				'world-black-panther-tribalism-meets-technology': {
					trackingPrefix: 'rfa.black-panther',
					videos: []
				}
			});
		}
	};
});
$__System.register('b8', ['8', '9', 'b6', 'b7'], function (_export) {
	var _createClass, _classCallCheck, TrackScroll, rfaData, RFAController;

	return {
		setters: [function (_) {
			_createClass = _['default'];
		}, function (_2) {
			_classCallCheck = _2['default'];
		}, function (_b6) {
			TrackScroll = _b6['default'];
		}, function (_b7) {
			rfaData = _b7['default'];
		}],
		execute: function () {
			'use strict';

			RFAController = (function () {
				function RFAController(GATracker) {
					_classCallCheck(this, RFAController);

					this.tracker = GATracker;
					this.data = rfaData[window.upstream.post.slug];
				}

				_createClass(RFAController, [{
					key: 'init',
					value: function init() {
						var _this = this;

						this.initScrollTracking();
						if (this.data && this.data.videos) {
							this.data.videos.forEach(function (video) {
								return _this.videoTracking(video);
							});
						}
					}
				}, {
					key: 'videoTracking',
					value: function videoTracking(video) {
						var _this2 = this;

						var element = document.getElementById(video.id);

						if (!element) {
							console.log(video.id + ' video not on page.');
							return;
						}

						var params = {
							label: this.data.trackingPrefix + '.video.start.' + video.trackingSuffix,
							nonInteraction: true,
							action: 'play'
						};

						element.addEventListener('playing', function () {
							if (video.played === false) {
								video.played = true;
								_this2.tracker.track(params);
							}
						});
					}
				}, {
					key: 'initScrollTracking',
					value: function initScrollTracking() {
						var trackScroll = new TrackScroll(this.data.trackingPrefix, this.tracker);
						trackScroll.init();
					}
				}], [{
					key: 'isRichFeatureArticle',
					value: function isRichFeatureArticle() {
						return window.upstream.pageType === 'RFA';
					}
				}]);

				return RFAController;
			})();

			_export('default', RFAController);
		}
	};
});
$__System.register('1', ['4', '5', '11', '13', '41', '52', '53', '54', '71', '73', '76', '85', '86', '87', '88', 'e', 'c', '5f', 'b8'], function (_export) {
	var trackingOptIn, setArticleRailSpacing, setVideoRailSpacing, TopNav, Prefetcher, _Object$assign, Ads, UserProfile, moveRightRailIfMobile, LinkedinButton, ClickableUnit, ClickablePseudoUnit, ImageLoader, riot, utils, tracking, RFAController;

	function main() {
		utils.removeCurrentQueryParam('cb');
		utils.removeCurrentQueryParam('useregion');

		var pageLevelData = _Object$assign({}, window.upstream.post, {
			adsPageType: window.upstream.pageType
		});

		var isRichFeatureArticle = RFAController.isRichFeatureArticle();

		if (!isRichFeatureArticle) {
			Ads.init(pageLevelData);
		}

		riot.route.stop();

		TopNav.init();

		setArticleRailSpacing();
		setVideoRailSpacing();
		moveRightRailIfMobile();
		UserProfile.showUserData(document.querySelectorAll('[data-user]'));

		new ImageLoader().init();

		var clickableElements = new ClickableUnit();
		clickableElements.addAllUnitEvents();

		ClickablePseudoUnit.addEvents('.post', document.querySelectorAll('.post-list .post-thumbnail, .post-list .entry-title'));

		riot.mount('.reddit-btn', 'reddit-button');
		riot.mount('.tweet-btn, .pull-quote .tweet-share-icon, .tweet-link', 'tweet-button');
		riot.mount('.fb-share-btn, .pull-quote .fb-share-icon, .fb-share-link', 'fb-share-button');

		LinkedinButton.initLinks();

		prefetching();

		trackingOptIn({
			onAcceptTracking: function onAcceptTracking() {
				tracking.init(false);
			},
			onRejectTracking: function onRejectTracking() {
				tracking.init(true);
			},
			zIndex: 5000104
		});
	}

	function prefetching() {
		var linkSelector = '.wds-global-navigation__link';
		Prefetcher.prefetchLinks(linkSelector);

		linkSelector = '.hero a';
		Prefetcher.prefetchLinks(linkSelector);

		linkSelector = 'a[href*="articles"], a[href*="videos"]';
		Prefetcher.prefetchOnHover(linkSelector);
	}

	return {
		setters: [function (_2) {
			trackingOptIn = _2['default'];
		}, function (_3) {
			setArticleRailSpacing = _3.setArticleRailSpacing;
			setVideoRailSpacing = _3.setVideoRailSpacing;
		}, function (_4) {
			TopNav = _4['default'];
		}, function (_5) {
			Prefetcher = _5['default'];
		}, function (_) {
			_Object$assign = _['default'];
		}, function (_6) {
			Ads = _6['default'];
		}, function (_7) {
			UserProfile = _7['default'];
		}, function (_8) {
			moveRightRailIfMobile = _8.moveRightRailIfMobile;
		}, function (_9) {}, function (_10) {}, function (_11) {}, function (_12) {
			LinkedinButton = _12['default'];
		}, function (_13) {
			ClickableUnit = _13['default'];
		}, function (_14) {
			ClickablePseudoUnit = _14['default'];
		}, function (_15) {
			ImageLoader = _15['default'];
		}, function (_e) {
			riot = _e['default'];
		}, function (_c) {
			utils = _c;
		}, function (_f) {
			tracking = _f['default'];
		}, function (_b8) {
			RFAController = _b8['default'];
		}],
		execute: function () {



			'use strict';



			window.upstream.initFooterScripts = main;
		}
	};
});
})
(function(factory) {
  factory();
});
//# sourceMappingURL=main.js.map
